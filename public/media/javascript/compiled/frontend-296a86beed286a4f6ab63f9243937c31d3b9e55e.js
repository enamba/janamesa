/*! Compiled on 2012-11-06 18:19:03 */
/* WE ARE IN DEVELOPMENT MODE */
var production = false; 
var piwikId = 1;
var _piwikUrl = 'track.yourdelivery.de/piwik/';
var CURRENCY = 'â‚¬';
var LOCALE = 'de_DE';
var FbAppId = '399258316805345';
/*! include jquery.min.js */
/*! jQuery v1.7 jquery.com | jquery.org/license */
(function(a,b){function cA(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cx(a){if(!cm[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cn||(cn=c.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),b.appendChild(cn);if(!co||!cn.createElement)co=(cn.contentWindow||cn.contentDocument).document,co.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),co.close();d=co.createElement(a),co.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cn)}cm[a]=e}return cm[a]}function cw(a,b){var c={};f.each(cs.concat.apply([],cs.slice(0,b)),function(){c[this]=a});return c}function cv(){ct=b}function cu(){setTimeout(cv,0);return ct=f.now()}function cl(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ck(){try{return new a.XMLHttpRequest}catch(b){}}function ce(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cd(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function cc(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bG.test(a)?d(a,e):cc(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)cc(a+"["+e+"]",b[e],c,d);else d(a,b)}function cb(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function ca(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bV,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=ca(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=ca(a,c,d,e,"*",g));return l}function b_(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bR),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bE(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bz:bA;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bB(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function br(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bi,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bq(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bp(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bp)}function bp(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bo(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bn(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bm(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bl(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function X(a){var b=Y.split(" "),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function N(){return!0}function M(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.add(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!B){B=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return a!=null&&m.test(a)&&!isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())}),typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return e});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments)},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,unknownElems:!!a.getElementsByTagName("nav").length,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",enctype:!!c.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.lastChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-999px",top:"-999px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;f(function(){var a,b,d,e,g,h,i=1,j="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",n="style='"+j+"border:5px solid #000;padding:0;'",p="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";m=c.getElementsByTagName("body")[0];!m||(a=c.createElement("div"),a.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+i+"px",m.insertBefore(a,m.firstChild),o=c.createElement("div"),o.style.cssText=j+l,o.innerHTML=p,a.appendChild(o),b=o.firstChild,d=b.firstChild,g=b.nextSibling.firstChild.firstChild,h={doesNotAddBorder:d.offsetTop!==5,doesAddBorderForTableAndCells:g.offsetTop===5},d.style.position="fixed",d.style.top="20px",h.fixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",b.style.overflow="hidden",b.style.position="relative",h.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,h.doesNotIncludeMarginInBodyOffset=m.offsetTop!==i,m.removeChild(a),o=a=null,f.extend(k,h))}),o.innerHTML="",n.removeChild(o),o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[f.expando]:a[f.expando]&&f.expando,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[f.expando]=n=++f.uuid:n=f.expando),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[f.expando]:f.expando;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)?b=b:b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" "));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}return b}e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g},removeAttr:function(a,b){var c,d,e,g,h=0;if(a.nodeType===1){d=(b||"").split(p),g=d.length;for(;h<g;h++)e=d[h].toLowerCase(),c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1)}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return b;h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/\.(.*)$/,A=/^(?:textarea|input|select)$/i,B=/\./g,C=/ /g,D=/[^\w\s.|`]/g,E=/^([^\.]*)?(?:\.(.+))?$/,F=/\bhover(\.\S+)?/,G=/^key/,H=/^(?:mouse|contextmenu)|click/,I=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,J=function(a){var b=I.exec(a);b&&
(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},K=function(a,b){return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||a.id===b[2])&&(!b[3]||b[3].test(a.className))},L=function(a){return f.event.special.hover?a:a.replace(F,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=L(c).split(" ");for(k=0;k<c.length;k++){l=E.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,namespace:n.join(".")},p),g&&(o.quick=J(g),!o.quick&&f.expr.match.POS.test(g)&&(o.isPositional=!0)),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d){var e=f.hasData(a)&&f._data(a),g,h,i,j,k,l,m,n,o,p,q;if(!!e&&!!(m=e.events)){b=L(b||"").split(" ");for(g=0;g<b.length;g++){h=E.exec(b[g])||[],i=h[1],j=h[2];if(!i){j=j?"."+j:"";for(l in m)f.event.remove(a,l+j,c,d);return}n=f.event.special[i]||{},i=(d?n.delegateType:n.bindType)||i,p=m[i]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(c||j||d||n.remove)for(l=0;l<p.length;l++){q=p[l];if(!c||c.guid===q.guid)if(!j||j.test(q.namespace))if(!d||d===q.selector||d==="**"&&q.selector)p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q)}else p.length=0;p.length===0&&k!==p.length&&((!n.teardown||n.teardown.call(a,j)===!1)&&f.removeEvent(a,i,e.handle),delete m[i])}f.isEmptyObject(m)&&(o=e.handle,o&&(o.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"",(g||!e)&&c.preventDefault();if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,n=null;for(m=e.parentNode;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length;l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d);if(c.isPropagationStopped())break}c.type=h,c.isDefaultPrevented()||(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=(f.event.special[c.type]||{}).handle,j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click"))for(m=c.target;m!=this;m=m.parentNode||this){o={},q=[];for(k=0;k<e;k++)r=d[k],s=r.selector,t=o[s],r.isPositional?t=(t||(o[s]=f(s))).index(m)>=0:t===b&&(t=o[s]=r.quick?K(m,r.quick):f(m).is(s)),t&&q.push(r);q.length&&j.push({elem:m,matches:q})}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){p=j[k],c.currentTarget=p.elem;for(l=0;l<p.matches.length&&!c.isImmediatePropagationStopped();l++){r=p.matches[l];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=(i||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?N:M):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=N;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=N;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=N,this.stopPropagation()},isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]=f.event.special[b]={delegateType:b,bindType:b,handle:function(a){var b=this,c=a.relatedTarget,d=a.handleObj,e=d.selector,g,h;if(!c||d.origType===a.type||c!==b&&!f.contains(b,c))g=a.type,a.type=d.origType,h=d.handler.apply(this,arguments),a.type=g;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(A.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;A.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return A.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=M;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=M);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),G.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),H.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw"Syntax error, unrecognized expression: "+a};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?T.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=T.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);O.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Y="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",Z=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ba=/<([\w:]+)/,bb=/<tbody/i,bc=/<|&#?\w+;/,bd=/<(?:script|style)/i,be=/<(?:script|object|embed|option|style)/i,bf=new RegExp("<(?:"+Y.replace(" ","|")+")","i"),bg=/checked\s*(?:[^=]|=\s*.checked.)/i,bh=/\/(java|ecma)script/i,bi=/^\s*<!(?:\[CDATA\[|\-\-)/,bj={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bk=X(c);bj.optgroup=bj.option,bj.tbody=bj.tfoot=bj.colgroup=bj.caption=bj.thead,bj.th=bj.td,f.support.htmlSerialize||(bj._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after"
,arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Z,""):null;if(typeof a=="string"&&!bd.test(a)&&(f.support.leadingWhitespace||!$.test(a))&&!bj[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(_,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bg.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bl(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,br)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!be.test(j)&&(f.support.checkClone||!bg.test(j))&&!f.support.unknownElems&&bf.test(j)&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bn(a,d),e=bo(a),g=bo(d);for(h=0;e[h];++h)g[h]&&bn(e[h],g[h])}if(b){bm(a,d);if(c){e=bo(a),g=bo(d);for(h=0;e[h];++h)bm(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!bc.test(k))k=b.createTextNode(k);else{k=k.replace(_,"<$1></$2>");var l=(ba.exec(k)||["",""])[1].toLowerCase(),m=bj[l]||bj._default,n=m[0],o=b.createElement("div");b===c?bk.appendChild(o):X(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=bb.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&$.test(k)&&o.insertBefore(b.createTextNode($.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bq(k[i]);else bq(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bh.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bs=/alpha\([^)]*\)/i,bt=/opacity=([^)]*)/,bu=/([A-Z]|^ms)/g,bv=/^-?\d+(?:px)?$/i,bw=/^-?\d/,bx=/^([\-+])=([\-+.\de]+)/,by={position:"absolute",visibility:"hidden",display:"block"},bz=["Left","Right"],bA=["Top","Bottom"],bB,bC,bD;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bB(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bx.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bB)return bB(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bE(a,b,d);f.swap(a,by,function(){e=bE(a,b,d)});return e}},set:function(a,b){if(!bv.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bt.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bs,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bs.test(g)?g.replace(bs,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bB(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bC=function(a,c){var d,e,g;c=c.replace(bu,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bD=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bv.test(f)&&bw.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bB=bC||bD,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bF=/%20/g,bG=/\[\]$/,bH=/\r?\n/g,bI=/#.*$/,bJ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bK=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bL=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bM=/^(?:GET|HEAD)$/,bN=/^\/\//,bO=/\?/,bP=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bQ=/^(?:select|textarea)/i,bR=/\s+/,bS=/([?&])_=[^&]*/,bT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bU=f.fn.load,bV={},bW={},bX,bY,bZ=["*/"]+["*"];try{bX=e.href}catch(b$){bX=c.createElement("a"),bX.href="",bX=bX.href}bY=bT.exec(bX.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bU)return bU.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bP,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bQ.test(this.nodeName)||bK.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bH,"\r\n")}}):{name:b.name,value:c.replace(bH,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?cb(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),cb(a,b);return a},ajaxSettings:{url:bX,isLocal:bL.test(bY[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bZ},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b_(bV),ajaxTransport:b_(bW),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cd(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=ce(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bJ.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bI,"").replace(bN,bY[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bR),d.crossDomain==null&&(r=bT.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bY[1]&&r[2]==bY[2]&&(r[3]||(r[1]==="http:"?80:443))==(bY[3]||(bY[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),ca(bV,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bM.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bO.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bS,"$1_="+x);d.url=y+(y===d.url?(bO.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bZ+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=ca(bW,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)cc(g,a[g],c,e);return d.join("&").replace(bF,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cf=f.now(),cg=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cf++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cg.test(b.url)||e&&cg.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cg,l),b.url===j&&(e&&(k=k.replace(cg,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ch=a.ActiveXObject?function(){for(var a in cj)cj[a](0,1)}:!1,ci=0,cj;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ck()||cl()}:ck,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ch&&delete cj[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++ci,ch&&(cj||(cj={},f(a).unload(ch)),cj[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cm={},cn,co,cp=/^(?:toggle|show|hide)$/,cq=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cr,cs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ct;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cw("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cx(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cw("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cw("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cx(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cp.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=cq.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cw("show",1),slideUp:cw("hide",1),slideToggle:cw("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=ct||cu(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cr&&(cr=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=ct||cu(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cr),cr=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now))}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cy=/^t(?:able|d|h)$/i,cz=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cA(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cy.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cz.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cz.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cA(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cA(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);
/*! include 001-core.min.js */
/*!
 * jQuery UI 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.7",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");
if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,
"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,
d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});
c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&
b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,
a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;
e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(c){c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(true===c.data(b.target,a.widgetName+".preventClickEvent")){c.removeData(b.target,a.widgetName+".preventClickEvent");b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=
a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var b=this,e=a.which==1,f=typeof this.options.cancel=="string"?c(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}this._mouseMoveDelegate=function(d){return b._mouseMove(d)};this._mouseUpDelegate=function(d){return b._mouseUp(d)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(c.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);
return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Position 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+parseInt(c.curCSS(this,"marginRight",true))||0,w=m+q+parseInt(c.curCSS(this,"marginBottom",true))||0,i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=m/2;
i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);
;
/*! include 002-interactions.min.js */
/*
 * jQuery UI Draggable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();
d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||
0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment==
"parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[(a.containment=="document"?0:d(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment=="document"?0:d(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?
0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==
Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,g=a.pageY;
if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/
b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;e=this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=
this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.7"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var g=d.data(this,"sortable");if(g&&!g.options.disabled){c.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=
c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,
true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=
0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=
a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","iframeFix",{start:function(){var a=d(this).data("draggable").options;d(a.iframeFix===true?"iframe":a.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")})},
stop:function(){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=
document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!="x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-
c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-
(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable",
"snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,g=b.offset.left,n=g+c.helperProportions.width,m=b.offset.top,o=m+c.helperProportions.height,h=
c.snapElements.length-1;h>=0;h--){var i=c.snapElements[h].left,k=i+c.snapElements[h].width,j=c.snapElements[h].top,l=j+c.snapElements[h].height;if(i-e<g&&g<k+e&&j-e<m&&m<l+e||i-e<g&&g<k+e&&j-e<o&&o<l+e||i-e<n&&n<k+e&&j-e<m&&m<l+e||i-e<n&&n<k+e&&j-e<o&&o<l+e){if(f.snapMode!="inner"){var p=Math.abs(j-o)<=e,q=Math.abs(l-m)<=e,r=Math.abs(i-n)<=e,s=Math.abs(k-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",
{top:l,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k}).left-c.margins.left}var t=p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(j-m)<=e;q=Math.abs(l-o)<=e;r=Math.abs(i-g)<=e;s=Math.abs(k-n)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l-c.helperProportions.height,
left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[h].snapping&&(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=p||q||r||s||t}else{c.snapElements[h].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,
b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;/*
 * jQuery UI Droppable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(c){return c.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){if(a=="accept")this.accept=d.isFunction(b)?b:function(c){return c.is(b)};d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",a,this.ui(b))}},_out:function(a){var b=d.ui.ddmanager.current;if(!(!b||(b.currentItem||b.element)[0]==this.element[0]))if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",a,this.ui(b))}},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=
d.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==c.options.scope&&g.accept.call(g.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(g,{offset:g.element.offset()}),g.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
a,this.ui(c));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.7"});d.ui.intersect=function(a,b,c){if(!b.offset)return false;var e=(a.positionAbs||a.position.absolute).left,g=e+a.helperProportions.width,f=(a.positionAbs||a.position.absolute).top,h=f+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;
switch(c){case "fit":return i<=e&&g<=k&&j<=f&&h<=l;case "intersect":return i<e+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<f+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(f>=j&&f<=l||h>=j&&h<=l||f<j&&h>l)&&(e>=
i&&e<=k||g>=i&&g<=k||e<i&&g>k);default:return false}};d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],e=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<c.length;f++)if(!(c[f].options.disabled||a&&!c[f].accept.call(c[f].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[f].element[0]){c[f].proportions.height=0;continue a}c[f].visible=c[f].element.css("display")!=
"none";if(c[f].visible){c[f].offset=c[f].element.offset();c[f].proportions={width:c[f].element[0].offsetWidth,height:c[f].element[0].offsetHeight};e=="mousedown"&&c[f]._activate.call(c[f],b)}}},drop:function(a,b){var c=false;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&d.ui.intersect(a,this,this.options.tolerance))c=c||this._drop.call(this,b);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||
a.element)){this.isout=1;this.isover=0;this._deactivate.call(this,b)}}});return c},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&this.isover==1?"isout":c&&this.isover==0?"isover":null){var e;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){e=
d.data(g[0],"droppable");e.greedyChild=c=="isover"?1:0}}if(e&&c=="isover"){e.isover=0;e.isout=1;e._out.call(e,b)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,b);if(e&&c=="isout"){e.isout=0;e.isover=1;e._over.call(e,b)}}}})}}})(jQuery);
;/*
 * jQuery UI Resizable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var c=this.handles.split(",");this.handles={};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle '+("ui-resizable-"+f)+'"></div>');/sw|se|ne|nw/.test(f)&&g.css({zIndex:++a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(h){h=h||this.element;for(var i in this.handles){if(this.handles[i].constructor==
String)this.handles[i]=e(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var j=e(this.handles[i],this.element),k=0;k=/sw|ne|nw|se|n|s/.test(i)?j.outerHeight():j.outerWidth();j=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");h.css(j,k);this._proportionallyResize()}e(this.handles[i])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!b.resizing){if(this.className)var h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=h&&h[1]?h[1]:"se"}});if(a.autoHide){this._handles.hide();e(this.element).addClass("ui-resizable-autohide").hover(function(){e(this).removeClass("ui-resizable-autohide");b._handles.show()},function(){if(!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=false;for(var c in this.handles)if(e(this.handles[c])[0]==b.target)a=true;return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=true;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};if(d.is(".ui-draggable")||/absolute/.test(d.css("position")))d.css({position:"absolute",top:c.top,left:c.left});e.browser.opera&&/relative/.test(d.css("position"))&&d.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();c=m(this.helper.css("left"));var f=m(this.helper.css("top"));if(a.containment){c+=e(a.containment).scrollLeft()||0;f+=e(a.containment).scrollTop()||0}this.offset=
this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof a.aspectRatio=="number"?a.aspectRatio:
this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",a=="auto"?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return false;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",
b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return false},_mouseStop:function(b){this.resizing=false;var a=this.options,c=this;if(this._helper){var d=this._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName);d=f&&e.ui.hasScroll(d[0],"left")?0:c.sizeDiff.height;
f={width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-d};d=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var g=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;a.animate||this.element.css(e.extend(f,{top:g,left:d}));c.helper.height(c.size.height);c.helper.width(c.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",
b);this._helper&&this.helper.remove();return false},_updateCache:function(b){this.offset=this.helper.offset();if(l(b.left))this.position.left=b.left;if(l(b.top))this.position.top=b.top;if(l(b.height))this.size.height=b.height;if(l(b.width))this.size.width=b.width},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;if(b.height)b.width=c.height*this.aspectRatio;else if(b.width)b.height=c.width/this.aspectRatio;if(d=="sw"){b.left=a.left+(c.width-b.width);b.top=null}if(d=="nw"){b.top=
a.top+(c.height-b.height);b.left=a.left+(c.width-b.width)}return b},_respectSize:function(b){var a=this.options,c=this.axis,d=l(b.width)&&a.maxWidth&&a.maxWidth<b.width,f=l(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=l(b.width)&&a.minWidth&&a.minWidth>b.width,h=l(b.height)&&a.minHeight&&a.minHeight>b.height;if(g)b.width=a.minWidth;if(h)b.height=a.minHeight;if(d)b.width=a.maxWidth;if(f)b.height=a.maxHeight;var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,
k=/sw|nw|w/.test(c);c=/nw|ne|n/.test(c);if(g&&k)b.left=i-a.minWidth;if(d&&k)b.left=i-a.maxWidth;if(h&&c)b.top=j-a.minHeight;if(f&&c)b.top=j-a.maxHeight;if((a=!b.width&&!b.height)&&!b.left&&b.top)b.top=null;else if(a&&!b.top&&b.left)b.left=null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),
c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(g,h){g=parseInt(g,10)||0;h=parseInt(f[h],10)||0;return g+h})}e.browser.msie&&(e(b).is(":hidden")||e(b).parents(":hidden").length)||c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=
this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var a=e.browser.msie&&e.browser.version<7,c=a?1:0;a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+
a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,
arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);b!="resize"&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,
{version:"1.8.7"});e.ui.plugin.add("resizable","alsoResize",{start:function(){var b=e(this).data("resizable").options,a=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10),position:d.css("position")})})};if(typeof b.alsoResize=="object"&&!b.alsoResize.parentNode)if(b.alsoResize.length){b.alsoResize=b.alsoResize[0];a(b.alsoResize)}else e.each(b.alsoResize,
function(c){a(c)});else a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable");b=c.options;var d=c.originalSize,f=c.originalPosition,g={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-f.top||0,left:c.position.left-f.left||0},h=function(i,j){e(i).each(function(){var k=e(this),q=e(this).data("resizable-alsoresize"),p={},r=j&&j.length?j:k.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(n,o){if((n=
(q[o]||0)+(g[o]||0))&&n>=0)p[o]=n||null});if(e.browser.opera&&/relative/.test(k.css("position"))){c._revertToRelativePosition=true;k.css({position:"absolute",top:"auto",left:"auto"})}k.css(p)})};typeof b.alsoResize=="object"&&!b.alsoResize.nodeType?e.each(b.alsoResize,function(i,j){h(i,j)}):h(b.alsoResize)},stop:function(){var b=e(this).data("resizable"),a=b.options,c=function(d){e(d).each(function(){var f=e(this);f.css({position:f.data("resizable-alsoresize").position})})};if(b._revertToRelativePosition){b._revertToRelativePosition=
false;typeof a.alsoResize=="object"&&!a.alsoResize.nodeType?e.each(a.alsoResize,function(d){c(d)}):c(a.alsoResize)}e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height;f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g};g=parseInt(a.element.css("left"),10)+(a.position.left-
a.originalPosition.left)||null;var h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var i={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:i.width,height:i.height});a._updateCache(i);a._propagate("resize",
b)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c){b.containerElement=e(a);if(/document/.test(c)||c==document){b.containerOffset={left:0,top:0};b.containerPosition={left:0,top:0};b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var d=e(a),f=[];e(["Top",
"Right","Left","Bottom"]).each(function(i,j){f[i]=m(d.css("padding"+j))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};c=b.containerOffset;var g=b.containerSize.height,h=b.containerSize.width;h=e.ui.hasScroll(a,"left")?a.scrollWidth:h;g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,
f=a.position;b=a._aspectRatio||b.shiftKey;var g={top:0,left:0},h=a.containerElement;if(h[0]!=document&&/static/.test(h.css("position")))g=d;if(f.left<(a._helper?d.left:0)){a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left;if(b)a.size.height=a.size.width/c.aspectRatio;a.position.left=c.helper?d.left:0}if(f.top<(a._helper?d.top:0)){a.size.height+=a._helper?a.position.top-d.top:a.position.top;if(b)a.size.width=a.size.height*c.aspectRatio;a.position.top=a._helper?d.top:0}a.offset.left=
a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top;c=Math.abs((a._helper?a.offset.left-g.left:a.offset.left-g.left)+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));if(f&&g)c-=a.parentData.left;if(c+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-c;if(b)a.size.height=a.size.width/a.aspectRatio}if(d+
a.size.height>=a.parentData.height){a.size.height=a.parentData.height-d;if(b)a.size.width=a.size.height*a.aspectRatio}},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width;g=g.outerHeight()-b.sizeDiff.height;b._helper&&!a.animate&&/relative/.test(f.css("position"))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&!a.animate&&/static/.test(f.css("position"))&&
e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof a.ghost=="string"?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",
height:b.size.height,width:b.size.width})},stop:function(){var b=e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid=typeof a.grid=="number"?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1);a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);if(/^(se|s|e)$/.test(g)){b.size.width=
d.width+h;b.size.height=d.height+a}else if(/^(ne)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}else{if(/^(sw)$/.test(g)){b.size.width=d.width+h;b.size.height=d.height+a}else{b.size.width=d.width+h;b.size.height=d.height+a;b.position.top=f.top-a}b.position.left=f.left-h}}});var m=function(b){return parseInt(b,10)||0},l=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
;/*
 * jQuery UI Selectable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable");this.dragged=false;var f;this.refresh=function(){f=e(c.options.filter,c.element[0]);f.each(function(){var d=e(this),b=d.offset();e.data(this,"selectable-item",{element:this,$element:d,left:b.left,top:b.top,right:b.left+d.outerWidth(),bottom:b.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),
selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(c){var f=this;this.opos=[c.pageX,
c.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",c);e(d.appendTo).append(this.helper);this.helper.css({left:c.clientX,top:c.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=true;if(!c.metaKey){b.$element.removeClass("ui-selected");b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;f._trigger("unselecting",
c,{unselecting:b.element})}});e(c.target).parents().andSelf().each(function(){var b=e.data(this,"selectable-item");if(b){var g=!c.metaKey||!b.$element.hasClass("ui-selected");b.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting");b.unselecting=!g;b.selecting=g;(b.selected=g)?f._trigger("selecting",c,{selecting:b.element}):f._trigger("unselecting",c,{unselecting:b.element});return false}})}},_mouseDrag:function(c){var f=this;this.dragged=true;if(!this.options.disabled){var d=
this.options,b=this.opos[0],g=this.opos[1],h=c.pageX,i=c.pageY;if(b>h){var j=h;h=b;b=j}if(g>i){j=i;i=g;g=j}this.helper.css({left:b,top:g,width:h-b,height:i-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!(!a||a.element==f.element[0])){var k=false;if(d.tolerance=="touch")k=!(a.left>h||a.right<b||a.top>i||a.bottom<g);else if(d.tolerance=="fit")k=a.left>b&&a.right<h&&a.top>g&&a.bottom<i;if(k){if(a.selected){a.$element.removeClass("ui-selected");a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");
a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",c,{selecting:a.element})}}else{if(a.selecting)if(c.metaKey&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");a.unselecting=true}f._trigger("unselecting",c,{unselecting:a.element})}if(a.selected)if(!c.metaKey&&
!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",c,{unselecting:a.element})}}}});return false}},_mouseStop:function(c){var f=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;f._trigger("unselected",c,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=
e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;f._trigger("selected",c,{selected:d.element})});this._trigger("stop",c);this.helper.remove();return false}});e.extend(e.ui.selectable,{version:"1.8.7"})})(jQuery);
;/*
 * jQuery UI Sortable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a==="disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,
arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=
c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,
{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();
if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",
a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+
this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+
b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,
c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",
null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):
d(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+
this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?
2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=
this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=
this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");
if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=
0;b--){var c=this.items[b],e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=
this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},
update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=
null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));
this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,
null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||
d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a==
"string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition==
"absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==
"relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),
10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?
this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=
this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+
this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?
g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==
f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",
f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",
g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=
0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});
d.extend(d.ui.sortable,{version:"1.8.7"})})(jQuery);
;
/*! include 003-widgets-autocomplete.min.js */
/*
 * jQuery UI Autocomplete 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(d){d.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},_create:function(){var a=this,b=this.element[0].ownerDocument,f;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.attr("readonly"))){f=false;var e=d.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:a._move("previousPage",
c);break;case e.PAGE_DOWN:a._move("nextPage",c);break;case e.UP:a._move("previous",c);c.preventDefault();break;case e.DOWN:a._move("next",c);c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:if(a.menu.active){f=true;c.preventDefault()}case e.TAB:if(!a.menu.active)return;a.menu.select(c);break;case e.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);
break}}}).bind("keypress.autocomplete",function(c){if(f){f=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(c){var e=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(g){g.target!==a.element[0]&&g.target!==e&&!d.ui.contains(e,g.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,e){e=e.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:e})&&/^key/.test(c.originalEvent.type)&&a.element.val(e.value)},selected:function(c,e){var g=e.item.data("item.autocomplete"),
h=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=h;setTimeout(function(){a.previous=h;a.selectedItem=g},1)}false!==a._trigger("select",c,{item:g})&&a.element.val(g.value);a.term=a.element.val();a.close(c);a.selectedItem=g},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0])},_initSource:function(){var a=this,b,f;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,e){e(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){f=this.options.source;this.source=
function(c,e){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:f,data:c,dataType:"json",success:function(g,h,i){i===a.xhr&&e(g);a.xhr=null},error:function(g){g===a.xhr&&e([]);a.xhr=null}})}}else this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.element.addClass("ui-autocomplete-loading");
this.source({term:a},this.response)},_response:function(a){if(a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&
a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),
this.element.outerWidth()))},_renderMenu:function(a,b){var f=this;d.each(b,function(c,e){f._renderItem(a,e)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});
d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var f=new RegExp("^"+d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return f.test(c.label||c.value||c)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){if(d(b.target).closest(".ui-menu-item a").length){b.preventDefault();a.select(b)}});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var f=b.offset().top-this.element.offset().top,c=this.element.attr("scrollTop"),e=this.element.height();if(f<0)this.element.attr("scrollTop",c+f);else f>=e&&this.element.attr("scrollTop",c+f-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},
deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,f){if(this.active){a=this.active[a+"All"](".ui-menu-item").eq(0);
a.length?this.activate(f,a):this.activate(f,this.element.children(b))}else this.activate(f,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(".ui-menu-item:first"));else{var b=this.active.offset().top,f=this.element.height(),c=this.element.children(".ui-menu-item").filter(function(){var e=d(this).offset().top-b-f+d(this).height();return e<10&&e>-10});c.length||(c=this.element.children(".ui-menu-item:last"));this.activate(a,
c)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||this.first())this.activate(a,this.element.children(".ui-menu-item:last"));else{var b=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-b+f-d(this).height();return c<10&&c>-10});result.length||(result=this.element.children(".ui-menu-item:first"));
this.activate(a,result)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);
;
/*! include 004-widgets-datepicker.min.js */
/*
 * jQuery UI Datepicker 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function(d,G){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function E(a,b){d.extend(a,b);for(var c in b)if(b[c]==
null||b[c]==G)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.7"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();
f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},
_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&
b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==
""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,
c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),
true);this._updateDatepicker(b);this._updateAlternate(b);b.dpDiv.show()}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});
b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",
this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,
function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:
f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},
e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);
this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]?
d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||
a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,
e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,
"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},
_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value="";if(!d.datepicker._pos){d.datepicker._pos=
d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,
c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&
d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",
function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=
-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,
"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},
_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-
g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?
b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose"))a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):
0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=
false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=
d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);
else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=
a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,
j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){var v=o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&v?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p)throw"Missing number at position "+s;s+=p[0].length;return parseInt(p[0],10)},n=function(p,v,H){p=o(p)?H:v;for(v=0;v<p.length;v++)if(b.substr(s,p[v].length).toLowerCase()==p[v].toLowerCase()){s+=p[v].length;return v+1}throw"Unknown name at position "+s;},r=function(){if(b.charAt(s)!=
a.charAt(z))throw"Unexpected literal at position "+s;s++},s=0,z=0;z<a.length;z++)if(k)if(a.charAt(z)=="'"&&!o("'"))k=false;else r();else switch(a.charAt(z)){case "d":l=m("d");break;case "D":n("D",f,h);break;case "o":u=m("o");break;case "m":j=m("m");break;case "M":j=n("M",i,g);break;case "y":c=m("y");break;case "@":var w=new Date(m("@"));c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;case "!":w=new Date((m("!")-this._ticksTo1970)/1E4);c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;
case "'":if(o("'"))r();else k=true;break;default:r()}if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}w=this._daylightSavingAdjust(new Date(c,j-1,l));if(w.getFullYear()!=c||w.getMonth()+1!=j||w.getDate()!=l)throw"Invalid date";return w},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",
RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;
return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case "d":l+=g("d",b.getDate(),2);break;case "D":l+=j("D",b.getDay(),e,f);break;case "o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":l+=g("m",b.getMonth()+1,2);break;case "M":l+=j("M",b.getMonth(),h,c);break;
case "y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":l+=b.getTime();break;case "!":l+=b.getTime()*1E4+this._ticksTo1970;break;case "'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+=
"0123456789";break;case "D":case "M":return null;case "'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=
f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=
(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case "d":case "D":g+=parseInt(k[1],10);break;case "w":case "W":g+=parseInt(k[1],10)*7;break;case "m":case "M":l+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case "y":case "Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,
l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=
a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),
b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=
this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";j=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;j=!h?j:this.formatDate(j,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,
"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=
this._get(a,"monthNames"),w=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var M="",D=0;D<i[1];D++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1)switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-
1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,C>0||D>0,z,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=
(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,A);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<A;O++){x+="<tr>";var P=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=
p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,J=B&&!H||!F[0]||k&&q<k||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":
""))+'"'+((!B||v)&&F[2]?' title="'+F[2]+'"':"")+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!v?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=
P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=x}I+=M}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',
o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&
l)?"&#xa0;":""));a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+
a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";if(d.browser.mozilla)k+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>";else{k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=
a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,
"onChangeMonthYear");if(b)b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);
c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,
"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=
function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));
return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.7";window["DP_jQuery_"+y]=d})(jQuery);
;
/*! include 005-widgets-datepicker-de.min.js */
jQuery(function($){
    /* German initialisation for the jQuery UI date picker plugin. */
    /* Written by Milian Wolff (mail@milianw.de). */
    $.datepicker.regional['de_DE'] = {
		closeText: 'schlieÃŸen',
		prevText: '&#x3c;zurÃ¼ck',
		nextText: 'Vor&#x3e;',
		currentText: 'heute',
		monthNames: ['Januar','Februar','MÃ¤rz','April','Mai','Juni',
		'Juli','August','September','Oktober','November','Dezember'],
		monthNamesShort: ['Jan','Feb','MÃ¤r','Apr','Mai','Jun',
		'Jul','Aug','Sep','Okt','Nov','Dez'],
		dayNames: ['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],
		dayNamesShort: ['So','Mo','Di','Mi','Do','Fr','Sa'],
		dayNamesMin: ['So','Mo','Di','Mi','Do','Fr','Sa'],
		weekHeader: 'Wo',
		dateFormat: 'dd.mm.yy',
		firstDay: 1,
		isRTL: false,
		showMonthAfterYear: false,
		yearSuffix: ''};
            
        /* French initialisation for the jQuery UI date picker plugin. */
        /* Written by Keith Wood (kbwood{at}iinet.com.au),
          StÃ©phane Nahmani (sholby@sholby.net),
          StÃ©phane Raimbault <stephane.raimbault@gmail.com> */            
	$.datepicker.regional['fr_FR'] = {
		closeText: 'Fermer',
		prevText: 'PrÃ©cÃ©dent',
		nextText: 'Suivant',
		currentText: 'Aujourd\'hui',
		monthNames: ['Janvier','FÃ©vrier','Mars','Avril','Mai','Juin',
		'Juillet','AoÃ»t','Septembre','Octobre','Novembre','DÃ©cembre'],
		monthNamesShort: ['Janv.','FÃ©vr.','Mars','Avril','Mai','Juin',
		'Juil.','AoÃ»t','Sept.','Oct.','Nov.','DÃ©c.'],
		dayNames: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
		dayNamesShort: ['Dim.','Lun.','Mar.','Mer.','Jeu.','Ven.','Sam.'],
		dayNamesMin: ['D','L','M','M','J','V','S'],
		weekHeader: 'Sem.',
		dateFormat: 'dd/mm/yy',
		firstDay: 1,
		isRTL: false,
		showMonthAfterYear: false,
		yearSuffix: ''};

        /* Polish initialisation for the jQuery UI date picker plugin. */
        /* Written by Jacek Wysocki (jacek.wysocki@gmail.com). */
	$.datepicker.regional['pl_PL'] = {
		closeText: 'Zamknij',
		prevText: '&#x3c;Poprzedni',
		nextText: 'NastÄ™pny&#x3e;',
		currentText: 'DziÅ›',
		monthNames: ['StyczeÅ„','Luty','Marzec','KwiecieÅ„','Maj','Czerwiec',
		'Lipiec','SierpieÅ„','WrzesieÅ„','PaÅºdziernik','Listopad','GrudzieÅ„'],
		monthNamesShort: ['Sty','Lu','Mar','Kw','Maj','Cze',
		'Lip','Sie','Wrz','Pa','Lis','Gru'],
		dayNames: ['Niedziela','PoniedziaÅ‚ek','Wtorek','Åšroda','Czwartek','PiÄ…tek','Sobota'],
		dayNamesShort: ['Nie','Pn','Wt','Åšr','Czw','Pt','So'],
		dayNamesMin: ['N','Pn','Wt','Åšr','Cz','Pt','So'],
		weekHeader: 'Tydz',
		dateFormat: 'dd.mm.yy',
		firstDay: 1,
		isRTL: false,
		showMonthAfterYear: false,
		yearSuffix: ''};
            
            
        if (typeof LOCALE === 'undefined') {
                $.datepicker.setDefaults($.datepicker.regional['de_DE']);
        }
        else {
            $.datepicker.setDefaults($.datepicker.regional[LOCALE]);
        }        
});
/*! include 006-widgets-dialog.min.js */
/*
 * jQuery UI Dialog 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(c,j){var k={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},l={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};c.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:300,minWidth:620,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;b<0&&
c(this).css("top",a.top-b)}},resizable:true,show:null,stack:true,title:"",width:620,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=b.title||"&#160;",e=c.ui.dialog.getTitleId(a.element),g=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(i){if(b.closeOnEscape&&i.keyCode&&i.keyCode===c.ui.keyCode.ESCAPE){a.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(i){a.moveToTop(false,i)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),h=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){a.close(i);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(h);c("<span></span>").addClass("ui-dialog-title").attr("id",e).html(d).prependTo(f);if(c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose))b.beforeClose=
b.beforeclose;f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=false;c.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");a.uiDialog.remove();a.originalTitle&&
a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(false!==b._trigger("beforeClose",a)){b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)});else{b.uiDialog.hide();b._trigger("close",a)}c.ui.dialog.overlay.resize();if(b.options.modal){d=0;c(".ui-dialog").each(function(){if(this!==b.uiDialog[0]){e=c(this).css("z-index");
isNaN(e)||(d=Math.max(d,e))}});c.ui.dialog.maxZ=d}return b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this,e=d.options;if(e.modal&&!a||!e.stack&&!e.modal)return d._trigger("focus",b);if(e.zIndex>c.ui.dialog.maxZ)c.ui.dialog.maxZ=e.zIndex;if(d.overlay){c.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ)}a={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};c.ui.dialog.maxZ+=1;d.uiDialog.css("z-index",c.ui.dialog.maxZ);
d.element.attr(a);d._trigger("focus",b);return d},open:function(){if(!this._isOpen){var a=this,b=a.options,d=a.uiDialog;a.overlay=b.modal?new c.ui.dialog.overlay(a):null;a._size();a._position(b.position);d.show(b.show);a.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===c.ui.keyCode.TAB){var g=c(":tabbable",this),f=g.filter(":first");g=g.filter(":last");if(e.target===g[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===f[0]&&e.shiftKey){g.focus(1);return false}}});
c(a.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();a._isOpen=true;a._trigger("open");return a}},_createButtons:function(a){var b=this,d=false,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();typeof a==="object"&&a!==null&&c.each(a,function(){return!(d=true)});if(d){c.each(a,function(f,
h){h=c.isFunction(h)?{click:h,text:f}:h;f=c('<button type="button"></button>').attr(h,true).unbind("click").click(function(){h.click.apply(b.element[0],arguments)}).appendTo(g);c.fn.button&&f.button()});e.appendTo(b.uiDialog)}},_makeDraggable:function(){function a(f){return{position:f.position,offset:f.offset}}var b=this,d=b.options,e=c(document),g;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,h){g=
d.height==="auto"?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",f,a(h))},drag:function(f,h){b._trigger("drag",f,a(h))},stop:function(f,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(g);b._trigger("dragStop",f,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(f){return{originalPosition:f.originalPosition,originalSize:f.originalSize,
position:f.position,size:f.size}}a=a===j?this.options.resizable:a;var d=this,e=d.options,g=d.uiDialog.css("position");a=typeof a==="string"?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(f,h){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",f,b(h))},resize:function(f,h){d._trigger("resize",f,b(h))},stop:function(f,
h){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",f,b(h));c.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if(typeof a==="string"||typeof a==="object"&&"0"in a){b=a.split?a.split(" "):[a[0],a[1]];if(b.length===
1)b[1]=b[0];c.each(["left","top"],function(g,f){if(+b[g]===b[g]){d[g]=b[g];b[g]=f}});a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")}}a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=false;c.each(a,function(g,f){b._setOption(g,f);if(g in k)e=true;if(g in
l)d[g]=f});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this,e=d.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":d._createButtons(b);break;case "closeText":d.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");
break;case "draggable":var g=e.is(":data(draggable)");g&&!b&&e.draggable("destroy");!g&&b&&d._makeDraggable();break;case "position":d._position(b);break;case "resizable":(g=e.is(":data(resizable)"))&&!b&&e.resizable("destroy");g&&typeof b==="string"&&e.resizable("option","handles",b);!g&&b!==false&&d._makeResizable(b);break;case "title":c(".ui-dialog-title",d.uiDialogTitlebar).html(""+(b||"&#160;"));break}c.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var a=this.options,b,d,e=
this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(a.minWidth>a.width)a.width=a.minWidth;b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);if(a.height==="auto")if(c.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();a=this.element.css("height","auto").height();e||this.uiDialog.hide();this.element.height(Math.max(a,d))}else this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.7",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){if(this.instances.length===
0){setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(d){if(c(d.target).zIndex()<c.ui.dialog.overlay.maxZ)return false})},1);c(document).bind("keydown.dialog-overlay",function(d){if(a.options.closeOnEscape&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}});c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);b!=-1&&this.oldInstances.push(this.instances.splice(b,1)[0]);this.instances.length===0&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return a<b?c(window).height()+"px":a+"px"}else return c(document).height()+"px"},width:function(){var a,b;if(c.browser.msie&&c.browser.version<7){a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a<b?c(window).width()+"px":a+"px"}else return c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,
function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
;
/*! include 007-widgets-slider.min.js */
/*
 * jQuery UI Slider 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var b=this,a=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");a.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");
this.range=d([]);if(a.range){if(a.range===true){this.range=d("<div></div>");if(!a.values)a.values=[this._valueMin(),this._valueMin()];if(a.values.length&&a.values.length!==2)a.values=[a.values[0],a.values[0]]}else this.range=d("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(a.range==="min"||a.range==="max")this.range.addClass("ui-slider-range-"+a.range);this.range.addClass("ui-widget-header")}d(".ui-slider-handle",this.element).length===0&&d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(a.values&&a.values.length)for(;d(".ui-slider-handle",this.element).length<a.values.length;)d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=d(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(c){c.preventDefault()}).hover(function(){a.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(a.disabled)d(this).blur();
else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(c){d(this).data("index.ui-slider-handle",c)});this.handles.keydown(function(c){var e=true,f=d(this).data("index.ui-slider-handle"),h,g,i;if(!b.options.disabled){switch(c.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:e=
false;if(!b._keySliding){b._keySliding=true;d(this).addClass("ui-state-active");h=b._start(c,f);if(h===false)return}break}i=b.options.step;h=b.options.values&&b.options.values.length?(g=b.values(f)):(g=b.value());switch(c.keyCode){case d.ui.keyCode.HOME:g=b._valueMin();break;case d.ui.keyCode.END:g=b._valueMax();break;case d.ui.keyCode.PAGE_UP:g=b._trimAlignValue(h+(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:g=b._trimAlignValue(h-(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(h===
b._valueMax())return;g=b._trimAlignValue(h+i);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(h===b._valueMin())return;g=b._trimAlignValue(h-i);break}b._slide(c,f,g);return e}}).keyup(function(c){var e=d(this).data("index.ui-slider-handle");if(b._keySliding){b._keySliding=false;b._stop(c,e);b._change(c,e);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(b){var a=this.options,c,e,f,h,g;if(a.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});e=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(i){var j=Math.abs(c-h.values(i));if(e>j){e=j;f=d(this);g=i}});if(a.range===true&&this.values(1)===a.min){g+=1;f=d(this.handles[g])}if(this._start(b,
g)===false)return false;this._mouseSliding=true;h._handleIndex=g;f.addClass("ui-state-active").focus();a=f.offset();this._clickOffset=!d(b.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:b.pageX-a.left-f.width()/2,top:b.pageY-a.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(b,g,c);return this._animateOff=true},_mouseStart:function(){return true},
_mouseDrag:function(b){var a=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,a);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(b){var a;
if(this.orientation==="horizontal"){a=this.elementSize.width;b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{a=this.elementSize.height;b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}a=b/a;if(a>1)a=1;if(a<0)a=0;if(this.orientation==="vertical")a=1-a;b=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+a*b)},_start:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=
this.values(a);c.values=this.values()}return this._trigger("start",b,c)},_slide:function(b,a,c){var e;if(this.options.values&&this.options.values.length){e=this.values(a?0:1);if(this.options.values.length===2&&this.options.range===true&&(a===0&&c>e||a===1&&c<e))c=e;if(c!==this.values(a)){e=this.values();e[a]=c;b=this._trigger("slide",b,{handle:this.handles[a],value:c,values:e});this.values(a?0:1);b!==false&&this.values(a,c,true)}}else if(c!==this.value()){b=this._trigger("slide",b,{handle:this.handles[a],
value:c});b!==false&&this.value(c)}},_stop:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("stop",b,c)},_change:function(b,a){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("change",b,c)}},value:function(b){if(arguments.length){this.options.value=
this._trimAlignValue(b);this._refreshValue();this._change(null,0)}return this._value()},values:function(b,a){var c,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(a);this._refreshValue();this._change(null,b)}if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;e=arguments[0];for(f=0;f<c.length;f+=1){c[f]=this._trimAlignValue(e[f]);this._change(null,f)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();
else return this._values()},_setOption:function(b,a){var c,e=0;if(d.isArray(this.options.values))e=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":if(a){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(c=0;c<e;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var a,c;if(arguments.length){a=this.options.values[b];
return a=this._trimAlignValue(a)}else{a=this.options.values.slice();for(c=0;c<a.length;c+=1)a[c]=this._trimAlignValue(a[c]);return a}},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var a=this.options.step>0?this.options.step:1,c=(b-this._valueMin())%a;alignValue=b-c;if(Math.abs(c)*2>=a)alignValue+=c>0?a:-a;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
_refreshValue:function(){var b=this.options.range,a=this.options,c=this,e=!this._animateOff?a.animate:false,f,h={},g,i,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(k){f=(c.values(k)-c._valueMin())/(c._valueMax()-c._valueMin())*100;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";d(this).stop(1,1)[e?"animate":"css"](h,a.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(k===0)c.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},a.animate);
if(k===1)c.range[e?"animate":"css"]({width:f-g+"%"},{queue:false,duration:a.animate})}else{if(k===0)c.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},a.animate);if(k===1)c.range[e?"animate":"css"]({height:f-g+"%"},{queue:false,duration:a.animate})}g=f});else{i=this.value();j=this._valueMin();l=this._valueMax();f=l!==j?(i-j)/(l-j)*100:0;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[e?"animate":"css"](h,a.animate);if(b==="min"&&this.orientation==="horizontal")this.range.stop(1,
1)[e?"animate":"css"]({width:f+"%"},a.animate);if(b==="max"&&this.orientation==="horizontal")this.range[e?"animate":"css"]({width:100-f+"%"},{queue:false,duration:a.animate});if(b==="min"&&this.orientation==="vertical")this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},a.animate);if(b==="max"&&this.orientation==="vertical")this.range[e?"animate":"css"]({height:100-f+"%"},{queue:false,duration:a.animate})}}});d.extend(d.ui.slider,{version:"1.8.7"})})(jQuery);
;
/*! include 008-effects.min.js */
/*
 * jQuery UI Effects 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||function(f,j){function n(c){var a;if(c&&c.constructor==Array&&c.length==3)return c;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)];if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return[parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55];if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)];if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(c))return o.transparent;return o[f.trim(c).toLowerCase()]}function s(c,a){var b;do{b=f.curCSS(c,a);if(b!=""&&b!="transparent"||f.nodeName(c,"body"))break;a="backgroundColor"}while(c=c.parentNode);return n(b)}function p(){var c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
a={},b,d;if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;){b=c[e];if(typeof c[b]=="string"){d=b.replace(/\-(\w)/g,function(g,h){return h.toUpperCase()});a[d]=c[b]}}else for(b in c)if(typeof c[b]==="string")a[b]=c[b];return a}function q(c){var a,b;for(a in c){b=c[a];if(b==null||f.isFunction(b)||a in t||/scrollbar/.test(a)||!/color/i.test(a)&&isNaN(parseFloat(b)))delete c[a]}return c}function u(c,a){var b={_:0},d;for(d in a)if(c[d]!=a[d])b[d]=a[d];return b}function k(c,a,b,d){if(typeof c=="object"){d=
a;b=null;a=c;c=a.effect}if(f.isFunction(a)){d=a;b=null;a={}}if(typeof a=="number"||f.fx.speeds[a]){d=b;b=a;a={}}if(f.isFunction(b)){d=b;b=null}a=a||{};b=b||a.duration;b=f.fx.off?0:typeof b=="number"?b:b in f.fx.speeds?f.fx.speeds[b]:f.fx.speeds._default;d=d||a.complete;return[c,a,b,d]}function m(c){if(!c||typeof c==="number"||f.fx.speeds[c])return true;if(typeof c==="string"&&!f.effects[c])return true;return false}f.effects={};f.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
"borderTopColor","borderColor","color","outlineColor"],function(c,a){f.fx.step[a]=function(b){if(!b.colorInit){b.start=s(b.elem,a);b.end=n(b.end);b.colorInit=true}b.elem.style[a]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var o={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},r=["add","remove","toggle"],t={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.effects.animateClass=function(c,a,b,
d){if(f.isFunction(b)){d=b;b=null}return this.each(function(){f.queue(this,"fx",function(){var e=f(this),g=e.attr("style")||" ",h=q(p.call(this)),l,v=e.attr("className");f.each(r,function(w,i){c[i]&&e[i+"Class"](c[i])});l=q(p.call(this));e.attr("className",v);e.animate(u(h,l),a,b,function(){f.each(r,function(w,i){c[i]&&e[i+"Class"](c[i])});if(typeof e.attr("style")=="object"){e.attr("style").cssText="";e.attr("style").cssText=g}else e.attr("style",g);d&&d.apply(this,arguments)});h=f.queue(this);l=
h.splice(h.length-1,1)[0];h.splice(1,0,l);f.dequeue(this)})})};f.fn.extend({_addClass:f.fn.addClass,addClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{add:c},a,b,d]):this._addClass(c)},_removeClass:f.fn.removeClass,removeClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{remove:c},a,b,d]):this._removeClass(c)},_toggleClass:f.fn.toggleClass,toggleClass:function(c,a,b,d,e){return typeof a=="boolean"||a===j?b?f.effects.animateClass.apply(this,[a?{add:c}:{remove:c},
b,d,e]):this._toggleClass(c,a):f.effects.animateClass.apply(this,[{toggle:c},a,b,d])},switchClass:function(c,a,b,d,e){return f.effects.animateClass.apply(this,[{add:a,remove:c},b,d,e])}});f.extend(f.effects,{version:"1.8.7",save:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.data("ec.storage."+a[b],c[0].style[a[b]])},restore:function(c,a){for(var b=0;b<a.length;b++)a[b]!==null&&c.css(a[b],c.data("ec.storage."+a[b]))},setMode:function(c,a){if(a=="toggle")a=c.is(":hidden")?"show":"hide";
return a},getBaseline:function(c,a){var b;switch(c[0]){case "top":b=0;break;case "middle":b=0.5;break;case "bottom":b=1;break;default:b=c[0]/a.height}switch(c[1]){case "left":c=0;break;case "center":c=0.5;break;case "right":c=1;break;default:c=c[1]/a.width}return{x:c,y:b}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var a={width:c.outerWidth(true),height:c.outerHeight(true),"float":c.css("float")},b=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",
background:"transparent",border:"none",margin:0,padding:0});c.wrap(b);b=c.parent();if(c.css("position")=="static"){b.css({position:"relative"});c.css({position:"relative"})}else{f.extend(a,{position:c.css("position"),zIndex:c.css("z-index")});f.each(["top","left","bottom","right"],function(d,e){a[e]=c.css(e);if(isNaN(parseInt(a[e],10)))a[e]="auto"});c.css({position:"relative",top:0,left:0})}return b.css(a).show()},removeWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent().replaceWith(c);
return c},setTransition:function(c,a,b,d){d=d||{};f.each(a,function(e,g){unit=c.cssUnit(g);if(unit[0]>0)d[g]=unit[0]*b+unit[1]});return d}});f.fn.extend({effect:function(c){var a=k.apply(this,arguments),b={options:a[1],duration:a[2],callback:a[3]};a=b.options.mode;var d=f.effects[c];if(f.fx.off||!d)return a?this[a](b.duration,b.callback):this.each(function(){b.callback&&b.callback.call(this)});return d.call(this,b)},_show:f.fn.show,show:function(c){if(m(c))return this._show.apply(this,arguments);
else{var a=k.apply(this,arguments);a[1].mode="show";return this.effect.apply(this,a)}},_hide:f.fn.hide,hide:function(c){if(m(c))return this._hide.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)}},__toggle:f.fn.toggle,toggle:function(c){if(m(c)||typeof c==="boolean"||f.isFunction(c))return this.__toggle.apply(this,arguments);else{var a=k.apply(this,arguments);a[1].mode="toggle";return this.effect.apply(this,a)}},cssUnit:function(c){var a=this.css(c),
b=[];f.each(["em","px","%","pt"],function(d,e){if(a.indexOf(e)>0)b=[parseFloat(a),e]});return b}});f.easing.jswing=f.easing.swing;f.extend(f.easing,{def:"easeOutQuad",swing:function(c,a,b,d,e){return f.easing[f.easing.def](c,a,b,d,e)},easeInQuad:function(c,a,b,d,e){return d*(a/=e)*a+b},easeOutQuad:function(c,a,b,d,e){return-d*(a/=e)*(a-2)+b},easeInOutQuad:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a+b;return-d/2*(--a*(a-2)-1)+b},easeInCubic:function(c,a,b,d,e){return d*(a/=e)*a*a+b},easeOutCubic:function(c,
a,b,d,e){return d*((a=a/e-1)*a*a+1)+b},easeInOutCubic:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a+b;return d/2*((a-=2)*a*a+2)+b},easeInQuart:function(c,a,b,d,e){return d*(a/=e)*a*a*a+b},easeOutQuart:function(c,a,b,d,e){return-d*((a=a/e-1)*a*a*a-1)+b},easeInOutQuart:function(c,a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a+b;return-d/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(c,a,b,d,e){return d*(a/=e)*a*a*a*a+b},easeOutQuint:function(c,a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b},easeInOutQuint:function(c,
a,b,d,e){if((a/=e/2)<1)return d/2*a*a*a*a*a+b;return d/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(c,a,b,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+b},easeOutSine:function(c,a,b,d,e){return d*Math.sin(a/e*(Math.PI/2))+b},easeInOutSine:function(c,a,b,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+b},easeInExpo:function(c,a,b,d,e){return a==0?b:d*Math.pow(2,10*(a/e-1))+b},easeOutExpo:function(c,a,b,d,e){return a==e?b+d:d*(-Math.pow(2,-10*a/e)+1)+b},easeInOutExpo:function(c,a,b,d,e){if(a==0)return b;if(a==
e)return b+d;if((a/=e/2)<1)return d/2*Math.pow(2,10*(a-1))+b;return d/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(c,a,b,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+b},easeOutCirc:function(c,a,b,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+b},easeInOutCirc:function(c,a,b,d,e){if((a/=e/2)<1)return-d/2*(Math.sqrt(1-a*a)-1)+b;return d/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(c,a,b,d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=
g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g))+b},easeOutElastic:function(c,a,b,d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e)==1)return b+d;g||(g=e*0.3);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*a)*Math.sin((a*e-c)*2*Math.PI/g)+d+b},easeInOutElastic:function(c,a,b,d,e){c=1.70158;var g=0,h=d;if(a==0)return b;if((a/=e/2)==2)return b+d;g||(g=e*0.3*1.5);if(h<Math.abs(d)){h=d;c=g/4}else c=g/(2*Math.PI)*Math.asin(d/
h);if(a<1)return-0.5*h*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)+b;return h*Math.pow(2,-10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/g)*0.5+d+b},easeInBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*(a/=e)*a*((g+1)*a-g)+b},easeOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;return d*((a=a/e-1)*a*((g+1)*a+g)+1)+b},easeInOutBack:function(c,a,b,d,e,g){if(g==j)g=1.70158;if((a/=e/2)<1)return d/2*a*a*(((g*=1.525)+1)*a-g)+b;return d/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b},easeInBounce:function(c,
a,b,d,e){return d-f.easing.easeOutBounce(c,e-a,0,d,e)+b},easeOutBounce:function(c,a,b,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(c,a,b,d,e){if(a<e/2)return f.easing.easeInBounce(c,a*2,0,d,e)*0.5+b;return f.easing.easeOutBounce(c,a*2-e,0,d,e)*0.5+d*0.5+b}})}(jQuery);
;
/*! include 009-tabs.min.js */
/*
 * jQuery UI Tabs 1.8.10
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(d,p){function u(){return++v}function w(){return++x}var v=0,x=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(b,e){if(b=="selected")this.options.collapsible&&
e==this.options.selected||this.select(e);else{this.options[b]=e;this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+u()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+w());return d.cookie.apply(null,[b].concat(d.makeArray(arguments)))},_ui:function(b,e){return{tab:b,panel:e,index:this.anchors.index(b)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=
d(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(b){function e(g,f){g.css("display","");!d.support.opacity&&f.opacity&&g[0].style.removeAttribute("filter")}var a=this,c=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(g,f){var i=d(f).attr("href"),l=i.split("#")[0],q;if(l&&(l===location.toString().split("#")[0]||
(q=d("base")[0])&&l===q.href)){i=f.hash;f.href=i}if(h.test(i))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(i)));else if(i&&i!=="#"){d.data(f,"href.tabs",i);d.data(f,"load.tabs",i.replace(/#.*$/,""));i=a._tabId(f);f.href="#"+i;f=a.element.find("#"+i);if(!f.length){f=d(c.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[g-1]||a.list);f.data("destroy.tabs",true)}a.panels=a.panels.add(f)}else c.disabled.push(g)});if(b){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(c.selected===p){location.hash&&this.anchors.each(function(g,f){if(f.hash==location.hash){c.selected=g;return false}});if(typeof c.selected!=="number"&&c.cookie)c.selected=parseInt(a._cookie(),10);if(typeof c.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"));c.selected=c.selected||(this.lis.length?0:-1)}else if(c.selected===null)c.selected=-1;c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0;c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(g){return a.lis.index(g)}))).sort();d.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(d.inArray(c.selected,c.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(c.selected>=0&&this.anchors.length){a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[c.selected],a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash))[0]))});this.load(c.selected)}d(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null})}else c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);b=0;for(var j;j=this.lis[b];b++)d(j)[d.inArray(b,c.disabled)!=-1&&!d(j).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");c.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var k=function(g,f){f.is(":not(.ui-state-disabled)")&&f.addClass("ui-state-"+g)},n=function(g,f){f.removeClass("ui-state-"+
g)};this.lis.bind("mouseover.tabs",function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){n("hover",d(this))});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){n("focus",d(this).closest("li"))})}var m,o;if(c.fx)if(d.isArray(c.fx)){m=c.fx[0];o=c.fx[1]}else m=o=c.fx;var r=o?function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",
function(){e(f,o);a._trigger("show",null,a._ui(g,f[0]))})}:function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(g,f[0]))},s=m?function(g,f){f.animate(m,m.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");e(f,m);a.element.dequeue("tabs")})}:function(g,f){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");a.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var g=this,f=d(g).closest("li"),i=a.panels.filter(":not(.ui-tabs-hide)"),l=a.element.find(a._sanitizeSelector(g.hash));if(f.hasClass("ui-tabs-selected")&&!c.collapsible||f.hasClass("ui-state-disabled")||f.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,l[0]))===false){this.blur();return false}c.selected=a.anchors.index(this);a.abort();if(c.collapsible)if(f.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){s(g,i)}).dequeue("tabs");this.blur();return false}else if(!i.length){c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this));this.blur();return false}c.cookie&&a._cookie(c.selected,c.cookie);if(l.length){i.length&&a.element.queue("tabs",function(){s(g,i)});a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(b){if(typeof b=="string")b=this.anchors.index(this.anchors.filter("[href$="+b+"]"));return b},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=
d.data(this,"href.tabs");if(e)this.href=e;var a=d(this).unbind(".tabs");d.each(["href","load","cache"],function(c,h){a.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});b.cookie&&this._cookie(null,b.cookie);return this},add:function(b,
e,a){if(a===p)a=this.anchors.length;var c=this,h=this.options;e=d(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,e));b=!b.indexOf("#")?b.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=c.element.find("#"+b);j.length||(j=d(h.panelTemplate).attr("id",b).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(a>=this.lis.length){e.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{e.insertBefore(this.lis[a]);
j.insertBefore(this.panels[a])}h.disabled=d.map(h.disabled,function(k){return k>=a?++k:k});this._tabify();if(this.anchors.length==1){h.selected=0;e.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[a],this.panels[a]));return this},remove:function(b){b=this._getIndex(b);var e=this.options,a=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();
if(a.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(b+(b+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(h){return h!=b}),function(h){return h>=b?--h:h});this._tabify();this._trigger("remove",null,this._ui(a.find("a")[0],c[0]));return this},enable:function(b){b=this._getIndex(b);var e=this.options;if(d.inArray(b,e.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled");e.disabled=d.grep(e.disabled,function(a){return a!=b});this._trigger("enable",null,
this._ui(this.anchors[b],this.panels[b]));return this}},disable:function(b){b=this._getIndex(b);var e=this.options;if(b!=e.selected){this.lis.eq(b).addClass("ui-state-disabled");e.disabled.push(b);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}return this},select:function(b){b=this._getIndex(b);if(b==-1)if(this.options.collapsible&&this.options.selected!=-1)b=this.options.selected;else return this;this.anchors.eq(b).trigger(this.options.event+".tabs");return this},
load:function(b){b=this._getIndex(b);var e=this,a=this.options,c=this.anchors.eq(b)[0],h=d.data(c,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(a.spinner){var j=d("span",c);j.data("label.tabs",j.html()).html(a.spinner)}this.xhr=d.ajax(d.extend({},a.ajaxOptions,{url:h,success:function(k,n){e.element.find(e._sanitizeSelector(c.hash)).html(k);e._cleanup();a.cache&&d.data(c,
"cache.tabs",true);e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.success(k,n)}catch(m){}},error:function(k,n){e._cleanup();e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.error(k,n,b,c)}catch(m){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
url:function(b,e){this.anchors.eq(b).removeData("cache.tabs").data("load.tabs",e);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.10"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(b,e){var a=this,c=this.options,h=a._rotate||(a._rotate=function(j){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var k=c.selected;a.select(++k<a.anchors.length?k:0)},b);j&&j.stopPropagation()});e=a._unrotate||(a._unrotate=!e?function(j){j.clientX&&
a.rotate(null)}:function(){t=c.selected;h()});if(b){this.element.bind("tabsshow",h);this.anchors.bind(c.event+".tabs",e);h()}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(c.event+".tabs",e);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
;
/*! include 010-button.js */
/*
 * jQuery UI Button 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function( $, undefined ) {

var lastActive,
	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
	stateClasses = "ui-state-hover ui-state-active ",
	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
	formResetHandler = function( event ) {
		$( ":ui-button", event.target.form ).each(function() {
			var inst = $( this ).data( "button" );
			setTimeout(function() {
				inst.refresh();
			}, 1 );
		});
	},
	radioGroup = function( radio ) {
		var name = radio.name,
			form = radio.form,
			radios = $( [] );
		if ( name ) {
			if ( form ) {
				radios = $( form ).find( "[name='" + name + "']" );
			} else {
				radios = $( "[name='" + name + "']", radio.ownerDocument )
					.filter(function() {
						return !this.form;
					});
			}
		}
		return radios;
	};

$.widget( "ui.button", {
	options: {
		disabled: null,
		text: true,
		label: null,
		icons: {
			primary: null,
			secondary: null
		}
	},
	_create: function() {
		this.element.closest( "form" )
			.unbind( "reset.button" )
			.bind( "reset.button", formResetHandler );

		if ( typeof this.options.disabled !== "boolean" ) {
			this.options.disabled = this.element.attr( "disabled" );
		}

		this._determineButtonType();
		this.hasTitle = !!this.buttonElement.attr( "title" );

		var self = this,
			options = this.options,
			toggleButton = this.type === "checkbox" || this.type === "radio",
			hoverClass = "ui-state-hover" + ( !toggleButton ? " ui-state-active" : "" ),
			focusClass = "ui-state-focus";

		if ( options.label === null ) {
			options.label = this.buttonElement.html();
		}

		if ( this.element.is( ":disabled" ) ) {
			options.disabled = true;
		}

		this.buttonElement
			.addClass( baseClasses )
			.attr( "role", "button" )
			.bind( "mouseenter.button", function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).addClass( "ui-state-hover" );
				if ( this === lastActive ) {
					$( this ).addClass( "ui-state-active" );
				}
			})
			.bind( "mouseleave.button", function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).removeClass( hoverClass );
			})
			.bind( "focus.button", function() {
				// no need to check disabled, focus won't be triggered anyway
				$( this ).addClass( focusClass );
			})
			.bind( "blur.button", function() {
				$( this ).removeClass( focusClass );
			});

		if ( toggleButton ) {
			this.element.bind( "change.button", function() {
				self.refresh();
			});
		}

		if ( this.type === "checkbox" ) {
			this.buttonElement.bind( "click.button", function() {
				if ( options.disabled ) {
					return false;
				}
				$( this ).toggleClass( "ui-state-active" );
				self.buttonElement.attr( "aria-pressed", self.element[0].checked );
			});
		} else if ( this.type === "radio" ) {
			this.buttonElement.bind( "click.button", function() {
				if ( options.disabled ) {
					return false;
				}
				$( this ).addClass( "ui-state-active" );
				self.buttonElement.attr( "aria-pressed", true );

				var radio = self.element[ 0 ];
				radioGroup( radio )
					.not( radio )
					.map(function() {
						return $( this ).button( "widget" )[ 0 ];
					})
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", false );
			});
		} else {
			this.buttonElement
				.bind( "mousedown.button", function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).addClass( "ui-state-active" );
					lastActive = this;
					$( document ).one( "mouseup", function() {
						lastActive = null;
					});
				})
				.bind( "mouseup.button", function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).removeClass( "ui-state-active" );
				})
				.bind( "keydown.button", function(event) {
					if ( options.disabled ) {
						return false;
					}
					if ( event.keyCode == $.ui.keyCode.SPACE || event.keyCode == $.ui.keyCode.ENTER ) {
						$( this ).addClass( "ui-state-active" );
					}
				})
				.bind( "keyup.button", function() {
					$( this ).removeClass( "ui-state-active" );
				});

			if ( this.buttonElement.is("a") ) {
				this.buttonElement.keyup(function(event) {
					if ( event.keyCode === $.ui.keyCode.SPACE ) {
						// TODO pass through original event correctly (just as 2nd argument doesn't work)
						$( this ).click();
					}
				});
			}
		}

		// TODO: pull out $.Widget's handling for the disabled option into
		// $.Widget.prototype._setOptionDisabled so it's easy to proxy and can
		// be overridden by individual plugins
		this._setOption( "disabled", options.disabled );
	},

	_determineButtonType: function() {
		
		if ( this.element.is(":checkbox") ) {
			this.type = "checkbox";
		} else {
			if ( this.element.is(":radio") ) {
				this.type = "radio";
			} else {
				if ( this.element.is("input") ) {
					this.type = "input";
				} else {
					this.type = "button";
				}
			}
		}
		
		if ( this.type === "checkbox" || this.type === "radio" ) {
			// we don't search against the document in case the element
			// is disconnected from the DOM
			this.buttonElement = this.element.parents().last()
				.find( "label[for=" + this.element.attr("id") + "]" );
			this.element.addClass( "ui-helper-hidden-accessible" );

			var checked = this.element.is( ":checked" );
			if ( checked ) {
				this.buttonElement.addClass( "ui-state-active" );
			}
			this.buttonElement.attr( "aria-pressed", checked );
		} else {
			this.buttonElement = this.element;
		}
	},

	widget: function() {
		return this.buttonElement;
	},

	destroy: function() {
		this.element
			.removeClass( "ui-helper-hidden-accessible" );
		this.buttonElement
			.removeClass( baseClasses + " " + stateClasses + " " + typeClasses )
			.removeAttr( "role" )
			.removeAttr( "aria-pressed" )
			.html( this.buttonElement.find(".ui-button-text").html() );

		if ( !this.hasTitle ) {
			this.buttonElement.removeAttr( "title" );
		}

		$.Widget.prototype.destroy.call( this );
	},

	_setOption: function( key, value ) {
		$.Widget.prototype._setOption.apply( this, arguments );
		if ( key === "disabled" ) {
			if ( value ) {
				this.element.attr( "disabled", true );
			} else {
				this.element.removeAttr( "disabled" );
			}
		}
		this._resetButton();
	},

	refresh: function() {
		var isDisabled = this.element.is( ":disabled" );
		if ( isDisabled !== this.options.disabled ) {
			this._setOption( "disabled", isDisabled );
		}
		if ( this.type === "radio" ) {
			radioGroup( this.element[0] ).each(function() {
				if ( $( this ).is( ":checked" ) ) {
					$( this ).button( "widget" )
						.addClass( "ui-state-active" )
						.attr( "aria-pressed", true );
				} else {
					$( this ).button( "widget" )
						.removeClass( "ui-state-active" )
						.attr( "aria-pressed", false );
				}
			});
		} else if ( this.type === "checkbox" ) {
			if ( this.element.is( ":checked" ) ) {
				this.buttonElement
					.addClass( "ui-state-active" )
					.attr( "aria-pressed", true );
			} else {
				this.buttonElement
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", false );
			}
		}
	},

	_resetButton: function() {
		if ( this.type === "input" ) {
			if ( this.options.label ) {
				this.element.val( this.options.label );
			}
			return;
		}
		var buttonElement = this.buttonElement.removeClass( typeClasses ),
			buttonText = $( "<span></span>" )
				.addClass( "ui-button-text" )
				.html( this.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = this.options.icons,
			multipleIcons = icons.primary && icons.secondary;
		if ( icons.primary || icons.secondary ) {
			buttonElement.addClass( "ui-button-text-icon" +
				( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
			if ( icons.primary ) {
				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
			}
			if ( icons.secondary ) {
				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
			}
			if ( !this.options.text ) {
				buttonElement
					.addClass( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" )
					.removeClass( "ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary" );
				if ( !this.hasTitle ) {
					buttonElement.attr( "title", buttonText );
				}
			}
		} else {
			buttonElement.addClass( "ui-button-text-only" );
		}
	}
});

$.widget( "ui.buttonset", {
	options: {
		items: ":button, :submit, :reset, :checkbox, :radio, a, :data(button)"
	},

	_create: function() {
		this.element.addClass( "ui-buttonset" );
	},
	
	_init: function() {
		this.refresh();
	},

	_setOption: function( key, value ) {
		if ( key === "disabled" ) {
			this.buttons.button( "option", key, value );
		}

		$.Widget.prototype._setOption.apply( this, arguments );
	},
	
	refresh: function() {
		this.buttons = this.element.find( this.options.items )
			.filter( ":ui-button" )
				.button( "refresh" )
			.end()
			.not( ":ui-button" )
				.button()
			.end()
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
				.filter( ":first" )
					.addClass( "ui-corner-left" )
				.end()
				.filter( ":last" )
					.addClass( "ui-corner-right" )
				.end()
			.end();
	},

	destroy: function() {
		this.element.removeClass( "ui-buttonset" );
		this.buttons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-left ui-corner-right" )
			.end()
			.button( "destroy" );

		$.Widget.prototype.destroy.call( this );
	}
});

}( jQuery ) );
/*! include autogrow.js */
(function($) {
    /*
     * Auto-growing textareas; technique ripped from Facebook
     */
    $.fn.autogrow = function(options) {

        this.filter('textarea').each(function() {

            var $this = $(this),
                minHeight = $this.height(),
                lineHeight = $this.css('lineHeight');

            var shadow = $('<div></div>').css({
                position: 'absolute',
                top: -10000,
                left: -10000,
                width: $(this).width() - parseInt($this.css('paddingLeft'),10) - parseInt($this.css('paddingRight'),10),
                fontSize: $this.css('fontSize'),
                fontFamily: $this.css('fontFamily'),
                lineHeight: $this.css('lineHeight'),
                resize: 'none'
            }).appendTo(document.body);

            var update = function() {
                var times = function(string, number) {
                    for (var i = 0, r = ''; i < number; i ++){
                        r += string;
                    }
                    return r;
                };
                var val = this.value.replace(/</g, '&lt;')
                                    .replace(/>/g, '&gt;')
                                    .replace(/&/g, '&amp;')
                                    .replace(/\n$/, '<br/>&nbsp;')
                                    .replace(/\n/g, '<br/>')
                                    .replace(/ {2,}/g, function(space) {return times('&nbsp;', space.length -1) + ' ';});
                shadow.html(val);
                $(this).css('height', Math.max(shadow.height() + 20, minHeight));
            };
            $(this).change(update).keyup(update).keydown(update);
            update.apply(this);
        });
        return this;
    };

})(jQuery);
/*! include base64.js */
/*
@desc
	Base64 encoder and decoder write by JavaScript. This code was a plugin of 
	jQeury, you must load jQuery library first if you want to use this code.
	 - After encode, you can decode it with PHP, and vice versa
	 - Support Unicode library, but only worked on chinese
	This code was collected from the network, I just rewrite it as the plugin 
	of jQuery, the copyright belongs to original work(s).

@Version	1.1 build 20110323
@Author	Hpyer <coolhpy@163.com>
@Home	http://hpyer.cn/codes/jquery-plugin-base64-encode-and-decode
@Usage
	Use UNICODE library or not: $.base64.is_unicode = false/true;
	Encode: $.base64.encode('$.base64');
	Decode: $.base64.decode('JC5iYXNlNjQ=');
@License	Free
*/

jQuery.base64 = {
	is_unicode: false,

	encode: function(input){
		if (this.is_unicode) input = this._u2a(input);
		var output = '';
		var chr1, chr2, chr3 = '';
		var enc1, enc2, enc3, enc4 = '';
		var i = 0;
		while (i < input.length) {
			chr1 = input.charCodeAt(i++);
			chr2 = input.charCodeAt(i++);
			chr3 = input.charCodeAt(i++);
			enc1 = chr1 >> 2;
			enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
			enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
			enc4 = chr3 & 63;
			if (isNaN(chr2)){
				enc3 = enc4 = 64;
			} else if (isNaN(chr3)){
				enc4 = 64;
			}
			output = output+this._keys.charAt(enc1)+this._keys.charAt(enc2)+this._keys.charAt(enc3)+this._keys.charAt(enc4);
			chr1 = chr2 = chr3 = '';
			enc1 = enc2 = enc3 = enc4 = '';
		}
		return output;
	},

	decode: function(input){
		var output = '';
		var chr1, chr2, chr3 = '';
		var enc1, enc2, enc3, enc4 = '';
		var i = 0;
		if (input.length%4!=0){
			return '';
		}
		var base64test = /[^A-Za-z0-9\+\/\=]/g;
		if (base64test.exec(input)){
			return '';
		}
		while (i < input.length) {
			enc1 = this._keys.indexOf(input.charAt(i++));
			enc2 = this._keys.indexOf(input.charAt(i++));
			enc3 = this._keys.indexOf(input.charAt(i++));
			enc4 = this._keys.indexOf(input.charAt(i++));
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
			output = output + String.fromCharCode(chr1);
			if (enc3 != 64){
				output+=String.fromCharCode(chr2);
			}
			if (enc4 != 64){
				output+=String.fromCharCode(chr3);
			}
			chr1 = chr2 = chr3 = '';
			enc1 = enc2 = enc3 = enc4 = '';
		}

		if (this.is_unicode) output = this._a2u(output);
		return output;
	},

	_keys: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',

	_unicode: function(){
		return '00A4,00A7,00A8,00B0,00B1,00B7,00D7,00E0,00E1,00E8,00E9,00EA,00EC,00ED,00F2,00F3,00F7,00F9,00FA,00FC,0101,0113,011B,012B,014D,016B,01CE,01D0,01D2,01D4,01D6,01D8,01DA,01DC,02C7,02C9,0391,0392,0393,0394,0395,0396,0397,0398,0399,039A,039B,039C,039D,039E,039F,03A0,03A1,03A3,03A4,03A5,03A6,03A7,03A8,03A9,03B1,03B2,03B3,03B4,03B5,03B6,03B7,03B8,03B9,03BA,03BB,03BC,03BD,03BE,03BF,03C0,03C1,03C3,03C4,03C5,03C6,03C7,03C8,03C9,0401,0410,0411,0412,0413,0414,0415,0416,0417,0418,0419,041A,041B,041C,041D,041E,041F,0420,0421,0422,0423,0424,0425,0426,0427,0428,0429,042A,042B,042C,042D,042E,042F,0430,0431,0432,0433,0434,0435,0436,0437,0438,0439,043A,043B,043C,043D,043E,043F,0440,0441,0442,0443,0444,0445,0446,0447,0448,0449,044A,044B,044C,044D,044E,044F,0451,2014,2016,2018,2019,201C,201D,2026,2030,2032,2033,203B,2103,2116,2160,2161,2162,2163,2164,2165,2166,2167,2168,2169,216A,216B,2190,2191,2192,2193,2208,220F,2211,221A,221D,221E,2220,2225,2227,2228,2229,222A,222B,222E,2234,2235,2236,2237,223D,2248,224C,2260,2261,2264,2265,226E,226F,2299,22A5,2312,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2474,2475,2476,2477,2478,2479,247A,247B,247C,247D,247E,247F,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,248A,248B,248C,248D,248E,248F,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,249A,249B,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,250A,250B,250C,250D,250E,250F,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,251A,251B,251C,251D,251E,251F,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,252A,252B,252C,252D,252E,252F,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,253A,253B,253C,253D,253E,253F,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,254A,254B,25A0,25A1,25B2,25B3,25C6,25C7,25CB,25CE,25CF,2605,2606,2640,2642,3000,3001,3002,3003,3005,3008,3009,300A,300B,300C,300D,300E,300F,3010,3011,3013,3014,3015,3016,3017,3041,3042,3043,3044,3045,3046,3047,3048,3049,304A,304B,304C,304D,304E,304F,3050,3051,3052,3053,3054,3055,3056,3057,3058,3059,305A,305B,305C,305D,305E,305F,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,306A,306B,306C,306D,306E,306F,3070,3071,3072,3073,3074,3075,3076,3077,3078,3079,307A,307B,307C,307D,307E,307F,3080,3081,3082,3083,3084,3085,3086,3087,3088,3089,308A,308B,308C,308D,308E,308F,3090,3091,3092,3093,30A1,30A2,30A3,30A4,30A5,30A6,30A7,30A8,30A9,30AA,30AB,30AC,30AD,30AE,30AF,30B0,30B1,30B2,30B3,30B4,30B5,30B6,30B7,30B8,30B9,30BA,30BB,30BC,30BD,30BE,30BF,30C0,30C1,30C2,30C3,30C4,30C5,30C6,30C7,30C8,30C9,30CA,30CB,30CC,30CD,30CE,30CF,30D0,30D1,30D2,30D3,30D4,30D5,30D6,30D7,30D8,30D9,30DA,30DB,30DC,30DD,30DE,30DF,30E0,30E1,30E2,30E3,30E4,30E5,30E6,30E7,30E8,30E9,30EA,30EB,30EC,30ED,30EE,30EF,30F0,30F1,30F2,30F3,30F4,30F5,30F6,3105,3106,3107,3108,3109,310A,310B,310C,310D,310E,310F,3110,3111,3112,3113,3114,3115,3116,3117,3118,3119,311A,311B,311C,311D,311E,311F,3120,3121,3122,3123,3124,3125,3126,3127,3128,3129,3220,3221,3222,3223,3224,3225,3226,3227,3228,3229,4E00,4E01,4E03,4E07,4E08,4E09,4E0A,4E0B,4E0C,4E0D,4E0E,4E10,4E11,4E13,4E14,4E15,4E16,4E18,4E19,4E1A,4E1B,4E1C,4E1D,4E1E,4E22,4E24,4E25,4E27,4E28,4E2A,4E2B,4E2C,4E2D,4E30,4E32,4E34,4E36,4E38,4E39,4E3A,4E3B,4E3D,4E3E,4E3F,4E43,4E45,4E47,4E48,4E49,4E4B,4E4C,4E4D,4E4E,4E4F,4E50,4E52,4E53,4E54,4E56,4E58,4E59,4E5C,4E5D,4E5E,4E5F,4E60,4E61,4E66,4E69,4E70,4E71,4E73,4E7E,4E86,4E88,4E89,4E8B,4E8C,4E8D,4E8E,4E8F,4E91,4E92,4E93,4E94,4E95,4E98,4E9A,4E9B,4E9F,4EA0,4EA1,4EA2,4EA4,4EA5,4EA6,4EA7,4EA8,4EA9,4EAB,4EAC,4EAD,4EAE,4EB2,4EB3,4EB5,4EBA,4EBB,4EBF,4EC0,4EC1,4EC2,4EC3,4EC4,4EC5,4EC6,4EC7,4EC9,4ECA,4ECB,4ECD,4ECE,4ED1,4ED3,4ED4,4ED5,4ED6,4ED7,4ED8,4ED9,4EDD,4EDE,4EDF,4EE1,4EE3,4EE4,4EE5,4EE8,4EEA,4EEB,4EEC,4EF0,4EF2,4EF3,4EF5,4EF6,4EF7,4EFB,4EFD,4EFF,4F01,4F09,4F0A,4F0D,4F0E,4F0F,4F10,4F11,4F17,4F18,4F19,4F1A,4F1B,4F1E,4F1F,4F20,4F22,4F24,4F25,4F26,4F27,4F2A,4F2B,4F2F,4F30,4F32,4F34,4F36,4F38,4F3A,4F3C,4F3D,4F43,4F46,4F4D,4F4E,4F4F,4F50,4F51,4F53,4F55,4F57,4F58,4F59,4F5A,4F5B,4F5C,4F5D,4F5E,4F5F,4F60,4F63,4F64,4F65,4F67,4F69,4F6C,4F6F,4F70,4F73,4F74,4F76,4F7B,4F7C,4F7E,4F7F,4F83,4F84,4F88,4F89,4F8B,4F8D,4F8F,4F91,4F94,4F97,4F9B,4F9D,4FA0,4FA3,4FA5,4FA6,4FA7,4FA8,4FA9,4FAA,4FAC,4FAE,4FAF,4FB5,4FBF,4FC3,4FC4,4FC5,4FCA,4FCE,4FCF,4FD0,4FD1,4FD7,4FD8,4FDA,4FDC,4FDD,4FDE,4FDF,4FE1,4FE3,4FE6,4FE8,4FE9,4FEA,4FED,4FEE,4FEF,4FF1,4FF3,4FF8,4FFA,4FFE,500C,500D,500F,5012,5014,5018,5019,501A,501C,501F,5021,5025,5026,5028,5029,502A,502C,502D,502E,503A,503C,503E,5043,5047,5048,504C,504E,504F,5055,505A,505C,5065,506C,5076,5077,507B,507E,507F,5080,5085,5088,508D,50A3,50A5,50A7,50A8,50A9,50AC,50B2,50BA,50BB,50CF,50D6,50DA,50E6,50E7,50EC,50ED,50EE,50F3,50F5,50FB,5106,5107,510B,5112,5121,513F,5140,5141,5143,5144,5145,5146,5148,5149,514B,514D,5151,5154,5155,5156,515A,515C,5162,5165,5168,516B,516C,516D,516E,5170,5171,5173,5174,5175,5176,5177,5178,5179,517B,517C,517D,5180,5181,5182,5185,5188,5189,518C,518D,5192,5195,5196,5197,5199,519B,519C,51A0,51A2,51A4,51A5,51AB,51AC,51AF,51B0,51B1,51B2,51B3,51B5,51B6,51B7,51BB,51BC,51BD,51C0,51C4,51C6,51C7,51C9,51CB,51CC,51CF,51D1,51DB,51DD,51E0,51E1,51E4,51EB,51ED,51EF,51F0,51F3,51F5,51F6,51F8,51F9,51FA,51FB,51FC,51FD,51FF,5200,5201,5202,5203,5206,5207,5208,520A,520D,520E,5211,5212,5216,5217,5218,5219,521A,521B,521D,5220,5224,5228,5229,522B,522D,522E,5230,5233,5236,5237,5238,5239,523A,523B,523D,523F,5240,5241,5242,5243,524A,524C,524D,5250,5251,5254,5256,525C,525E,5261,5265,5267,5269,526A,526F,5272,527D,527F,5281,5282,5288,5290,5293,529B,529D,529E,529F,52A0,52A1,52A2,52A3,52A8,52A9,52AA,52AB,52AC,52AD,52B1,52B2,52B3,52BE,52BF,52C3,52C7,52C9,52CB,52D0,52D2,52D6,52D8,52DF,52E4,52F0,52F9,52FA,52FE,52FF,5300,5305,5306,5308,530D,530F,5310,5315,5316,5317,5319,531A,531D,5320,5321,5323,5326,532A,532E,5339,533A,533B,533E,533F,5341,5343,5345,5347,5348,5349,534A,534E,534F,5351,5352,5353,5355,5356,5357,535A,535C,535E,535F,5360,5361,5362,5363,5364,5366,5367,5369,536B,536E,536F,5370,5371,5373,5374,5375,5377,5378,537A,537F,5382,5384,5385,5386,5389,538B,538C,538D,5395,5398,539A,539D,539F,53A2,53A3,53A5,53A6,53A8,53A9,53AE,53B6,53BB,53BF,53C1,53C2,53C8,53C9,53CA,53CB,53CC,53CD,53D1,53D4,53D6,53D7,53D8,53D9,53DB,53DF,53E0,53E3,53E4,53E5,53E6,53E8,53E9,53EA,53EB,53EC,53ED,53EE,53EF,53F0,53F1,53F2,53F3,53F5,53F6,53F7,53F8,53F9,53FB,53FC,53FD,5401,5403,5404,5406,5408,5409,540A,540C,540D,540E,540F,5410,5411,5412,5413,5415,5416,5417,541B,541D,541E,541F,5420,5421,5423,5426,5427,5428,5429,542B,542C,542D,542E,542F,5431,5432,5434,5435,5438,5439,543B,543C,543E,5440,5443,5446,5448,544A,544B,5450,5452,5453,5454,5455,5456,5457,5458,5459,545B,545C,5462,5464,5466,5468,5471,5472,5473,5475,5476,5477,5478,547B,547C,547D,5480,5482,5484,5486,548B,548C,548E,548F,5490,5492,5494,5495,5496,5499,549A,549B,549D,54A3,54A4,54A6,54A7,54A8,54A9,54AA,54AB,54AC,54AD,54AF,54B1,54B3,54B4,54B8,54BB,54BD,54BF,54C0,54C1,54C2,54C4,54C6,54C7,54C8,54C9,54CC,54CD,54CE,54CF,54D0,54D1,54D2,54D3,54D4,54D5,54D7,54D9,54DA,54DC,54DD,54DE,54DF,54E5,54E6,54E7,54E8,54E9,54EA,54ED,54EE,54F2,54F3,54FA,54FC,54FD,54FF,5501,5506,5507,5509,550F,5510,5511,5514,551B,5520,5522,5523,5524,5527,552A,552C,552E,552F,5530,5531,5533,5537,553C,553E,553F,5541,5543,5544,5546,5549,554A,5550,5555,5556,555C,5561,5564,5565,5566,5567,556A,556C,556D,556E,5575,5576,5577,5578,557B,557C,557E,5580,5581,5582,5583,5584,5587,5588,5589,558A,558B,558F,5591,5594,5598,5599,559C,559D,559F,55A7,55B1,55B3,55B5,55B7,55B9,55BB,55BD,55BE,55C4,55C5,55C9,55CC,55CD,55D1,55D2,55D3,55D4,55D6,55DC,55DD,55DF,55E1,55E3,55E4,55E5,55E6,55E8,55EA,55EB,55EC,55EF,55F2,55F3,55F5,55F7,55FD,55FE,5600,5601,5608,5609,560C,560E,560F,5618,561B,561E,561F,5623,5624,5627,562C,562D,5631,5632,5634,5636,5639,563B,563F,564C,564D,564E,5654,5657,5658,5659,565C,5662,5664,5668,5669,566A,566B,566C,5671,5676,567B,567C,5685,5686,568E,568F,5693,56A3,56AF,56B7,56BC,56CA,56D4,56D7,56DA,56DB,56DD,56DE,56DF,56E0,56E1,56E2,56E4,56EB,56ED,56F0,56F1,56F4,56F5,56F9,56FA,56FD,56FE,56FF,5703,5704,5706,5708,5709,570A,571C,571F,5723,5728,5729,572A,572C,572D,572E,572F,5730,5733,5739,573A,573B,573E,5740,5742,5747,574A,574C,574D,574E,574F,5750,5751,5757,575A,575B,575C,575D,575E,575F,5760,5761,5764,5766,5768,5769,576A,576B,576D,576F,5773,5776,5777,577B,577C,5782,5783,5784,5785,5786,578B,578C,5792,5793,579B,57A0,57A1,57A2,57A3,57A4,57A6,57A7,57A9,57AB,57AD,57AE,57B2,57B4,57B8,57C2,57C3,57CB,57CE,57CF,57D2,57D4,57D5,57D8,57D9,57DA,57DD,57DF,57E0,57E4,57ED,57EF,57F4,57F8,57F9,57FA,57FD,5800,5802,5806,5807,580B,580D,5811,5815,5819,581E,5820,5821,5824,582A,5830,5835,5844,584C,584D,5851,5854,5858,585E,5865,586B,586C,587E,5880,5881,5883,5885,5889,5892,5893,5899,589A,589E,589F,58A8,58A9,58BC,58C1,58C5,58D1,58D5,58E4,58EB,58EC,58EE,58F0,58F3,58F6,58F9,5902,5904,5907,590D,590F,5914,5915,5916,5919,591A,591C,591F,5924,5925,5927,5929,592A,592B,592D,592E,592F,5931,5934,5937,5938,5939,593A,593C,5941,5942,5944,5947,5948,5949,594B,594E,594F,5951,5954,5955,5956,5957,5958,595A,5960,5962,5965,5973,5974,5976,5978,5979,597D,5981,5982,5983,5984,5986,5987,5988,598A,598D,5992,5993,5996,5997,5999,599E,59A3,59A4,59A5,59A8,59A9,59AA,59AB,59AE,59AF,59B2,59B9,59BB,59BE,59C6,59CA,59CB,59D0,59D1,59D2,59D3,59D4,59D7,59D8,59DA,59DC,59DD,59E3,59E5,59E8,59EC,59F9,59FB,59FF,5A01,5A03,5A04,5A05,5A06,5A07,5A08,5A09,5A0C,5A11,5A13,5A18,5A1C,5A1F,5A20,5A23,5A25,5A29,5A31,5A32,5A34,5A36,5A3C,5A40,5A46,5A49,5A4A,5A55,5A5A,5A62,5A67,5A6A,5A74,5A75,5A76,5A77,5A7A,5A7F,5A92,5A9A,5A9B,5AAA,5AB2,5AB3,5AB5,5AB8,5ABE,5AC1,5AC2,5AC9,5ACC,5AD2,5AD4,5AD6,5AD8,5ADC,5AE0,5AE1,5AE3,5AE6,5AE9,5AEB,5AF1,5B09,5B16,5B17,5B32,5B34,5B37,5B40,5B50,5B51,5B53,5B54,5B55,5B57,5B58,5B59,5B5A,5B5B,5B5C,5B5D,5B5F,5B62,5B63,5B64,5B65,5B66,5B69,5B6A,5B6C,5B70,5B71,5B73,5B75,5B7A,5B7D,5B80,5B81,5B83,5B84,5B85,5B87,5B88,5B89,5B8B,5B8C,5B8F,5B93,5B95,5B97,5B98,5B99,5B9A,5B9B,5B9C,5B9D,5B9E,5BA0,5BA1,5BA2,5BA3,5BA4,5BA5,5BA6,5BAA,5BAB,5BB0,5BB3,5BB4,5BB5,5BB6,5BB8,5BB9,5BBD,5BBE,5BBF,5BC2,5BC4,5BC5,5BC6,5BC7,5BCC,5BD0,5BD2,5BD3,5BDD,5BDE,5BDF,5BE1,5BE4,5BE5,5BE8,5BEE,5BF0,5BF8,5BF9,5BFA,5BFB,5BFC,5BFF,5C01,5C04,5C06,5C09,5C0A,5C0F,5C11,5C14,5C15,5C16,5C18,5C1A,5C1C,5C1D,5C22,5C24,5C25,5C27,5C2C,5C31,5C34,5C38,5C39,5C3A,5C3B,5C3C,5C3D,5C3E,5C3F,5C40,5C41,5C42,5C45,5C48,5C49,5C4A,5C4B,5C4E,5C4F,5C50,5C51,5C55,5C59,5C5E,5C60,5C61,5C63,5C65,5C66,5C6E,5C6F,5C71,5C79,5C7A,5C7F,5C81,5C82,5C88,5C8C,5C8D,5C90,5C91,5C94,5C96,5C97,5C98,5C99,5C9A,5C9B,5C9C,5CA2,5CA3,5CA9,5CAB,5CAC,5CAD,5CB1,5CB3,5CB5,5CB7,5CB8,5CBD,5CBF,5CC1,5CC4,5CCB,5CD2,5CD9,5CE1,5CE4,5CE5,5CE6,5CE8,5CEA,5CED,5CF0,5CFB,5D02,5D03,5D06,5D07,5D0E,5D14,5D16,5D1B,5D1E,5D24,5D26,5D27,5D29,5D2D,5D2E,5D34,5D3D,5D3E,5D47,5D4A,5D4B,5D4C,5D58,5D5B,5D5D,5D69,5D6B,5D6C,5D6F,5D74,5D82,5D99,5D9D,5DB7,5DC5,5DCD,5DDB,5DDD,5DDE,5DE1,5DE2,5DE5,5DE6,5DE7,5DE8,5DE9,5DEB,5DEE,5DEF,5DF1,5DF2,5DF3,5DF4,5DF7,5DFD,5DFE,5E01,5E02,5E03,5E05,5E06,5E08,5E0C,5E0F,5E10,5E11,5E14,5E15,5E16,5E18,5E19,5E1A,5E1B,5E1C,5E1D,5E26,5E27,5E2D,5E2E,5E31,5E37,5E38,5E3B,5E3C,5E3D,5E42,5E44,5E45,5E4C,5E54,5E55,5E5B,5E5E,5E61,5E62,5E72,5E73,5E74,5E76,5E78,5E7A,5E7B,5E7C,5E7D,5E7F,5E80,5E84,5E86,5E87,5E8A,5E8B,5E8F,5E90,5E91,5E93,5E94,5E95,5E96,5E97,5E99,5E9A,5E9C,5E9E,5E9F,5EA0,5EA5,5EA6,5EA7,5EAD,5EB3,5EB5,5EB6,5EB7,5EB8,5EB9,5EBE,5EC9,5ECA,5ED1,5ED2,5ED3,5ED6,5EDB,5EE8,5EEA,5EF4,5EF6,5EF7,5EFA,5EFE,5EFF,5F00,5F01,5F02,5F03,5F04,5F08,5F0A,5F0B,5F0F,5F11,5F13,5F15,5F17,5F18,5F1B,5F1F,5F20,5F25,5F26,5F27,5F29,5F2A,5F2D,5F2F,5F31,5F39,5F3A,5F3C,5F40,5F50,5F52,5F53,5F55,5F56,5F57,5F58,5F5D,5F61,5F62,5F64,5F66,5F69,5F6A,5F6C,5F6D,5F70,5F71,5F73,5F77,5F79,5F7B,5F7C,5F80,5F81,5F82,5F84,5F85,5F87,5F88,5F89,5F8A,5F8B,5F8C,5F90,5F92,5F95,5F97,5F98,5F99,5F9C,5FA1,5FA8,5FAA,5FAD,5FAE,5FB5,5FB7,5FBC,5FBD,5FC3,5FC4,5FC5,5FC6,5FC9,5FCC,5FCD,5FCF,5FD0,5FD1,5FD2,5FD6,5FD7,5FD8,5FD9,5FDD,5FE0,5FE1,5FE4,5FE7,5FEA,5FEB,5FED,5FEE,5FF1,5FF5,5FF8,5FFB,5FFD,5FFE,5FFF,6000,6001,6002,6003,6004,6005,6006,600A,600D,600E,600F,6012,6014,6015,6016,6019,601B,601C,601D,6020,6021,6025,6026,6027,6028,6029,602A,602B,602F,6035,603B,603C,603F,6041,6042,6043,604B,604D,6050,6052,6055,6059,605A,605D,6062,6063,6064,6067,6068,6069,606A,606B,606C,606D,606F,6070,6073,6076,6078,6079,607A,607B,607C,607D,607F,6083,6084,6089,608C,608D,6092,6094,6096,609A,609B,609D,609F,60A0,60A3,60A6,60A8,60AB,60AC,60AD,60AF,60B1,60B2,60B4,60B8,60BB,60BC,60C5,60C6,60CA,60CB,60D1,60D5,60D8,60DA,60DC,60DD,60DF,60E0,60E6,60E7,60E8,60E9,60EB,60EC,60ED,60EE,60EF,60F0,60F3,60F4,60F6,60F9,60FA,6100,6101,6106,6108,6109,610D,610E,610F,6115,611A,611F,6120,6123,6124,6126,6127,612B,613F,6148,614A,614C,614E,6151,6155,615D,6162,6167,6168,6170,6175,6177,618B,618E,6194,619D,61A7,61A8,61A9,61AC,61B7,61BE,61C2,61C8,61CA,61CB,61D1,61D2,61D4,61E6,61F5,61FF,6206,6208,620A,620B,620C,620D,620E,620F,6210,6211,6212,6215,6216,6217,6218,621A,621B,621F,6221,6222,6224,6225,622A,622C,622E,6233,6234,6237,623D,623E,623F,6240,6241,6243,6247,6248,6249,624B,624C,624D,624E,6251,6252,6253,6254,6258,625B,6263,6266,6267,6269,626A,626B,626C,626D,626E,626F,6270,6273,6276,6279,627C,627E,627F,6280,6284,6289,628A,6291,6292,6293,6295,6296,6297,6298,629A,629B,629F,62A0,62A1,62A2,62A4,62A5,62A8,62AB,62AC,62B1,62B5,62B9,62BB,62BC,62BD,62BF,62C2,62C4,62C5,62C6,62C7,62C8,62C9,62CA,62CC,62CD,62CE,62D0,62D2,62D3,62D4,62D6,62D7,62D8,62D9,62DA,62DB,62DC,62DF,62E2,62E3,62E5,62E6,62E7,62E8,62E9,62EC,62ED,62EE,62EF,62F1,62F3,62F4,62F6,62F7,62FC,62FD,62FE,62FF,6301,6302,6307,6308,6309,630E,6311,6316,631A,631B,631D,631E,631F,6320,6321,6322,6323,6324,6325,6328,632A,632B,632F,6332,6339,633A,633D,6342,6343,6345,6346,6349,634B,634C,634D,634E,634F,6350,6355,635E,635F,6361,6362,6363,6367,6369,636D,636E,6371,6376,6377,637A,637B,6380,6382,6387,6388,6389,638A,638C,638E,638F,6390,6392,6396,6398,63A0,63A2,63A3,63A5,63A7,63A8,63A9,63AA,63AC,63AD,63AE,63B0,63B3,63B4,63B7,63B8,63BA,63BC,63BE,63C4,63C6,63C9,63CD,63CE,63CF,63D0,63D2,63D6,63DE,63E0,63E1,63E3,63E9,63EA,63ED,63F2,63F4,63F6,63F8,63FD,63FF,6400,6401,6402,6405,640B,640C,640F,6410,6413,6414,641B,641C,641E,6420,6421,6426,642A,642C,642D,6434,643A,643D,643F,6441,6444,6445,6446,6447,6448,644A,6452,6454,6458,645E,6467,6469,646D,6478,6479,647A,6482,6484,6485,6487,6491,6492,6495,6496,6499,649E,64A4,64A9,64AC,64AD,64AE,64B0,64B5,64B7,64B8,64BA,64BC,64C0,64C2,64C5,64CD,64CE,64D0,64D2,64D7,64D8,64DE,64E2,64E4,64E6,6500,6509,6512,6518,6525,652B,652E,652F,6534,6535,6536,6538,6539,653B,653E,653F,6545,6548,6549,654C,654F,6551,6555,6556,6559,655B,655D,655E,6562,6563,6566,656B,656C,6570,6572,6574,6577,6587,658B,658C,6590,6591,6593,6597,6599,659B,659C,659F,65A1,65A4,65A5,65A7,65A9,65AB,65AD,65AF,65B0,65B9,65BC,65BD,65C1,65C3,65C4,65C5,65C6,65CB,65CC,65CE,65CF,65D2,65D6,65D7,65E0,65E2,65E5,65E6,65E7,65E8,65E9,65EC,65ED,65EE,65EF,65F0,65F1,65F6,65F7,65FA,6600,6602,6603,6606,660A,660C,660E,660F,6613,6614,6615,6619,661D,661F,6620,6625,6627,6628,662D,662F,6631,6634,6635,6636,663C,663E,6641,6643,664B,664C,664F,6652,6653,6654,6655,6656,6657,665A,665F,6661,6664,6666,6668,666E,666F,6670,6674,6676,6677,667A,667E,6682,6684,6687,668C,6691,6696,6697,669D,66A7,66A8,66AE,66B4,66B9,66BE,66D9,66DB,66DC,66DD,66E6,66E9,66F0,66F2,66F3,66F4,66F7,66F9,66FC,66FE,66FF,6700,6708,6709,670A,670B,670D,6710,6714,6715,6717,671B,671D,671F,6726,6728,672A,672B,672C,672D,672F,6731,6734,6735,673A,673D,6740,6742,6743,6746,6748,6749,674C,674E,674F,6750,6751,6753,6756,675C,675E,675F,6760,6761,6765,6768,6769,676A,676D,676F,6770,6772,6773,6775,6777,677C,677E,677F,6781,6784,6787,6789,678B,6790,6795,6797,6798,679A,679C,679D,679E,67A2,67A3,67A5,67A7,67A8,67AA,67AB,67AD,67AF,67B0,67B3,67B5,67B6,67B7,67B8,67C1,67C3,67C4,67CF,67D0,67D1,67D2,67D3,67D4,67D8,67D9,67DA,67DC,67DD,67DE,67E0,67E2,67E5,67E9,67EC,67EF,67F0,67F1,67F3,67F4,67FD,67FF,6800,6805,6807,6808,6809,680A,680B,680C,680E,680F,6811,6813,6816,6817,681D,6821,6829,682A,6832,6833,6837,6838,6839,683C,683D,683E,6840,6841,6842,6843,6844,6845,6846,6848,6849,684A,684C,684E,6850,6851,6853,6854,6855,6860,6861,6862,6863,6864,6865,6866,6867,6868,6869,686B,6874,6876,6877,6881,6883,6885,6886,688F,6893,6897,68A2,68A6,68A7,68A8,68AD,68AF,68B0,68B3,68B5,68C0,68C2,68C9,68CB,68CD,68D2,68D5,68D8,68DA,68E0,68E3,68EE,68F0,68F1,68F5,68F9,68FA,68FC,6901,6905,690B,690D,690E,6910,6912,691F,6920,6924,692D,6930,6934,6939,693D,693F,6942,6954,6957,695A,695D,695E,6960,6963,6966,696B,696E,6971,6977,6978,6979,697C,6980,6982,6984,6986,6987,6988,6989,698D,6994,6995,6998,699B,699C,69A7,69A8,69AB,69AD,69B1,69B4,69B7,69BB,69C1,69CA,69CC,69CE,69D0,69D4,69DB,69DF,69E0,69ED,69F2,69FD,69FF,6A0A,6A17,6A18,6A1F,6A21,6A28,6A2A,6A2F,6A31,6A35,6A3D,6A3E,6A44,6A47,6A50,6A58,6A59,6A5B,6A61,6A65,6A71,6A79,6A7C,6A80,6A84,6A8E,6A90,6A91,6A97,6AA0,6AA9,6AAB,6AAC,6B20,6B21,6B22,6B23,6B24,6B27,6B32,6B37,6B39,6B3A,6B3E,6B43,6B46,6B47,6B49,6B4C,6B59,6B62,6B63,6B64,6B65,6B66,6B67,6B6A,6B79,6B7B,6B7C,6B81,6B82,6B83,6B84,6B86,6B87,6B89,6B8A,6B8B,6B8D,6B92,6B93,6B96,6B9A,6B9B,6BA1,6BAA,6BB3,6BB4,6BB5,6BB7,6BBF,6BC1,6BC2,6BC5,6BCB,6BCD,6BCF,6BD2,6BD3,6BD4,6BD5,6BD6,6BD7,6BD9,6BDB,6BE1,6BEA,6BEB,6BEF,6BF3,6BF5,6BF9,6BFD,6C05,6C06,6C07,6C0D,6C0F,6C10,6C11,6C13,6C14,6C15,6C16,6C18,6C19,6C1A,6C1B,6C1F,6C21,6C22,6C24,6C26,6C27,6C28,6C29,6C2A,6C2E,6C2F,6C30,6C32,6C34,6C35,6C38,6C3D,6C40,6C41,6C42,6C46,6C47,6C49,6C4A,6C50,6C54,6C55,6C57,6C5B,6C5C,6C5D,6C5E,6C5F,6C60,6C61,6C64,6C68,6C69,6C6A,6C70,6C72,6C74,6C76,6C79,6C7D,6C7E,6C81,6C82,6C83,6C85,6C86,6C88,6C89,6C8C,6C8F,6C90,6C93,6C94,6C99,6C9B,6C9F,6CA1,6CA3,6CA4,6CA5,6CA6,6CA7,6CA9,6CAA,6CAB,6CAD,6CAE,6CB1,6CB2,6CB3,6CB8,6CB9,6CBB,6CBC,6CBD,6CBE,6CBF,6CC4,6CC5,6CC9,6CCA,6CCC,6CD0,6CD3,6CD4,6CD5,6CD6,6CD7,6CDB,6CDE,6CE0,6CE1,6CE2,6CE3,6CE5,6CE8,6CEA,6CEB,6CEE,6CEF,6CF0,6CF1,6CF3,6CF5,6CF6,6CF7,6CF8,6CFA,6CFB,6CFC,6CFD,6CFE,6D01,6D04,6D07,6D0B,6D0C,6D0E,6D12,6D17,6D19,6D1A,6D1B,6D1E,6D25,6D27,6D2A,6D2B,6D2E,6D31,6D32,6D33,6D35,6D39,6D3B,6D3C,6D3D,6D3E,6D41,6D43,6D45,6D46,6D47,6D48,6D4A,6D4B,6D4D,6D4E,6D4F,6D51,6D52,6D53,6D54,6D59,6D5A,6D5C,6D5E,6D60,6D63,6D66,6D69,6D6A,6D6E,6D6F,6D74,6D77,6D78,6D7C,6D82,6D85,6D88,6D89,6D8C,6D8E,6D91,6D93,6D94,6D95,6D9B,6D9D,6D9E,6D9F,6DA0,6DA1,6DA3,6DA4,6DA6,6DA7,6DA8,6DA9,6DAA,6DAB,6DAE,6DAF,6DB2,6DB5,6DB8,6DBF,6DC0,6DC4,6DC5,6DC6,6DC7,6DCB,6DCC,6DD1,6DD6,6DD8,6DD9,6DDD,6DDE,6DE0,6DE1,6DE4,6DE6,6DEB,6DEC,6DEE,6DF1,6DF3,6DF7,6DF9,6DFB,6DFC,6E05,6E0A,6E0C,6E0D,6E0E,6E10,6E11,6E14,6E16,6E17,6E1A,6E1D,6E20,6E21,6E23,6E24,6E25,6E29,6E2B,6E2D,6E2F,6E32,6E34,6E38,6E3A,6E43,6E44,6E4D,6E4E,6E53,6E54,6E56,6E58,6E5B,6E5F,6E6B,6E6E,6E7E,6E7F,6E83,6E85,6E86,6E89,6E8F,6E90,6E98,6E9C,6E9F,6EA2,6EA5,6EA7,6EAA,6EAF,6EB1,6EB2,6EB4,6EB6,6EB7,6EBA,6EBB,6EBD,6EC1,6EC2,6EC7,6ECB,6ECF,6ED1,6ED3,6ED4,6ED5,6ED7,6EDA,6EDE,6EDF,6EE0,6EE1,6EE2,6EE4,6EE5,6EE6,6EE8,6EE9,6EF4,6EF9,6F02,6F06,6F09,6F0F,6F13,6F14,6F15,6F20,6F24,6F29,6F2A,6F2B,6F2D,6F2F,6F31,6F33,6F36,6F3E,6F46,6F47,6F4B,6F4D,6F58,6F5C,6F5E,6F62,6F66,6F6D,6F6E,6F72,6F74,6F78,6F7A,6F7C,6F84,6F88,6F89,6F8C,6F8D,6F8E,6F9C,6FA1,6FA7,6FB3,6FB6,6FB9,6FC0,6FC2,6FC9,6FD1,6FD2,6FDE,6FE0,6FE1,6FEE,6FEF,7011,701A,701B,7023,7035,7039,704C,704F,705E,706B,706C,706D,706F,7070,7075,7076,7078,707C,707E,707F,7080,7085,7089,708A,708E,7092,7094,7095,7096,7099,709C,709D,70AB,70AC,70AD,70AE,70AF,70B1,70B3,70B7,70B8,70B9,70BB,70BC,70BD,70C0,70C1,70C2,70C3,70C8,70CA,70D8,70D9,70DB,70DF,70E4,70E6,70E7,70E8,70E9,70EB,70EC,70ED,70EF,70F7,70F9,70FD,7109,710A,7110,7113,7115,7116,7118,7119,711A,7126,712F,7130,7131,7136,7145,714A,714C,714E,715C,715E,7164,7166,7167,7168,716E,7172,7173,7178,717A,717D,7184,718A,718F,7194,7198,7199,719F,71A0,71A8,71AC,71B3,71B5,71B9,71C3,71CE,71D4,71D5,71E0,71E5,71E7,71EE,71F9,7206,721D,7228,722A,722C,7230,7231,7235,7236,7237,7238,7239,723B,723D,723F,7247,7248,724C,724D,7252,7256,7259,725B,725D,725F,7261,7262,7266,7267,7269,726E,726F,7272,7275,7279,727A,727E,727F,7280,7281,7284,728A,728B,728D,728F,7292,729F,72AC,72AD,72AF,72B0,72B4,72B6,72B7,72B8,72B9,72C1,72C2,72C3,72C4,72C8,72CD,72CE,72D0,72D2,72D7,72D9,72DE,72E0,72E1,72E8,72E9,72EC,72ED,72EE,72EF,72F0,72F1,72F2,72F3,72F4,72F7,72F8,72FA,72FB,72FC,7301,7303,730A,730E,7313,7315,7316,7317,731B,731C,731D,731E,7321,7322,7325,7329,732A,732B,732C,732E,7331,7334,7337,7338,7339,733E,733F,734D,7350,7352,7357,7360,736C,736D,736F,737E,7384,7387,7389,738B,738E,7391,7396,739B,739F,73A2,73A9,73AB,73AE,73AF,73B0,73B2,73B3,73B7,73BA,73BB,73C0,73C2,73C8,73C9,73CA,73CD,73CF,73D0,73D1,73D9,73DE,73E0,73E5,73E7,73E9,73ED,73F2,7403,7405,7406,7409,740A,740F,7410,741A,741B,7422,7425,7426,7428,742A,742C,742E,7430,7433,7434,7435,7436,743C,7441,7455,7457,7459,745A,745B,745C,745E,745F,746D,7470,7476,7477,747E,7480,7481,7483,7487,748B,748E,7490,749C,749E,74A7,74A8,74A9,74BA,74D2,74DC,74DE,74E0,74E2,74E3,74E4,74E6,74EE,74EF,74F4,74F6,74F7,74FF,7504,750D,750F,7511,7513,7518,7519,751A,751C,751F,7525,7528,7529,752B,752C,752D,752F,7530,7531,7532,7533,7535,7537,7538,753A,753B,753E,7540,7545,7548,754B,754C,754E,754F,7554,7559,755A,755B,755C,7565,7566,756A,7572,7574,7578,7579,757F,7583,7586,758B,758F,7591,7592,7594,7596,7597,7599,759A,759D,759F,75A0,75A1,75A3,75A4,75A5,75AB,75AC,75AE,75AF,75B0,75B1,75B2,75B3,75B4,75B5,75B8,75B9,75BC,75BD,75BE,75C2,75C3,75C4,75C5,75C7,75C8,75C9,75CA,75CD,75D2,75D4,75D5,75D6,75D8,75DB,75DE,75E2,75E3,75E4,75E6,75E7,75E8,75EA,75EB,75F0,75F1,75F4,75F9,75FC,75FF,7600,7601,7603,7605,760A,760C,7610,7615,7617,7618,7619,761B,761F,7620,7622,7624,7625,7626,7629,762A,762B,762D,7630,7633,7634,7635,7638,763C,763E,763F,7640,7643,764C,764D,7654,7656,765C,765E,7663,766B,766F,7678,767B,767D,767E,7682,7684,7686,7687,7688,768B,768E,7691,7693,7696,7699,76A4,76AE,76B1,76B2,76B4,76BF,76C2,76C5,76C6,76C8,76CA,76CD,76CE,76CF,76D0,76D1,76D2,76D4,76D6,76D7,76D8,76DB,76DF,76E5,76EE,76EF,76F1,76F2,76F4,76F8,76F9,76FC,76FE,7701,7704,7707,7708,7709,770B,770D,7719,771A,771F,7720,7722,7726,7728,7729,772D,772F,7735,7736,7737,7738,773A,773C,7740,7741,7743,7747,7750,7751,775A,775B,7761,7762,7763,7765,7766,7768,776B,776C,7779,777D,777E,777F,7780,7784,7785,778C,778D,778E,7791,7792,779F,77A0,77A2,77A5,77A7,77A9,77AA,77AC,77B0,77B3,77B5,77BB,77BD,77BF,77CD,77D7,77DB,77DC,77E2,77E3,77E5,77E7,77E9,77EB,77EC,77ED,77EE,77F3,77F6,77F8,77FD,77FE,77FF,7800,7801,7802,7809,780C,780D,7811,7812,7814,7816,7817,7818,781A,781C,781D,781F,7823,7825,7826,7827,7829,782C,782D,7830,7834,7837,7838,7839,783A,783B,783C,783E,7840,7845,7847,784C,784E,7850,7852,7855,7856,7857,785D,786A,786B,786C,786D,786E,7877,787C,7887,7889,788C,788D,788E,7891,7893,7897,7898,789A,789B,789C,789F,78A1,78A3,78A5,78A7,78B0,78B1,78B2,78B3,78B4,78B9,78BE,78C1,78C5,78C9,78CA,78CB,78D0,78D4,78D5,78D9,78E8,78EC,78F2,78F4,78F7,78FA,7901,7905,7913,791E,7924,7934,793A,793B,793C,793E,7940,7941,7946,7948,7949,7953,7956,7957,795A,795B,795C,795D,795E,795F,7960,7962,7965,7967,7968,796D,796F,7977,7978,797A,7980,7981,7984,7985,798A,798F,799A,79A7,79B3,79B9,79BA,79BB,79BD,79BE,79C0,79C1,79C3,79C6,79C9,79CB,79CD,79D1,79D2,79D5,79D8,79DF,79E3,79E4,79E6,79E7,79E9,79EB,79ED,79EF,79F0,79F8,79FB,79FD,7A00,7A02,7A03,7A06,7A0B,7A0D,7A0E,7A14,7A17,7A1A,7A1E,7A20,7A23,7A33,7A37,7A39,7A3B,7A3C,7A3D,7A3F,7A46,7A51,7A57,7A70,7A74,7A76,7A77,7A78,7A79,7A7A,7A7F,7A80,7A81,7A83,7A84,7A86,7A88,7A8D,7A91,7A92,7A95,7A96,7A97,7A98,7A9C,7A9D,7A9F,7AA0,7AA5,7AA6,7AA8,7AAC,7AAD,7AB3,7ABF,7ACB,7AD6,7AD9,7ADE,7ADF,7AE0,7AE3,7AE5,7AE6,7AED,7AEF,7AF9,7AFA,7AFD,7AFF,7B03,7B04,7B06,7B08,7B0A,7B0B,7B0F,7B11,7B14,7B15,7B19,7B1B,7B1E,7B20,7B24,7B25,7B26,7B28,7B2A,7B2B,7B2C,7B2E,7B31,7B33,7B38,7B3A,7B3C,7B3E,7B45,7B47,7B49,7B4B,7B4C,7B4F,7B50,7B51,7B52,7B54,7B56,7B58,7B5A,7B5B,7B5D,7B60,7B62,7B6E,7B71,7B72,7B75,7B77,7B79,7B7B,7B7E,7B80,7B85,7B8D,7B90,7B94,7B95,7B97,7B9C,7B9D,7BA1,7BA2,7BA6,7BA7,7BA8,7BA9,7BAA,7BAB,7BAC,7BAD,7BB1,7BB4,7BB8,7BC1,7BC6,7BC7,7BCC,7BD1,7BD3,7BD9,7BDA,7BDD,7BE1,7BE5,7BE6,7BEA,7BEE,7BF1,7BF7,7BFC,7BFE,7C07,7C0B,7C0C,7C0F,7C16,7C1F,7C26,7C27,7C2A,7C38,7C3F,7C40,7C41,7C4D,7C73,7C74,7C7B,7C7C,7C7D,7C89,7C91,7C92,7C95,7C97,7C98,7C9C,7C9D,7C9E,7C9F,7CA2,7CA4,7CA5,7CAA,7CAE,7CB1,7CB2,7CB3,7CB9,7CBC,7CBD,7CBE,7CC1,7CC5,7CC7,7CC8,7CCA,7CCC,7CCD,7CD5,7CD6,7CD7,7CD9,7CDC,7CDF,7CE0,7CE8,7CEF,7CF8,7CFB,7D0A,7D20,7D22,7D27,7D2B,7D2F,7D6E,7D77,7DA6,7DAE,7E3B,7E41,7E47,7E82,7E9B,7E9F,7EA0,7EA1,7EA2,7EA3,7EA4,7EA5,7EA6,7EA7,7EA8,7EA9,7EAA,7EAB,7EAC,7EAD,7EAF,7EB0,7EB1,7EB2,7EB3,7EB5,7EB6,7EB7,7EB8,7EB9,7EBA,7EBD,7EBE,7EBF,7EC0,7EC1,7EC2,7EC3,7EC4,7EC5,7EC6,7EC7,7EC8,7EC9,7ECA,7ECB,7ECC,7ECD,7ECE,7ECF,7ED0,7ED1,7ED2,7ED3,7ED4,7ED5,7ED7,7ED8,7ED9,7EDA,7EDB,7EDC,7EDD,7EDE,7EDF,7EE0,7EE1,7EE2,7EE3,7EE5,7EE6,7EE7,7EE8,7EE9,7EEA,7EEB,7EED,7EEE,7EEF,7EF0,7EF1,7EF2,7EF3,7EF4,7EF5,7EF6,7EF7,7EF8,7EFA,7EFB,7EFC,7EFD,7EFE,7EFF,7F00,7F01,7F02,7F03,7F04,7F05,7F06,7F07,7F08,7F09,7F0B,7F0C,7F0D,7F0E,7F0F,7F11,7F12,7F13,7F14,7F15,7F16,7F17,7F18,7F19,7F1A,7F1B,7F1C,7F1D,7F1F,7F20,7F21,7F22,7F23,7F24,7F25,7F26,7F27,7F28,7F29,7F2A,7F2B,7F2C,7F2D,7F2E,7F2F,7F30,7F31,7F32,7F33,7F34,7F35,7F36,7F38,7F3A,7F42,7F44,7F45,7F50,7F51,7F54,7F55,7F57,7F58,7F5A,7F5F,7F61,7F62,7F68,7F69,7F6A,7F6E,7F71,7F72,7F74,7F79,7F7E,7F81,7F8A,7F8C,7F8E,7F94,7F9A,7F9D,7F9E,7F9F,7FA1,7FA4,7FA7,7FAF,7FB0,7FB2,7FB8,7FB9,7FBC,7FBD,7FBF,7FC1,7FC5,7FCA,7FCC,7FCE,7FD4,7FD5,7FD8,7FDF,7FE0,7FE1,7FE5,7FE6,7FE9,7FEE,7FF0,7FF1,7FF3,7FFB,7FFC,8000,8001,8003,8004,8005,8006,800B,800C,800D,8010,8012,8014,8015,8016,8017,8018,8019,801C,8020,8022,8025,8026,8027,8028,8029,802A,8031,8033,8035,8036,8037,8038,803B,803D,803F,8042,8043,8046,804A,804B,804C,804D,8052,8054,8058,805A,8069,806A,8071,807F,8080,8083,8084,8086,8087,8089,808B,808C,8093,8096,8098,809A,809B,809C,809D,809F,80A0,80A1,80A2,80A4,80A5,80A9,80AA,80AB,80AD,80AE,80AF,80B1,80B2,80B4,80B7,80BA,80BC,80BD,80BE,80BF,80C0,80C1,80C2,80C3,80C4,80C6,80CC,80CD,80CE,80D6,80D7,80D9,80DA,80DB,80DC,80DD,80DE,80E1,80E4,80E5,80E7,80E8,80E9,80EA,80EB,80EC,80ED,80EF,80F0,80F1,80F2,80F3,80F4,80F6,80F8,80FA,80FC,80FD,8102,8106,8109,810A,810D,810E,810F,8110,8111,8112,8113,8114,8116,8118,811A,811E,812C,812F,8131,8132,8136,8138,813E,8146,8148,814A,814B,814C,8150,8151,8153,8154,8155,8159,815A,8160,8165,8167,8169,816D,816E,8170,8171,8174,8179,817A,817B,817C,817D,817E,817F,8180,8182,8188,818A,818F,8191,8198,819B,819C,819D,81A3,81A6,81A8,81AA,81B3,81BA,81BB,81C0,81C1,81C2,81C3,81C6,81CA,81CC,81E3,81E7,81EA,81EC,81ED,81F3,81F4,81FB,81FC,81FE,8200,8201,8202,8204,8205,8206,820C,820D,8210,8212,8214,821B,821C,821E,821F,8221,8222,8223,8228,822A,822B,822C,822D,822F,8230,8231,8233,8234,8235,8236,8237,8238,8239,823B,823E,8244,8247,8249,824B,824F,8258,825A,825F,8268,826E,826F,8270,8272,8273,8274,8279,827A,827D,827E,827F,8282,8284,8288,828A,828B,828D,828E,828F,8291,8292,8297,8298,8299,829C,829D,829F,82A1,82A4,82A5,82A6,82A8,82A9,82AA,82AB,82AC,82AD,82AE,82AF,82B0,82B1,82B3,82B4,82B7,82B8,82B9,82BD,82BE,82C1,82C4,82C7,82C8,82CA,82CB,82CC,82CD,82CE,82CF,82D1,82D2,82D3,82D4,82D5,82D7,82D8,82DB,82DC,82DE,82DF,82E0,82E1,82E3,82E4,82E5,82E6,82EB,82EF,82F1,82F4,82F7,82F9,82FB,8301,8302,8303,8304,8305,8306,8307,8308,8309,830C,830E,830F,8311,8314,8315,8317,831A,831B,831C,8327,8328,832B,832C,832D,832F,8331,8333,8334,8335,8336,8338,8339,833A,833C,8340,8343,8346,8347,8349,834F,8350,8351,8352,8354,835A,835B,835C,835E,835F,8360,8361,8363,8364,8365,8366,8367,8368,8369,836A,836B,836C,836D,836E,836F,8377,8378,837B,837C,837D,8385,8386,8389,838E,8392,8393,8398,839B,839C,839E,83A0,83A8,83A9,83AA,83AB,83B0,83B1,83B2,83B3,83B4,83B6,83B7,83B8,83B9,83BA,83BC,83BD,83C0,83C1,83C5,83C7,83CA,83CC,83CF,83D4,83D6,83D8,83DC,83DD,83DF,83E0,83E1,83E5,83E9,83EA,83F0,83F1,83F2,83F8,83F9,83FD,8401,8403,8404,8406,840B,840C,840D,840E,840F,8411,8418,841C,841D,8424,8425,8426,8427,8428,8431,8438,843C,843D,8446,8451,8457,8459,845A,845B,845C,8461,8463,8469,846B,846C,846D,8471,8473,8475,8476,8478,847A,8482,8487,8488,8489,848B,848C,848E,8497,8499,849C,84A1,84AF,84B2,84B4,84B8,84B9,84BA,84BD,84BF,84C1,84C4,84C9,84CA,84CD,84D0,84D1,84D3,84D6,84DD,84DF,84E0,84E3,84E5,84E6,84EC,84F0,84FC,84FF,850C,8511,8513,8517,851A,851F,8521,852B,852C,8537,8538,8539,853A,853B,853C,853D,8543,8548,8549,854A,8556,8559,855E,8564,8568,8572,8574,8579,857A,857B,857E,8584,8585,8587,858F,859B,859C,85A4,85A8,85AA,85AE,85AF,85B0,85B7,85B9,85C1,85C9,85CF,85D0,85D3,85D5,85DC,85E4,85E9,85FB,85FF,8605,8611,8616,8627,8629,8638,863C,864D,864E,864F,8650,8651,8654,865A,865E,8662,866B,866C,866E,8671,8679,867A,867B,867C,867D,867E,867F,8680,8681,8682,868A,868B,868C,868D,8693,8695,869C,869D,86A3,86A4,86A7,86A8,86A9,86AA,86AC,86AF,86B0,86B1,86B4,86B5,86B6,86BA,86C0,86C4,86C6,86C7,86C9,86CA,86CB,86CE,86CF,86D0,86D1,86D4,86D8,86D9,86DB,86DE,86DF,86E4,86E9,86ED,86EE,86F0,86F1,86F2,86F3,86F4,86F8,86F9,86FE,8700,8702,8703,8707,8708,8709,870A,870D,8712,8713,8715,8717,8718,871A,871C,871E,8721,8722,8723,8725,8729,872E,8731,8734,8737,873B,873E,873F,8747,8748,8749,874C,874E,8753,8757,8759,8760,8763,8764,8765,876E,8770,8774,8776,877B,877C,877D,877E,8782,8783,8785,8788,878B,878D,8793,8797,879F,87A8,87AB,87AC,87AD,87AF,87B3,87B5,87BA,87BD,87C0,87C6,87CA,87CB,87D1,87D2,87D3,87DB,87E0,87E5,87EA,87EE,87F9,87FE,8803,880A,8813,8815,8816,881B,8821,8822,8832,8839,883C,8840,8844,8845,884C,884D,8854,8857,8859,8861,8862,8863,8864,8865,8868,8869,886B,886C,886E,8870,8872,8877,887D,887E,887F,8881,8882,8884,8885,8888,888B,888D,8892,8896,889C,88A2,88A4,88AB,88AD,88B1,88B7,88BC,88C1,88C2,88C5,88C6,88C9,88CE,88D2,88D4,88D5,88D8,88D9,88DF,88E2,88E3,88E4,88E5,88E8,88F0,88F1,88F3,88F4,88F8,88F9,88FC,88FE,8902,890A,8910,8912,8913,8919,891A,891B,8921,8925,892A,892B,8930,8934,8936,8941,8944,895E,895F,8966,897B,897F,8981,8983,8986,89C1,89C2,89C4,89C5,89C6,89C7,89C8,89C9,89CA,89CB,89CC,89CE,89CF,89D0,89D1,89D2,89D6,89DA,89DC,89DE,89E3,89E5,89E6,89EB,89EF,89F3,8A00,8A07,8A3E,8A48,8A79,8A89,8A8A,8A93,8B07,8B26,8B66,8B6C,8BA0,8BA1,8BA2,8BA3,8BA4,8BA5,8BA6,8BA7,8BA8,8BA9,8BAA,8BAB,8BAD,8BAE,8BAF,8BB0,8BB2,8BB3,8BB4,8BB5,8BB6,8BB7,8BB8,8BB9,8BBA,8BBC,8BBD,8BBE,8BBF,8BC0,8BC1,8BC2,8BC3,8BC4,8BC5,8BC6,8BC8,8BC9,8BCA,8BCB,8BCC,8BCD,8BCE,8BCF,8BD1,8BD2,8BD3,8BD4,8BD5,8BD6,8BD7,8BD8,8BD9,8BDA,8BDB,8BDC,8BDD,8BDE,8BDF,8BE0,8BE1,8BE2,8BE3,8BE4,8BE5,8BE6,8BE7,8BE8,8BE9,8BEB,8BEC,8BED,8BEE,8BEF,8BF0,8BF1,8BF2,8BF3,8BF4,8BF5,8BF6,8BF7,8BF8,8BF9,8BFA,8BFB,8BFC,8BFD,8BFE,8BFF,8C00,8C01,8C02,8C03,8C04,8C05,8C06,8C07,8C08,8C0A,8C0B,8C0C,8C0D,8C0E,8C0F,8C10,8C11,8C12,8C13,8C14,8C15,8C16,8C17,8C18,8C19,8C1A,8C1B,8C1C,8C1D,8C1F,8C20,8C21,8C22,8C23,8C24,8C25,8C26,8C27,8C28,8C29,8C2A,8C2B,8C2C,8C2D,8C2E,8C2F,8C30,8C31,8C32,8C33,8C34,8C35,8C36,8C37,8C41,8C46,8C47,8C49,8C4C,8C55,8C5A,8C61,8C62,8C6A,8C6B,8C73,8C78,8C79,8C7A,8C82,8C85,8C89,8C8A,8C8C,8C94,8C98,8D1D,8D1E,8D1F,8D21,8D22,8D23,8D24,8D25,8D26,8D27,8D28,8D29,8D2A,8D2B,8D2C,8D2D,8D2E,8D2F,8D30,8D31,8D32,8D33,8D34,8D35,8D36,8D37,8D38,8D39,8D3A,8D3B,8D3C,8D3D,8D3E,8D3F,8D40,8D41,8D42,8D43,8D44,8D45,8D46,8D47,8D48,8D49,8D4A,8D4B,8D4C,8D4D,8D4E,8D4F,8D50,8D53,8D54,8D55,8D56,8D58,8D59,8D5A,8D5B,8D5C,8D5D,8D5E,8D60,8D61,8D62,8D63,8D64,8D66,8D67,8D6B,8D6D,8D70,8D73,8D74,8D75,8D76,8D77,8D81,8D84,8D85,8D8A,8D8B,8D91,8D94,8D9F,8DA3,8DB1,8DB3,8DB4,8DB5,8DB8,8DBA,8DBC,8DBE,8DBF,8DC3,8DC4,8DC6,8DCB,8DCC,8DCE,8DCF,8DD1,8DD6,8DD7,8DDA,8DDB,8DDD,8DDE,8DDF,8DE3,8DE4,8DE8,8DEA,8DEB,8DEC,8DEF,8DF3,8DF5,8DF7,8DF8,8DF9,8DFA,8DFB,8DFD,8E05,8E09,8E0A,8E0C,8E0F,8E14,8E1D,8E1E,8E1F,8E22,8E23,8E29,8E2A,8E2C,8E2E,8E2F,8E31,8E35,8E39,8E3A,8E3D,8E40,8E41,8E42,8E44,8E47,8E48,8E49,8E4A,8E4B,8E51,8E52,8E59,8E66,8E69,8E6C,8E6D,8E6F,8E70,8E72,8E74,8E76,8E7C,8E7F,8E81,8E85,8E87,8E8F,8E90,8E94,8E9C,8E9E,8EAB,8EAC,8EAF,8EB2,8EBA,8ECE,8F66,8F67,8F68,8F69,8F6B,8F6C,8F6D,8F6E,8F6F,8F70,8F71,8F72,8F73,8F74,8F75,8F76,8F77,8F78,8F79,8F7A,8F7B,8F7C,8F7D,8F7E,8F7F,8F81,8F82,8F83,8F84,8F85,8F86,8F87,8F88,8F89,8F8A,8F8B,8F8D,8F8E,8F8F,8F90,8F91,8F93,8F94,8F95,8F96,8F97,8F98,8F99,8F9A,8F9B,8F9C,8F9E,8F9F,8FA3,8FA8,8FA9,8FAB,8FB0,8FB1,8FB6,8FB9,8FBD,8FBE,8FC1,8FC2,8FC4,8FC5,8FC7,8FC8,8FCE,8FD0,8FD1,8FD3,8FD4,8FD5,8FD8,8FD9,8FDB,8FDC,8FDD,8FDE,8FDF,8FE2,8FE4,8FE5,8FE6,8FE8,8FE9,8FEA,8FEB,8FED,8FEE,8FF0,8FF3,8FF7,8FF8,8FF9,8FFD,9000,9001,9002,9003,9004,9005,9006,9009,900A,900B,900D,900F,9010,9011,9012,9014,9016,9017,901A,901B,901D,901E,901F,9020,9021,9022,9026,902D,902E,902F,9035,9036,9038,903B,903C,903E,9041,9042,9044,9047,904D,904F,9050,9051,9052,9053,9057,9058,905B,9062,9063,9065,9068,906D,906E,9074,9075,907D,907F,9080,9082,9083,9088,908B,9091,9093,9095,9097,9099,909B,909D,90A1,90A2,90A3,90A6,90AA,90AC,90AE,90AF,90B0,90B1,90B3,90B4,90B5,90B6,90B8,90B9,90BA,90BB,90BE,90C1,90C4,90C5,90C7,90CA,90CE,90CF,90D0,90D1,90D3,90D7,90DB,90DC,90DD,90E1,90E2,90E6,90E7,90E8,90EB,90ED,90EF,90F4,90F8,90FD,90FE,9102,9104,9119,911E,9122,9123,912F,9131,9139,9143,9146,9149,914A,914B,914C,914D,914E,914F,9150,9152,9157,915A,915D,915E,9161,9162,9163,9164,9165,9169,916A,916C,916E,916F,9170,9171,9172,9174,9175,9176,9177,9178,9179,917D,917E,917F,9185,9187,9189,918B,918C,918D,9190,9191,9192,919A,919B,91A2,91A3,91AA,91AD,91AE,91AF,91B4,91B5,91BA,91C7,91C9,91CA,91CC,91CD,91CE,91CF,91D1,91DC,9274,928E,92AE,92C8,933E,936A,938F,93CA,93D6,943E,946B,9485,9486,9487,9488,9489,948A,948B,948C,948D,948E,948F,9490,9492,9493,9494,9495,9497,9499,949A,949B,949C,949D,949E,949F,94A0,94A1,94A2,94A3,94A4,94A5,94A6,94A7,94A8,94A9,94AA,94AB,94AC,94AD,94AE,94AF,94B0,94B1,94B2,94B3,94B4,94B5,94B6,94B7,94B8,94B9,94BA,94BB,94BC,94BD,94BE,94BF,94C0,94C1,94C2,94C3,94C4,94C5,94C6,94C8,94C9,94CA,94CB,94CC,94CD,94CE,94D0,94D1,94D2,94D5,94D6,94D7,94D8,94D9,94DB,94DC,94DD,94DE,94DF,94E0,94E1,94E2,94E3,94E4,94E5,94E7,94E8,94E9,94EA,94EB,94EC,94ED,94EE,94EF,94F0,94F1,94F2,94F3,94F4,94F5,94F6,94F7,94F8,94F9,94FA,94FC,94FD,94FE,94FF,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,950A,950B,950C,950D,950E,950F,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,951A,951B,951D,951E,951F,9521,9522,9523,9524,9525,9526,9528,9529,952A,952B,952C,952D,952E,952F,9530,9531,9532,9534,9535,9536,9537,9538,9539,953A,953B,953C,953E,953F,9540,9541,9542,9544,9545,9546,9547,9549,954A,954C,954D,954E,954F,9550,9551,9552,9553,9554,9556,9557,9558,9559,955B,955C,955D,955E,955F,9561,9562,9563,9564,9565,9566,9567,9568,9569,956A,956B,956C,956D,956F,9570,9571,9572,9573,9576,957F,95E8,95E9,95EA,95EB,95ED,95EE,95EF,95F0,95F1,95F2,95F3,95F4,95F5,95F6,95F7,95F8,95F9,95FA,95FB,95FC,95FD,95FE,9600,9601,9602,9603,9604,9605,9606,9608,9609,960A,960B,960C,960D,960E,960F,9610,9611,9612,9614,9615,9616,9617,9619,961A,961C,961D,961F,9621,9622,962A,962E,9631,9632,9633,9634,9635,9636,963B,963C,963D,963F,9640,9642,9644,9645,9646,9647,9648,9649,964B,964C,964D,9650,9654,9655,965B,965F,9661,9662,9664,9667,9668,9669,966A,966C,9672,9674,9675,9676,9677,9685,9686,9688,968B,968D,968F,9690,9694,9697,9698,9699,969C,96A7,96B0,96B3,96B6,96B9,96BC,96BD,96BE,96C0,96C1,96C4,96C5,96C6,96C7,96C9,96CC,96CD,96CE,96CF,96D2,96D5,96E0,96E8,96E9,96EA,96EF,96F3,96F6,96F7,96F9,96FE,9700,9701,9704,9706,9707,9708,9709,970D,970E,970F,9713,9716,971C,971E,972A,972D,9730,9732,9738,9739,973E,9752,9753,9756,9759,975B,975E,9760,9761,9762,9765,9769,9773,9774,9776,977C,9785,978B,978D,9791,9792,9794,9798,97A0,97A3,97AB,97AD,97AF,97B2,97B4,97E6,97E7,97E9,97EA,97EB,97EC,97ED,97F3,97F5,97F6,9875,9876,9877,9878,9879,987A,987B,987C,987D,987E,987F,9880,9881,9882,9883,9884,9885,9886,9887,9888,9889,988A,988C,988D,988F,9890,9891,9893,9894,9896,9897,9898,989A,989B,989C,989D,989E,989F,98A0,98A1,98A2,98A4,98A5,98A6,98A7,98CE,98D1,98D2,98D3,98D5,98D8,98D9,98DA,98DE,98DF,98E7,98E8,990D,9910,992E,9954,9955,9963,9965,9967,9968,9969,996A,996B,996C,996D,996E,996F,9970,9971,9972,9974,9975,9976,9977,997A,997C,997D,997F,9980,9981,9984,9985,9986,9987,9988,998A,998B,998D,998F,9990,9991,9992,9993,9994,9995,9996,9997,9998,9999,99A5,99A8,9A6C,9A6D,9A6E,9A6F,9A70,9A71,9A73,9A74,9A75,9A76,9A77,9A78,9A79,9A7A,9A7B,9A7C,9A7D,9A7E,9A7F,9A80,9A81,9A82,9A84,9A85,9A86,9A87,9A88,9A8A,9A8B,9A8C,9A8F,9A90,9A91,9A92,9A93,9A96,9A97,9A98,9A9A,9A9B,9A9C,9A9D,9A9E,9A9F,9AA0,9AA1,9AA2,9AA3,9AA4,9AA5,9AA7,9AA8,9AB0,9AB1,9AB6,9AB7,9AB8,9ABA,9ABC,9AC0,9AC1,9AC2,9AC5,9ACB,9ACC,9AD1,9AD3,9AD8,9ADF,9AE1,9AE6,9AEB,9AED,9AEF,9AF9,9AFB,9B03,9B08,9B0F,9B13,9B1F,9B23,9B2F,9B32,9B3B,9B3C,9B41,9B42,9B43,9B44,9B45,9B47,9B48,9B49,9B4D,9B4F,9B51,9B54,9C7C,9C7F,9C81,9C82,9C85,9C86,9C87,9C88,9C8B,9C8D,9C8E,9C90,9C91,9C92,9C94,9C95,9C9A,9C9B,9C9C,9C9E,9C9F,9CA0,9CA1,9CA2,9CA3,9CA4,9CA5,9CA6,9CA7,9CA8,9CA9,9CAB,9CAD,9CAE,9CB0,9CB1,9CB2,9CB3,9CB4,9CB5,9CB6,9CB7,9CB8,9CBA,9CBB,9CBC,9CBD,9CC3,9CC4,9CC5,9CC6,9CC7,9CCA,9CCB,9CCC,9CCD,9CCE,9CCF,9CD0,9CD3,9CD4,9CD5,9CD6,9CD7,9CD8,9CD9,9CDC,9CDD,9CDE,9CDF,9CE2,9E1F,9E20,9E21,9E22,9E23,9E25,9E26,9E28,9E29,9E2A,9E2B,9E2C,9E2D,9E2F,9E31,9E32,9E33,9E35,9E36,9E37,9E38,9E39,9E3A,9E3D,9E3E,9E3F,9E41,9E42,9E43,9E44,9E45,9E46,9E47,9E48,9E49,9E4A,9E4B,9E4C,9E4E,9E4F,9E51,9E55,9E57,9E58,9E5A,9E5B,9E5C,9E5E,9E63,9E64,9E66,9E67,9E68,9E69,9E6A,9E6B,9E6C,9E6D,9E70,9E71,9E73,9E7E,9E7F,9E82,9E87,9E88,9E8B,9E92,9E93,9E9D,9E9F,9EA6,9EB4,9EB8,9EBB,9EBD,9EBE,9EC4,9EC9,9ECD,9ECE,9ECF,9ED1,9ED4,9ED8,9EDB,9EDC,9EDD,9EDF,9EE0,9EE2,9EE5,9EE7,9EE9,9EEA,9EEF,9EF9,9EFB,9EFC,9EFE,9F0B,9F0D,9F0E,9F10,9F13,9F17,9F19,9F20,9F22,9F2C,9F2F,9F37,9F39,9F3B,9F3D,9F3E,9F44,9F50,9F51,9F7F,9F80,9F83,9F84,9F85,9F86,9F87,9F88,9F89,9F8A,9F8B,9F8C,9F99,9F9A,9F9B,9F9F,9FA0,FF01,FF02,FF03,FF04,FF05,FF06,FF07,FF08,FF09,FF0A,FF0B,FF0C,FF0D,FF0E,FF0F,FF10,FF11,FF12,FF13,FF14,FF15,FF16,FF17,FF18,FF19,FF1A,FF1B,FF1C,FF1D,FF1E,FF1F,FF20,FF21,FF22,FF23,FF24,FF25,FF26,FF27,FF28,FF29,FF2A,FF2B,FF2C,FF2D,FF2E,FF2F,FF30,FF31,FF32,FF33,FF34,FF35,FF36,FF37,FF38,FF39,FF3A,FF3B,FF3C,FF3D,FF3E,FF3F,FF40,FF41,FF42,FF43,FF44,FF45,FF46,FF47,FF48,FF49,FF4A,FF4B,FF4C,FF4D,FF4E,FF4F,FF50,FF51,FF52,FF53,FF54,FF55,FF56,FF57,FF58,FF59,FF5A,FF5B,FF5C,FF5D,FF5E,FFE0,FFE1,FFE3,FFE5';
	},

	_ansicode: function(){
		return 'A1E8,A1EC,A1A7,A1E3,A1C0,A1A4,A1C1,A8A4,A8A2,A8A8,A8A6,A8BA,A8AC,A8AA,A8B0,A8AE,A1C2,A8B4,A8B2,A8B9,A8A1,A8A5,A8A7,A8A9,A8AD,A8B1,A8A3,A8AB,A8AF,A8B3,A8B5,A8B6,A8B7,A8B8,A1A6,A1A5,A6A1,A6A2,A6A3,A6A4,A6A5,A6A6,A6A7,A6A8,A6A9,A6AA,A6AB,A6AC,A6AD,A6AE,A6AF,A6B0,A6B1,A6B2,A6B3,A6B4,A6B5,A6B6,A6B7,A6B8,A6C1,A6C2,A6C3,A6C4,A6C5,A6C6,A6C7,A6C8,A6C9,A6CA,A6CB,A6CC,A6CD,A6CE,A6CF,A6D0,A6D1,A6D2,A6D3,A6D4,A6D5,A6D6,A6D7,A6D8,A7A7,A7A1,A7A2,A7A3,A7A4,A7A5,A7A6,A7A8,A7A9,A7AA,A7AB,A7AC,A7AD,A7AE,A7AF,A7B0,A7B1,A7B2,A7B3,A7B4,A7B5,A7B6,A7B7,A7B8,A7B9,A7BA,A7BB,A7BC,A7BD,A7BE,A7BF,A7C0,A7C1,A7D1,A7D2,A7D3,A7D4,A7D5,A7D6,A7D8,A7D9,A7DA,A7DB,A7DC,A7DD,A7DE,A7DF,A7E0,A7E1,A7E2,A7E3,A7E4,A7E5,A7E6,A7E7,A7E8,A7E9,A7EA,A7EB,A7EC,A7ED,A7EE,A7EF,A7F0,A7F1,A7D7,A1AA,A1AC,A1AE,A1AF,A1B0,A1B1,A1AD,A1EB,A1E4,A1E5,A1F9,A1E6,A1ED,A2F1,A2F2,A2F3,A2F4,A2F5,A2F6,A2F7,A2F8,A2F9,A2FA,A2FB,A2FC,A1FB,A1FC,A1FA,A1FD,A1CA,A1C7,A1C6,A1CC,A1D8,A1DE,A1CF,A1CE,A1C4,A1C5,A1C9,A1C8,A1D2,A1D3,A1E0,A1DF,A1C3,A1CB,A1D7,A1D6,A1D5,A1D9,A1D4,A1DC,A1DD,A1DA,A1DB,A1D1,A1CD,A1D0,A2D9,A2DA,A2DB,A2DC,A2DD,A2DE,A2DF,A2E0,A2E1,A2E2,A2C5,A2C6,A2C7,A2C8,A2C9,A2CA,A2CB,A2CC,A2CD,A2CE,A2CF,A2D0,A2D1,A2D2,A2D3,A2D4,A2D5,A2D6,A2D7,A2D8,A2B1,A2B2,A2B3,A2B4,A2B5,A2B6,A2B7,A2B8,A2B9,A2BA,A2BB,A2BC,A2BD,A2BE,A2BF,A2C0,A2C1,A2C2,A2C3,A2C4,A9A4,A9A5,A9A6,A9A7,A9A8,A9A9,A9AA,A9AB,A9AC,A9AD,A9AE,A9AF,A9B0,A9B1,A9B2,A9B3,A9B4,A9B5,A9B6,A9B7,A9B8,A9B9,A9BA,A9BB,A9BC,A9BD,A9BE,A9BF,A9C0,A9C1,A9C2,A9C3,A9C4,A9C5,A9C6,A9C7,A9C8,A9C9,A9CA,A9CB,A9CC,A9CD,A9CE,A9CF,A9D0,A9D1,A9D2,A9D3,A9D4,A9D5,A9D6,A9D7,A9D8,A9D9,A9DA,A9DB,A9DC,A9DD,A9DE,A9DF,A9E0,A9E1,A9E2,A9E3,A9E4,A9E5,A9E6,A9E7,A9E8,A9E9,A9EA,A9EB,A9EC,A9ED,A9EE,A9EF,A1F6,A1F5,A1F8,A1F7,A1F4,A1F3,A1F0,A1F2,A1F1,A1EF,A1EE,A1E2,A1E1,A1A1,A1A2,A1A3,A1A8,A1A9,A1B4,A1B5,A1B6,A1B7,A1B8,A1B9,A1BA,A1BB,A1BE,A1BF,A1FE,A1B2,A1B3,A1BC,A1BD,A4A1,A4A2,A4A3,A4A4,A4A5,A4A6,A4A7,A4A8,A4A9,A4AA,A4AB,A4AC,A4AD,A4AE,A4AF,A4B0,A4B1,A4B2,A4B3,A4B4,A4B5,A4B6,A4B7,A4B8,A4B9,A4BA,A4BB,A4BC,A4BD,A4BE,A4BF,A4C0,A4C1,A4C2,A4C3,A4C4,A4C5,A4C6,A4C7,A4C8,A4C9,A4CA,A4CB,A4CC,A4CD,A4CE,A4CF,A4D0,A4D1,A4D2,A4D3,A4D4,A4D5,A4D6,A4D7,A4D8,A4D9,A4DA,A4DB,A4DC,A4DD,A4DE,A4DF,A4E0,A4E1,A4E2,A4E3,A4E4,A4E5,A4E6,A4E7,A4E8,A4E9,A4EA,A4EB,A4EC,A4ED,A4EE,A4EF,A4F0,A4F1,A4F2,A4F3,A5A1,A5A2,A5A3,A5A4,A5A5,A5A6,A5A7,A5A8,A5A9,A5AA,A5AB,A5AC,A5AD,A5AE,A5AF,A5B0,A5B1,A5B2,A5B3,A5B4,A5B5,A5B6,A5B7,A5B8,A5B9,A5BA,A5BB,A5BC,A5BD,A5BE,A5BF,A5C0,A5C1,A5C2,A5C3,A5C4,A5C5,A5C6,A5C7,A5C8,A5C9,A5CA,A5CB,A5CC,A5CD,A5CE,A5CF,A5D0,A5D1,A5D2,A5D3,A5D4,A5D5,A5D6,A5D7,A5D8,A5D9,A5DA,A5DB,A5DC,A5DD,A5DE,A5DF,A5E0,A5E1,A5E2,A5E3,A5E4,A5E5,A5E6,A5E7,A5E8,A5E9,A5EA,A5EB,A5EC,A5ED,A5EE,A5EF,A5F0,A5F1,A5F2,A5F3,A5F4,A5F5,A5F6,A8C5,A8C6,A8C7,A8C8,A8C9,A8CA,A8CB,A8CC,A8CD,A8CE,A8CF,A8D0,A8D1,A8D2,A8D3,A8D4,A8D5,A8D6,A8D7,A8D8,A8D9,A8DA,A8DB,A8DC,A8DD,A8DE,A8DF,A8E0,A8E1,A8E2,A8E3,A8E4,A8E5,A8E6,A8E7,A8E8,A8E9,A2E5,A2E6,A2E7,A2E8,A2E9,A2EA,A2EB,A2EC,A2ED,A2EE,D2BB,B6A1,C6DF,CDF2,D5C9,C8FD,C9CF,CFC2,D8A2,B2BB,D3EB,D8A4,B3F3,D7A8,C7D2,D8A7,CAC0,C7F0,B1FB,D2B5,B4D4,B6AB,CBBF,D8A9,B6AA,C1BD,D1CF,C9A5,D8AD,B8F6,D1BE,E3DC,D6D0,B7E1,B4AE,C1D9,D8BC,CDE8,B5A4,CEAA,D6F7,C0F6,BED9,D8AF,C4CB,BEC3,D8B1,C3B4,D2E5,D6AE,CEDA,D5A7,BAF5,B7A6,C0D6,C6B9,C5D2,C7C7,B9D4,B3CB,D2D2,D8BF,BEC5,C6F2,D2B2,CFB0,CFE7,CAE9,D8C0,C2F2,C2D2,C8E9,C7AC,C1CB,D3E8,D5F9,CAC2,B6FE,D8A1,D3DA,BFF7,D4C6,BBA5,D8C1,CEE5,BEAE,D8A8,D1C7,D0A9,D8BD,D9EF,CDF6,BFBA,BDBB,BAA5,D2E0,B2FA,BAE0,C4B6,CFED,BEA9,CDA4,C1C1,C7D7,D9F1,D9F4,C8CB,D8E9,D2DA,CAB2,C8CA,D8EC,D8EA,D8C6,BDF6,C6CD,B3F0,D8EB,BDF1,BDE9,C8D4,B4D3,C2D8,B2D6,D7D0,CACB,CBFB,D5CC,B8B6,CFC9,D9DA,D8F0,C7AA,D8EE,B4FA,C1EE,D2D4,D8ED,D2C7,D8EF,C3C7,D1F6,D6D9,D8F2,D8F5,BCFE,BCDB,C8CE,B7DD,B7C2,C6F3,D8F8,D2C1,CEE9,BCBF,B7FC,B7A5,D0DD,D6DA,D3C5,BBEF,BBE1,D8F1,C9A1,CEB0,B4AB,D8F3,C9CB,D8F6,C2D7,D8F7,CEB1,D8F9,B2AE,B9C0,D9A3,B0E9,C1E6,C9EC,CBC5,CBC6,D9A4,B5E8,B5AB,CEBB,B5CD,D7A1,D7F4,D3D3,CCE5,BACE,D9A2,D9DC,D3E0,D8FD,B7F0,D7F7,D8FE,D8FA,D9A1,C4E3,D3B6,D8F4,D9DD,D8FB,C5E5,C0D0,D1F0,B0DB,BCD1,D9A6,D9A5,D9AC,D9AE,D9AB,CAB9,D9A9,D6B6,B3DE,D9A8,C0FD,CACC,D9AA,D9A7,D9B0,B6B1,B9A9,D2C0,CFC0,C2C2,BDC4,D5EC,B2E0,C7C8,BFEB,D9AD,D9AF,CEEA,BAEE,C7D6,B1E3,B4D9,B6ED,D9B4,BFA1,D9DE,C7CE,C0FE,D9B8,CBD7,B7FD,D9B5,D9B7,B1A3,D3E1,D9B9,D0C5,D9B6,D9B1,D9B2,C1A9,D9B3,BCF3,D0DE,B8A9,BEE3,D9BD,D9BA,B0B3,D9C2,D9C4,B1B6,D9BF,B5B9,BEF3,CCC8,BAF2,D2D0,D9C3,BDE8,B3AB,D9C5,BEEB,D9C6,D9BB,C4DF,D9BE,D9C1,D9C0,D5AE,D6B5,C7E3,D9C8,BCD9,D9CA,D9BC,D9CB,C6AB,D9C9,D7F6,CDA3,BDA1,D9CC,C5BC,CDB5,D9CD,D9C7,B3A5,BFFE,B8B5,C0FC,B0F8,B4F6,D9CE,D9CF,B4A2,D9D0,B4DF,B0C1,D9D1,C9B5,CFF1,D9D2,C1C5,D9D6,C9AE,D9D5,D9D4,D9D7,CBDB,BDA9,C6A7,D9D3,D9D8,D9D9,C8E5,C0DC,B6F9,D8A3,D4CA,D4AA,D0D6,B3E4,D5D7,CFC8,B9E2,BFCB,C3E2,B6D2,CDC3,D9EE,D9F0,B5B3,B6B5,BEA4,C8EB,C8AB,B0CB,B9AB,C1F9,D9E2,C0BC,B9B2,B9D8,D0CB,B1F8,C6E4,BEDF,B5E4,D7C8,D1F8,BCE6,CADE,BCBD,D9E6,D8E7,C4DA,B8D4,C8BD,B2E1,D4D9,C3B0,C3E1,DAA2,C8DF,D0B4,BEFC,C5A9,B9DA,DAA3,D4A9,DAA4,D9FB,B6AC,B7EB,B1F9,D9FC,B3E5,BEF6,BFF6,D2B1,C0E4,B6B3,D9FE,D9FD,BEBB,C6E0,D7BC,DAA1,C1B9,B5F2,C1E8,BCF5,B4D5,C1DD,C4FD,BCB8,B7B2,B7EF,D9EC,C6BE,BFAD,BBCB,B5CA,DBC9,D0D7,CDB9,B0BC,B3F6,BBF7,DBCA,BAAF,D4E4,B5B6,B5F3,D8D6,C8D0,B7D6,C7D0,D8D7,BFAF,DBBB,D8D8,D0CC,BBAE,EBBE,C1D0,C1F5,D4F2,B8D5,B4B4,B3F5,C9BE,C5D0,C5D9,C0FB,B1F0,D8D9,B9CE,B5BD,D8DA,D6C6,CBA2,C8AF,C9B2,B4CC,BFCC,B9F4,D8DB,D8DC,B6E7,BCC1,CCEA,CFF7,D8DD,C7B0,B9D0,BDA3,CCDE,C6CA,D8E0,D8DE,D8DF,B0FE,BEE7,CAA3,BCF4,B8B1,B8EE,D8E2,BDCB,D8E4,D8E3,C5FC,D8E5,D8E6,C1A6,C8B0,B0EC,B9A6,BCD3,CEF1,DBBD,C1D3,B6AF,D6FA,C5AC,BDD9,DBBE,DBBF,C0F8,BEA2,C0CD,DBC0,CAC6,B2AA,D3C2,C3E3,D1AB,DBC2,C0D5,DBC3,BFB1,C4BC,C7DA,DBC4,D9E8,C9D7,B9B4,CEF0,D4C8,B0FC,B4D2,D0D9,D9E9,DECB,D9EB,D8B0,BBAF,B1B1,B3D7,D8CE,D4D1,BDB3,BFEF,CFBB,D8D0,B7CB,D8D1,C6A5,C7F8,D2BD,D8D2,C4E4,CAAE,C7A7,D8A6,C9FD,CEE7,BBDC,B0EB,BBAA,D0AD,B1B0,D7E4,D7BF,B5A5,C2F4,C4CF,B2A9,B2B7,B1E5,DFB2,D5BC,BFA8,C2AC,D8D5,C2B1,D8D4,CED4,DAE0,CEC0,D8B4,C3AE,D3A1,CEA3,BCB4,C8B4,C2D1,BEED,D0B6,DAE1,C7E4,B3A7,B6F2,CCFC,C0FA,C0F7,D1B9,D1E1,D8C7,B2DE,C0E5,BAF1,D8C8,D4AD,CFE1,D8C9,D8CA,CFC3,B3F8,BEC7,D8CB,DBCC,C8A5,CFD8,C8FE,B2CE,D3D6,B2E6,BCB0,D3D1,CBAB,B7B4,B7A2,CAE5,C8A1,CADC,B1E4,D0F0,C5D1,DBC5,B5FE,BFDA,B9C5,BEE4,C1ED,DFB6,DFB5,D6BB,BDD0,D5D9,B0C8,B6A3,BFC9,CCA8,DFB3,CAB7,D3D2,D8CF,D2B6,BAC5,CBBE,CCBE,DFB7,B5F0,DFB4,D3F5,B3D4,B8F7,DFBA,BACF,BCAA,B5F5,CDAC,C3FB,BAF3,C0F4,CDC2,CFF2,DFB8,CFC5,C2C0,DFB9,C2F0,BEFD,C1DF,CDCC,D2F7,B7CD,DFC1,DFC4,B7F1,B0C9,B6D6,B7D4,BAAC,CCFD,BFD4,CBB1,C6F4,D6A8,DFC5,CEE2,B3B3,CEFC,B4B5,CEC7,BAF0,CEE1,D1BD,DFC0,B4F4,B3CA,B8E6,DFBB,C4C5,DFBC,DFBD,DFBE,C5BB,DFBF,DFC2,D4B1,DFC3,C7BA,CED8,C4D8,DFCA,DFCF,D6DC,DFC9,DFDA,CEB6,BAC7,DFCE,DFC8,C5DE,C9EB,BAF4,C3FC,BED7,DFC6,DFCD,C5D8,D5A6,BACD,BECC,D3BD,B8C0,D6E4,DFC7,B9BE,BFA7,C1FC,DFCB,DFCC,DFD0,DFDB,DFE5,DFD7,DFD6,D7C9,DFE3,DFE4,E5EB,D2A7,DFD2,BFA9,D4DB,BFC8,DFD4,CFCC,DFDD,D1CA,DFDE,B0A7,C6B7,DFD3,BAE5,B6DF,CDDB,B9FE,D4D5,DFDF,CFEC,B0A5,DFE7,DFD1,D1C6,DFD5,DFD8,DFD9,DFDC,BBA9,DFE0,DFE1,DFE2,DFE6,DFE8,D3B4,B8E7,C5B6,DFEA,C9DA,C1A8,C4C4,BFDE,CFF8,D5DC,DFEE,B2B8,BADF,DFEC,DBC1,D1E4,CBF4,B4BD,B0A6,DFF1,CCC6,DFF2,DFED,DFE9,DFEB,DFEF,DFF0,BBBD,DFF3,DFF4,BBA3,CADB,CEA8,E0A7,B3AA,E0A6,E0A1,DFFE,CDD9,DFFC,DFFA,BFD0,D7C4,C9CC,DFF8,B0A1,DFFD,DFFB,E0A2,E0A8,B7C8,C6A1,C9B6,C0B2,DFF5,C5BE,D8C4,DFF9,C4F6,E0A3,E0A4,E0A5,D0A5,E0B4,CCE4,E0B1,BFA6,E0AF,CEB9,E0AB,C9C6,C0AE,E0AE,BAED,BAB0,E0A9,DFF6,E0B3,E0B8,B4AD,E0B9,CFB2,BAC8,E0B0,D0FA,E0AC,D4FB,DFF7,C5E7,E0AD,D3F7,E0B6,E0B7,E0C4,D0E1,E0BC,E0C9,E0CA,E0BE,E0AA,C9A4,E0C1,E0B2,CAC8,E0C3,E0B5,CECB,CBC3,E0CD,E0C6,E0C2,E0CB,E0BA,E0BF,E0C0,E0C5,E0C7,E0C8,E0CC,E0BB,CBD4,E0D5,E0D6,E0D2,E0D0,BCCE,E0D1,B8C2,D8C5,D0EA,C2EF,E0CF,E0BD,E0D4,E0D3,E0D7,E0DC,E0D8,D6F6,B3B0,D7EC,CBBB,E0DA,CEFB,BAD9,E0E1,E0DD,D2AD,E0E2,E0DB,E0D9,E0DF,E0E0,E0DE,E0E4,C6F7,D8AC,D4EB,E0E6,CAC9,E0E5,B8C1,E0E7,E0E8,E0E9,E0E3,BABF,CCE7,E0EA,CFF9,E0EB,C8C2,BDC0,C4D2,E0EC,E0ED,C7F4,CBC4,E0EE,BBD8,D8B6,D2F2,E0EF,CDC5,B6DA,E0F1,D4B0,C0A7,B4D1,CEA7,E0F0,E0F2,B9CC,B9FA,CDBC,E0F3,C6D4,E0F4,D4B2,C8A6,E0F6,E0F5,E0F7,CDC1,CAA5,D4DA,DBD7,DBD9,DBD8,B9E7,DBDC,DBDD,B5D8,DBDA,DBDB,B3A1,DBDF,BBF8,D6B7,DBE0,BEF9,B7BB,DBD0,CCAE,BFB2,BBB5,D7F8,BFD3,BFE9,BCE1,CCB3,DBDE,B0D3,CEEB,B7D8,D7B9,C6C2,C0A4,CCB9,DBE7,DBE1,C6BA,DBE3,DBE8,C5F7,DBEA,DBE9,BFC0,DBE6,DBE5,B4B9,C0AC,C2A2,DBE2,DBE4,D0CD,DBED,C0DD,DBF2,B6E2,DBF3,DBD2,B9B8,D4AB,DBEC,BFD1,DBF0,DBD1,B5E6,DBEB,BFE5,DBEE,DBF1,DBF9,B9A1,B0A3,C2F1,B3C7,DBEF,DBF8,C6D2,DBF4,DBF5,DBF7,DBF6,DBFE,D3F2,B2BA,DBFD,DCA4,DBFB,DBFA,DBFC,C5E0,BBF9,DCA3,DCA5,CCC3,B6D1,DDC0,DCA1,DCA2,C7B5,B6E9,DCA7,DCA6,DCA9,B1A4,B5CC,BFB0,D1DF,B6C2,DCA8,CBFA,EBF3,CBDC,CBFE,CCC1,C8FB,DCAA,CCEE,DCAB,DBD3,DCAF,DCAC,BEB3,CAFB,DCAD,C9CA,C4B9,C7BD,DCAE,D4F6,D0E6,C4AB,B6D5,DBD4,B1DA,DBD5,DBD6,BABE,C8C0,CABF,C8C9,D7B3,C9F9,BFC7,BAF8,D2BC,E2BA,B4A6,B1B8,B8B4,CFC4,D9E7,CFA6,CDE2,D9ED,B6E0,D2B9,B9BB,E2B9,E2B7,B4F3,CCEC,CCAB,B7F2,D8B2,D1EB,BABB,CAA7,CDB7,D2C4,BFE4,BCD0,B6E1,DEC5,DEC6,DBBC,D1D9,C6E6,C4CE,B7EE,B7DC,BFFC,D7E0,C6F5,B1BC,DEC8,BDB1,CCD7,DECA,DEC9,B5EC,C9DD,B0C2,C5AE,C5AB,C4CC,BCE9,CBFD,BAC3,E5F9,C8E7,E5FA,CDFD,D7B1,B8BE,C2E8,C8D1,E5FB,B6CA,BCCB,D1FD,E6A1,C3EE,E6A4,E5FE,E6A5,CDD7,B7C1,E5FC,E5FD,E6A3,C4DD,E6A8,E6A7,C3C3,C6DE,E6AA,C4B7,E6A2,CABC,BDE3,B9C3,E6A6,D0D5,CEAF,E6A9,E6B0,D2A6,BDAA,E6AD,E6AF,C0D1,D2CC,BCA7,E6B1,D2F6,D7CB,CDFE,CDDE,C2A6,E6AB,E6AC,BDBF,E6AE,E6B3,E6B2,E6B6,E6B8,C4EF,C4C8,BEEA,C9EF,E6B7,B6F0,C3E4,D3E9,E6B4,E6B5,C8A2,E6BD,E6B9,C6C5,CDF1,E6BB,E6BC,BBE9,E6BE,E6BA,C0B7,D3A4,E6BF,C9F4,E6C3,E6C4,D0F6,C3BD,C3C4,E6C2,E6C1,E6C7,CFB1,EBF4,E6CA,E6C5,BCDE,C9A9,BCB5,CFD3,E6C8,E6C9,E6CE,E6D0,E6D1,E6CB,B5D5,E6CC,E6CF,C4DB,E6C6,E6CD,E6D2,E6D4,E6D3,E6D5,D9F8,E6D6,E6D7,D7D3,E6DD,E6DE,BFD7,D4D0,D7D6,B4E6,CBEF,E6DA,D8C3,D7CE,D0A2,C3CF,E6DF,BCBE,B9C2,E6DB,D1A7,BAA2,C2CF,D8AB,CAEB,E5EE,E6DC,B7F5,C8E6,C4F5,E5B2,C4FE,CBFC,E5B3,D5AC,D3EE,CAD8,B0B2,CBCE,CDEA,BAEA,E5B5,E5B4,D7DA,B9D9,D6E6,B6A8,CDF0,D2CB,B1A6,CAB5,B3E8,C9F3,BFCD,D0FB,CAD2,E5B6,BBC2,CFDC,B9AC,D4D7,BAA6,D1E7,CFFC,BCD2,E5B7,C8DD,BFED,B1F6,CBDE,BCC5,BCC4,D2FA,C3DC,BFDC,B8BB,C3C2,BAAE,D4A2,C7DE,C4AF,B2EC,B9D1,E5BB,C1C8,D5AF,E5BC,E5BE,B4E7,B6D4,CBC2,D1B0,B5BC,CAD9,B7E2,C9E4,BDAB,CEBE,D7F0,D0A1,C9D9,B6FB,E6D8,BCE2,B3BE,C9D0,E6D9,B3A2,DECC,D3C8,DECD,D2A2,DECE,BECD,DECF,CAAC,D2FC,B3DF,E5EA,C4E1,BEA1,CEB2,C4F2,BED6,C6A8,B2E3,BED3,C7FC,CCEB,BDEC,CEDD,CABA,C6C1,E5EC,D0BC,D5B9,E5ED,CAF4,CDC0,C2C5,E5EF,C2C4,E5F0,E5F8,CDCD,C9BD,D2D9,E1A8,D3EC,CBEA,C6F1,E1AC,E1A7,E1A9,E1AA,E1AF,B2ED,E1AB,B8DA,E1AD,E1AE,E1B0,B5BA,E1B1,E1B3,E1B8,D1D2,E1B6,E1B5,C1EB,E1B7,D4C0,E1B2,E1BA,B0B6,E1B4,BFF9,E1B9,E1BB,E1BE,E1BC,D6C5,CFBF,E1BD,E1BF,C2CD,B6EB,D3F8,C7CD,B7E5,BEFE,E1C0,E1C1,E1C7,B3E7,C6E9,B4DE,D1C2,E1C8,E1C6,E1C5,E1C3,E1C2,B1C0,D5B8,E1C4,E1CB,E1CC,E1CA,EFFA,E1D3,E1D2,C7B6,E1C9,E1CE,E1D0,E1D4,E1D1,E1CD,E1CF,E1D5,E1D6,E1D7,E1D8,E1DA,E1DB,CEA1,E7DD,B4A8,D6DD,D1B2,B3B2,B9A4,D7F3,C7C9,BEDE,B9AE,CED7,B2EE,DBCF,BCBA,D2D1,CBC8,B0CD,CFEF,D9E3,BDED,B1D2,CAD0,B2BC,CBA7,B7AB,CAA6,CFA3,E0F8,D5CA,E0FB,E0FA,C5C1,CCFB,C1B1,E0F9,D6E3,B2AF,D6C4,B5DB,B4F8,D6A1,CFAF,B0EF,E0FC,E1A1,B3A3,E0FD,E0FE,C3B1,C3DD,E1A2,B7F9,BBCF,E1A3,C4BB,E1A4,E1A5,E1A6,B4B1,B8C9,C6BD,C4EA,B2A2,D0D2,E7DB,BBC3,D3D7,D3C4,B9E3,E2CF,D7AF,C7EC,B1D3,B4B2,E2D1,D0F2,C2AE,E2D0,BFE2,D3A6,B5D7,E2D2,B5EA,C3ED,B8FD,B8AE,C5D3,B7CF,E2D4,E2D3,B6C8,D7F9,CDA5,E2D8,E2D6,CAFC,BFB5,D3B9,E2D5,E2D7,C1AE,C0C8,E2DB,E2DA,C0AA,C1CE,E2DC,E2DD,E2DE,DBC8,D1D3,CDA2,BDA8,DEC3,D8A5,BFAA,DBCD,D2EC,C6FA,C5AA,DEC4,B1D7,DFAE,CABD,DFB1,B9AD,D2FD,B8A5,BAEB,B3DA,B5DC,D5C5,C3D6,CFD2,BBA1,E5F3,E5F2,E5F4,CDE4,C8F5,B5AF,C7BF,E5F6,ECB0,E5E6,B9E9,B5B1,C2BC,E5E8,E5E7,E5E9,D2CD,E1EA,D0CE,CDAE,D1E5,B2CA,B1EB,B1F2,C5ED,D5C3,D3B0,E1DC,E1DD,D2DB,B3B9,B1CB,CDF9,D5F7,E1DE,BEB6,B4FD,E1DF,BADC,E1E0,BBB2,C2C9,E1E1,D0EC,CDBD,E1E2,B5C3,C5C7,E1E3,E1E4,D3F9,E1E5,D1AD,E1E6,CEA2,E1E7,B5C2,E1E8,BBD5,D0C4,E2E0,B1D8,D2E4,E2E1,BCC9,C8CC,E2E3,ECFE,ECFD,DFAF,E2E2,D6BE,CDFC,C3A6,E3C3,D6D2,E2E7,E2E8,D3C7,E2EC,BFEC,E2ED,E2E5,B3C0,C4EE,E2EE,D0C3,BAF6,E2E9,B7DE,BBB3,CCAC,CBCB,E2E4,E2E6,E2EA,E2EB,E2F7,E2F4,D4F5,E2F3,C5AD,D5FA,C5C2,B2C0,E2EF,E2F2,C1AF,CBBC,B5A1,E2F9,BCB1,E2F1,D0D4,D4B9,E2F5,B9D6,E2F6,C7D3,E2F0,D7DC,EDA1,E2F8,EDA5,E2FE,CAD1,C1B5,BBD0,BFD6,BAE3,CBA1,EDA6,EDA3,EDA2,BBD6,EDA7,D0F4,EDA4,BADE,B6F7,E3A1,B6B2,CCF1,B9A7,CFA2,C7A1,BFD2,B6F1,E2FA,E2FB,E2FD,E2FC,C4D5,E3A2,D3C1,E3A7,C7C4,CFA4,E3A9,BAB7,E3A8,BBDA,E3A3,E3A4,E3AA,E3A6,CEF2,D3C6,BBBC,D4C3,C4FA,EDA8,D0FC,E3A5,C3F5,E3AD,B1AF,E3B2,BCC2,E3AC,B5BF,C7E9,E3B0,BEAA,CDEF,BBF3,CCE8,E3AF,E3B1,CFA7,E3AE,CEA9,BBDD,B5EB,BEE5,B2D2,B3CD,B1B9,E3AB,B2D1,B5AC,B9DF,B6E8,CFEB,E3B7,BBCC,C8C7,D0CA,E3B8,B3EE,EDA9,D3FA,D3E4,EDAA,E3B9,D2E2,E3B5,D3DE,B8D0,E3B3,E3B6,B7DF,E3B4,C0A2,E3BA,D4B8,B4C8,E3BB,BBC5,C9F7,C9E5,C4BD,EDAB,C2FD,BBDB,BFAE,CEBF,E3BC,BFB6,B1EF,D4F7,E3BE,EDAD,E3BF,BAA9,EDAC,E3BD,E3C0,BAB6,B6AE,D0B8,B0C3,EDAE,EDAF,C0C1,E3C1,C5B3,E3C2,DCB2,EDB0,B8EA,CEEC,EAA7,D0E7,CAF9,C8D6,CFB7,B3C9,CED2,BDE4,E3DE,BBF2,EAA8,D5BD,C6DD,EAA9,EAAA,EAAC,EAAB,EAAE,EAAD,BDD8,EAAF,C2BE,B4C1,B4F7,BBA7,ECE6,ECE5,B7BF,CBF9,B1E2,ECE7,C9C8,ECE8,ECE9,CAD6,DED0,B2C5,D4FA,C6CB,B0C7,B4F2,C8D3,CDD0,BFB8,BFDB,C7A4,D6B4,C0A9,DED1,C9A8,D1EF,C5A4,B0E7,B3B6,C8C5,B0E2,B7F6,C5FA,B6F3,D5D2,B3D0,BCBC,B3AD,BEF1,B0D1,D2D6,CAE3,D7A5,CDB6,B6B6,BFB9,D5DB,B8A7,C5D7,DED2,BFD9,C2D5,C7C0,BBA4,B1A8,C5EA,C5FB,CCA7,B1A7,B5D6,C4A8,DED3,D1BA,B3E9,C3F2,B7F7,D6F4,B5A3,B2F0,C4B4,C4E9,C0AD,DED4,B0E8,C5C4,C1E0,B9D5,BEDC,CDD8,B0CE,CDCF,DED6,BED0,D7BE,DED5,D5D0,B0DD,C4E2,C2A3,BCF0,D3B5,C0B9,C5A1,B2A6,D4F1,C0A8,CAC3,DED7,D5FC,B9B0,C8AD,CBA9,DED9,BFBD,C6B4,D7A7,CAB0,C4C3,B3D6,B9D2,D6B8,EAFC,B0B4,BFE6,CCF4,CDDA,D6BF,C2CE,CECE,CCA2,D0AE,C4D3,B5B2,DED8,D5F5,BCB7,BBD3,B0A4,C5B2,B4EC,D5F1,EAFD,DEDA,CDA6,CDEC,CEE6,DEDC,CDB1,C0A6,D7BD,DEDB,B0C6,BAB4,C9D3,C4F3,BEE8,B2B6,C0CC,CBF0,BCF1,BBBB,B5B7,C5F5,DEE6,DEE3,BEDD,DEDF,B4B7,BDDD,DEE0,C4ED,CFC6,B5E0,B6DE,CADA,B5F4,DEE5,D5C6,DEE1,CCCD,C6FE,C5C5,D2B4,BEF2,C2D3,CCBD,B3B8,BDD3,BFD8,CDC6,D1DA,B4EB,DEE4,DEDD,DEE7,EAFE,C2B0,DEE2,D6C0,B5A7,B2F4,DEE8,DEF2,DEED,DEF1,C8E0,D7E1,DEEF,C3E8,CCE1,B2E5,D2BE,DEEE,DEEB,CED5,B4A7,BFAB,BEBE,BDD2,DEE9,D4AE,DEDE,DEEA,C0BF,DEEC,B2F3,B8E9,C2A7,BDC1,DEF5,DEF8,B2AB,B4A4,B4EA,C9A6,DEF6,CBD1,B8E3,DEF7,DEFA,DEF9,CCC2,B0E1,B4EE,E5BA,D0AF,B2EB,EBA1,DEF4,C9E3,DEF3,B0DA,D2A1,B1F7,CCAF,DEF0,CBA4,D5AA,DEFB,B4DD,C4A6,DEFD,C3FE,C4A1,DFA1,C1CC,DEFC,BEEF,C6B2,B3C5,C8F6,CBBA,DEFE,DFA4,D7B2,B3B7,C1C3,C7CB,B2A5,B4E9,D7AB,C4EC,DFA2,DFA3,DFA5,BAB3,DFA6,C0DE,C9C3,B2D9,C7E6,DFA7,C7DC,DFA8,EBA2,CBD3,DFAA,DFA9,B2C1,C5CA,DFAB,D4DC,C8C1,DFAC,BEF0,DFAD,D6A7,EAB7,EBB6,CAD5,D8FC,B8C4,B9A5,B7C5,D5FE,B9CA,D0A7,F4CD,B5D0,C3F4,BEC8,EBB7,B0BD,BDCC,C1B2,B1D6,B3A8,B8D2,C9A2,B6D8,EBB8,BEB4,CAFD,C7C3,D5FB,B7F3,CEC4,D5AB,B1F3,ECB3,B0DF,ECB5,B6B7,C1CF,F5FA,D0B1,D5E5,CED3,BDEF,B3E2,B8AB,D5B6,EDBD,B6CF,CBB9,D0C2,B7BD,ECB6,CAA9,C5D4,ECB9,ECB8,C2C3,ECB7,D0FD,ECBA,ECBB,D7E5,ECBC,ECBD,C6EC,CEDE,BCC8,C8D5,B5A9,BEC9,D6BC,D4E7,D1AE,D0F1,EAB8,EAB9,EABA,BAB5,CAB1,BFF5,CDFA,EAC0,B0BA,EABE,C0A5,EABB,B2FD,C3F7,BBE8,D2D7,CEF4,EABF,EABC,EAC3,D0C7,D3B3,B4BA,C3C1,D7F2,D5D1,CAC7,EAC5,EAC4,EAC7,EAC6,D6E7,CFD4,EACB,BBCE,BDFA,C9CE,EACC,C9B9,CFFE,EACA,D4CE,EACD,EACF,CDED,EAC9,EACE,CEEE,BBDE,B3BF,C6D5,BEB0,CEFA,C7E7,BEA7,EAD0,D6C7,C1C0,D4DD,EAD1,CFBE,EAD2,CAEE,C5AF,B0B5,EAD4,EAD3,F4DF,C4BA,B1A9,E5DF,EAD5,CAEF,EAD6,EAD7,C6D8,EAD8,EAD9,D4BB,C7FA,D2B7,B8FC,EAC2,B2DC,C2FC,D4F8,CCE6,D7EE,D4C2,D3D0,EBC3,C5F3,B7FE,EBD4,CBB7,EBDE,C0CA,CDFB,B3AF,C6DA,EBFC,C4BE,CEB4,C4A9,B1BE,D4FD,CAF5,D6EC,C6D3,B6E4,BBFA,D0E0,C9B1,D4D3,C8A8,B8CB,E8BE,C9BC,E8BB,C0EE,D0D3,B2C4,B4E5,E8BC,D5C8,B6C5,E8BD,CAF8,B8DC,CCF5,C0B4,D1EE,E8BF,E8C2,BABC,B1AD,BDDC,EABD,E8C3,E8C6,E8CB,E8CC,CBC9,B0E5,BCAB,B9B9,E8C1,CDF7,E8CA,CEF6,D5ED,C1D6,E8C4,C3B6,B9FB,D6A6,E8C8,CAE0,D4E6,E8C0,E8C5,E8C7,C7B9,B7E3,E8C9,BFDD,E8D2,E8D7,E8D5,BCDC,BCCF,E8DB,E8DE,E8DA,B1FA,B0D8,C4B3,B8CC,C6E2,C8BE,C8E1,E8CF,E8D4,E8D6,B9F1,E8D8,D7F5,C4FB,E8DC,B2E9,E8D1,BCED,BFC2,E8CD,D6F9,C1F8,B2F1,E8DF,CAC1,E8D9,D5A4,B1EA,D5BB,E8CE,E8D0,B6B0,E8D3,E8DD,C0B8,CAF7,CBA8,C6DC,C0F5,E8E9,D0A3,E8F2,D6EA,E8E0,E8E1,D1F9,BACB,B8F9,B8F1,D4D4,E8EF,E8EE,E8EC,B9F0,CCD2,E8E6,CEA6,BFF2,B0B8,E8F1,E8F0,D7C0,E8E4,CDA9,C9A3,BBB8,BDDB,E8EA,E8E2,E8E3,E8E5,B5B5,E8E7,C7C5,E8EB,E8ED,BDB0,D7AE,E8F8,E8F5,CDB0,E8F6,C1BA,E8E8,C3B7,B0F0,E8F4,E8F7,B9A3,C9D2,C3CE,CEE0,C0E6,CBF3,CCDD,D0B5,CAE1,E8F3,BCEC,E8F9,C3DE,C6E5,B9F7,B0F4,D7D8,BCAC,C5EF,CCC4,E9A6,C9AD,E9A2,C0E2,BFC3,E8FE,B9D7,E8FB,E9A4,D2CE,E9A3,D6B2,D7B5,E9A7,BDB7,E8FC,E8FD,E9A1,CDD6,D2AC,E9B2,E9A9,B4AA,B4BB,E9AB,D0A8,E9A5,B3FE,E9AC,C0E3,E9AA,E9B9,E9B8,E9AE,E8FA,E9A8,BFAC,E9B1,E9BA,C2A5,E9AF,B8C5,E9AD,D3DC,E9B4,E9B5,E9B7,E9C7,C0C6,E9C5,E9B0,E9BB,B0F1,E9BC,D5A5,E9BE,E9BF,E9C1,C1F1,C8B6,E9BD,E9C2,E9C3,E9B3,E9B6,BBB1,E9C0,BCF7,E9C4,E9C6,E9CA,E9CE,B2DB,E9C8,B7AE,E9CB,E9CC,D5C1,C4A3,E9D8,BAE1,E9C9,D3A3,E9D4,E9D7,E9D0,E9CF,C7C1,E9D2,E9D9,B3C8,E9D3,CFF0,E9CD,B3F7,E9D6,E9DA,CCB4,CFAD,E9D5,E9DC,E9DB,E9DE,E9D1,E9DD,E9DF,C3CA,C7B7,B4CE,BBB6,D0C0,ECA3,C5B7,D3FB,ECA4,ECA5,C6DB,BFEE,ECA6,ECA7,D0AA,C7B8,B8E8,ECA8,D6B9,D5FD,B4CB,B2BD,CEE4,C6E7,CDE1,B4F5,CBC0,BCDF,E9E2,E9E3,D1EA,E9E5,B4F9,E9E4,D1B3,CAE2,B2D0,E9E8,E9E6,E9E7,D6B3,E9E9,E9EA,E9EB,E9EC,ECAF,C5B9,B6CE,D2F3,B5EE,BBD9,ECB1,D2E3,CEE3,C4B8,C3BF,B6BE,D8B9,B1C8,B1CF,B1D1,C5FE,B1D0,C3AB,D5B1,EBA4,BAC1,CCBA,EBA5,EBA7,EBA8,EBA6,EBA9,EBAB,EBAA,EBAC,CACF,D8B5,C3F1,C3A5,C6F8,EBAD,C4CA,EBAE,EBAF,EBB0,B7D5,B7FA,EBB1,C7E2,EBB3,BAA4,D1F5,B0B1,EBB2,EBB4,B5AA,C2C8,C7E8,EBB5,CBAE,E3DF,D3C0,D9DB,CDA1,D6AD,C7F3,D9E0,BBE3,BABA,E3E2,CFAB,E3E0,C9C7,BAB9,D1B4,E3E1,C8EA,B9AF,BDAD,B3D8,CEDB,CCC0,E3E8,E3E9,CDF4,CCAD,BCB3,E3EA,E3EB,D0DA,C6FB,B7DA,C7DF,D2CA,CED6,E3E4,E3EC,C9F2,B3C1,E3E7,C6E3,E3E5,EDB3,E3E6,C9B3,C5E6,B9B5,C3BB,E3E3,C5BD,C1A4,C2D9,B2D7,E3ED,BBA6,C4AD,E3F0,BEDA,E3FB,E3F5,BAD3,B7D0,D3CD,D6CE,D5D3,B9C1,D5B4,D1D8,D0B9,C7F6,C8AA,B2B4,C3DA,E3EE,E3FC,E3EF,B7A8,E3F7,E3F4,B7BA,C5A2,E3F6,C5DD,B2A8,C6FC,C4E0,D7A2,C0E1,E3F9,E3FA,E3FD,CCA9,E3F3,D3BE,B1C3,EDB4,E3F1,E3F2,E3F8,D0BA,C6C3,D4F3,E3FE,BDE0,E4A7,E4A6,D1F3,E4A3,E4A9,C8F7,CFB4,E4A8,E4AE,C2E5,B6B4,BDF2,E4A2,BAE9,E4AA,E4AC,B6FD,D6DE,E4B2,E4AD,E4A1,BBEE,CDDD,C7A2,C5C9,C1F7,E4A4,C7B3,BDAC,BDBD,E4A5,D7C7,B2E2,E4AB,BCC3,E4AF,BBEB,E4B0,C5A8,E4B1,D5E3,BFA3,E4BA,E4B7,E4BB,E4BD,C6D6,BAC6,C0CB,B8A1,E4B4,D4A1,BAA3,BDFE,E4BC,CDBF,C4F9,CFFB,C9E6,D3BF,CFD1,E4B3,E4B8,E4B9,CCE9,CCCE,C0D4,E4B5,C1B0,E4B6,CED0,BBC1,B5D3,C8F3,BDA7,D5C7,C9AC,B8A2,E4CA,E4CC,D1C4,D2BA,BAAD,BAD4,E4C3,B5ED,D7CD,E4C0,CFFD,E4BF,C1DC,CCCA,CAE7,C4D7,CCD4,E4C8,E4C7,E4C1,E4C4,B5AD,D3D9,E4C6,D2F9,B4E3,BBB4,C9EE,B4BE,BBEC,D1CD,CCED,EDB5,C7E5,D4A8,E4CB,D7D5,E4C2,BDA5,E4C5,D3E6,E4C9,C9F8,E4BE,D3E5,C7FE,B6C9,D4FC,B2B3,E4D7,CEC2,E4CD,CEBC,B8DB,E4D6,BFCA,D3CE,C3EC,C5C8,E4D8,CDC4,E4CF,E4D4,E4D5,BAFE,CFE6,D5BF,E4D2,E4D0,E4CE,CDE5,CAAA,C0A3,BDA6,E4D3,B8C8,E4E7,D4B4,E4DB,C1EF,E4E9,D2E7,E4DF,E4E0,CFAA,CBDD,E4DA,E4D1,E4E5,C8DC,E4E3,C4E7,E4E2,E4E1,B3FC,E4E8,B5E1,D7CC,E4E6,BBAC,D7D2,CCCF,EBF8,E4E4,B9F6,D6CD,E4D9,E4DC,C2FA,E4DE,C2CB,C0C4,C2D0,B1F5,CCB2,B5CE,E4EF,C6AF,C6E1,E4F5,C2A9,C0EC,D1DD,E4EE,C4AE,E4ED,E4F6,E4F4,C2FE,E4DD,E4F0,CAFE,D5C4,E4F1,D1FA,E4EB,E4EC,E4F2,CEAB,C5CB,C7B1,C2BA,E4EA,C1CA,CCB6,B3B1,E4FB,E4F3,E4FA,E4FD,E4FC,B3CE,B3BA,E4F7,E4F9,E4F8,C5EC,C0BD,D4E8,E5A2,B0C4,E5A4,E5A3,BCA4,E5A5,E5A1,E4FE,B1F4,E5A8,E5A9,E5A6,E5A7,E5AA,C6D9,E5AB,E5AD,E5AC,E5AF,E5AE,B9E0,E5B0,E5B1,BBF0,ECE1,C3F0,B5C6,BBD2,C1E9,D4EE,BEC4,D7C6,D4D6,B2D3,ECBE,EAC1,C2AF,B4B6,D1D7,B3B4,C8B2,BFBB,ECC0,D6CB,ECBF,ECC1,ECC5,BEE6,CCBF,C5DA,BEBC,ECC6,B1FE,ECC4,D5A8,B5E3,ECC2,C1B6,B3E3,ECC3,CBB8,C0C3,CCFE,C1D2,ECC8,BAE6,C0D3,D6F2,D1CC,BFBE,B7B3,C9D5,ECC7,BBE2,CCCC,BDFD,C8C8,CFA9,CDE9,C5EB,B7E9,D1C9,BAB8,ECC9,ECCA,BBC0,ECCB,ECE2,B1BA,B7D9,BDB9,ECCC,D1E6,ECCD,C8BB,ECD1,ECD3,BBCD,BCE5,ECCF,C9B7,C3BA,ECE3,D5D5,ECD0,D6F3,ECD2,ECCE,ECD4,ECD5,C9BF,CFA8,D0DC,D1AC,C8DB,ECD6,CEF5,CAEC,ECDA,ECD9,B0BE,ECD7,ECD8,ECE4,C8BC,C1C7,ECDC,D1E0,ECDB,D4EF,ECDD,DBC6,ECDE,B1AC,ECDF,ECE0,D7A6,C5C0,EBBC,B0AE,BEF4,B8B8,D2AF,B0D6,B5F9,D8B3,CBAC,E3DD,C6AC,B0E6,C5C6,EBB9,EBBA,EBBB,D1C0,C5A3,EAF2,C4B2,C4B5,C0CE,EAF3,C4C1,CEEF,EAF0,EAF4,C9FC,C7A3,CCD8,CEFE,EAF5,EAF6,CFAC,C0E7,EAF7,B6BF,EAF8,EAF9,EAFA,EAFB,EAF1,C8AE,E1EB,B7B8,E1EC,E1ED,D7B4,E1EE,E1EF,D3CC,E1F1,BFF1,E1F0,B5D2,B1B7,E1F3,E1F2,BAFC,E1F4,B9B7,BED1,C4FC,BADD,BDC6,E1F5,E1F7,B6C0,CFC1,CAA8,E1F6,D5F8,D3FC,E1F8,E1FC,E1F9,E1FA,C0EA,E1FE,E2A1,C0C7,E1FB,E1FD,E2A5,C1D4,E2A3,E2A8,B2FE,E2A2,C3CD,B2C2,E2A7,E2A6,E2A4,E2A9,E2AB,D0C9,D6ED,C3A8,E2AC,CFD7,E2AE,BAEF,E9E0,E2AD,E2AA,BBAB,D4B3,E2B0,E2AF,E9E1,E2B1,E2B2,E2B3,CCA1,E2B4,E2B5,D0FE,C2CA,D3F1,CDF5,E7E0,E7E1,BEC1,C2EA,E7E4,E7E3,CDE6,C3B5,E7E2,BBB7,CFD6,C1E1,E7E9,E7E8,E7F4,B2A3,E7EA,E7E6,E7EC,E7EB,C9BA,D5E4,E7E5,B7A9,E7E7,E7EE,E7F3,D6E9,E7ED,E7F2,E7F1,B0E0,E7F5,C7F2,C0C5,C0ED,C1F0,E7F0,E7F6,CBF6,E8A2,E8A1,D7C1,E7FA,E7F9,E7FB,E7F7,E7FE,E7FD,E7FC,C1D5,C7D9,C5FD,C5C3,C7ED,E8A3,E8A6,E8A5,E8A7,BAF7,E7F8,E8A4,C8F0,C9AA,E8A9,B9E5,D1FE,E8A8,E8AA,E8AD,E8AE,C1A7,E8AF,E8B0,E8AC,E8B4,E8AB,E8B1,E8B5,E8B2,E8B3,E8B7,E8B6,B9CF,F0AC,F0AD,C6B0,B0EA,C8BF,CDDF,CECD,EAB1,EAB2,C6BF,B4C9,EAB3,D5E7,DDF9,EAB4,EAB5,EAB6,B8CA,DFB0,C9F5,CCF0,C9FA,C9FB,D3C3,CBA6,B8A6,F0AE,B1C2,E5B8,CCEF,D3C9,BCD7,C9EA,B5E7,C4D0,B5E9,EEAE,BBAD,E7DE,EEAF,B3A9,EEB2,EEB1,BDE7,EEB0,CEB7,C5CF,C1F4,DBCE,EEB3,D0F3,C2D4,C6E8,B7AC,EEB4,B3EB,BBFB,EEB5,E7DC,EEB6,BDAE,F1E2,CAE8,D2C9,F0DA,F0DB,F0DC,C1C6,B8ED,BECE,F0DE,C5B1,F0DD,D1F1,F0E0,B0CC,BDEA,D2DF,F0DF,B4AF,B7E8,F0E6,F0E5,C6A3,F0E1,F0E2,B4C3,F0E3,D5EE,CCDB,BED2,BCB2,F0E8,F0E7,F0E4,B2A1,D6A2,D3B8,BEB7,C8AC,F0EA,D1F7,D6CC,BADB,F0E9,B6BB,CDB4,C6A6,C1A1,F0EB,F0EE,F0ED,F0F0,F0EC,BBBE,F0EF,CCB5,F0F2,B3D5,B1D4,F0F3,F0F4,F0F6,B4E1,F0F1,F0F7,F0FA,F0F8,F0F5,F0FD,F0F9,F0FC,F0FE,F1A1,CEC1,F1A4,F1A3,C1F6,F0FB,CADD,B4F1,B1F1,CCB1,F1A6,F1A7,F1AC,D5CE,F1A9,C8B3,F1A2,F1AB,F1A8,F1A5,F1AA,B0A9,F1AD,F1AF,F1B1,F1B0,F1AE,D1A2,F1B2,F1B3,B9EF,B5C7,B0D7,B0D9,D4ED,B5C4,BDD4,BBCA,F0A7,B8DE,F0A8,B0A8,F0A9,CDEE,F0AA,F0AB,C6A4,D6E5,F1E4,F1E5,C3F3,D3DB,D6D1,C5E8,D3AF,D2E6,EEC1,B0BB,D5B5,D1CE,BCE0,BAD0,BFF8,B8C7,B5C1,C5CC,CAA2,C3CB,EEC2,C4BF,B6A2,EDEC,C3A4,D6B1,CFE0,EDEF,C5CE,B6DC,CAA1,EDED,EDF0,EDF1,C3BC,BFB4,EDEE,EDF4,EDF2,D5E6,C3DF,EDF3,EDF6,D5A3,D1A3,EDF5,C3D0,EDF7,BFF4,BEEC,EDF8,CCF7,D1DB,D7C5,D5F6,EDFC,EDFB,EDF9,EDFA,EDFD,BEA6,CBAF,EEA1,B6BD,EEA2,C4C0,EDFE,BDDE,B2C7,B6C3,EEA5,D8BA,EEA3,EEA6,C3E9,B3F2,EEA7,EEA4,CFB9,EEA8,C2F7,EEA9,EEAA,DEAB,C6B3,C7C6,D6F5,B5C9,CBB2,EEAB,CDAB,EEAC,D5B0,EEAD,F6C4,DBC7,B4A3,C3AC,F1E6,CAB8,D2D3,D6AA,EFF2,BED8,BDC3,EFF3,B6CC,B0AB,CAAF,EDB6,EDB7,CEF9,B7AF,BFF3,EDB8,C2EB,C9B0,EDB9,C6F6,BFB3,EDBC,C5F8,D1D0,D7A9,EDBA,EDBB,D1E2,EDBF,EDC0,EDC4,EDC8,EDC6,EDCE,D5E8,EDC9,EDC7,EDBE,C5E9,C6C6,C9E9,D4D2,EDC1,EDC2,EDC3,EDC5,C0F9,B4A1,B9E8,EDD0,EDD1,EDCA,EDCF,CEF8,CBB6,EDCC,EDCD,CFF5,EDD2,C1F2,D3B2,EDCB,C8B7,BCEF,C5F0,EDD6,B5EF,C2B5,B0AD,CBE9,B1AE,EDD4,CDEB,B5E2,EDD5,EDD3,EDD7,B5FA,EDD8,EDD9,EDDC,B1CC,C5F6,BCEE,EDDA,CCBC,B2EA,EDDB,C4EB,B4C5,B0F5,EDDF,C0DA,B4E8,C5CD,EDDD,BFC4,EDDE,C4A5,EDE0,EDE1,EDE3,C1D7,BBC7,BDB8,EDE2,EDE4,EDE6,EDE5,EDE7,CABE,ECEA,C0F1,C9E7,ECEB,C6EE,ECEC,C6ED,ECED,ECF0,D7E6,ECF3,ECF1,ECEE,ECEF,D7A3,C9F1,CBEE,ECF4,ECF2,CFE9,ECF6,C6B1,BCC0,ECF5,B5BB,BBF6,ECF7,D9F7,BDFB,C2BB,ECF8,ECF9,B8A3,ECFA,ECFB,ECFC,D3ED,D8AE,C0EB,C7DD,BACC,D0E3,CBBD,CDBA,B8D1,B1FC,C7EF,D6D6,BFC6,C3EB,EFF5,C3D8,D7E2,EFF7,B3D3,C7D8,D1ED,D6C8,EFF8,EFF6,BBFD,B3C6,BDD5,D2C6,BBE0,CFA1,EFFC,EFFB,EFF9,B3CC,C9D4,CBB0,EFFE,B0DE,D6C9,EFFD,B3ED,F6D5,CEC8,F0A2,F0A1,B5BE,BCDA,BBFC,B8E5,C4C2,F0A3,CBEB,F0A6,D1A8,BEBF,C7EE,F1B6,F1B7,BFD5,B4A9,F1B8,CDBB,C7D4,D5AD,F1B9,F1BA,C7CF,D2A4,D6CF,F1BB,BDD1,B4B0,BEBD,B4DC,CED1,BFDF,F1BD,BFFA,F1BC,F1BF,F1BE,F1C0,F1C1,C1FE,C1A2,CAFA,D5BE,BEBA,BEB9,D5C2,BFA2,CDAF,F1B5,BDDF,B6CB,D6F1,F3C3,F3C4,B8CD,F3C6,F3C7,B0CA,F3C5,F3C9,CBF1,F3CB,D0A6,B1CA,F3C8,F3CF,B5D1,F3D7,F3D2,F3D4,F3D3,B7FB,B1BF,F3CE,F3CA,B5DA,F3D0,F3D1,F3D5,F3CD,BCE3,C1FD,F3D6,F3DA,F3CC,B5C8,BDEE,F3DC,B7A4,BFF0,D6FE,CDB2,B4F0,B2DF,F3D8,F3D9,C9B8,F3DD,F3DE,F3E1,F3DF,F3E3,F3E2,F3DB,BFEA,B3EF,F3E0,C7A9,BCF2,F3EB,B9BF,F3E4,B2AD,BBFE,CBE3,F3ED,F3E9,B9DC,F3EE,F3E5,F3E6,F3EA,C2E1,F3EC,F3EF,F3E8,BCFD,CFE4,F3F0,F3E7,F3F2,D7AD,C6AA,F3F3,F3F1,C2A8,B8DD,F3F5,F3F4,B4DB,F3F6,F3F7,F3F8,C0BA,C0E9,C5F1,F3FB,F3FA,B4D8,F3FE,F3F9,F3FC,F3FD,F4A1,F4A3,BBC9,F4A2,F4A4,B2BE,F4A6,F4A5,BCAE,C3D7,D9E1,C0E0,F4CC,D7D1,B7DB,F4CE,C1A3,C6C9,B4D6,D5B3,F4D0,F4CF,F4D1,CBDA,F4D2,D4C1,D6E0,B7E0,C1B8,C1BB,F4D3,BEAC,B4E2,F4D4,F4D5,BEAB,F4D6,F4DB,F4D7,F4DA,BAFD,F4D8,F4D9,B8E2,CCC7,F4DC,B2DA,C3D3,D4E3,BFB7,F4DD,C5B4,F4E9,CFB5,CEC9,CBD8,CBF7,BDF4,D7CF,C0DB,D0F5,F4EA,F4EB,F4EC,F7E3,B7B1,F4ED,D7EB,F4EE,E6F9,BEC0,E6FA,BAEC,E6FB,CFCB,E6FC,D4BC,BCB6,E6FD,E6FE,BCCD,C8D2,CEB3,E7A1,B4BF,E7A2,C9B4,B8D9,C4C9,D7DD,C2DA,B7D7,D6BD,CEC6,B7C4,C5A6,E7A3,CFDF,E7A4,E7A5,E7A6,C1B7,D7E9,C9F0,CFB8,D6AF,D6D5,E7A7,B0ED,E7A8,E7A9,C9DC,D2EF,BEAD,E7AA,B0F3,C8DE,BDE1,E7AB,C8C6,E7AC,BBE6,B8F8,D1A4,E7AD,C2E7,BEF8,BDCA,CDB3,E7AE,E7AF,BEEE,D0E5,CBE7,CCD0,BCCC,E7B0,BCA8,D0F7,E7B1,D0F8,E7B2,E7B3,B4C2,E7B4,E7B5,C9FE,CEAC,C3E0,E7B7,B1C1,B3F1,E7B8,E7B9,D7DB,D5C0,E7BA,C2CC,D7BA,E7BB,E7BC,E7BD,BCEA,C3E5,C0C2,E7BE,E7BF,BCA9,E7C0,E7C1,E7B6,B6D0,E7C2,E7C3,E7C4,BBBA,B5DE,C2C6,B1E0,E7C5,D4B5,E7C6,B8BF,E7C8,E7C7,B7EC,E7C9,B2F8,E7CA,E7CB,E7CC,E7CD,E7CE,E7CF,E7D0,D3A7,CBF5,E7D1,E7D2,E7D3,E7D4,C9C9,E7D5,E7D6,E7D7,E7D8,E7D9,BDC9,E7DA,F3BE,B8D7,C8B1,F3BF,F3C0,F3C1,B9DE,CDF8,D8E8,BAB1,C2DE,EEB7,B7A3,EEB9,EEB8,B0D5,EEBB,D5D6,D7EF,D6C3,EEBD,CAF0,EEBC,EEBE,EEC0,EEBF,D1F2,C7BC,C3C0,B8E1,C1E7,F4C6,D0DF,F4C7,CFDB,C8BA,F4C8,F4C9,F4CA,F4CB,D9FA,B8FE,E5F1,D3F0,F4E0,CECC,B3E1,F1B4,D2EE,F4E1,CFE8,F4E2,C7CC,B5D4,B4E4,F4E4,F4E3,F4E5,F4E6,F4E7,BAB2,B0BF,F4E8,B7AD,D2ED,D2AB,C0CF,BFBC,EBA3,D5DF,EAC8,F1F3,B6F8,CBA3,C4CD,F1E7,F1E8,B8FB,F1E9,BAC4,D4C5,B0D2,F1EA,F1EB,F1EC,F1ED,F1EE,F1EF,F1F1,F1F0,C5D5,F1F2,B6FA,F1F4,D2AE,DEC7,CBCA,B3DC,B5A2,B9A2,C4F4,F1F5,F1F6,C1C4,C1FB,D6B0,F1F7,F1F8,C1AA,C6B8,BEDB,F1F9,B4CF,F1FA,EDB2,EDB1,CBE0,D2DE,CBC1,D5D8,C8E2,C0DF,BCA1,EBC1,D0A4,D6E2,B6C7,B8D8,EBC0,B8CE,EBBF,B3A6,B9C9,D6AB,B7F4,B7CA,BCE7,B7BE,EBC6,EBC7,B0B9,BFCF,EBC5,D3FD,EBC8,EBC9,B7CE,EBC2,EBC4,C9F6,D6D7,D5CD,D0B2,EBCF,CEB8,EBD0,B5A8,B1B3,EBD2,CCA5,C5D6,EBD3,EBD1,C5DF,EBCE,CAA4,EBD5,B0FB,BAFA,D8B7,F1E3,EBCA,EBCB,EBCC,EBCD,EBD6,E6C0,EBD9,BFE8,D2C8,EBD7,EBDC,B8EC,EBD8,BDBA,D0D8,B0B7,EBDD,C4DC,D6AC,B4E0,C2F6,BCB9,EBDA,EBDB,D4E0,C6EA,C4D4,EBDF,C5A7,D9F5,B2B1,EBE4,BDC5,EBE2,EBE3,B8AC,CDD1,EBE5,EBE1,C1B3,C6A2,CCF3,EBE6,C0B0,D2B8,EBE7,B8AF,B8AD,EBE8,C7BB,CDF3,EBEA,EBEB,EBED,D0C8,EBF2,EBEE,EBF1,C8F9,D1FC,EBEC,EBE9,B8B9,CFD9,C4E5,EBEF,EBF0,CCDA,CDC8,B0F2,EBF6,EBF5,B2B2,B8E0,EBF7,B1EC,CCC5,C4A4,CFA5,EBF9,ECA2,C5F2,EBFA,C9C5,E2DF,EBFE,CDCE,ECA1,B1DB,D3B7,D2DC,EBFD,EBFB,B3BC,EAB0,D7D4,F4AB,B3F4,D6C1,D6C2,D5E9,BECA,F4A7,D2A8,F4A8,F4A9,F4AA,BECB,D3DF,C9E0,C9E1,F3C2,CAE6,CCF2,E2B6,CBB4,CEE8,D6DB,F4AD,F4AE,F4AF,F4B2,BABD,F4B3,B0E3,F4B0,F4B1,BDA2,B2D5,F4B6,F4B7,B6E6,B2B0,CFCF,F4B4,B4AC,F4B5,F4B8,F4B9,CDA7,F4BA,F4BB,F4BC,CBD2,F4BD,F4BE,F4BF,F4DE,C1BC,BCE8,C9AB,D1DE,E5F5,DCB3,D2D5,DCB4,B0AC,DCB5,BDDA,DCB9,D8C2,DCB7,D3F3,C9D6,DCBA,DCB6,DCBB,C3A2,DCBC,DCC5,DCBD,CEDF,D6A5,DCCF,DCCD,DCD2,BDE6,C2AB,DCB8,DCCB,DCCE,DCBE,B7D2,B0C5,DCC7,D0BE,DCC1,BBA8,B7BC,DCCC,DCC6,DCBF,C7DB,D1BF,DCC0,DCCA,DCD0,CEAD,DCC2,DCC3,DCC8,DCC9,B2D4,DCD1,CBD5,D4B7,DCDB,DCDF,CCA6,DCE6,C3E7,DCDC,BFC1,DCD9,B0FA,B9B6,DCE5,DCD3,DCC4,DCD6,C8F4,BFE0,C9BB,B1BD,D3A2,DCDA,DCD5,C6BB,DCDE,D7C2,C3AF,B7B6,C7D1,C3A9,DCE2,DCD8,DCEB,DCD4,DCDD,BEA5,DCD7,DCE0,DCE3,DCE4,DCF8,DCE1,DDA2,DCE7,BCEB,B4C4,C3A3,B2E7,DCFA,DCF2,DCEF,DCFC,DCEE,D2F0,B2E8,C8D7,C8E3,DCFB,DCED,DCF7,DCF5,BEA3,DCF4,B2DD,DCF3,BCF6,DCE8,BBC4,C0F3,BCD4,DCE9,DCEA,DCF1,DCF6,DCF9,B5B4,C8D9,BBE7,DCFE,DCFD,D3AB,DDA1,DDA3,DDA5,D2F1,DDA4,DDA6,DDA7,D2A9,BAC9,DDA9,DDB6,DDB1,DDB4,DDB0,C6CE,C0F2,C9AF,DCEC,DDAE,DDB7,DCF0,DDAF,DDB8,DDAC,DDB9,DDB3,DDAD,C4AA,DDA8,C0B3,C1AB,DDAA,DDAB,DDB2,BBF1,DDB5,D3A8,DDBA,DDBB,C3A7,DDD2,DDBC,DDD1,B9BD,BED5,BEFA,BACA,DDCA,DDC5,DDBF,B2CB,DDC3,DDCB,B2A4,DDD5,DDBE,C6D0,DDD0,DDD4,C1E2,B7C6,DDCE,DDCF,DDC4,DDBD,DDCD,CCD1,DDC9,DDC2,C3C8,C6BC,CEAE,DDCC,DDC8,DDC1,DDC6,C2DC,D3A9,D3AA,DDD3,CFF4,C8F8,DDE6,DDC7,DDE0,C2E4,DDE1,DDD7,D6F8,DDD9,DDD8,B8F0,DDD6,C6CF,B6AD,DDE2,BAF9,D4E1,DDE7,B4D0,DDDA,BFFB,DDE3,DDDF,DDDD,B5D9,DDDB,DDDC,DDDE,BDAF,DDE4,DDE5,DDF5,C3C9,CBE2,DDF2,D8E1,C6D1,DDF4,D5F4,DDF3,DDF0,DDEC,DDEF,DDE8,D0EE,C8D8,DDEE,DDE9,DDEA,CBF2,DDED,B1CD,C0B6,BCBB,DDF1,DDF7,DDF6,DDEB,C5EE,DDFB,DEA4,DEA3,DDF8,C3EF,C2FB,D5E1,CEB5,DDFD,B2CC,C4E8,CADF,C7BE,DDFA,DDFC,DDFE,DEA2,B0AA,B1CE,DEAC,DEA6,BDB6,C8EF,DEA1,DEA5,DEA9,DEA8,DEA7,DEAD,D4CC,DEB3,DEAA,DEAE,C0D9,B1A1,DEB6,DEB1,DEB2,D1A6,DEB5,DEAF,DEB0,D0BD,DEB4,CAED,DEB9,DEB8,DEB7,DEBB,BDE5,B2D8,C3EA,DEBA,C5BA,DEBC,CCD9,B7AA,D4E5,DEBD,DEBF,C4A2,DEC1,DEBE,DEC0,D5BA,DEC2,F2AE,BBA2,C2B2,C5B0,C2C7,F2AF,D0E9,D3DD,EBBD,B3E6,F2B0,F2B1,CAAD,BAE7,F2B3,F2B5,F2B4,CBE4,CFBA,F2B2,CAB4,D2CF,C2EC,CEC3,F2B8,B0F6,F2B7,F2BE,B2CF,D1C1,F2BA,F2BC,D4E9,F2BB,F2B6,F2BF,F2BD,F2B9,F2C7,F2C4,F2C6,F2CA,F2C2,F2C0,F2C5,D6FB,F2C1,C7F9,C9DF,F2C8,B9C6,B5B0,F2C3,F2C9,F2D0,F2D6,BBD7,F2D5,CDDC,D6EB,F2D2,F2D4,B8F2,F2CB,F2CE,C2F9,D5DD,F2CC,F2CD,F2CF,F2D3,F2D9,D3BC,B6EA,CAF1,B7E4,F2D7,F2D8,F2DA,F2DD,F2DB,F2DC,D1D1,F2D1,CDC9,CECF,D6A9,F2E3,C3DB,F2E0,C0AF,F2EC,F2DE,F2E1,F2E8,F2E2,F2E7,F2E6,F2E9,F2DF,F2E4,F2EA,D3AC,F2E5,B2F5,F2F2,D0AB,F2F5,BBC8,F2F9,F2F0,F2F6,F2F8,F2FA,F2F3,F2F1,BAFB,B5FB,F2EF,F2F7,F2ED,F2EE,F2EB,F3A6,F3A3,F3A2,F2F4,C8DA,F2FB,F3A5,C3F8,F2FD,F3A7,F3A9,F3A4,F2FC,F3AB,F3AA,C2DD,F3AE,F3B0,F3A1,F3B1,F3AC,F3AF,F2FE,F3AD,F3B2,F3B4,F3A8,F3B3,F3B5,D0B7,F3B8,D9F9,F3B9,F3B7,C8E4,F3B6,F3BA,F3BB,B4C0,EEC3,F3BC,F3BD,D1AA,F4AC,D0C6,D0D0,D1DC,CFCE,BDD6,D1C3,BAE2,E1E9,D2C2,F1C2,B2B9,B1ED,F1C3,C9C0,B3C4,D9F2,CBA5,F1C4,D6D4,F1C5,F4C0,F1C6,D4AC,F1C7,B0C0,F4C1,F4C2,B4FC,C5DB,CCBB,D0E4,CDE0,F1C8,D9F3,B1BB,CFAE,B8A4,F1CA,F1CB,B2C3,C1D1,D7B0,F1C9,F1CC,F1CE,D9F6,D2E1,D4A3,F4C3,C8B9,F4C4,F1CD,F1CF,BFE3,F1D0,F1D4,F1D6,F1D1,C9D1,C5E1,C2E3,B9FC,F1D3,F1D5,B9D3,F1DB,BAD6,B0FD,F1D9,F1D8,F1D2,F1DA,F1D7,C8EC,CDCA,F1DD,E5BD,F1DC,F1DE,F1DF,CFE5,F4C5,BDF3,F1E0,F1E1,CEF7,D2AA,F1FB,B8B2,BCFB,B9DB,B9E6,C3D9,CAD3,EAE8,C0C0,BEF5,EAE9,EAEA,EAEB,EAEC,EAED,EAEE,EAEF,BDC7,F5FB,F5FD,F5FE,F5FC,BDE2,F6A1,B4A5,F6A2,F6A3,ECB2,D1D4,D9EA,F6A4,EEBA,D5B2,D3FE,CCDC,CAC4,E5C0,F6A5,BEAF,C6A9,DAA5,BCC6,B6A9,B8BC,C8CF,BCA5,DAA6,DAA7,CCD6,C8C3,DAA8,C6FD,D1B5,D2E9,D1B6,BCC7,BDB2,BBE4,DAA9,DAAA,D1C8,DAAB,D0ED,B6EF,C2DB,CBCF,B7ED,C9E8,B7C3,BEF7,D6A4,DAAC,DAAD,C6C0,D7E7,CAB6,D5A9,CBDF,D5EF,DAAE,D6DF,B4CA,DAB0,DAAF,D2EB,DAB1,DAB2,DAB3,CAD4,DAB4,CAAB,DAB5,DAB6,B3CF,D6EF,DAB7,BBB0,B5AE,DAB8,DAB9,B9EE,D1AF,D2E8,DABA,B8C3,CFEA,B2EF,DABB,DABC,BDEB,CEDC,D3EF,DABD,CEF3,DABE,D3D5,BBE5,DABF,CBB5,CBD0,DAC0,C7EB,D6EE,DAC1,C5B5,B6C1,DAC2,B7CC,BFCE,DAC3,DAC4,CBAD,DAC5,B5F7,DAC6,C1C2,D7BB,DAC7,CCB8,D2EA,C4B1,DAC8,B5FD,BBD1,DAC9,D0B3,DACA,DACB,CEBD,DACC,DACD,DACE,B2F7,DAD1,DACF,D1E8,DAD0,C3D5,DAD2,DAD3,DAD4,DAD5,D0BB,D2A5,B0F9,DAD6,C7AB,DAD7,BDF7,C3A1,DAD8,DAD9,C3FD,CCB7,DADA,DADB,C0BE,C6D7,DADC,DADD,C7B4,DADE,DADF,B9C8,BBED,B6B9,F4F8,F4F9,CDE3,F5B9,EBE0,CFF3,BBBF,BAC0,D4A5,E1D9,F5F4,B1AA,B2F2,F5F5,F5F7,BAD1,F5F6,C3B2,F5F9,F5F8,B1B4,D5EA,B8BA,B9B1,B2C6,D4F0,CFCD,B0DC,D5CB,BBF5,D6CA,B7B7,CCB0,C6B6,B1E1,B9BA,D6FC,B9E1,B7A1,BCFA,EADA,EADB,CCF9,B9F3,EADC,B4FB,C3B3,B7D1,BAD8,EADD,D4F4,EADE,BCD6,BBDF,EADF,C1DE,C2B8,D4DF,D7CA,EAE0,EAE1,EAE4,EAE2,EAE3,C9DE,B8B3,B6C4,EAE5,CAEA,C9CD,B4CD,E2D9,C5E2,EAE6,C0B5,D7B8,EAE7,D7AC,C8FC,D8D3,D8CD,D4DE,D4F9,C9C4,D3AE,B8D3,B3E0,C9E2,F4F6,BAD5,F4F7,D7DF,F4F1,B8B0,D5D4,B8CF,C6F0,B3C3,F4F2,B3AC,D4BD,C7F7,F4F4,F4F3,CCCB,C8A4,F4F5,D7E3,C5BF,F5C0,F5BB,F5C3,F5C2,D6BA,F5C1,D4BE,F5C4,F5CC,B0CF,B5F8,F5C9,F5CA,C5DC,F5C5,F5C6,F5C7,F5CB,BEE0,F5C8,B8FA,F5D0,F5D3,BFE7,B9F2,F5BC,F5CD,C2B7,CCF8,BCF9,F5CE,F5CF,F5D1,B6E5,F5D2,F5D5,F5BD,F5D4,D3BB,B3EC,CCA4,F5D6,F5D7,BEE1,F5D8,CCDF,F5DB,B2C8,D7D9,F5D9,F5DA,F5DC,F5E2,F5E0,F5DF,F5DD,F5E1,F5DE,F5E4,F5E5,CCE3,E5BF,B5B8,F5E3,F5E8,CCA3,F5E6,F5E7,F5BE,B1C4,F5BF,B5C5,B2E4,F5EC,F5E9,B6D7,F5ED,F5EA,F5EB,B4DA,D4EA,F5EE,B3F9,F5EF,F5F1,F5F0,F5F2,F5F3,C9ED,B9AA,C7FB,B6E3,CCC9,EAA6,B3B5,D4FE,B9EC,D0F9,E9ED,D7AA,E9EE,C2D6,C8ED,BAE4,E9EF,E9F0,E9F1,D6E1,E9F2,E9F3,E9F5,E9F4,E9F6,E9F7,C7E1,E9F8,D4D8,E9F9,BDCE,E9FA,E9FB,BDCF,E9FC,B8A8,C1BE,E9FD,B1B2,BBD4,B9F5,E9FE,EAA1,EAA2,EAA3,B7F8,BCAD,CAE4,E0CE,D4AF,CFBD,D5B7,EAA4,D5DE,EAA5,D0C1,B9BC,B4C7,B1D9,C0B1,B1E6,B1E7,B1E8,B3BD,C8E8,E5C1,B1DF,C1C9,B4EF,C7A8,D3D8,C6F9,D1B8,B9FD,C2F5,D3AD,D4CB,BDFC,E5C2,B7B5,E5C3,BBB9,D5E2,BDF8,D4B6,CEA5,C1AC,B3D9,CCF6,E5C6,E5C4,E5C8,E5CA,E5C7,B5CF,C6C8,B5FC,E5C5,CAF6,E5C9,C3D4,B1C5,BCA3,D7B7,CDCB,CBCD,CACA,CCD3,E5CC,E5CB,C4E6,D1A1,D1B7,E5CD,E5D0,CDB8,D6F0,E5CF,B5DD,CDBE,E5D1,B6BA,CDA8,B9E4,CAC5,B3D1,CBD9,D4EC,E5D2,B7EA,E5CE,E5D5,B4FE,E5D6,E5D3,E5D4,D2DD,C2DF,B1C6,D3E2,B6DD,CBEC,E5D7,D3F6,B1E9,B6F4,E5DA,E5D8,E5D9,B5C0,D2C5,E5DC,E5DE,E5DD,C7B2,D2A3,E5DB,D4E2,D5DA,E5E0,D7F1,E5E1,B1DC,D1FB,E5E2,E5E4,E5E3,E5E5,D2D8,B5CB,E7DF,DAF5,DAF8,DAF6,DAF7,DAFA,D0CF,C4C7,B0EE,D0B0,DAF9,D3CA,BAAA,DBA2,C7F1,DAFC,DAFB,C9DB,DAFD,DBA1,D7DE,DAFE,C1DA,DBA5,D3F4,DBA7,DBA4,DBA8,BDBC,C0C9,DBA3,DBA6,D6A3,DBA9,DBAD,DBAE,DBAC,BAC2,BFA4,DBAB,DBAA,D4C7,B2BF,DBAF,B9F9,DBB0,B3BB,B5A6,B6BC,DBB1,B6F5,DBB2,B1C9,DBB4,DBB3,DBB5,DBB7,DBB6,DBB8,DBB9,DBBA,D3CF,F4FA,C7F5,D7C3,C5E4,F4FC,F4FD,F4FB,BEC6,D0EF,B7D3,D4CD,CCAA,F5A2,F5A1,BAA8,F4FE,CBD6,F5A4,C0D2,B3EA,CDAA,F5A5,F5A3,BDB4,F5A8,F5A9,BDCD,C3B8,BFE1,CBE1,F5AA,F5A6,F5A7,C4F0,F5AC,B4BC,D7ED,B4D7,F5AB,F5AE,F5AD,F5AF,D0D1,C3D1,C8A9,F5B0,F5B1,F5B2,F5B3,F5B4,F5B5,F5B7,F5B6,F5B8,B2C9,D3D4,CACD,C0EF,D6D8,D2B0,C1BF,BDF0,B8AA,BCF8,F6C6,F6C7,F6C8,F6C9,F6CA,F6CC,F6CB,F7E9,F6CD,F6CE,EEC4,EEC5,EEC6,D5EB,B6A4,EEC8,EEC7,EEC9,EECA,C7A5,EECB,EECC,B7B0,B5F6,EECD,EECF,EECE,B8C6,EED0,EED1,EED2,B6DB,B3AE,D6D3,C4C6,B1B5,B8D6,EED3,EED4,D4BF,C7D5,BEFB,CED9,B9B3,EED6,EED5,EED8,EED7,C5A5,EED9,EEDA,C7AE,EEDB,C7AF,EEDC,B2A7,EEDD,EEDE,EEDF,EEE0,EEE1,D7EA,EEE2,EEE3,BCD8,EEE4,D3CB,CCFA,B2AC,C1E5,EEE5,C7A6,C3AD,EEE6,EEE7,EEE8,EEE9,EEEA,EEEB,EEEC,EEED,EEEE,EEEF,EEF0,EEF1,EEF2,EEF4,EEF3,EEF5,CDAD,C2C1,EEF6,EEF7,EEF8,D5A1,EEF9,CFB3,EEFA,EEFB,EEFC,EEFD,EFA1,EEFE,EFA2,B8F5,C3FA,EFA3,EFA4,BDC2,D2BF,B2F9,EFA5,EFA6,EFA7,D2F8,EFA8,D6FD,EFA9,C6CC,EFAA,EFAB,C1B4,EFAC,CFFA,CBF8,EFAE,EFAD,B3FA,B9F8,EFAF,EFB0,D0E2,EFB1,EFB2,B7E6,D0BF,EFB3,EFB4,EFB5,C8F1,CCE0,EFB6,EFB7,EFB8,EFB9,EFBA,D5E0,EFBB,B4ED,C3AA,EFBC,EFBD,EFBE,EFBF,CEFD,EFC0,C2E0,B4B8,D7B6,BDF5,CFC7,EFC3,EFC1,EFC2,EFC4,B6A7,BCFC,BEE2,C3CC,EFC5,EFC6,EFC7,EFCF,EFC8,EFC9,EFCA,C7C2,EFF1,B6CD,EFCB,EFCC,EFCD,B6C6,C3BE,EFCE,EFD0,EFD1,EFD2,D5F2,EFD3,C4F7,EFD4,C4F8,EFD5,EFD6,B8E4,B0F7,EFD7,EFD8,EFD9,EFDA,EFDB,EFDC,EFDD,EFDE,BEB5,EFE1,EFDF,EFE0,EFE2,EFE3,C1CD,EFE4,EFE5,EFE6,EFE7,EFE8,EFE9,EFEA,EFEB,EFEC,C0D8,EFED,C1AD,EFEE,EFEF,EFF0,CFE2,B3A4,C3C5,E3C5,C9C1,E3C6,B1D5,CECA,B4B3,C8F2,E3C7,CFD0,E3C8,BCE4,E3C9,E3CA,C3C6,D5A2,C4D6,B9EB,CEC5,E3CB,C3F6,E3CC,B7A7,B8F3,BAD2,E3CD,E3CE,D4C4,E3CF,E3D0,D1CB,E3D1,E3D2,E3D3,E3D4,D1D6,E3D5,B2FB,C0BB,E3D6,C0AB,E3D7,E3D8,E3D9,E3DA,E3DB,B8B7,DAE2,B6D3,DAE4,DAE3,DAE6,C8EE,DAE5,B7C0,D1F4,D2F5,D5F3,BDD7,D7E8,DAE8,DAE7,B0A2,CDD3,DAE9,B8BD,BCCA,C2BD,C2A4,B3C2,DAEA,C2AA,C4B0,BDB5,CFDE,DAEB,C9C2,B1DD,DAEC,B6B8,D4BA,B3FD,DAED,D4C9,CFD5,C5E3,DAEE,DAEF,DAF0,C1EA,CCD5,CFDD,D3E7,C2A1,DAF1,CBE5,DAF2,CBE6,D2FE,B8F4,DAF3,B0AF,CFB6,D5CF,CBED,DAF4,E3C4,C1A5,F6BF,F6C0,F6C1,C4D1,C8B8,D1E3,D0DB,D1C5,BCAF,B9CD,EFF4,B4C6,D3BA,F6C2,B3FB,F6C3,B5F1,F6C5,D3EA,F6A7,D1A9,F6A9,F6A8,C1E3,C0D7,B1A2,CEED,D0E8,F6AB,CFF6,F6AA,D5F0,F6AC,C3B9,BBF4,F6AE,F6AD,C4DE,C1D8,CBAA,CFBC,F6AF,F6B0,F6B1,C2B6,B0D4,C5F9,F6B2,C7E0,F6A6,BEB8,BEB2,B5E5,B7C7,BFBF,C3D2,C3E6,D8CC,B8EF,BDF9,D1A5,B0D0,F7B0,F7B1,D0AC,B0B0,F7B2,F7B3,F7B4,C7CA,BECF,F7B7,F7B6,B1DE,F7B5,F7B8,F7B9,CEA4,C8CD,BAAB,E8B8,E8B9,E8BA,BEC2,D2F4,D4CF,C9D8,D2B3,B6A5,C7EA,F1FC,CFEE,CBB3,D0EB,E7EF,CDE7,B9CB,B6D9,F1FD,B0E4,CBCC,F1FE,D4A4,C2AD,C1EC,C6C4,BEB1,F2A1,BCD5,F2A2,F2A3,F2A4,D2C3,C6B5,CDC7,F2A5,D3B1,BFC5,CCE2,F2A6,F2A7,D1D5,B6EE,F2A8,F2A9,B5DF,F2AA,F2AB,B2FC,F2AC,F2AD,C8A7,B7E7,ECA9,ECAA,ECAB,ECAC,C6AE,ECAD,ECAE,B7C9,CAB3,E2B8,F7CF,F7D0,B2CD,F7D1,F7D3,F7D2,E2BB,BCA2,E2BC,E2BD,E2BE,E2BF,E2C0,E2C1,B7B9,D2FB,BDA4,CACE,B1A5,CBC7,E2C2,B6FC,C8C4,E2C3,BDC8,B1FD,E2C4,B6F6,E2C5,C4D9,E2C6,CFDA,B9DD,E2C7,C0A1,E2C8,B2F6,E2C9,C1F3,E2CA,E2CB,C2F8,E2CC,E2CD,E2CE,CAD7,D8B8,D9E5,CFE3,F0A5,DCB0,C2ED,D4A6,CDD4,D1B1,B3DB,C7FD,B2B5,C2BF,E6E0,CABB,E6E1,E6E2,BED4,E6E3,D7A4,CDD5,E6E5,BCDD,E6E4,E6E6,E6E7,C2EE,BDBE,E6E8,C2E6,BAA7,E6E9,E6EA,B3D2,D1E9,BFA5,E6EB,C6EF,E6EC,E6ED,E6EE,C6AD,E6EF,C9A7,E6F0,E6F1,E6F2,E5B9,E6F3,E6F4,C2E2,E6F5,E6F6,D6E8,E6F7,E6F8,B9C7,F7BB,F7BA,F7BE,F7BC,BAA1,F7BF,F7C0,F7C2,F7C1,F7C4,F7C3,F7C5,F7C6,F7C7,CBE8,B8DF,F7D4,F7D5,F7D6,F7D8,F7DA,F7D7,F7DB,F7D9,D7D7,F7DC,F7DD,F7DE,F7DF,F7E0,DBCB,D8AA,E5F7,B9ED,BFFD,BBEA,F7C9,C6C7,F7C8,F7CA,F7CC,F7CB,F7CD,CEBA,F7CE,C4A7,D3E3,F6CF,C2B3,F6D0,F6D1,F6D2,F6D3,F6D4,F6D6,B1AB,F6D7,F6D8,F6D9,F6DA,F6DB,F6DC,F6DD,F6DE,CFCA,F6DF,F6E0,F6E1,F6E2,F6E3,F6E4,C0F0,F6E5,F6E6,F6E7,F6E8,F6E9,F6EA,F6EB,F6EC,F6ED,F6EE,F6EF,F6F0,F6F1,F6F2,F6F3,F6F4,BEA8,F6F5,F6F6,F6F7,F6F8,C8FA,F6F9,F6FA,F6FB,F6FC,F6FD,F6FE,F7A1,F7A2,F7A3,F7A4,F7A5,F7A6,F7A7,F7A8,B1EE,F7A9,F7AA,F7AB,F7AC,F7AD,C1DB,F7AE,F7AF,C4F1,F0AF,BCA6,F0B0,C3F9,C5B8,D1BB,F0B1,F0B2,F0B3,F0B4,F0B5,D1BC,D1EC,F0B7,F0B6,D4A7,CDD2,F0B8,F0BA,F0B9,F0BB,F0BC,B8EB,F0BD,BAE8,F0BE,F0BF,BEE9,F0C0,B6EC,F0C1,F0C2,F0C3,F0C4,C8B5,F0C5,F0C6,F0C7,C5F4,F0C8,F0C9,F0CA,F7BD,F0CB,F0CC,F0CD,F0CE,F0CF,BAD7,F0D0,F0D1,F0D2,F0D3,F0D4,F0D5,F0D6,F0D8,D3A5,F0D7,F0D9,F5BA,C2B9,F7E4,F7E5,F7E6,F7E7,F7E8,C2B4,F7EA,F7EB,C2F3,F4F0,F4EF,C2E9,F7E1,F7E2,BBC6,D9E4,CAF2,C0E8,F0A4,BADA,C7AD,C4AC,F7EC,F7ED,F7EE,F7F0,F7EF,F7F1,F7F4,F7F3,F7F2,F7F5,F7F6,EDE9,EDEA,EDEB,F6BC,F6BD,F6BE,B6A6,D8BE,B9C4,D8BB,DCB1,CAF3,F7F7,F7F8,F7F9,F7FB,F7FA,B1C7,F7FC,F7FD,F7FE,C6EB,ECB4,B3DD,F6B3,F6B4,C1E4,F6B5,F6B6,F6B7,F6B8,F6B9,F6BA,C8A3,F6BB,C1FA,B9A8,EDE8,B9EA,D9DF,A3A1,A3A2,A3A3,A1E7,A3A5,A3A6,A3A7,A3A8,A3A9,A3AA,A3AB,A3AC,A3AD,A3AE,A3AF,A3B0,A3B1,A3B2,A3B3,A3B4,A3B5,A3B6,A3B7,A3B8,A3B9,A3BA,A3BB,A3BC,A3BD,A3BE,A3BF,A3C0,A3C1,A3C2,A3C3,A3C4,A3C5,A3C6,A3C7,A3C8,A3C9,A3CA,A3CB,A3CC,A3CD,A3CE,A3CF,A3D0,A3D1,A3D2,A3D3,A3D4,A3D5,A3D6,A3D7,A3D8,A3D9,A3DA,A3DB,A3DC,A3DD,A3DE,A3DF,A3E0,A3E1,A3E2,A3E3,A3E4,A3E5,A3E6,A3E7,A3E8,A3E9,A3EA,A3EB,A3EC,A3ED,A3EE,A3EF,A3F0,A3F1,A3F2,A3F3,A3F4,A3F5,A3F6,A3F7,A3F8,A3F9,A3FA,A3FB,A3FC,A3FD,A1AB,A1E9,A1EA,A3FE,A3A4';
	},

	_u2a_char: function(chrCode){
		var chrHex=chrCode.toString(16);
		chrHex='000'+chrHex.toUpperCase();
		chrHex=chrHex.substr(chrHex.length-4);
		var i=this._unicode().indexOf(chrHex);
		if (i!=-1){
			chrHex=this._ansicode().substr(i,4);
		}
		return parseInt(chrHex,16)
	},

	_a2u_char: function(chrCode){
		var chrHex=chrCode.toString(16);
		chrHex='000'+chrHex.toUpperCase();
		chrHex=chrHex.substr(chrHex.length-4);
		var i=this._ansicode().indexOf(chrHex);
		if (i!=-1){
			chrHex=this._unicode().substr(i,4);
		}
		return parseInt(chrHex,16)
	},

	_u2a: function(asContents){
		var len1=asContents.length;
		var temp='';
		for (var i=0;i<len1;i++){
			var varasc=asContents.charCodeAt(i);
			if (varasc<0) varasc+=65536;
			if (varasc>127) varasc=this._u2a_char(varasc);
			if (varasc>255){
				var varlow=varasc & 65280;
				varlow=varlow>>8;
				var varhigh=varasc & 255;
				temp+=String.fromCharCode(varlow)+String.fromCharCode(varhigh);
			} else {
				temp+=String.fromCharCode(varasc);
			}
		}
		return temp;
	},

	_a2u: function(asContents){
		var len1=asContents.length;
		var temp='';
		var chrcode;
		for (var i=0;i<len1;i++){
			var varasc=asContents.charCodeAt(i);
			if (varasc>127){
				chrcode=this._a2u_char((varasc<<8)+asContents.charCodeAt(++i));
			} else {
				chrcode=varasc;
			}
			temp+=String.fromCharCode(chrcode);
		}
		return temp;
	}
};
/*! include caret.js */
/*
 * jQuery Caret Range plugin
 * Copyright (c) 2009 Matt Zabriskie
 * Released under the MIT and GPL licenses.
 */
(function($) {
	$.extend($.fn, {
		caret: function (start, end) {
			var elem = this[0];

			if (elem) {
				// get caret range
				if (typeof start == "undefined") {
					if (elem.selectionStart) {
						start = elem.selectionStart;
						end = elem.selectionEnd;
					}
					else if (document.selection) {
						var val = this.val();
						var range = document.selection.createRange().duplicate();
						range.moveEnd("character", val.length);
						start = (range.text == "" ? val.length : val.lastIndexOf(range.text));

						range = document.selection.createRange().duplicate();
						range.moveStart("character", -val.length);
						end = range.text.length;
					}
				}
				// set caret range
				else {
					var val = this.val();

					if (typeof start != "number") start = -1;
					if (typeof end != "number") end = -1;
					if (start < 0) start = 0;
					if (end > val.length) end = val.length;
					if (end < start) end = start;
					if (start > end) start = end;

					elem.focus();

					if (elem.selectionStart) {
						elem.selectionStart = start;
						elem.selectionEnd = end;
					}
					else if (document.selection) {
						var range = elem.createTextRange();
						range.collapse(true);
						range.moveStart("character", start);
						range.moveEnd("character", end - start);
						range.select();
					}
				}

				return {start:start, end:end};
			}
		}
	});
})(jQuery);
/*! include cookie.js */
/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/**
 * Create a cookie with the given name and value and other optional parameters.
 *
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Set the value of a cookie.
 * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Create a cookie with all available options.
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Create a session cookie.
 * @example $.cookie('the_cookie', null);
 * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
 *       used when the cookie was set.
 *
 * @param String name The name of the cookie.
 * @param String value The value of the cookie.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the value of a cookie with the given name.
 *
 * @example $.cookie('the_cookie');
 * @desc Get the value of a cookie.
 *
 * @param String name The name of the cookie.
 * @return The value of the cookie.
 * @type String
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */
jQuery.cookie = function(name, value, options) {
    if (typeof value != 'undefined') { // name and value given, set cookie
        options = options || {};
        if (value === null) {
            value = '';
            options.expires = -1;
        }
        var expires = '';
        if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
            var date;
            if (typeof options.expires == 'number') {
                date = new Date();
                date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
            } else {
                date = options.expires;
            }
            expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
        }
        // CAUTION: Needed to parenthesize options.path and options.domain
        // in the following expressions, otherwise they evaluate to undefined
        // in the packed version for some reason...
        var path = options.path ? '; path=' + (options.path) : '';
        var domain = options.domain ? '; domain=' + (options.domain) : '';
        var secure = options.secure ? '; secure' : '';
        document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure].join('');
    } else { // only name given, get cookie
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
};
/*! include easyslider-1.7.js */
/*
 * 	Easy Slider 1.7 - jQuery plugin
 *	written by Alen Grakalic	
 *	http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding
 *
 *	Copyright (c) 2009 Alen Grakalic (http://cssglobe.com)
 *	Dual licensed under the MIT (MIT-LICENSE.txt)
 *	and GPL (GPL-LICENSE.txt) licenses.
 *
 *	Built for jQuery library
 *	http://jquery.com
 *
 */
 
/*
 *	markup example for $("#slider").easySlider();
 *	
 * 	<div id="slider">
 *		<ul>
 *			<li><img src="images/01.jpg" alt="" /></li>
 *			<li><img src="images/02.jpg" alt="" /></li>
 *			<li><img src="images/03.jpg" alt="" /></li>
 *			<li><img src="images/04.jpg" alt="" /></li>
 *			<li><img src="images/05.jpg" alt="" /></li>
 *		</ul>
 *	</div>
 *
 */

(function($) {

	$.fn.easySlider = function(options){
	  
		// default configuration properties
		var defaults = {			
			prevId: 		'prevBtn',
			prevText: 		'Previous',
			nextId: 		'nextBtn',	
			nextText: 		'Next',
			controlsShow:	true,
			controlsBefore:	'',
			controlsAfter:	'',	
			controlsFade:	true,
			firstId: 		'firstBtn',
			firstText: 		'First',
			firstShow:		false,
			lastId: 		'lastBtn',	
			lastText: 		'Last',
			lastShow:		false,				
			vertical:		false,
			speed: 			800,
			auto:			false,
			pause:			2000,
			continuous:		false, 
			numeric: 		false,
			numericId: 		'controls'
		}; 
		
		var options = $.extend(defaults, options);  
				
		this.each(function() {  
			var obj = $(this); 				
			var s = $("li", obj).length;
			var w = $("li", obj).width(); 
			var h = $("li", obj).height(); 
			var clickable = true;
			obj.width(w); 
			obj.height(h); 
			obj.css("overflow","hidden");
			var ts = s-1;
			var t = 0;
			$("ul", obj).css('width',s*w);			
			
			if(options.continuous){
				$("ul", obj).prepend($("ul li:last-child", obj).clone().css("margin-left","-"+ w +"px"));
				$("ul", obj).append($("ul li:nth-child(2)", obj).clone());
				$("ul", obj).css('width',(s+1)*w);
			}				
			
			if(!options.vertical) $("li", obj).css('float','left');
								
			if(options.controlsShow){
				var html = options.controlsBefore;				
				if(options.numeric){
					html += '<ol id="'+ options.numericId +'"></ol>';
				} else {
					if(options.firstShow) html += '<span id="'+ options.firstId +'"><a href=\"javascript:void(0);\">'+ options.firstText +'</a></span>';
					html += ' <span id="'+ options.prevId +'"><a href=\"javascript:void(0);\">'+ options.prevText +'</a></span>';
					html += ' <span id="'+ options.nextId +'"><a href=\"javascript:void(0);\">'+ options.nextText +'</a></span>';
					if(options.lastShow) html += ' <span id="'+ options.lastId +'"><a href=\"javascript:void(0);\">'+ options.lastText +'</a></span>';				
				}
				
				html += options.controlsAfter;						
				$(obj).after(html);										
			}
			
			if(options.numeric){									
				for(var i=0;i<s;i++){						
					$(document.createElement("li"))
						.attr('id',options.numericId + (i+1))
						.html('<a rel='+ i +' href=\"javascript:void(0);\">'+ (i+1) +'</a>')
						.appendTo($("#"+ options.numericId))
						.click(function(){							
							animate($("a",$(this)).attr('rel'),true);
						}); 												
				}							
			} else {
				$("a","#"+options.nextId).click(function(){		
					animate("next",true);
				});
				$("a","#"+options.prevId).click(function(){		
					animate("prev",true);				
				});	
				$("a","#"+options.firstId).click(function(){		
					animate("first",true);
				});				
				$("a","#"+options.lastId).click(function(){		
					animate("last",true);				
				});				
			}
			
			function setCurrent(i){
				i = parseInt(i)+1;
				$("li", "#" + options.numericId).removeClass("current");
				$("li#" + options.numericId + i).addClass("current");
			}
			
			function adjust(){
				if(t>ts) t=0;		
				if(t<0) t=ts;	
				if(!options.vertical) {
					$("ul",obj).css("margin-left",(t*w*-1));
				} else {
					$("ul",obj).css("margin-left",(t*h*-1));
				}
				clickable = true;
				if(options.numeric) setCurrent(t);
			}
			
			function animate(dir,clicked){
				if (clickable){
					clickable = false;
					var ot = t;				
					switch(dir){
						case "next":
							t = (ot>=ts) ? (options.continuous ? t+1 : ts) : t+1;						
							break; 
						case "prev":
							t = (t<=0) ? (options.continuous ? t-1 : 0) : t-1;
							break; 
						case "first":
							t = 0;
							break; 
						case "last":
							t = ts;
							break; 
						default:
							t = dir;
							break; 
					}	
					var diff = Math.abs(ot-t);
					var speed = diff*options.speed;						
					if(!options.vertical) {
						p = (t*w*-1);
						$("ul",obj).animate(
							{ marginLeft: p }, 
							{ queue:false, duration:speed, complete:adjust }
						);				
					} else {
						p = (t*h*-1);
						$("ul",obj).animate(
							{ marginTop: p }, 
							{ queue:false, duration:speed, complete:adjust }
						);					
					}
					
					if(!options.continuous && options.controlsFade){					
						if(t==ts){
							$("a","#"+options.nextId).hide();
							$("a","#"+options.lastId).hide();
						} else {
							$("a","#"+options.nextId).show();
							$("a","#"+options.lastId).show();					
						}
						if(t==0){
							$("a","#"+options.prevId).hide();
							$("a","#"+options.firstId).hide();
						} else {
							$("a","#"+options.prevId).show();
							$("a","#"+options.firstId).show();
						}					
					}			
					
					if(clicked) clearTimeout(timeout);
					if(options.auto && dir=="next" && !clicked){
						timeout = setTimeout(function(){
							animate("next",false);
						},diff*options.speed+options.pause);
					}
			
				}
				
			}
			// init
			var timeout;
			if(options.auto){
				timeout = setTimeout(function(){
					animate("next",false);
				},options.pause);
			}	
			
			if(options.numeric) setCurrent(0);
		
			if(!options.continuous && options.controlsFade){					
				$("a","#"+options.prevId).hide();
				$("a","#"+options.firstId).hide();				
			}				
			
		});
	  
	};

})(jQuery);
/*! include form.js */
/*!
 * jQuery Form Plugin
 * version: 3.18 (28-SEP-2012)
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
/*global ActiveXObject alert */
;(function($) {
"use strict";

/*
    Usage Note:
    -----------
    Do not use both ajaxSubmit and ajaxForm on the same form.  These
    functions are mutually exclusive.  Use ajaxSubmit if you want
    to bind your own submit handler to the form.  For example,

    $(document).ready(function() {
        $('#myForm').on('submit', function(e) {
            e.preventDefault(); // <-- important
            $(this).ajaxSubmit({
                target: '#output'
            });
        });
    });

    Use ajaxForm when you want the plugin to manage all the event binding
    for you.  For example,

    $(document).ready(function() {
        $('#myForm').ajaxForm({
            target: '#output'
        });
    });
    
    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the
    form does not have to exist when you invoke ajaxForm:

    $('#myForm').ajaxForm({
        delegation: true,
        target: '#output'
    });
    
    When using ajaxForm, the ajaxSubmit function will be invoked for you
    at the appropriate time.
*/

/**
 * Feature detection
 */
var feature = {};
feature.fileapi = $("<input type='file'/>").get(0).files !== undefined;
feature.formdata = window.FormData !== undefined;

/**
 * ajaxSubmit() provides a mechanism for immediately submitting
 * an HTML form using AJAX.
 */
$.fn.ajaxSubmit = function(options) {
    /*jshint scripturl:true */

    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)
    if (!this.length) {
        log('ajaxSubmit: skipping submit process - no element selected');
        return this;
    }
    
    var method, action, url, $form = this;

    if (typeof options == 'function') {
        options = { success: options };
    }

    method = this.attr('method');
    action = this.attr('action');
    url = (typeof action === 'string') ? $.trim(action) : '';
    url = url || window.location.href || '';
    if (url) {
        // clean url (don't include hash vaue)
        url = (url.match(/^([^#]+)/)||[])[1];
    }

    options = $.extend(true, {
        url:  url,
        success: $.ajaxSettings.success,
        type: method || 'GET',
        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'
    }, options);

    // hook for manipulating the form data before it is extracted;
    // convenient for use with rich editors like tinyMCE or FCKEditor
    var veto = {};
    this.trigger('form-pre-serialize', [this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');
        return this;
    }

    // provide opportunity to alter form data before it is serialized
    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSerialize callback');
        return this;
    }

    var traditional = options.traditional;
    if ( traditional === undefined ) {
        traditional = $.ajaxSettings.traditional;
    }
    
    var elements = [];
    var qx, a = this.formToArray(options.semantic, elements);
    if (options.data) {
        options.extraData = options.data;
        qx = $.param(options.data, traditional);
    }

    // give pre-submit callback an opportunity to abort the submit
    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSubmit callback');
        return this;
    }

    // fire vetoable 'validate' event
    this.trigger('form-submit-validate', [a, this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');
        return this;
    }

    var q = $.param(a, traditional);
    if (qx) {
        q = ( q ? (q + '&' + qx) : qx );
    }    
    if (options.type.toUpperCase() == 'GET') {
        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;
        options.data = null;  // data is null for 'get'
    }
    else {
        options.data = q; // data is the query string for 'post'
    }

    var callbacks = [];
    if (options.resetForm) {
        callbacks.push(function() { $form.resetForm(); });
    }
    if (options.clearForm) {
        callbacks.push(function() { $form.clearForm(options.includeHidden); });
    }

    // perform a load on the target only if dataType is not provided
    if (!options.dataType && options.target) {
        var oldSuccess = options.success || function(){};
        callbacks.push(function(data) {
            var fn = options.replaceTarget ? 'replaceWith' : 'html';
            $(options.target)[fn](data).each(oldSuccess, arguments);
        });
    }
    else if (options.success) {
        callbacks.push(options.success);
    }

    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg
        var context = options.context || this ;    // jQuery 1.4+ supports scope context 
        for (var i=0, max=callbacks.length; i < max; i++) {
            callbacks[i].apply(context, [data, status, xhr || $form, $form]);
        }
    };

    // are there files to upload?
    var fileInputs = $('input:file:enabled[value]', this); // [value] (issue #113)
    var hasFileInputs = fileInputs.length > 0;
    var mp = 'multipart/form-data';
    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

    var fileAPI = feature.fileapi && feature.formdata;
    log("fileAPI :" + fileAPI);
    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;

    var jqxhr;

    // options.iframe allows user to force iframe mode
    // 06-NOV-09: now defaulting to iframe mode if file input is detected
    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {
        // hack to fix Safari hang (thanks to Tim Molendijk for this)
        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d
        if (options.closeKeepAlive) {
            $.get(options.closeKeepAlive, function() {
                jqxhr = fileUploadIframe(a);
            });
        }
        else {
            jqxhr = fileUploadIframe(a);
        }
    }
    else if ((hasFileInputs || multipart) && fileAPI) {
        jqxhr = fileUploadXhr(a);
    }
    else {
        jqxhr = $.ajax(options);
    }

    $form.removeData('jqxhr').data('jqxhr', jqxhr);

    // clear element array
    for (var k=0; k < elements.length; k++)
        elements[k] = null;

    // fire 'notify' event
    this.trigger('form-submit-notify', [this, options]);
    return this;

    // utility fn for deep serialization
    function deepSerialize(extraData){
        var serialized = $.param(extraData).split('&');
        var len = serialized.length;
        var result = {};
        var i, part;
        for (i=0; i < len; i++) {
            part = serialized[i].split('=');
            result[decodeURIComponent(part[0])] = decodeURIComponent(part[1]);
        }
        return result;
    }

     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)
    function fileUploadXhr(a) {
        var formdata = new FormData();

        for (var i=0; i < a.length; i++) {
            formdata.append(a[i].name, a[i].value);
        }

        if (options.extraData) {
            var serializedData = deepSerialize(options.extraData);
            for (var p in serializedData)
                if (serializedData.hasOwnProperty(p))
                    formdata.append(p, serializedData[p]);
        }

        options.data = null;

        var s = $.extend(true, {}, $.ajaxSettings, options, {
            contentType: false,
            processData: false,
            cache: false,
            type: method || 'POST'
        });
        
        if (options.uploadProgress) {
            // workaround because jqXHR does not expose upload property
            s.xhr = function() {
                var xhr = jQuery.ajaxSettings.xhr();
                if (xhr.upload) {
                    xhr.upload.onprogress = function(event) {
                        var percent = 0;
                        var position = event.loaded || event.position; /*event.position is deprecated*/
                        var total = event.total;
                        if (event.lengthComputable) {
                            percent = Math.ceil(position / total * 100);
                        }
                        options.uploadProgress(event, position, total, percent);
                    };
                }
                return xhr;
            };
        }

        s.data = null;
            var beforeSend = s.beforeSend;
            s.beforeSend = function(xhr, o) {
                o.data = formdata;
                if(beforeSend)
                    beforeSend.call(this, xhr, o);
        };
        return $.ajax(s);
    }

    // private function for handling file uploads (hat tip to YAHOO!)
    function fileUploadIframe(a) {
        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;
        var useProp = !!$.fn.prop;
        var deferred = $.Deferred();

        if ($(':input[name=submit],:input[id=submit]', form).length) {
            // if there is an input with a name or id of 'submit' then we won't be
            // able to invoke the submit fn on the form (at least not x-browser)
            alert('Error: Form elements must not have name or id of "submit".');
            deferred.reject();
            return deferred;
        }
        
        if (a) {
            // ensure that every serialized input is still enabled
            for (i=0; i < elements.length; i++) {
                el = $(elements[i]);
                if ( useProp )
                    el.prop('disabled', false);
                else
                    el.removeAttr('disabled');
            }
        }

        s = $.extend(true, {}, $.ajaxSettings, options);
        s.context = s.context || s;
        id = 'jqFormIO' + (new Date().getTime());
        if (s.iframeTarget) {
            $io = $(s.iframeTarget);
            n = $io.attr('name');
            if (!n)
                 $io.attr('name', id);
            else
                id = n;
        }
        else {
            $io = $('<iframe name="' + id + '" src="'+ s.iframeSrc +'" />');
            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });
        }
        io = $io[0];


        xhr = { // mock object
            aborted: 0,
            responseText: null,
            responseXML: null,
            status: 0,
            statusText: 'n/a',
            getAllResponseHeaders: function() {},
            getResponseHeader: function() {},
            setRequestHeader: function() {},
            abort: function(status) {
                var e = (status === 'timeout' ? 'timeout' : 'aborted');
                log('aborting upload... ' + e);
                this.aborted = 1;
                // #214
                if (io.contentWindow.document.execCommand) {
                    try { // #214
                        io.contentWindow.document.execCommand('Stop');
                    } catch(ignore) {}
                }
                $io.attr('src', s.iframeSrc); // abort op in progress
                xhr.error = e;
                if (s.error)
                    s.error.call(s.context, xhr, e, status);
                if (g)
                    $.event.trigger("ajaxError", [xhr, s, e]);
                if (s.complete)
                    s.complete.call(s.context, xhr, e);
            }
        };

        g = s.global;
        // trigger ajax global events so that activity/block indicators work like normal
        if (g && 0 === $.active++) {
            $.event.trigger("ajaxStart");
        }
        if (g) {
            $.event.trigger("ajaxSend", [xhr, s]);
        }

        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {
            if (s.global) {
                $.active--;
            }
            deferred.reject();
            return deferred;
        }
        if (xhr.aborted) {
            deferred.reject();
            return deferred;
        }

        // add submitting element to data if we know it
        sub = form.clk;
        if (sub) {
            n = sub.name;
            if (n && !sub.disabled) {
                s.extraData = s.extraData || {};
                s.extraData[n] = sub.value;
                if (sub.type == "image") {
                    s.extraData[n+'.x'] = form.clk_x;
                    s.extraData[n+'.y'] = form.clk_y;
                }
            }
        }
        
        var CLIENT_TIMEOUT_ABORT = 1;
        var SERVER_ABORT = 2;

        function getDoc(frame) {
            var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;
            return doc;
        }
        
        // Rails CSRF hack (thanks to Yvan Barthelemy)
        var csrf_token = $('meta[name=csrf-token]').attr('content');
        var csrf_param = $('meta[name=csrf-param]').attr('content');
        if (csrf_param && csrf_token) {
            s.extraData = s.extraData || {};
            s.extraData[csrf_param] = csrf_token;
        }

        // take a breath so that pending repaints get some cpu time before the upload starts
        function doSubmit() {
            // make sure form attrs are set
            var t = $form.attr('target'), a = $form.attr('action');

            // update form attrs in IE friendly way
            form.setAttribute('target',id);
            if (!method) {
                form.setAttribute('method', 'POST');
            }
            if (a != s.url) {
                form.setAttribute('action', s.url);
            }

            // ie borks in some cases when setting encoding
            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {
                $form.attr({
                    encoding: 'multipart/form-data',
                    enctype:  'multipart/form-data'
                });
            }

            // support timout
            if (s.timeout) {
                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);
            }
            
            // look for server aborts
            function checkState() {
                try {
                    var state = getDoc(io).readyState;
                    log('state = ' + state);
                    if (state && state.toLowerCase() == 'uninitialized')
                        setTimeout(checkState,50);
                }
                catch(e) {
                    log('Server abort: ' , e, ' (', e.name, ')');
                    cb(SERVER_ABORT);
                    if (timeoutHandle)
                        clearTimeout(timeoutHandle);
                    timeoutHandle = undefined;
                }
            }

            // add "extra" data to form if provided in options
            var extraInputs = [];
            try {
                if (s.extraData) {
                    for (var n in s.extraData) {
                        if (s.extraData.hasOwnProperty(n)) {
                           // if using the $.param format that allows for multiple values with the same name
                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {
                               extraInputs.push(
                               $('<input type="hidden" name="'+s.extraData[n].name+'">').attr('value',s.extraData[n].value)
                                   .appendTo(form)[0]);
                           } else {
                               extraInputs.push(
                               $('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n])
                                   .appendTo(form)[0]);
                           }
                        }
                    }
                }

                if (!s.iframeTarget) {
                    // add iframe to doc and submit the form
                    $io.appendTo('body');
                    if (io.attachEvent)
                        io.attachEvent('onload', cb);
                    else
                        io.addEventListener('load', cb, false);
                }
                setTimeout(checkState,15);
                form.submit();
            }
            finally {
                // reset attrs and remove "extra" input elements
                form.setAttribute('action',a);
                if(t) {
                    form.setAttribute('target', t);
                } else {
                    $form.removeAttr('target');
                }
                $(extraInputs).remove();
            }
        }

        if (s.forceSync) {
            doSubmit();
        }
        else {
            setTimeout(doSubmit, 10); // this lets dom updates render
        }

        var data, doc, domCheckCount = 50, callbackProcessed;

        function cb(e) {
            if (xhr.aborted || callbackProcessed) {
                return;
            }
            try {
                doc = getDoc(io);
            }
            catch(ex) {
                log('cannot access response document: ', ex);
                e = SERVER_ABORT;
            }
            if (e === CLIENT_TIMEOUT_ABORT && xhr) {
                xhr.abort('timeout');
                deferred.reject(xhr, 'timeout');
                return;
            }
            else if (e == SERVER_ABORT && xhr) {
                xhr.abort('server abort');
                deferred.reject(xhr, 'error', 'server abort');
                return;
            }

            if (!doc || doc.location.href == s.iframeSrc) {
                // response not received yet
                if (!timedOut)
                    return;
            }
            if (io.detachEvent)
                io.detachEvent('onload', cb);
            else    
                io.removeEventListener('load', cb, false);

            var status = 'success', errMsg;
            try {
                if (timedOut) {
                    throw 'timeout';
                }

                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);
                log('isXml='+isXml);
                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {
                    if (--domCheckCount) {
                        // in some browsers (Opera) the iframe DOM is not always traversable when
                        // the onload callback fires, so we loop a bit to accommodate
                        log('requeing onLoad callback, DOM not available');
                        setTimeout(cb, 250);
                        return;
                    }
                    // let this fall through because server response could be an empty document
                    //log('Could not access iframe DOM after mutiple tries.');
                    //throw 'DOMException: not available';
                }

                //log('response detected');
                var docRoot = doc.body ? doc.body : doc.documentElement;
                xhr.responseText = docRoot ? docRoot.innerHTML : null;
                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;
                if (isXml)
                    s.dataType = 'xml';
                xhr.getResponseHeader = function(header){
                    var headers = {'content-type': s.dataType};
                    return headers[header];
                };
                // support for XHR 'status' & 'statusText' emulation :
                if (docRoot) {
                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;
                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;
                }

                var dt = (s.dataType || '').toLowerCase();
                var scr = /(json|script|text)/.test(dt);
                if (scr || s.textarea) {
                    // see if user embedded response in textarea
                    var ta = doc.getElementsByTagName('textarea')[0];
                    if (ta) {
                        xhr.responseText = ta.value;
                        // support for XHR 'status' & 'statusText' emulation :
                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;
                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;
                    }
                    else if (scr) {
                        // account for browsers injecting pre around json response
                        var pre = doc.getElementsByTagName('pre')[0];
                        var b = doc.getElementsByTagName('body')[0];
                        if (pre) {
                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;
                        }
                        else if (b) {
                            xhr.responseText = b.textContent ? b.textContent : b.innerText;
                        }
                    }
                }
                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {
                    xhr.responseXML = toXml(xhr.responseText);
                }

                try {
                    data = httpData(xhr, dt, s);
                }
                catch (e) {
                    status = 'parsererror';
                    xhr.error = errMsg = (e || status);
                }
            }
            catch (e) {
                log('error caught: ',e);
                status = 'error';
                xhr.error = errMsg = (e || status);
            }

            if (xhr.aborted) {
                log('upload aborted');
                status = null;
            }

            if (xhr.status) { // we've set xhr.status
                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';
            }

            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it
            if (status === 'success') {
                if (s.success)
                    s.success.call(s.context, data, 'success', xhr);
                deferred.resolve(xhr.responseText, 'success', xhr);
                if (g)
                    $.event.trigger("ajaxSuccess", [xhr, s]);
            }
            else if (status) {
                if (errMsg === undefined)
                    errMsg = xhr.statusText;
                if (s.error)
                    s.error.call(s.context, xhr, status, errMsg);
                deferred.reject(xhr, 'error', errMsg);
                if (g)
                    $.event.trigger("ajaxError", [xhr, s, errMsg]);
            }

            if (g)
                $.event.trigger("ajaxComplete", [xhr, s]);

            if (g && ! --$.active) {
                $.event.trigger("ajaxStop");
            }

            if (s.complete)
                s.complete.call(s.context, xhr, status);

            callbackProcessed = true;
            if (s.timeout)
                clearTimeout(timeoutHandle);

            // clean up
            setTimeout(function() {
                if (!s.iframeTarget)
                    $io.remove();
                xhr.responseXML = null;
            }, 100);
        }

        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)
            if (window.ActiveXObject) {
                doc = new ActiveXObject('Microsoft.XMLDOM');
                doc.async = 'false';
                doc.loadXML(s);
            }
            else {
                doc = (new DOMParser()).parseFromString(s, 'text/xml');
            }
            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;
        };
        var parseJSON = $.parseJSON || function(s) {
            /*jslint evil:true */
            return window['eval']('(' + s + ')');
        };

        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4

            var ct = xhr.getResponseHeader('content-type') || '',
                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,
                data = xml ? xhr.responseXML : xhr.responseText;

            if (xml && data.documentElement.nodeName === 'parsererror') {
                if ($.error)
                    $.error('parsererror');
            }
            if (s && s.dataFilter) {
                data = s.dataFilter(data, type);
            }
            if (typeof data === 'string') {
                if (type === 'json' || !type && ct.indexOf('json') >= 0) {
                    data = parseJSON(data);
                } else if (type === "script" || !type && ct.indexOf("javascript") >= 0) {
                    $.globalEval(data);
                }
            }
            return data;
        };

        return deferred;
    }
};

/**
 * ajaxForm() provides a mechanism for fully automating form submission.
 *
 * The advantages of using this method instead of ajaxSubmit() are:
 *
 * 1: This method will include coordinates for <input type="image" /> elements (if the element
 *    is used to submit the form).
 * 2. This method will include the submit element's name/value data (for the element that was
 *    used to submit the form).
 * 3. This method binds the submit() method to the form for you.
 *
 * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely
 * passes the options argument along after properly binding events for submit elements and
 * the form itself.
 */
$.fn.ajaxForm = function(options) {
    options = options || {};
    options.delegation = options.delegation && $.isFunction($.fn.on);
    
    // in jQuery 1.3+ we can fix mistakes with the ready state
    if (!options.delegation && this.length === 0) {
        var o = { s: this.selector, c: this.context };
        if (!$.isReady && o.s) {
            log('DOM not ready, queuing ajaxForm');
            $(function() {
                $(o.s,o.c).ajaxForm(options);
            });
            return this;
        }
        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()
        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));
        return this;
    }

    if ( options.delegation ) {
        $(document)
            .off('submit.form-plugin', this.selector, doAjaxSubmit)
            .off('click.form-plugin', this.selector, captureSubmittingElement)
            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)
            .on('click.form-plugin', this.selector, options, captureSubmittingElement);
        return this;
    }

    return this.ajaxFormUnbind()
        .bind('submit.form-plugin', options, doAjaxSubmit)
        .bind('click.form-plugin', options, captureSubmittingElement);
};

// private event handlers    
function doAjaxSubmit(e) {
    /*jshint validthis:true */
    var options = e.data;
    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed
        e.preventDefault();
        $(this).ajaxSubmit(options);
    }
}
    
function captureSubmittingElement(e) {
    /*jshint validthis:true */
    var target = e.target;
    var $el = $(target);
    if (!($el.is(":submit,input:image"))) {
        // is this a child element of the submit el?  (ex: a span within a button)
        var t = $el.closest(':submit');
        if (t.length === 0) {
            return;
        }
        target = t[0];
    }
    var form = this;
    form.clk = target;
    if (target.type == 'image') {
        if (e.offsetX !== undefined) {
            form.clk_x = e.offsetX;
            form.clk_y = e.offsetY;
        } else if (typeof $.fn.offset == 'function') {
            var offset = $el.offset();
            form.clk_x = e.pageX - offset.left;
            form.clk_y = e.pageY - offset.top;
        } else {
            form.clk_x = e.pageX - target.offsetLeft;
            form.clk_y = e.pageY - target.offsetTop;
        }
    }
    // clear form vars
    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);
}


// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm
$.fn.ajaxFormUnbind = function() {
    return this.unbind('submit.form-plugin click.form-plugin');
};

/**
 * formToArray() gathers form element data into an array of objects that can
 * be passed to any of the following ajax functions: $.get, $.post, or load.
 * Each object in the array has both a 'name' and 'value' property.  An example of
 * an array for a simple login form might be:
 *
 * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]
 *
 * It is this array that is passed to pre-submit callback functions provided to the
 * ajaxSubmit() and ajaxForm() methods.
 */
$.fn.formToArray = function(semantic, elements) {
    var a = [];
    if (this.length === 0) {
        return a;
    }

    var form = this[0];
    var els = semantic ? form.getElementsByTagName('*') : form.elements;
    if (!els) {
        return a;
    }

    var i,j,n,v,el,max,jmax;
    for(i=0, max=els.length; i < max; i++) {
        el = els[i];
        n = el.name;
        if (!n) {
            continue;
        }

        if (semantic && form.clk && el.type == "image") {
            // handle image inputs on the fly when semantic == true
            if(!el.disabled && form.clk == el) {
                a.push({name: n, value: $(el).val(), type: el.type });
                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
            }
            continue;
        }

        v = $.fieldValue(el, true);
        if (v && v.constructor == Array) {
            if (elements) 
                elements.push(el);
            for(j=0, jmax=v.length; j < jmax; j++) {
                a.push({name: n, value: v[j]});
            }
        }
        else if (feature.fileapi && el.type == 'file' && !el.disabled) {
            if (elements) 
                elements.push(el);
            var files = el.files;
            if (files.length) {
                for (j=0; j < files.length; j++) {
                    a.push({name: n, value: files[j], type: el.type});
                }
            }
            else {
                // #180
                a.push({ name: n, value: '', type: el.type });
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            if (elements) 
                elements.push(el);
            a.push({name: n, value: v, type: el.type, required: el.required});
        }
    }

    if (!semantic && form.clk) {
        // input type=='image' are not found in elements array! handle it here
        var $input = $(form.clk), input = $input[0];
        n = input.name;
        if (n && !input.disabled && input.type == 'image') {
            a.push({name: n, value: $input.val()});
            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
        }
    }
    return a;
};

/**
 * Serializes form data into a 'submittable' string. This method will return a string
 * in the format: name1=value1&amp;name2=value2
 */
$.fn.formSerialize = function(semantic) {
    //hand off to jQuery.param for proper encoding
    return $.param(this.formToArray(semantic));
};

/**
 * Serializes all field elements in the jQuery object into a query string.
 * This method will return a string in the format: name1=value1&amp;name2=value2
 */
$.fn.fieldSerialize = function(successful) {
    var a = [];
    this.each(function() {
        var n = this.name;
        if (!n) {
            return;
        }
        var v = $.fieldValue(this, successful);
        if (v && v.constructor == Array) {
            for (var i=0,max=v.length; i < max; i++) {
                a.push({name: n, value: v[i]});
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            a.push({name: this.name, value: v});
        }
    });
    //hand off to jQuery.param for proper encoding
    return $.param(a);
};

/**
 * Returns the value(s) of the element in the matched set.  For example, consider the following form:
 *
 *  <form><fieldset>
 *      <input name="A" type="text" />
 *      <input name="A" type="text" />
 *      <input name="B" type="checkbox" value="B1" />
 *      <input name="B" type="checkbox" value="B2"/>
 *      <input name="C" type="radio" value="C1" />
 *      <input name="C" type="radio" value="C2" />
 *  </fieldset></form>
 *
 *  var v = $(':text').fieldValue();
 *  // if no values are entered into the text inputs
 *  v == ['','']
 *  // if values entered into the text inputs are 'foo' and 'bar'
 *  v == ['foo','bar']
 *
 *  var v = $(':checkbox').fieldValue();
 *  // if neither checkbox is checked
 *  v === undefined
 *  // if both checkboxes are checked
 *  v == ['B1', 'B2']
 *
 *  var v = $(':radio').fieldValue();
 *  // if neither radio is checked
 *  v === undefined
 *  // if first radio is checked
 *  v == ['C1']
 *
 * The successful argument controls whether or not the field element must be 'successful'
 * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).
 * The default value of the successful argument is true.  If this value is false the value(s)
 * for each element is returned.
 *
 * Note: This method *always* returns an array.  If no valid value can be determined the
 *    array will be empty, otherwise it will contain one or more values.
 */
$.fn.fieldValue = function(successful) {
    for (var val=[], i=0, max=this.length; i < max; i++) {
        var el = this[i];
        var v = $.fieldValue(el, successful);
        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {
            continue;
        }
        if (v.constructor == Array)
            $.merge(val, v);
        else
            val.push(v);
    }
    return val;
};

/**
 * Returns the value of the field element.
 */
$.fieldValue = function(el, successful) {
    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();
    if (successful === undefined) {
        successful = true;
    }

    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||
        (t == 'checkbox' || t == 'radio') && !el.checked ||
        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||
        tag == 'select' && el.selectedIndex == -1)) {
            return null;
    }

    if (tag == 'select') {
        var index = el.selectedIndex;
        if (index < 0) {
            return null;
        }
        var a = [], ops = el.options;
        var one = (t == 'select-one');
        var max = (one ? index+1 : ops.length);
        for(var i=(one ? index : 0); i < max; i++) {
            var op = ops[i];
            if (op.selected) {
                var v = op.value;
                if (!v) { // extra pain for IE...
                    v = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;
                }
                if (one) {
                    return v;
                }
                a.push(v);
            }
        }
        return a;
    }
    return $(el).val();
};

/**
 * Clears the form data.  Takes the following actions on the form's input fields:
 *  - input text fields will have their 'value' property set to the empty string
 *  - select elements will have their 'selectedIndex' property set to -1
 *  - checkbox and radio inputs will have their 'checked' property set to false
 *  - inputs of type submit, button, reset, and hidden will *not* be effected
 *  - button elements will *not* be effected
 */
$.fn.clearForm = function(includeHidden) {
    return this.each(function() {
        $('input,select,textarea', this).clearFields(includeHidden);
    });
};

/**
 * Clears the selected form elements.
 */
$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {
    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list
    return this.each(function() {
        var t = this.type, tag = this.tagName.toLowerCase();
        if (re.test(t) || tag == 'textarea') {
            this.value = '';
        }
        else if (t == 'checkbox' || t == 'radio') {
            this.checked = false;
        }
        else if (tag == 'select') {
            this.selectedIndex = -1;
        }
        else if (includeHidden) {
            // includeHidden can be the value true, or it can be a selector string
            // indicating a special test; for example:
            //  $('#myForm').clearForm('.special:hidden')
            // the above would clean hidden inputs that have the class of 'special'
            if ( (includeHidden === true && /hidden/.test(t)) ||
                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) )
                this.value = '';
        }
    });
};

/**
 * Resets the form data.  Causes all form elements to be reset to their original value.
 */
$.fn.resetForm = function() {
    return this.each(function() {
        // guard against an input with the name of 'reset'
        // note that IE reports the reset function as an 'object'
        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {
            this.reset();
        }
    });
};

/**
 * Enables or disables any matching elements.
 */
$.fn.enable = function(b) {
    if (b === undefined) {
        b = true;
    }
    return this.each(function() {
        this.disabled = !b;
    });
};

/**
 * Checks/unchecks any matching checkboxes or radio buttons and
 * selects/deselects and matching option elements.
 */
$.fn.selected = function(select) {
    if (select === undefined) {
        select = true;
    }
    return this.each(function() {
        var t = this.type;
        if (t == 'checkbox' || t == 'radio') {
            this.checked = select;
        }
        else if (this.tagName.toLowerCase() == 'option') {
            var $sel = $(this).parent('select');
            if (select && $sel[0] && $sel[0].type == 'select-one') {
                // deselect all other options
                $sel.find('option').selected(false);
            }
            this.selected = select;
        }
    });
};

// expose debug var
$.fn.ajaxSubmit.debug = false;

// helper fn for console logging
function log() {
    if (!$.fn.ajaxSubmit.debug) 
        return;
    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');
    if (window.console && window.console.log) {
        window.console.log(msg);
    }
    else if (window.opera && window.opera.postError) {
        window.opera.postError(msg);
    }
}

})(jQuery);
/*! include highlight.js */
jQuery.extend({
    highlight: function (node, re, nodeName, className) {
        if (node.nodeType === 3) {
            var match = node.data.match(re);
            if (match) {
                var highlight = document.createElement(nodeName || 'span');
                highlight.className = className || 'highlight';
                var wordNode = node.splitText(match.index);
                wordNode.splitText(match[0].length);
                var wordClone = wordNode.cloneNode(true);
                highlight.appendChild(wordClone);
                wordNode.parentNode.replaceChild(highlight, wordNode);
                return 1; //skip added node in parent
            }
        } else if ((node.nodeType === 1 && node.childNodes) && // only element nodes that have children
            !/(script|style)/i.test(node.tagName) && // ignore script and style nodes
            !(node.tagName === nodeName.toUpperCase() && node.className === className)) { // skip if already highlighted
            for (var i = 0; i < node.childNodes.length; i++) {
                i += jQuery.highlight(node.childNodes[i], re, nodeName, className);
            }
        }
        return 0;
    }
});

jQuery.fn.unhighlight = function (options) {
    var settings = {
        className: 'highlight',
        element: 'span'
    };
    jQuery.extend(settings, options);

    return this.find(settings.element + "." + settings.className).each(function () {
        var parent = this.parentNode;
        parent.replaceChild(this.firstChild, this);
        parent.normalize();
    }).end();
};

jQuery.fn.highlight = function (words, options) {
    var settings = {
        className: 'highlight',
        element: 'span',
        caseSensitive: false,
        wordsOnly: false
    };
    jQuery.extend(settings, options);

    if (words.constructor === String) {
        words = [words];
    }
    words = jQuery.grep(words, function(word, i){
        return word != '';
    });
    if (words.length == 0) {
        return this;
    }

    var flag = settings.caseSensitive ? "" : "i";
    var pattern = "(" + words.join("|") + ")";
    if (settings.wordsOnly) {
        pattern = "\\b" + pattern + "\\b";
    }
    var re = new RegExp(pattern, flag);

    return this.each(function () {
        jQuery.highlight(this, re, settings.element, settings.className);
    });
};
/*! include jcarousel.min.js */
(function($){
    $.fn.jCarouselLite=function(o){
        o=$.extend({
            btnPrev:null,
            btnNext:null,
            btnGo:null,
            mouseWheel:false,
            auto:null,
            speed:200,
            easing:null,
            vertical:false,
            circular:true,
            visible:3,
            start:0,
            scroll:1,
            pauseOnHover:true,
            beforeStart:null,
            afterEnd:null
        },o||{});
        return this.each(function(){
            var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";
            var div=$(this),ul=$("ul",div),tLi=$("li",ul),tl=tLi.size(),v=o.visible,paused=0;
            if(o.circular){
                ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());
                o.start+=v
                }
                o.pauseOnHover?ul.hover(function(){
                paused=1
                },function(){
                paused=0
                }):"";
            var li=$("li",ul),itemLength=li.size(),curr=o.start;
            div.css("visibility","visible");
            li.css({
                overflow:"hidden",
                "float":o.vertical?"none":"left"
                });
            ul.css({
                margin:"0",
                padding:"0",
                position:"relative",
                "list-style-type":"none",
                "z-index":"1"
            });
            div.css({
                overflow:"hidden",
                position:"relative",
                "z-index":"2",
                left:"0px"
            });
            var liSize=o.vertical?height(li):width(li);
            var ulSize=liSize*itemLength;
            var divSize=liSize*v;
            li.css({
                width:li.width(),
                height:li.height()
                });
            ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));
            div.css(sizeCss,divSize+"px");
            if(o.btnPrev){
                $(o.btnPrev).click(function(){
                    return go(curr-o.scroll)
                    })
                }
                if(o.btnNext){
                $(o.btnNext).click(function(){
                    return go(curr+o.scroll)
                    })
                }
                if(o.btnGo){
                $.each(o.btnGo,function(i,val){
                    $(val).click(function(){
                        return go(o.circular?o.visible+i:i)
                        })
                    })
                }
                if(o.mouseWheel&&div.mousewheel){
                div.mousewheel(function(e,d){
                    return d>0?go(curr-o.scroll):go(curr+o.scroll)
                    })
                }
                if(o.auto){
                setInterval(function(){
                    go(curr+o.scroll)
                    },o.auto+o.speed)
                }
                function vis(){
                return li.slice(curr).slice(0,v)
                }
                function go(to){
                if(!running&&!paused){
                    if(o.beforeStart){
                        o.beforeStart.call(this,vis())
                        }
                        if(o.circular){
                        if(to<=o.start-v-1){
                            ul.css(animCss,-((itemLength-(v*2))*liSize)+"px");
                            curr=to==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll
                            }else{
                            if(to>=itemLength-v+1){
                                ul.css(animCss,-((v)*liSize)+"px");
                                curr=to==itemLength-v+1?v+1:v+o.scroll
                                }else{
                                curr=to
                                }
                            }
                    }else{
                if(to<0||to>itemLength-v){
                    return
                }else{
                    curr=to
                    }
                }
            running=true;
        ul.animate(animCss=="left"?{
            left:-(curr*liSize)
            }:{
            top:-(curr*liSize)
            },o.speed,o.easing,function(){
            if(o.afterEnd){
                o.afterEnd.call(this,vis())
                }
                running=false
            });
        if(!o.circular){
            $(o.btnPrev+","+o.btnNext).removeClass("disabled");
            $((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled")
            }
        }
        return false
    }
})
};

function css(el,prop){
    return parseInt($.css(el[0],prop))||0
    }
    function width(el){
    return el[0].offsetWidth+css(el,"marginLeft")+css(el,"marginRight")
    }
    function height(el){
    return el[0].offsetHeight+css(el,"marginTop")+css(el,"marginBottom")
    }
})(jQuery);
/*! include jquery.Storage.js */
/**
 * Storage plugin
 * Provides a simple interface for storing data such as user preferences.
 * Storage is useful for saving and retreiving data from the user's browser.
 * For newer browsers, localStorage is used.
 * If localStorage isn't supported, then cookies are used instead.
 * Retrievable data is limited to the same domain as this file.
 *
 * Usage:
 * This plugin extends jQuery by adding itself as a static method.
 * $.Storage - is the class name, which represents the user's data store, whether it's cookies or local storage.
 *             <code>if ($.Storage)</code> will tell you if the plugin is loaded.
 * $.Storage.set("name", "value") - Stores a named value in the data store.
 * $.Storage.set({"name1":"value1", "name2":"value2", etc}) - Stores multiple name/value pairs in the data store.
 * $.Storage.get("name") - Retrieves the value of the given name from the data store.
 * $.Storage.remove("name") - Permanently deletes the name/value pair from the data store.
 *
 * @author Dave Schindler
 *
 * Distributed under the MIT License
 *
 * Copyright (c) 2010 Dave Schindler
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function($) {
	// Private data
	var isLS=typeof window.localStorage!=='undefined';
	// Private functions
	function wls(n,v){var c;if(typeof n==="string"&&typeof v==="string"){localStorage[n]=v;return true;}else if(typeof n==="object"&&typeof v==="undefined"){for(c in n){if(n.hasOwnProperty(c)){localStorage[c]=n[c];}}return true;}return false;}
	function wc(n,v){var dt,e,c;dt=new Date();dt.setTime(dt.getTime()+31536000000);e="; expires="+dt.toGMTString();if(typeof n==="string"&&typeof v==="string"){document.cookie=n+"="+v+e+"; path=/";return true;}else if(typeof n==="object"&&typeof v==="undefined"){for(c in n) {if(n.hasOwnProperty(c)){document.cookie=c+"="+n[c]+e+"; path=/";}}return true;}return false;}
	function rls(n){return localStorage[n];}
	function rc(n){var nn, ca, i, c;nn=n+"=";ca=document.cookie.split(';');for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}if(c.indexOf(nn)===0){return c.substring(nn.length,c.length);}}return null;}
	function dls(n){return delete localStorage[n];}
	function dc(n){return wc(n,"",-1);}

	/**
	* Public API
	* $.Storage - Represents the user's data store, whether it's cookies or local storage.
	* $.Storage.set("name", "value") - Stores a named value in the data store.
	* $.Storage.set({"name1":"value1", "name2":"value2", etc}) - Stores multiple name/value pairs in the data store.
	* $.Storage.get("name") - Retrieves the value of the given name from the data store.
	* $.Storage.remove("name") - Permanently deletes the name/value pair from the data store.
	*/
	$.extend({
		Storage: {
			set: isLS ? wls : wc,
			get: isLS ? rls : rc,
			remove: isLS ? dls :dc
		}
	});
})(jQuery);
/*! include jquery.innerfade.js */
/* =========================================================

// jquery.innerfade.js

// Datum: 2008-02-14
// Firma: Medienfreunde Hofmann & Baldes GbR
// Author: Torsten Baldes
// Mail: t.baldes@medienfreunde.com
// Web: http://medienfreunde.com

// based on the work of Matt Oakes http://portfolio.gizone.co.uk/applications/slideshow/
// and Ralf S. Engelschall http://trainofthoughts.org/

 *
 *  <ul id="news"> 
 *      <li>content 1</li>
 *      <li>content 2</li>
 *      <li>content 3</li>
 *  </ul>
 *  
 *  $('#news').innerfade({ 
 *	  animationtype: Type of animation 'fade' or 'slide' (Default: 'fade'), 
 *	  speed: Fading-/Sliding-Speed in milliseconds or keywords (slow, normal or fast) (Default: 'normal'), 
 *	  timeout: Time between the fades in milliseconds (Default: '2000'), 
 *	  type: Type of slideshow: 'sequence', 'random' or 'random_start' (Default: 'sequence'), 
 * 		containerheight: Height of the containing element in any css-height-value (Default: 'auto'),
 *	  runningclass: CSS-Class which the container getâ€™s applied (Default: 'innerfade'),
 *	  children: optional children selector (Default: null)
 *  }); 
 *

// ========================================================= */


(function($) {

    $.fn.innerfade = function(options) {
        return this.each(function() {   
            $.innerfade(this, options);
        });
    };

    $.innerfade = function(container, options) {
        var settings = {
        		'animationtype':    'fade',
            'speed':            'normal',
            'type':             'sequence',
            'timeout':          2000,
            'containerheight':  'auto',
            'runningclass':     'innerfade',
            'children':         null
        };
        if (options)
            $.extend(settings, options);
        if (settings.children === null)
            var elements = $(container).children();
        else
            var elements = $(container).children(settings.children);
        if (elements.length > 1) {
            $(container).css('position', 'relative').css('height', settings.containerheight).addClass(settings.runningclass);
            for (var i = 0; i < elements.length; i++) {
                $(elements[i]).css('z-index', String(elements.length-i)).css('position', 'absolute').hide();
            }
            if (settings.type == "sequence") {
                setTimeout(function() {
                    $.innerfade.next(elements, settings, 1, 0);
                }, settings.timeout);
                $(elements[0]).show();
            } else if (settings.type == "random") {
            		var last = Math.floor ( Math.random () * ( elements.length ) );
                setTimeout(function() {
                    do { 
												current = Math.floor ( Math.random ( ) * ( elements.length ) );
										} while (last == current );             
										$.innerfade.next(elements, settings, current, last);
                }, settings.timeout);
                $(elements[last]).show();
						} else if ( settings.type == 'random_start' ) {
								settings.type = 'sequence';
								var current = Math.floor ( Math.random () * ( elements.length ) );
								setTimeout(function(){
									$.innerfade.next(elements, settings, (current + 1) %  elements.length, current);
								}, settings.timeout);
								$(elements[current]).show();
						}	else {
							alert('Innerfade-Type must either be \'sequence\', \'random\' or \'random_start\'');
						}
				}
    };

    $.innerfade.next = function(elements, settings, current, last) {
        if (settings.animationtype == 'slide') {
            $(elements[last]).slideUp(settings.speed);
            $(elements[current]).slideDown(settings.speed);
        } else if (settings.animationtype == 'fade') {
            $(elements[last]).fadeOut(settings.speed);
            $(elements[current]).fadeIn(settings.speed, function() {
							removeFilter($(this)[0]);
						});
        } else
            alert('Innerfade-animationtype must either be \'slide\' or \'fade\'');
        if (settings.type == "sequence") {
            if ((current + 1) < elements.length) {
                current = current + 1;
                last = current - 1;
            } else {
                current = 0;
                last = elements.length - 1;
            }
        } else if (settings.type == "random") {
            last = current;
            while (current == last)
                current = Math.floor(Math.random() * elements.length);
        } else
            alert('Innerfade-Type must either be \'sequence\', \'random\' or \'random_start\'');
        setTimeout((function() {
            $.innerfade.next(elements, settings, current, last);
        }), settings.timeout);
    };

})(jQuery);

// **** remove Opacity-Filter in ie ****
function removeFilter(element) {
	if(element.style.removeAttribute){
		element.style.removeAttribute('filter');
	}
}
/*! include jquery.numeric.js */
/*
 *
 * Copyright (c) 2006-2010 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * 
 * Version 1.2
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */
(function($) {
/*
 * Allows only valid characters to be entered into input boxes.
 * Note: does not validate that the final text is a valid number
 * (that could be done by another script, or server-side)
 *
 * @name     numeric
 * @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.'). Pass false for integers
 * @param    callback     A function that runs if the number is not valid (fires onblur)
 * @author   Sam Collett (http://www.texotela.co.uk)
 * @example  $(".numeric").numeric();
 * @example  $(".numeric").numeric(",");
 * @example  $(".numeric").numeric(null, callback);
 *
 */
$.fn.numeric = function(decimal, callback)
{
	decimal = (decimal === false) ? "" : decimal || ".";
	callback = typeof callback == "function" ? callback : function(){};
	return this.data("numeric.decimal", decimal).data("numeric.callback", callback).keypress($.fn.numeric.keypress).blur($.fn.numeric.blur);
};

$.fn.numeric.keypress = function(e)
{
	var decimal = $.data(this, "numeric.decimal");
	var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
	// allow enter/return key (only when in an input box)
	if(key == 13 && this.nodeName.toLowerCase() == "input")
	{
		return true;
	}
	else if(key == 13)
	{
		return false;
	}
	var allow = false;
	// allow Ctrl+A
	if((e.ctrlKey && key == 97 /* firefox */) || (e.ctrlKey && key == 65) /* opera */) return true;
	// allow Ctrl+X (cut)
	if((e.ctrlKey && key == 120 /* firefox */) || (e.ctrlKey && key == 88) /* opera */) return true;
	// allow Ctrl+C (copy)
	if((e.ctrlKey && key == 99 /* firefox */) || (e.ctrlKey && key == 67) /* opera */) return true;
	// allow Ctrl+Z (undo)
	if((e.ctrlKey && key == 122 /* firefox */) || (e.ctrlKey && key == 90) /* opera */) return true;
	// allow or deny Ctrl+V (paste), Shift+Ins
	if((e.ctrlKey && key == 118 /* firefox */) || (e.ctrlKey && key == 86) /* opera */
	|| (e.shiftKey && key == 45)) return true;
	// if a number was not pressed
	if(key < 48 || key > 57)
	{
		/* '-' only allowed at start */
		if(key == 45 && this.value.length == 0) return true;
		/* only one decimal separator allowed */
		if(decimal && key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1)
		{
			allow = false;
		}
		// check for other keys that have special purposes
		if(
			key != 8 /* backspace */ &&
			key != 9 /* tab */ &&
			key != 13 /* enter */ &&
			key != 35 /* end */ &&
			key != 36 /* home */ &&
			key != 37 /* left */ &&
			key != 39 /* right */ &&
			key != 46 /* del */
		)
		{
			allow = false;
		}
		else
		{
			// for detecting special keys (listed above)
			// IE does not support 'charCode' and ignores them in keypress anyway
			if(typeof e.charCode != "undefined")
			{
				// special keys have 'keyCode' and 'which' the same (e.g. backspace)
				if(e.keyCode == e.which && e.which != 0)
				{
					allow = true;
					// . and delete share the same code, don't allow . (will be set to true later if it is the decimal point)
					if(e.which == 46) allow = false;
				}
				// or keyCode != 0 and 'charCode'/'which' = 0
				else if(e.keyCode != 0 && e.charCode == 0 && e.which == 0)
				{
					allow = true;
				}
			}
		}
		// if key pressed is the decimal and it is not already in the field
		if(decimal && key == decimal.charCodeAt(0))
		{
			if(this.value.indexOf(decimal) == -1)
			{
				allow = true;
			}
			else
			{
				allow = false;
			}
		}
	}
	else
	{
		allow = true;
	}
	return allow;
};

$.fn.numeric.blur = function()
{
	var decimal = $.data(this, "numeric.decimal");
	var callback = $.data(this, "numeric.callback");
	var val = $(this).val();
	if(val != "")
	{
		var re = new RegExp("^\\d+$|\\d*" + decimal + "\\d+");
		if(!re.exec(val))
		{
			callback.apply(this);
		}
	}
};

$.fn.removeNumeric = function()
{
	return this.data("numeric.decimal", null).data("numeric.callback", null).unbind("keypress", $.fn.numeric.keypress).unbind("blur", $.fn.numeric.blur);
};

})(jQuery);
/*! include jquery.slides.js */
/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.9
* Updated: September 5th, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function($){
	$.fn.slides = function( option ) {
		// override defaults with specified option
		option = $.extend( {}, $.fn.slides.option, option );

		return this.each(function(){
			// wrap slides in control container, make sure slides are block level
			$('.' + option.container, $(this)).children().wrapAll('<div class="slides_control"/>');
			
			var elem = $(this),
				control = $('.slides_control',elem),
				total = control.children().size(),
				width = control.children().outerWidth(),
				height = control.children().outerHeight(),
				start = option.start - 1,
				effect = option.effect.indexOf(',') < 0 ? option.effect : option.effect.replace(' ', '').split(',')[0],
				paginationEffect = option.effect.indexOf(',') < 0 ? effect : option.effect.replace(' ', '').split(',')[1],
				next = 0, prev = 0, number = 0, current = 0, loaded, active, clicked, position, direction, imageParent, pauseTimeout, playInterval;
			
			// is there only one slide?
			if (total < 2) {
				// Fade in .slides_container
				$('.' + option.container, $(this)).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
					// let the script know everything is loaded
					loaded = true;
					// call the loaded funciton
					option.slidesLoaded();
				});
				// Hide the next/previous buttons
				$('.' + option.next + ', .' + option.prev).fadeOut(0);
				return false;
			}

			// animate slides
			function animate(direction, effect, clicked) {
				if (!active && loaded) {
					active = true;
					// start of animation
					option.animationStart(current + 1);
					switch(direction) {
						case 'next':
							// change current slide to previous
							prev = current;
							// get next from current + 1
							next = current + 1;
							// if last slide, set next to first slide
							next = total === next ? 0 : next;
							// set position of next slide to right of previous
							position = width*2;
							// distance to slide based on width of slides
							direction = -width*2;
							// store new current slide
							current = next;
						break;
						case 'prev':
							// change current slide to previous
							prev = current;
							// get next from current - 1
							next = current - 1;
							// if first slide, set next to last slide
							next = next === -1 ? total-1 : next;								
							// set position of next slide to left of previous
							position = 0;								
							// distance to slide based on width of slides
							direction = 0;		
							// store new current slide
							current = next;
						break;
						case 'pagination':
							// get next from pagination item clicked, convert to number
							next = parseInt(clicked,10);
							// get previous from pagination item with class of current
							prev = $('.' + option.paginationClass + ' li.'+ option.currentClass +' a', elem).attr('href').match('[^#/]+$');
							// if next is greater then previous set position of next slide to right of previous
							if (next > prev) {
								position = width*2;
								direction = -width*2;
							} else {
							// if next is less then previous set position of next slide to left of previous
								position = 0;
								direction = 0;
							}
							// store new current slide
							current = next;
						break;
					}

					// fade animation
					if (effect === 'fade') {
						// fade animation with crossfade
						if (option.crossfade) {
							// put hidden next above current
							control.children(':eq('+ next +')', elem).css({
								zIndex: 10
							// fade in next
							}).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
								if (option.autoHeight) {
									// animate container to height of next
									control.animate({
										height: control.children(':eq('+ next +')', elem).outerHeight()
									}, option.autoHeightSpeed, function(){
										// hide previous
										control.children(':eq('+ prev +')', elem).css({
											display: 'none',
											zIndex: 0
										});								
										// reset z index
										control.children(':eq('+ next +')', elem).css({
											zIndex: 0
										});									
										// end of animation
										option.animationComplete(next + 1);
										active = false;
									});
								} else {
									// hide previous
									control.children(':eq('+ prev +')', elem).css({
										display: 'none',
										zIndex: 0
									});									
									// reset zindex
									control.children(':eq('+ next +')', elem).css({
										zIndex: 0
									});									
									// end of animation
									option.animationComplete(next + 1);
									active = false;
								}
							});
						} else {
							// fade animation with no crossfade
							control.children(':eq('+ prev +')', elem).fadeOut(option.fadeSpeed,  option.fadeEasing, function(){
								// animate to new height
								if (option.autoHeight) {
									control.animate({
										// animate container to height of next
										height: control.children(':eq('+ next +')', elem).outerHeight()
									}, option.autoHeightSpeed,
									// fade in next slide
									function(){
										control.children(':eq('+ next +')', elem).fadeIn(option.fadeSpeed, option.fadeEasing);
									});
								} else {
								// if fixed height
									control.children(':eq('+ next +')', elem).fadeIn(option.fadeSpeed, option.fadeEasing, function(){
										// fix font rendering in ie, lame
										if($.browser.msie) {
											$(this).get(0).style.removeAttribute('filter');
										}
									});
								}									
								// end of animation
								option.animationComplete(next + 1);
								active = false;
							});
						}
					// slide animation
					} else {
						// move next slide to right of previous
						control.children(':eq('+ next +')').css({
							left: position,
							display: 'block'
						});
						// animate to new height
						if (option.autoHeight) {
							control.animate({
								left: direction,
								height: control.children(':eq('+ next +')').outerHeight()
							},option.slideSpeed, option.slideEasing, function(){
								control.css({
									left: -width
								});
								control.children(':eq('+ next +')').css({
									left: width,
									zIndex: 5
								});
								// reset previous slide
								control.children(':eq('+ prev +')').css({
									left: width,
									display: 'none',
									zIndex: 0
								});
								// end of animation
								option.animationComplete(next + 1);
								active = false;
							});
							// if fixed height
							} else {
								// animate control
								control.animate({
									left: direction
								},option.slideSpeed, option.slideEasing, function(){
									// after animation reset control position
									control.css({
										left: -width
									});
									// reset and show next
									control.children(':eq('+ next +')').css({
										left: width,
										zIndex: 5
									});
									// reset previous slide
									control.children(':eq('+ prev +')').css({
										left: width,
										display: 'none',
										zIndex: 0
									});
									// end of animation
									option.animationComplete(next + 1);
									active = false;
								});
							}
						}
					// set current state for pagination
					if (option.pagination) {
						// remove current class from all
						$('.'+ option.paginationClass +' li.' + option.currentClass, elem).removeClass(option.currentClass);
						// add current class to next
						$('.' + option.paginationClass + ' li:eq('+ next +')', elem).addClass(option.currentClass);
					}
				}
			} // end animate function
			
			function stop() {
				// clear interval from stored id
				clearInterval(elem.data('interval'));
			}

			function pause() {
				if (option.pause) {
					// clear timeout and interval
					clearTimeout(elem.data('pause'));
					clearInterval(elem.data('interval'));
					// pause slide show for option.pause amount
					pauseTimeout = setTimeout(function() {
						// clear pause timeout
						clearTimeout(elem.data('pause'));
						// start play interval after pause
						playInterval = setInterval(	function(){
							animate("next", effect);
						},option.play);
						// store play interval
						elem.data('interval',playInterval);
					},option.pause);
					// store pause interval
					elem.data('pause',pauseTimeout);
				} else {
					// if no pause, just stop
					stop();
				}
			}
				
			// 2 or more slides required
			if (total < 2) {
				return;
			}
			
			// error corection for start slide
			if (start < 0) {
				start = 0;
			}
			
			if (start > total) {
				start = total - 1;
			}
					
			// change current based on start option number
			if (option.start) {
				current = start;
			}
			
			// randomizes slide order
			if (option.randomize) {
				control.randomize();
			}
			
			// make sure overflow is hidden, width is set
			$('.' + option.container, elem).css({
				overflow: 'hidden',
				// fix for ie
				position: 'relative'
			});
			
			// set css for slides
			control.children().css({
				position: 'absolute',
				top: 0, 
				left: control.children().outerWidth(),
				zIndex: 0,
				display: 'none'
			 });
			
			// set css for control div
			control.css({
				position: 'relative',
				// size of control 3 x slide width
				width: (width * 3),
				// set height to slide height
				height: height,
				// center control to slide
				left: -width
			});
			
			// show slides
			$('.' + option.container, elem).css({
				display: 'block'
			});

			// if autoHeight true, get and set height of first slide
			if (option.autoHeight) {
				control.children().css({
					height: 'auto'
				});
				control.animate({
					height: control.children(':eq('+ start +')').outerHeight()
				},option.autoHeightSpeed);
			}
			
			// checks if image is loaded
			if (option.preload && control.find('img:eq(' + start + ')').length) {
				// adds preload image
				$('.' + option.container, elem).css({
					background: 'url(' + option.preloadImage + ') no-repeat 50% 50%'
				});
				
				// gets image src, with cache buster
				var img = control.find('img:eq(' + start + ')').attr('src') + '?' + (new Date()).getTime();
				
				// check if the image has a parent
				if ($('img', elem).parent().attr('class') != 'slides_control') {
					// If image has parent, get tag name
					imageParent = control.children(':eq(0)')[0].tagName.toLowerCase();
				} else {
					// Image doesn't have parent, use image tag name
					imageParent = control.find('img:eq(' + start + ')');
				}

				// checks if image is loaded
				control.find('img:eq(' + start + ')').attr('src', img).load(function() {
					// once image is fully loaded, fade in
					control.find(imageParent + ':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function(){
						$(this).css({
							zIndex: 5
						});
						// removes preload image
						$('.' + option.container, elem).css({
							background: ''
						});
						// let the script know everything is loaded
						loaded = true;
						// call the loaded funciton
						option.slidesLoaded();
					});
				});
			} else {
				// if no preloader fade in start slide
				control.children(':eq(' + start + ')').fadeIn(option.fadeSpeed, option.fadeEasing, function(){
					// let the script know everything is loaded
					loaded = true;
					// call the loaded funciton
					option.slidesLoaded();
				});
			}
			
			// click slide for next
			if (option.bigTarget) {
				// set cursor to pointer
				control.children().css({
					cursor: 'pointer'
				});
				// click handler
				control.children().click(function(){
					// animate to next on slide click
					animate('next', effect);
					return false;
				});									
			}
			
			// pause on mouseover
			if (option.hoverPause && option.play) {
				control.bind('mouseover',function(){
					// on mouse over stop
					stop();
				});
				control.bind('mouseleave',function(){
					// on mouse leave start pause timeout
					pause();
				});
			}
			
			// generate next/prev buttons
			if (option.generateNextPrev) {
				$('.' + option.container, elem).after('<a href="#" class="'+ option.prev +'">Prev</a>');
				$('.' + option.prev, elem).after('<a href="#" class="'+ option.next +'">Next</a>');
			}
			
			// next button
			$('.' + option.next ,elem).click(function(e){
				e.preventDefault();
				if (option.play) {
					pause();
				}
				animate('next', effect);
			});
			
			// previous button
			$('.' + option.prev, elem).click(function(e){
				e.preventDefault();
				if (option.play) {
					 pause();
				}
				animate('prev', effect);
			});
			
			// generate pagination
			if (option.generatePagination) {
				// create unordered list
				if (option.prependPagination) {
					elem.prepend('<ul class='+ option.paginationClass +'></ul>');
				} else {
					elem.append('<ul class='+ option.paginationClass +'></ul>');
				}
				// for each slide create a list item and link
				control.children().each(function(){
					$('.' + option.paginationClass, elem).append('<li><a href="#'+ number +'">'+ (number+1) +'</a></li>');
					number++;
				});
			} else {
				// if pagination exists, add href w/ value of item number to links
				$('.' + option.paginationClass + ' li a', elem).each(function(){
					$(this).attr('href', '#' + number);
					number++;
				});
			}
			
			// add current class to start slide pagination
			$('.' + option.paginationClass + ' li:eq('+ start +')', elem).addClass(option.currentClass);
			
			// click handling 
			$('.' + option.paginationClass + ' li a', elem ).click(function(){
				// pause slideshow
				if (option.play) {
					 pause();
				}
				// get clicked, pass to animate function					
				clicked = $(this).attr('href').match('[^#/]+$');
				// if current slide equals clicked, don't do anything
				if (current != clicked) {
					animate('pagination', paginationEffect, clicked);
				}
				return false;
			});
			
			// click handling 
			$('a.link', elem).click(function(){
				// pause slideshow
				if (option.play) {
					 pause();
				}
				// get clicked, pass to animate function					
				clicked = $(this).attr('href').match('[^#/]+$') - 1;
				// if current slide equals clicked, don't do anything
				if (current != clicked) {
					animate('pagination', paginationEffect, clicked);
				}
				return false;
			});
		
			if (option.play) {
				// set interval
				playInterval = setInterval(function() {
					animate('next', effect);
				}, option.play);
				// store interval id
				elem.data('interval',playInterval);
			}
		});
	};
	
	// default options
	$.fn.slides.option = {
		preload: false, // boolean, Set true to preload images in an image based slideshow
		preloadImage: '/img/loading.gif', // string, Name and location of loading image for preloader. Default is "/img/loading.gif"
		container: 'slides_container', // string, Class name for slides container. Default is "slides_container"
		generateNextPrev: false, // boolean, Auto generate next/prev buttons
		next: 'next', // string, Class name for next button
		prev: 'prev', // string, Class name for previous button
		pagination: true, // boolean, If you're not using pagination you can set to false, but don't have to
		generatePagination: true, // boolean, Auto generate pagination
		prependPagination: false, // boolean, prepend pagination
		paginationClass: 'pagination', // string, Class name for pagination
		currentClass: 'current', // string, Class name for current class
		fadeSpeed: 1000, // number, Set the speed of the fading animation in milliseconds
		fadeEasing: '', // string, must load jQuery's easing plugin before http://gsgd.co.uk/sandbox/jquery/easing/
		slideSpeed: 350, // number, Set the speed of the sliding animation in milliseconds
		slideEasing: '', // string, must load jQuery's easing plugin before http://gsgd.co.uk/sandbox/jquery/easing/
		start: 1, // number, Set the speed of the sliding animation in milliseconds
		effect: 'fade', // string, '[next/prev], [pagination]', e.g. 'slide, fade' or simply 'fade' for both
		crossfade: true, // boolean, Crossfade images in a image based slideshow
		randomize: false, // boolean, Set to true to randomize slides
		play: 5000, // number, Autoplay slideshow, a positive number will set to true and be the time between slide animation in milliseconds
		pause: 0, // number, Pause slideshow on click of next/prev or pagination. A positive number will set to true and be the time of pause in milliseconds
		hoverPause: false, // boolean, Set to true and hovering over slideshow will pause it
		autoHeight: false, // boolean, Set to true to auto adjust height
		autoHeightSpeed: 350, // number, Set auto height animation time in milliseconds
		bigTarget: false, // boolean, Set to true and the whole slide will link to next slide on click
		animationStart: function(){}, // Function called at the start of animation
		animationComplete: function(){}, // Function called at the completion of animation
		slidesLoaded: function() {} // Function is called when slides is fully loaded
	};
	
	// Randomize slide order on load
	$.fn.randomize = function(callback) {
		function randomizeOrder() { return(Math.round(Math.random())-0.5); }
			return($(this).each(function() {
			var $this = $(this);
			var $children = $this.children();
			var childCount = $children.length;
			if (childCount > 1) {
				$children.hide();
				var indices = [];
				for (i=0;i<childCount;i++) { indices[indices.length] = i; }
				indices = indices.sort(randomizeOrder);
				$.each(indices,function(j,k) { 
					var $child = $children.eq(k);
					var $clone = $child.clone(true);
					$clone.show().appendTo($this);
					if (callback !== undefined) {
						callback($child, $clone);
					}
				$child.remove();
			});
			}
		}));
	};
})(jQuery);
/*! include jquery.sudoSlider.js */
/*
 *  Sudo Slider ver 2.0.12 - jQuery plugin 
 *  Written by Erik Kristensen info@webbies.dk. 
 *  Based on Easy Slider 1.7 by Alen Grakalic http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider
 *  Although the two scripts doesn't share much code anymore. But Sudo Slider is still based on it. 
 *	
 *	 Dual licensed under the MIT
 *	 and GPL licenses.
 * 
 *	 Built for jQuery library
 *	 http://jquery.com
 *
 */
(function($)
{
	$.fn.sudoSlider = function(options)
	{
		// Saves space in the minified version.
		// It might look complicated, but it isn't. It's easy to make using "replace all" and it saves about ½kb in the minified version. 
		var truev = true; // If i wen't all crazy about minification, i could write "!!1" instead of "true", but i still wan't it to be readable. 
		var falsev = !truev;
		// default configuration properties 
		var defaults = {
			prevNext:          truev,
			prevHtml:          '<a href="#" class="prevBtn"> previous </a>',
			nextHtml:          '<a href="#" class="nextBtn"> next </a>',
			controlsShow:      truev,
			controlsAttr:      'id="controls"',
			controlsFadeSpeed: '400',
			controlsFade:      truev,
			insertAfter:       truev,
			firstShow:         falsev,
			firstHtml:         '<a href="#" class="firstBtn"> first </a>',
			lastShow:          falsev,
			lastHtml:          '<a href="#" class="lastBtn"> last </a>',
			numericAttr:       'class="controls"',
			numericText:       ['1'],
			vertical:          falsev,
			speed:             '800',
			ease:              'swing',
			auto:              falsev,
			pause:             '2000',
			continuous:        falsev,
			clickableAni:      falsev,
			numeric:           falsev,
			updateBefore:      falsev,
			history:           falsev,
			speedhistory:      '400',
			autoheight:        truev,
			customLink:        falsev,
			fade:              falsev,
			crossFade:         truev,
			fadespeed:         '1000',
			ajax:              falsev,
			loadingText:       'Loading Content...',
			preloadAjax:       falsev,
			startSlide:        falsev,
			ajaxLoadFunction:  falsev,
			beforeAniFunc:     falsev,
			afterAniFunc:      falsev,
			uncurrentFunc:     falsev,
			currentFunc:       falsev,
			autowidth:         truev,
			slideCount:        1,
			resumePause:       falsev
		};
		var options = $.extend(defaults, options);
		
		// To make it smaller. 
		// There is a way to make it even smaller, but that doesn't work with the public functions setOption() and getOption(). 
		var option = [
			options.controlsShow, /* option[0]/*controlsShow*/
			options.controlsFadeSpeed,/* option[1]/*controlsFadeSpeed*/
			options.controlsFade,/* option[2]/*controlsFade*/
			options.insertAfter,/* option[3]/*insertAfter*/
			options.firstShow,/* option[4]/*firstShow*/
			options.lastShow,/* option[5]/*lastShow*/
			options.vertical,/* option[6]/*vertical*/
			options.speed,/* option[7]/*speed*/
			options.ease,/* option[8]/*ease*/
			options.auto,/* option[9]/*auto*/
			options.pause,/* option[10]/*pause*/
			options.continuous,/* option[11]/*continuous*/
			options.prevNext,/* option[12]/*prevNext*/
			options.numeric,/* option[13]/*numeric*/
			options.numericAttr,/* option[14]/*numericAttr*/
			options.numericText,/* option[15]/*numericText*/
			options.clickableAni,/* option[16]/*clickableAni*/
			options.history,/* option[17]/*history*/
			options.speedhistory,/* option[18]/*speedhistory*/
			options.autoheight,/* option[19]/*autoheight*/
			options.customLink,/* option[20]/*customLink*/
			options.fade,/* option[21]/*fade*/
			options.crossFade,/* option[22]/*crossFade*/
			options.fadespeed,/* option[23]/*fadespeed*/
			options.updateBefore,/* option[24]/*updateBefore*/
			options.ajax,/* option[25]/*ajax*/
			options.preloadAjax,/* option[26]/*preloadAjax*/
			options.startSlide,/* option[27]/*startSlide*/
			options.ajaxLoadFunction,/* option[28]/*ajaxLoadFunction*/
			options.beforeAniFunc,/* option[29]/*beforeAniFunc*/
			options.afterAniFunc,/* option[30]/*afterAniFunc*/
			options.uncurrentFunc,/* option[31]/*uncurrentFunc*/
			options.currentFunc,/* option[32]/*currentFunc*/
			options.prevHtml,/* option[33]/*prevHtml*/
			options.nextHtml,/* option[34]/*nextHtml*/
			options.loadingText,/* option[35]/*loadingText*/
			options.firstHtml,/* option[36]/*firstHtml*/
			options.controlsAttr,/* option[37]/*controlsAttr*/
			options.lastHtml,/* option[38]/*lastHtml*/
			options.autowidth,/*  option[39]/*autowidth*/
			options.slideCount,/*  option[40]/*slideCount*/
			options.resumePause/* option[41]/*resumePause*/
		];

		// Defining the base element. 
		// This is needed if i want to have public functions (And i want public functions).
		var baseSlider = this;
		
		return this.each(function()
		{
			/*
			 * Lets start this baby. 
			 */
			// First we declare a lot of variables. 
			// Some of the names may be long, but they get minified. 
			var init, 
				ul, 
				li, 
				liConti,
				s, 
				w, 
				h, 
				t, 
				ot, 
				nt, 
				ts, 
				clickable, 
				buttonclicked, 
				fading,
				ajaxloading, 
				autoheightdocument, 
				numericControls, 
				numericContainer, 
				destroyed, 
				fontsmoothing, 
				controls, 
				html, 
				firstbutton, 
				lastbutton, 
				nextbutton, 
				prevbutton, 
				timeout,
				destroyT,
				oldSpeed,
				dontCountinue,
				dontCountinueInit,
				autoOn,
				obj = $(this);
			initSudoSlider(obj, falsev);
			function initSudoSlider(obj, destroyT)
			{
				
				//if (option[6]/*vertical*/) option[19]/*autoheight*/ = falsev; // With the new system of determining the position of the slides, this line is no longer needed. 
				destroyed = falsev; // In case this isn't the first init. 
				// There are some things we don't do at init. 
				init = truev; // I know it's an ugly workaround, but it works. 
				
				// Fix for nested list items
				ul = obj.children("ul");
				li = ul.children("li");
				liConti = li;
				// Some variables i'm gonna use alot. 
				s = li.length;
				// The below two lines shouldn't be necessary anymore.
				//w = li.eq(0).outerWidth(truev); // All slides must be same width, so this shouldn't be a problem. And it makes it posibble to mave multiple slides pr. "page" (2 slides in the viewport).
				//h = li.eq(0).outerHeight(truev); // Same, just the height. 
				
				// Now we are going to fix the document, if it's 'broken'. (No <ul> or no <li>). 
				// I assume that it's can only be broken, if ajax is enabled. If it's broken without Ajax being enabled, the script doesn't have anything to fill the holes. 
				if (option[25]/*ajax*/)
				{
					// Is the ul element there?
					if (ul.length == 0)
					{
						// No it's not, lets create it. 
						obj.append('<ul></ul>');
						ul = obj.children("ul");
					}
				
					// Do we have enough list elements to fill out all the ajax documents. 
					if (option[25]/*ajax*/.length > s)
					{
						// No we dont. 
						for (var i = 1; i <= option[25]/*ajax*/.length - s; i++) ul.append('<li><p>' + option[35] + '</p></li>');
						li = ul.children("li");
						s = li.length;
					}
				}				
				
				// Continuing with the variables. 
				t = 0;
				ot = t;
				nt = t;
				ts = s-1;
				
				clickable = truev;
				buttonclicked = falsev;
				fading = falsev;
				ajaxloading = falsev;
				autoheightdocument = 0;
				numericControls = new Array();
				numericContainer = falsev;
				destroyed = falsev;
				fontsmoothing = screen.fontSmoothingEnabled;
				
				// Set obj overflow to hidden (and position to relative <strike>, if fade is enabled. </strike>)
				obj.css("overflow","hidden");
				if (obj.css("position") == "static") obj.css("position","relative"); // Fixed a lot of IE6 + IE7 bugs. 
	
				// Float items to the left, and make sure that all elements are shown. 
				li.css({'float': 'left', 'display': 'block'});
				
				// Okay, now we have a lot of the variables in place, now we can check for some special conditions. 
				
				// The user doens't always put a text in the numericText. 
				// With this, if the user dont, the code will. 
				for(var i=0;i<s;i++)
				{
					if (option[15]/*numericText*/[i] == undefined) option[15]/*numericText*/[i] = (i+1);
					// Same thing for ajax. 
					if (option[25]/*ajax*/ && option[25]/*ajax*/[i] == undefined) option[25]/*ajax*/[i] = falsev;
				}

				// Clone elements for continuous scrolling
				if(option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					a = 0;
					if(option[6]/*vertical*/)
					{
						for (i = option[40]/*slideCount*/;i >= 1 ;i--)
						{
							// First we create the elements, pretending AJAX is a city in Russia. 
							// ul.prepend(li.filter(":last-child").clone().css("margin-top","-"+ h +"px"));
							var tmpchild = li.eq(-option[40]/*slideCount*/+i-1).clone();
							a = a + tmpchild.outerWidth(truev);
							tmpchild.css("margin-top","-"+ a +"px")
							ul.prepend(tmpchild);
							ul.append(li.eq(option[40]/*slideCount*/-i).clone().css({'z-index' : '0'}));
						}
					} 
					// IE6 bugs if i just use else here (atleast the IE6 in IETester (http://www.my-debugbar.com/wiki/IETester/HomePage)). No idea why, but it's IE6 and i'm not supprised. 
					if (!option[6]/*vertical*/)
					{
						for (i = option[40]/*slideCount*/;i >= 1 ;i--)
						{
							// First we create the elements, pretending AJAX is a city in Russia. 
							var tmpchild = li.eq(-option[40]/*slideCount*/+i-1).clone();
							a = a + tmpchild.outerWidth(truev);
							tmpchild.css("margin-left","-"+ a +"px")
							ul.prepend(tmpchild);
							ul.append(li.eq(option[40]/*slideCount*/-i).clone().css({'z-index' : '0'}));
						}
							
					}
					// This variable is also defined later, that's for the cases where Ajax is off, i also need to define it now, because the below code needs it. 
					liConti = ul.children("li"); // This might fix something. 
					// Now, lets check if AJAX really is a city in Russia.
					if (option[25]/*ajax*/) 
					{
						// Now we move from Russia back to reallity (nothing bad about the Russians, it's just a saying in Denmark.)
						// Starting with putting the first document after the last. 
						if (option[25]/*ajax*/[0]) ajaxLoad(0, (option[27]/*startSlide*/ == 1) ? truev : falsev, 0, falsev);
						option[25]/*ajax*/[0] = falsev;
						// And putting the last document before the first. 
						if (option[25]/*ajax*/[ts]) ajaxLoad(ts, (option[27]/*startSlide*/ == ts) ? truev : falsev, 0, falsev);
						option[25]/*ajax*/[ts] = falsev;
						
						// If slidecount is also enabled, i need to preload some more. 
						if (option[40]/*slideCount*/ > 1)
						{
							preloadEverything(truev);
						}
					}
				}
				
				// Now that the slide content is in place, some adjustments can be made. 
				heightWidthAdjust();
				
				// And i can make this variable for later use. 
				// The variable contains every <li> element. 
				liConti = ul.children("li");
				
				// Display the controls.
				controls = falsev;
				if(option[0]/*controlsShow*/)
				{
					// Instead of just generating HTML, i make it a little smarter. 
					controls = $('<span ' + option[37]/*controlsAttr*/ + '></span>');
					if (option[3]/*insertAfter*/) $(obj).after(controls);
					else $(obj).before(controls);
					
					if(option[13]/*numeric*/) {
						numericContainer = controls.prepend('<ol '+ option[14]/*numericAttr*/ +'></ol>').children();
						var substract = option[11]/*continuous*/ ? 1 : option[40]/*slideCount*/;
						for(var i=0;i<s-substract+1;i++)
						{
							numericControls[i] = $(document.createElement("li"))
							.attr({'rel' : (i+1)})
							.html('<a href="#"><span>'+ option[15]/*numericText*/[i] +'</span></a>') 
							.appendTo(numericContainer)
							.click(function(){
								goToSlide($(this).attr('rel') - 1, truev);
								return falsev;
							});
						};
					}
					if(option[4]/*firstShow*/) firstbutton = makecontrol(option[36]/*firstHtml*/, "first");
					if(option[5]/*lastShow*/) lastbutton = makecontrol(option[38]/*lastHtml*/, "last");
					if(option[12]/*prevNext*/){
						nextbutton = makecontrol(option[34]/*nextHtml*/, "next");
						prevbutton = makecontrol(option[33]/*prevHtml*/, "prev");
					}
				};
				
				// Preload elements. 
				if (option[26]/*preloadAjax*/) preloadEverything(truev);
				
				
				// Lets make those fast/normal/fast into some numbers we can make calculations with.
				option[1]/*controlsFadeSpeed*/ = textSpeedToNumber(option[1]/*controlsFadeSpeed*/);
				option[7]/*speed*/ = textSpeedToNumber(option[7]/*speed*/);
				option[10]/*pause*/ = textSpeedToNumber(option[10]/*pause*/);
				option[18]/*speedhistory*/ = textSpeedToNumber(option[18]/*speedhistory*/);
				option[23]/*fadespeed*/ = textSpeedToNumber(option[23]/*fadespeed*/);
				
				// And make sure that slideCount is a number.
				option[40]/*slideCount*/ = parseInt(option[40]/*slideCount*/,10)
				
				// customLinks. Easy to make, great to use. 
				// And if you wan't it even more flexible, you can use the public methods (http://webbies.dk/SudoSlider/help/) like sudoSlider.goToSlide('next');
				if (option[20]/*customLink*/) 
				{
					// Using live, that way javascript ajax-loaded buttons and javascript generated content will work.
					$(option[20]/*customLink*/).live('click', function() {
						a = $(this).attr('rel');
						if (a) {
							// Check for special events
							if (a == 'stop') 
							{
								option[9]/*auto*/ = falsev;
								stopAuto();
							}
							else if (a == 'start')
							{
								if (!option[11]/*continuous*/) baseSlider.setOption('continuous', truev);
								timeout = startAuto(option[10]/*pause*/);
								option[9]/*auto*/ = truev;
							}
							else if (a == 'block') clickable = falsev; // Simple, beautifull.
							else if (a == 'unblock') clickable = truev; // -||-
							// The general case. 
							// That means, typeof(a) == numbers and first,last,next,prev
							// I dont make any kind of input validation, meaning that it's quite easy to break the script with non-valid input. 
							else if (clickable) goToSlide((a == parseInt(a)) ? a - 1 : a, truev);
						}
						return falsev;
					}); 
				}
				
				// Starting auto
				if (option[9]/*auto*/) timeout = startAuto(option[10]/*pause*/);
				
				// Lets make those bookmarks and back/forward buttons work. 
				// And startslide etc. 
				// + If re-initiated, the slider will be at the same slide. 
				if (destroyT) animate(destroyT,falsev,falsev,falsev); 
				else if (option[17]/*history*/) {
					// Going to the correct slide at load. 
					$.address.init(function(e) {
						if (!destroyT) animate(filterUrlHash(e.value),falsev,falsev,falsev);
					})
					// Sliding/fading to the correct slide, on url change. 
					.change(function(e) {
						var i = filterUrlHash(e.value);
						if (i != t) goToSlide(i, falsev);
					});
				}
				// The startSlide setting only require one line of code. And here it is:
				else if (option[27]/*startSlide*/) animate(option[27]/*startSlide*/ - 1,falsev,falsev,falsev); 
				// doing it anyway. good way to fix bugs. 
				// And i only preload the next and previous slide after init (which this is). So i'm doing it. 
				// + if i didn't do this, a lot of things wouldn't happen on page load. By always animating, i ensure that everthing that's supposed to happen, do happen. 
				else animate(0,falsev,falsev,falsev); 
			}
			
			/*
			 * The functions do the magic. 
			 */
			function preloadEverything(adjust) //hønsesuppe
			{
				for (var i=0;i<=ts;i++) // Preload everything.
				{	
					if (option[25]/*ajax*/[i])
					{
						// If somethings is to be loaded, lets load it. 
						ajaxLoad(i, (option[27]/*startSlide*/ == i && adjust) ? truev : falsev, 0, falsev);
						// Making sure it aint loaded again. 
						option[25]/*ajax*/[i] = falsev;
					}
				}
			}
			
			function heightWidthAdjust()
			{
				a = 0;
				if(option[6]/*vertical*/)
				{
					for (var i = -1;i<=s;i++) a = a + li.eq(i).outerHeight(truev);
					ul.height(a*4);
				}
				else
				{
					for (var i = -1;i<=s;i++) a = a + li.eq(i).outerWidth(truev);
					ul.width(a*4);
				}
			}
			function startAuto(pause)
			{
				autoOn = truev; // The variable telling that an automatic slideshow is running. 
				return setTimeout(function(){
					goToSlide("next", falsev);
				},pause);
			}
			function stopAuto()
			{
				clearTimeout(timeout);
				autoOn = falsev; // The variable telling that auto is no longer in charge. 
			}
			function textSpeedToNumber(speed)
			{
				if (parseInt(speed)) var returnspeed = parseInt(speed);
				else 
				{
					var returnspeed = 400;
					switch(speed)
					{
					case 'fast':
						returnspeed = 200;
					case 'normal':
						returnspeed = 400;
					case 'medium':
						returnspeed = 400;
					case 'slow':
						returnspeed = 600;
					}
				}
				return returnspeed;
			};
			// I go a long way to save lines of code. 
			function makecontrol(html, action)
			{
				return $(html).prependTo(controls).click(function(){
					goToSlide(action, truev);
					return falsev;
				});
			}
			// <strike>Simple function</strike>A litle complecated function after moving the auto-slideshow code and introducing some "smart" animations. great work. 
			function goToSlide(i, clicked)
			{
				
				if (!destroyed)
				{
					// Ahhh, recursive functions. I love me. 
					if (option[9]/*auto*/)
					{
						var delay = option[7]/*speed*/;
						if (fading && option[22]/*crossFade*/) delay = parseInt((delay)*(3/5));
						else if (fading) delay = 0;
						// Stopping auto if clicked. And also continuing after X seconds of inactivity. 
						if(clicked){
							stopAuto();
							if (option[41]/*resumePause*/) timeout = startAuto(delay + option[41]/*resumePause*/);
						}
						// Continuing if not clicked.
						else timeout = startAuto(option[10]/*pause*/ + delay); 
					}
					
					if (option[21]/*fade*/)
					{
						fadeto(i, clicked);
					}
					else 
					{
						if (option[11]/*continuous*/)
						{
							// Just a little smart thing, that stops the slider from performing way to "large" animations. 
							// Not necessary when using fade, therefore i placed it here. 
							a = t;
							// Finding the "real" slide we are at. (-2 == 4). 
							if (a<0) a = a + s;
							if (a>ts) a = a - s;
							// And if i try to navigate to the neighbour, then why do it by sliding across the entire slider. 
							if (i == a + 1) i = 'next';
							if (i == a - 1) i = 'prev';
							// And when navigating from the first to the last (and the other way around). 
							if (a == 0 && i == ts) i = 'prev';
							if (a == ts && i == 0) i = 'next';
							
						}
						// And now the animation itself. 
						animate(i,clicked,truev,falsev);
					}
				}
			};
			function runOnImagesLoaded(e,_cb)
			{
				// This function is based on the onImagesLoaded plugin by soundphed, that was in a comment on this page "http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript#comment-92". 
				e.each(function() {
					var $imgs = (this.tagName.toLowerCase()==='img')?$(this):$('img',this),
					_cont = this,
					i = 0,
					_done=function() {
						if( typeof _cb === 'function' ) _cb(_cont);
					};
					
					if( $imgs.length ) {
						$imgs.each(function() {
							var _img = this,
							_checki=function(e) {
								if((_img.complete) || (_img.readyState=='complete'&&e.type=='readystatechange') )
								{
									if( ++i===$imgs.length ) _done();
								}
								else if( _img.readyState === undefined ) // dont for IE
								{
									$(_img).attr('src',$(_img).attr('src')); // re-fire load event
								}
							}; // _checki \\
							$(_img).bind('load readystatechange', function(e){_checki(e);});
							_checki({type:'readystatechange'}); // bind to 'load' event...
						});
					} else _done();
				});
			};
			
			// Is the file a image? (This function is not only used in the Ajaxload function)
			function imageCheck(file)
			{
				var len = file.length;
				var ext = file.substr(len-4, 4);
				
				if (ext == '.jpg' || ext == '.png' || ext == '.bmp' || ext == '.gif' || file.substr(len-5, 5) == '.jpeg') return truev;
				return falsev;
			}
			function fadeControl (fadeOpacity,fadetime,nextcontrol)
			{
				if (!option[11]/*continuous*/)
				{
					if (nextcontrol)
					{
						var eA = nextbutton,
						eB = lastbutton,
						directionA = 'next',
						directionB = 'last',
						firstlastshow = option[5]/*lastShow*/;
					}
					else
					{
						var eA = prevbutton,
						eB = firstbutton,
						directionA = 'prev',
						directionB = 'first',
						firstlastshow = option[4]/*firstShow*/;
					}
				
					if (option[12]/*prevNext*/)
					{
						if (fadeOpacity == 0) eA.fadeOut(fadetime);
						else eA.fadeIn(fadetime);
					}
					if (firstlastshow)
					{
						if (fadeOpacity == 0) eB.fadeOut(fadetime);
						else eB.fadeIn(fadetime);
					}
					if(option[20]/*customLink*/)
					{
						$(option[20]/*customLink*/)
						.filter(function(index) { 
							return ($(this).attr("rel") == directionA || $(this).attr("rel") == directionB);
						})
						.fadeTo(fadetime, fadeOpacity, function() { if (fadeOpacity == 0) $(this).hide();});
					} 
				}
			};
			// Fade the controls, if we are at the end of the slide. 
			// It's all the different kind of controls. 
			function fadeControls (a,fadetime)
			{
				if(a==0) fadeControl (0,fadetime,falsev);
				else fadeControl (1,fadetime,falsev);
				
				// The new way of doing it. 
				if (a >= s - option[40]/*slideCount*/) fadeControl(0, fadetime, truev);
				// Not using a else, because IE6 doesn't like that. 
				if (a < s - option[40]/*slideCount*/)fadeControl(1, fadetime, truev);
				
				// Here is the old way of doing it. 
				/* if(a==ts) fadeControl (0,fadetime,truev);
				else fadeControl (1,fadetime,truev);*/
			};
			
			
			
			// Updating the 'current' class
			function setCurrent(i)
			{
				i = parseInt((i>ts) ? i=0 : ((i<0)? i= ts+i+1 : i)) + 1;
				for(var a=0;a<numericControls.length;a++) setCurrentElement(numericControls[a], i);
				if(option[20]/*customLink*/) setCurrentElement(option[20]/*customLink*/, i);
			};
			function setCurrentElement(element,i)
			{
				$(element)
					.filter(".current")
					.removeClass("current")
					.each(function() {
						if ($.isFunction(option[31]/*uncurrentFunc*/)){ option[31]/*uncurrentFunc*/.call(this, $(this).attr("rel")); }
					});
				$(element)
					.filter(function() { 
						// Tried to do it other ways, but i found that this is the only reliable way of doing it.
						return $(this).attr("rel") == i; 
					})
					.addClass("current")
					.each(function(index) {
						if ($.isFunction(option[32]/*currentFunc*/)){ option[32]/*currentFunc*/.call(this, i); }
					});
			};
			// Find out wich numericText fits the current url. 
			function filterUrlHash(t)
			{
				var te = 0;
				for (var i=0;i<=s;i=i+1) if (option[15]/*numericText*/[i] == t) te = i;
				return te;
			};
			function autoadjust(i, speed)
			{
				// Both autoheight and autowidth can be enabled at the same time. It's like magic. 
				if (option[19]/*autoheight*/) autoheight(i, speed);
				if (option[39]/*autowidth*/) autowidth(i, speed);
			}
			// Automaticly adjust the height, i love this function. 
			function autoheight(i, speed)
			{
				obj.ready(function() {
					if (i == s) i = 0;
					// First i run it. In case there are no images. 
					var nheight = li.eq(i).height();
					if (nheight != 0) setHeight(nheight, speed);
					// Then i run it again after the images has been loaded. (If any)
					runOnImagesLoaded(li.eq(i),function(imgtarget){
						obj.ready(function() {
							nheight = $(imgtarget).height();
							if (nheight != 0) setHeight(nheight, speed);
						});
					});
				});
			};
			// Automaticly adjust the width (sick). 
			function autowidth(i, speed)
			{
				obj.ready(function() {
					if (i == s) i = 0;
					// First i run it. In case there are no images. 
					var nwidth = li.eq(i).width();
					if (nwidth != 0) setWidth(nwidth, speed);
					// Then i run it again after the images has been loaded. (If any)
					runOnImagesLoaded(li.eq(i),function(imgtarget){
						obj.ready(function() {
							nwidth = $(imgtarget).width();
							if (nwidth != 0) setWidth(nwidth, speed);
						});
					});
				});
			};
			function setWidth(nwidth, speed)
			{
				obj.animate(
					{ width:nwidth},
					{
						queue:falsev,
						duration:speed,
						easing:option[8]/*ease*/
					}
				);
			};
			function setHeight(nheight, speed)
			{
				obj.animate(
					{ height:nheight},
					{
						queue:falsev,
						duration:speed,
						easing:option[8]/*ease*/
					}
				);
			};
			function adjustPosition()
			{
				// Anything complicated here? No, so move on. The good stuff comes in the next function. 
				if (option[6]/*vertical*/) ul.css("margin-top",getSlidePos(t, falsev));
				else ul.css("margin-left",getSlidePos(t, truev)); 
			};
			// This is a bit complicated, because Firefox won't handle it right. 
			// If i just used .position(), Firefox gets the position 1-2 px off pr. slide (i have no idea why). 
			function getSlidePos(slide, width) // getSlidePosWidth
			{
				var p = 0;
				var goTo = slide - ((option[11]/*continuous*/ && !option[21]/*fade*/) ? 1-option[40]/*slideCount*/ : 1);
				var add = (option[11]/*continuous*/ && !option[21]/*fade*/) ? add = option[40]/*slideCount*/ : 0;
				for (var i = 0;i<=goTo;i++){
					if (width) p = p - liConti.eq(i + add).outerWidth(truev);
					else p = p - liConti.eq(i + add).outerHeight(truev);
				}
				return p;
			};

			// When the animation finishes (fade or sliding), we need to adjust the slider. 
			function adjust()
			{
				
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					if(t>ts) t=0;
					if(t<1-option[40]/*slideCount*/) t=s-option[40]/*slideCount*/;
				}
				else
				{
					if(t>ts) t=0;
					if(t<0) t=ts;
				}
				// Keeping the below line in case something else fucks up. (It shouldn't)
				if (t==ts && !option[21]/*fade*/) preloadEverything(falsev);
				if(!option[24]/*updateBefore*/) setCurrent(t);
				adjustPosition();
				clickable = truev;
				if(option[17]/*history*/ && buttonclicked) window.location.hash = option[15]/*numericText*/[t];
				if (!fading)
				{
					a = t + 1;
					if (a<1) a = a + s;
					if (a>s) a = a - s;
					// Lets run the after animation function.
					afterAniCall(li.eq(t), a)
					if (option[11]/*continuous*/ && !option[21]/*fade*/) // Never needed if it's a fade animation. 
					{
						// Might look complicated, and it is.
						// To see the logic, you need to 'uncompress' the code. 
						// But it's basicly just determining which continuous-"clone" i need to call afterAniFunc on. 
						if (t < option[40]/*slideCount*/) afterAniCall(liConti.eq((t<0) ? t + option[40]/*slideCount*/ : t - option[40]/*slideCount*/), a);
						if (t > ts - option[40]/*slideCount*/) afterAniCall(liConti.eq(option[40]/*slideCount*/ + t - ts - 1), a);
					}
				}
			};
			function afterAniCall(el, a)
			{
				if ($.isFunction(option[30]/*afterAniFunc*/)) option[30]/*afterAniFunc*/.call(el, a);
			};
			function beforeAniCall(el, a)
			{
				if ($.isFunction(option[29]/*beforeAniFunc*/)) option[29]/*beforeAniFunc*/.call(el, a);
			};
			// Convert the direction into a usefull number.
			function filterDir(dir, ot)
			{
				var nt = t; // i dont want to mess with the 't' variable. This function doens't allways return the t-value, it can be used for other things.
				switch(dir)
				{
					case "next":
						nt = (ot>=ts) ? (option[11]/*continuous*/ ? nt+1 : (t==0) ? 1 : 0) : nt+1;
						break;
					case "prev":
						nt = (nt<=0) ? (option[11]/*continuous*/ ? nt-1 : (t==ts) ? ts-1 : ts) : nt-1;
						break;
					case "first":
						nt = 0;
						break;
					case "last":
						nt = ts;
						break;
					default:
						nt = parseInt(dir);
					break;
				};
				return nt;
			};
			// Load a ajax document (or i image) into a list element. 
			// If testing this locally (loading everything from a harddisk instead of the internet), it may not work. 
			// But then try to upload it to a server, and see it shine. 
			function ajaxLoad(i, adjust, speed, ajaxCallBack)
			{
				// <strike>Not as complicated as it looks. </strike> Everything complicated about this line disappeared in version 2.0.12
				var targetslide = li.eq(i);
				// What speed should the autoheight function animate with?
				var ajaxspeed = (fading) ? (!option[22]/*crossFade*/ ? parseInt(option[23]/*fadespeed*/ * (2/5)) : option[23]/*fadespeed*/) : speed;
				// The script itself is not using the 'tt' variable. But a custom function can use it. 
				var tt = i + 1;
				if (imageCheck(option[25]/*ajax*/[i])) 
				{
					// Load the image.
					targetslide.html(' ').append($(new Image()).attr('src', option[25]/*ajax*/[i]));
					// When the document is ready again, we launch autoadjust.
					runOnImagesLoaded(targetslide,function(img){
						var target = $(img).children();
						// If the image is to wide, shrink it. 
						var a = 0;
						finishImageLoading(target, a);
						function finishImageLoading(target, a)
						{
							a++;
							var width = target.width(),
							height = target.height(),
							slidewidth = target.parent().width();
							// If width == 0, that means it's not ready yet. 
							// So we wait <strike>5</strike> 1 ms. 
							if (width == 0 && a != 20) setTimeout(function() { finishImageLoading(target, a); }, 1);
							else
							{
								
								target.attr({'oldheight' : height, 'oldwidth' : width});
								 // The last part (height:auto) forces the browser to think about the <li> elements height. 
								if (width > slidewidth) target.animate({ width: slidewidth, height: (height/width)*slidewidth}, 0).parent().animate({height: (height/width)*slidewidth}, 0).css('height', 'auto');
								// If we want, we can launch a function here. 
								if ($.isFunction(option[28]/*ajaxLoadFunction*/)){option[28]/*ajaxLoadFunction*/.call($(img), tt, truev);}
								// Lets just make some adjustments
								ajaxAdjust(i, target.parent(), ajaxCallBack);
								if (adjust) autoadjust(i, ajaxspeed);
							}
						}
						
					});
				}
				else
				{
					
					// Load the document into the list element. 
					targetslide.load(option[25]/*ajax*/[i], function(response, status, xhr) {
						if (status == "error" || !$(this).html()) $(this).html("Sorry but there was an error: " + (xhr.status || 'no content') + " " + xhr.statusText);
						// Lets just make some adjustments
						ajaxAdjust(i, $(this), ajaxCallBack);
						if (adjust) adjustPosition();
						// If we want, we can launch a function here. 
						if (status != "error" && $.isFunction(option[28]/*ajaxLoadFunction*/)){option[28]/*ajaxLoadFunction*/.call($(this), tt, falsev);}
						// Lets adjust the height, i don't care if there's an error or not. 
						// var nheight = $(this).height(); // Why did i put that there??? Delete this comment when reason is found. 
						if (adjust) autoadjust(i, ajaxspeed); 
					});
				}
			};
			function ajaxAdjust(i, target, ajaxCallBack){
				if ($.isFunction(ajaxCallBack)) ajaxCallBack();
				// If this is the "continuous" elements (the ones before the first and after the last). 
				heightWidthAdjust();
				
				// Now to see if the generated content needs to be inserted anywhere else. 
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					if (i < option[40]/*slideCount*/)  //hønsesuppe
					{
						liConti.eq((i<0) ? i + option[40]/*slideCount*/ : i - option[40]/*slideCount*/).replaceWith($(target).clone());
					}
					if (i > ts - option[40]/*slideCount*/)
					{
						liConti.eq(option[40]/*slideCount*/ + i - ts - 1).replaceWith($(target).clone());
					}
					// The liConti gets messed up a bit in the above code, therefore i fix it. 
					liConti = ul.children("li");
				}
			};
			// It's not only a slider, it can also fade from slide to slide. 
			function fadeto(i, clicked)
			{
				if (i != t && !destroyed && clickable) // We doesn't want something to happen all the time. The URL can change a lot, and cause som "flickering". 
				{
					ajaxloading = falsev;
					// Update the current class of the buttons. 
					if (option[24]/*updateBefore*/) setCurrent(filterDir(i, ot));
					// Only clickable if not clicked.
					clickable = !clicked;
					// Setting the speed. 
					var speed = (!clicked && !option[9]/*auto*/ && option[17]/*history*/) ? option[23]/*fadespeed*/ * (option[18]/*speedhistory*/ / option[7]/*speed*/) : option[23]/*fadespeed*/;
					var ll = filterDir(i, ot);
					// I don't want to fade to a continuous clone, i go directly to the target. 
					if(ll>ts) ll=0; 
					if(ll<0) ll=ts;
					// Lets make sure the prev/next buttons also fade. 
					if(option[2]/*controlsFade*/) fadeControls (ll,option[1]/*controlsFadeSpeed*/);

					// Lets load it before we animate to it. 
					if (option[25]/*ajax*/ && option[25]/*ajax*/[ll])
					{
						ajaxLoad(ll, falsev, speed, function(){
							option[25]/*ajax*/[ll] = falsev;
							clickable = truev;
							adjustPosition();
							fadeto(ll, truev);
						});
					}
					else
					{
						autoadjust(ll,option[23]/*fadespeed*/); // The height animation takes the full lenght of the fade animation (fadein + fadeout if it's not crossfading).  
					
						// Define the target. 
						var target = li.eq(ll);
						// So lets run the function.
						beforeAniCall(target, ll + 1)
						// Crossfading?
						if (option[22]/*crossFade*/)
						{
							// I clone the target, and fade it in, then hide the cloned element while adjusting the slider to show the real target.
							target.clone().prependTo(obj).css({'z-index' : '100000', 'position' : 'absolute', 'list-style' : 'none', 'top' : '0', 'left' : '0'}).
							// Lets fade it in. 
							hide().fadeIn(option[23]/*fadespeed*/, function() {
								if (fontsmoothing) this.style.removeAttribute("filter"); // Fix cleartype
								// So the animate function knows what to do. 
								clickable = truev;
								fading = truev;
								animate(ll,falsev,falsev,falsev); // Moving to the correct place.
								// Removing the clone, if i dont, it will just be a pain in the ....
								$(this).remove();
								if(option[17]/*history*/ && clicked) window.location.hash = option[15]/*numericText*/[t]; // It's just one line of code, no need to make a function of it. 
								// Lets put that variable back to the default (and not during animation) value. 
								fading = falsev;
								// Now run that after animation function.
								// We already got the target and the slider number from earlier.
								// So lets run the function.
								afterAniCall(target, ll + 1);
							});
						}
						else
						{
							// fadeOut and fadeIn.
							var fadeinspeed = parseInt((speed)*(3/5)),
							fadeoutspeed = speed - fadeinspeed,
							// I set the opacity to something higher than 0, because if it's 0, the content that i try to read (to make the autoheight work etc.) aint there.
							noncrossfadetargets = li.children();
							noncrossfadetargets.stop().fadeTo(fadeoutspeed, 0.0001, function(){
								// So the animation function knows what to do. 
								clickable = truev;
								fading = truev;
								animate(ll,falsev,falsev,falsev); // Moving to the correct place.
								// Only clickable if not clicked.
								clickable = !clicked; 
								// Now, lets fade the slider back in. 
								// Got no idea why the .add(li) is nesecary, but it is. (If it isn't there, the first slide never fades back in). 
								noncrossfadetargets.add(li).stop().fadeTo(fadeinspeed, 1, function(){
									if (fontsmoothing) this.style.removeAttribute("filter"); // Fix cleartype
									if(option[17]/*history*/ && clicked) window.location.hash = option[15]/*numericText*/[t]; // It's just one line of code, no need to make a function of it. 
									clickable = truev;
									fading = falsev;
									// Now run that after animation function.
									// We already got the target and the slider number from earlier.
									// So lets run the function.
									afterAniCall(target, ll + 1);
								});
							});
						}
					}
				}
			};
			function animate(dir,clicked,time,ajaxcallback) // (Direction, did the user click something, is this to be done in >1ms?, is this inside a ajaxCallBack?) 
			{
				if ((clickable && !destroyed && (filterDir(dir, ot) != t || init)) || ajaxcallback)
				{
					ajaxloading = falsev;
					clickable = (!clicked && !option[9]/*auto*/) ? truev : option[16]/*clickableAni*/;
					// to the adjust function. 
					buttonclicked = clicked;
					ot = t;
					t = filterDir(dir, ot);
					if (option[24]/*updateBefore*/) setCurrent(t);
					// Calculating the speed to do the animation with. 
					var diff = Math.sqrt(Math.abs(ot-t)),
					speed = parseInt(diff*option[7]/*speed*/);
					if (!clicked && !option[9]/*auto*/) speed = parseInt(diff*option[18]/*speedhistory*/); // Auto:truev and history:truev doens't work well together, and they ain't supposed to. 
					if (!time) speed = 0;
					// Ajax begins here 
					// I also these variables in the below code (running custom function).
					var i = t;
					if (i<0) i = i + s;
					if (i>ts) i = i - s;
					if (ajaxcallback)
					{
						speed = oldSpeed;
						// Do a check if it can continue.
						if (dontCountinue) dontCountinue--;
					}
					else if (option[25]/*ajax*/)
					{
						// Loading the target slide, if not already loaded. 
						if (option[25]/*ajax*/[i]) 
						{
							ajaxLoad(i, truev, speed, falsev);
							option[25]/*ajax*/[i] = falsev; 
							ajaxloading = truev;
						}
						// The slider need to have all slides that are scrolled over loaded, before it can do the animation.
						// That's not easy, because the slider is only loaded once a callback is fired. 
						if (!fading)
						{
							var aa = (ot>t) ? t : ot,
							ab = (ot>t) ? ot : t;
							dontCountinue = 0;
							oldSpeed = speed;
							for (var a = aa; a <= ab; a++)
							{
								if (a<=ts && a>=0 && option[25]/*ajax*/[a])
								{
									ajaxLoad(a, falsev, speed, function(){
										animate(dir,clicked,time, a);
									});
									option[25]/*ajax*/[a] = falsev; 
									dontCountinue++;
								}
							}
						}
						// Then we have to preload the next one. 
						if (i + 1 <= ts && option[25]/*ajax*/[i + 1])
						{
							ajaxLoad(i + 1, falsev, 0, falsev);
							option[25]/*ajax*/[i + 1] = falsev;
						}
					}
					if (!dontCountinue)
					{
						// Lets create a variable for later use
						// Here, IE6 bugs if i write " if (t < 0) ". (At least it did at some point, don't now if it's still the case).
						if (t < 1-1) var contiElement = liConti.eq(option[40]/*slideCount*/+t);
						if (t > ts) var contiElement = liConti.eq(t-s-option[40]/*slideCount*/);
						// Ajax ends here
						if (!fading)
						{
							// Lets run the before animation function.
							beforeAniCall(li.eq(i), i+1)
							if (option[11]/*continuous*/ && !option[21]/*fade*/) // Never needed if it's a fade animation. 
							{
								if (t < option[40]/*slideCount*/) beforeAniCall(liConti.eq((t<0) ? t + option[40]/*slideCount*/ : t - option[40]/*slideCount*/),i+1);
								if (t > ts - option[40]/*slideCount*/ || t == -option[40]/*slideCount*/) beforeAniCall(liConti.eq((t == -option[40]/*slideCount*/) ? -1 : option[40]/*slideCount*/ + t - ts - 1),i+1);
							}
						}
						// Start animation. 
						if (!fading && !ajaxloading) autoadjust(t, speed);
						if(option[6]/*vertical*/) {
							var p = getSlidePos(t, falsev);
							ul.animate(
								{ marginTop: p },
								{
									queue:falsev,
									duration:speed,
									easing:option[8]/*ease*/,
									complete:adjust
								}
							);
						} 
						else 
						{
							var p = getSlidePos(t, truev);
							ul.animate(
								{ marginLeft: p},
								{
									queue:falsev,
									duration:speed,
									easing:option[8]/*ease*/,
									complete:adjust
								}
							);
							
						};
						// End animation. 
						
						// Fading the next/prev/last/first controls in/out if needed. 
						if(option[2]/*controlsFade*/)
						{
							var fadetime = option[1]/*controlsFadeSpeed*/;
							if (!clicked && !option[9]/*auto*/) fadetime = (option[18]/*speedhistory*/ / option[7]/*speed*/) * option[1]/*controlsFadeSpeed*/;					
							if (!time) fadetime = 0;
							if (fading) fadetime = parseInt((option[23]/*fadespeed*/)*(3/5));
							fadeControls (t,fadetime);
						}
						// Stop init, first animation is done. 
						init = falsev; //nasty workaround, but it works. 
					};
				}
			};
			function returnOptionNumber(name) // Get the number from the name. 
			{
				var optionsUserName = [
					'controlsShow',
					'controlsFadeSpeed',
					'controlsFade',
					'insertAfter',
					'firstShow',
					'lastShow',
					'vertical',
					'speed',
					'ease',
					'auto',
					'pause',
					'continuous',
					'prevNext',
					'numeric',
					'numericAttr',
					'numericText',
					'clickableAni',
					'history',
					'speedhistory',
					'autoheight',
					'customLink',
					'fade',
					'crossFade',
					'fadespeed',
					'updateBefore',
					'ajax',
					'preloadAjax',
					'startSlide',
					'ajaxLoadFunction',
					'beforeAniFunc',
					'afterAniFunc',
					'uncurrentFunc',
					'currentFunc',
					'prevHtml',
					'nextHtml',
					'loadingText',
					'firstHtml',
					'controlsAttr',
					'lastHtml',
					'autowidth',
					'slideCount',
					'resumePause'
				];
				for(var i=0;i<optionsUserName.length;i++) if (optionsUserName[i] == name) var optionnumber = i;
				return optionnumber;
			}
		   /*
			* Public functions. 
			*/
			baseSlider.getOption = function(a){
				return option[returnOptionNumber(a)];
			}
			baseSlider.setOption = function(a, val){
				baseSlider.destroy();
				option[returnOptionNumber(a)] = val;
				baseSlider.init();
			}
			baseSlider.insertSlide = function(html, pos, numtext){
				// If there's no content, this doesn't make sense. 
				if (html)
				{
					// First we make it easier to work. 
					baseSlider.destroy();
					// pos = 0 means before everything else. 
					// pos = 1 means after the first slide.
					if (pos > s) pos = s; // If you try to add a slide after the last slide fix. 
					var html = '<li>' + html + '</li>';
					if (!pos || pos == 0) ul.prepend(html);
					else li.eq(pos -1).after(html);
					// Finally, we make it work again. 
					if (pos <= destroyT || (!pos || pos == 0)) destroyT++;
					if (option[15]/*numericText*/.length < pos){ option[15]/*numericText*/.length = pos;}
					option[15]/*numericText*/.splice(pos,0,numtext || parseInt(pos,10)+1);
					baseSlider.init();
				}
			}
			baseSlider.removeSlide = function(pos){
				pos--; // 1 == the first. 
				// First we make it easier to work. 
				baseSlider.destroy();
				// Then we work. 
				li.eq(pos).remove();
				option[15]/*numericText*/.splice(pos,1);
				if (pos < destroyT) destroyT--;
				// Finally, we make it work again. 
				baseSlider.init();
			}
			baseSlider.goToSlide = function(a){
				goToSlide((a == parseInt(a)) ? a - 1 : a, truev);
			}
			baseSlider.block = function(){
				clickable = falsev; // Simple, beautifull.
			}
			
			baseSlider.unblock = function(){
				clickable = truev; // Simple, beautifull.
			}
			
			baseSlider.startAuto = function(){
				if (!option[11]/*continuous*/) baseSlider.setOption('continuous', truev);
				option[9]/*auto*/ = truev;
				timeout = startAuto(option[10]/*pause*/);
			}
			
			baseSlider.stopAuto = function(){
				option[9]/*auto*/ = falsev;
				stopAuto();
			}
			
			baseSlider.destroy = function(){
				destroyT = t;
				// First, i remove the controls. 
				if (controls) controls.remove(); // that's it.
				// Now to set a variable, so nothing is run. 
				destroyed = truev; // No animation, no fading, no clicking from now. 
				// Then remove the customLink bindings:
				$(option[20]/*customLink*/).die("click");
				// Now remove the "continuous clones". 
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					for (a=1;a<=option[40]/*slideCount*/;a++)
					{
						liConti.eq(a-1).remove();
						liConti.eq(-a).remove();
					}
				}
				// And now it's done. The only way to make this slider do something visible, is by making a new init. 
			}
			baseSlider.init = function(){
				if (destroyed) {
					initSudoSlider(obj, destroyT);	
				}
			}
			baseSlider.adjust = function(speed){
				if (!speed) speed = 0;
				heightWidthAdjust();
				autoadjust(i, speed)
			}
			baseSlider.getValue = function(a){
				switch(a)
				{
					case 'currentSlide':
						return t + 1;
					case 'totalSlides':
						return s;
					case 'clickable':
						return clickable;
					case 'destroyed':
						return destroyed;
					case 'autoAnimation':
						return autoOn;
				}
				return undefined;
			}
			
		});
	};
})(jQuery);
/*! include jquery.sudoSlider2.js */
/*
 *  Sudo Slider ver 2.0.12 - jQuery plugin 
 *  Written by Erik Kristensen info@webbies.dk. 
 *  Based on Easy Slider 1.7 by Alen Grakalic http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider
 *  Although the two scripts doesn't share much code anymore. But Sudo Slider is still based on it. 
 *	
 *	 Dual licensed under the MIT
 *	 and GPL licenses.
 * 
 *	 Built for jQuery library
 *	 http://jquery.com
 *
 */
(function($)
{
	$.fn.sudoSlider = function(options)
	{
		// Saves space in the minified version.
		// It might look complicated, but it isn't. It's easy to make using "replace all" and it saves about ï¿½kb in the minified version. 
		var truev = true; // If i wen't all crazy about minification, i could write "!!1" instead of "true", but i still wan't it to be readable. 
		var falsev = !truev;
		// default configuration properties 
		var defaults = {
			prevNext:          truev,
			prevHtml:          '<a href="#" class="prevBtn"> previous </a>',
			nextHtml:          '<a href="#" class="nextBtn"> next </a>',
			controlsShow:      truev,
			controlsAttr:      'id="controls"',
			controlsFadeSpeed: '400',
			controlsFade:      truev,
			insertAfter:       truev,
			firstShow:         falsev,
			firstHtml:         '<a href="#" class="firstBtn"> first </a>',
			lastShow:          falsev,
			lastHtml:          '<a href="#" class="lastBtn"> last </a>',
			numericAttr:       'class="controls"',
			numericText:       ['1'],
			vertical:          falsev,
			speed:             '800',
			ease:              'swing',
			auto:              falsev,
			pause:             '2000',
			continuous:        falsev,
			clickableAni:      falsev,
			numeric:           falsev,
			updateBefore:      falsev,
			history:           falsev,
			speedhistory:      '400',
			autoheight:        truev,
			customLink:        falsev,
			fade:              falsev,
			crossFade:         truev,
			fadespeed:         '1000',
			ajax:              falsev,
			loadingText:       'Loading Content...',
			preloadAjax:       falsev,
			startSlide:        falsev,
			ajaxLoadFunction:  falsev,
			beforeAniFunc:     falsev,
			afterAniFunc:      falsev,
			uncurrentFunc:     falsev,
			currentFunc:       falsev,
			autowidth:         truev,
			slideCount:        1,
			resumePause:       falsev
		};
		var options = $.extend(defaults, options);
		
		// To make it smaller. 
		// There is a way to make it even smaller, but that doesn't work with the public functions setOption() and getOption(). 
		var option = [
			options.controlsShow, /* option[0]/*controlsShow*/
			options.controlsFadeSpeed,/* option[1]/*controlsFadeSpeed*/
			options.controlsFade,/* option[2]/*controlsFade*/
			options.insertAfter,/* option[3]/*insertAfter*/
			options.firstShow,/* option[4]/*firstShow*/
			options.lastShow,/* option[5]/*lastShow*/
			options.vertical,/* option[6]/*vertical*/
			options.speed,/* option[7]/*speed*/
			options.ease,/* option[8]/*ease*/
			options.auto,/* option[9]/*auto*/
			options.pause,/* option[10]/*pause*/
			options.continuous,/* option[11]/*continuous*/
			options.prevNext,/* option[12]/*prevNext*/
			options.numeric,/* option[13]/*numeric*/
			options.numericAttr,/* option[14]/*numericAttr*/
			options.numericText,/* option[15]/*numericText*/
			options.clickableAni,/* option[16]/*clickableAni*/
			options.history,/* option[17]/*history*/
			options.speedhistory,/* option[18]/*speedhistory*/
			options.autoheight,/* option[19]/*autoheight*/
			options.customLink,/* option[20]/*customLink*/
			options.fade,/* option[21]/*fade*/
			options.crossFade,/* option[22]/*crossFade*/
			options.fadespeed,/* option[23]/*fadespeed*/
			options.updateBefore,/* option[24]/*updateBefore*/
			options.ajax,/* option[25]/*ajax*/
			options.preloadAjax,/* option[26]/*preloadAjax*/
			options.startSlide,/* option[27]/*startSlide*/
			options.ajaxLoadFunction,/* option[28]/*ajaxLoadFunction*/
			options.beforeAniFunc,/* option[29]/*beforeAniFunc*/
			options.afterAniFunc,/* option[30]/*afterAniFunc*/
			options.uncurrentFunc,/* option[31]/*uncurrentFunc*/
			options.currentFunc,/* option[32]/*currentFunc*/
			options.prevHtml,/* option[33]/*prevHtml*/
			options.nextHtml,/* option[34]/*nextHtml*/
			options.loadingText,/* option[35]/*loadingText*/
			options.firstHtml,/* option[36]/*firstHtml*/
			options.controlsAttr,/* option[37]/*controlsAttr*/
			options.lastHtml,/* option[38]/*lastHtml*/
			options.autowidth,/*  option[39]/*autowidth*/
			options.slideCount,/*  option[40]/*slideCount*/
			options.resumePause/* option[41]/*resumePause*/
		];

		// Defining the base element. 
		// This is needed if i want to have public functions (And i want public functions).
		var baseSlider = this;
		
		return this.each(function()
		{
			/*
			 * Lets start this baby. 
			 */
			// First we declare a lot of variables. 
			// Some of the names may be long, but they get minified. 
			var init, 
				ul, 
				li, 
				liConti,
				s, 
				w, 
				h, 
				t, 
				ot, 
				nt, 
				ts, 
				clickable, 
				buttonclicked, 
				fading,
				ajaxloading, 
				autoheightdocument, 
				numericControls, 
				numericContainer, 
				destroyed, 
				fontsmoothing, 
				controls, 
				html, 
				firstbutton, 
				lastbutton, 
				nextbutton, 
				prevbutton, 
				timeout,
				destroyT,
				oldSpeed,
				dontCountinue,
				dontCountinueInit,
				autoOn,
				obj = $(this);
			initSudoSlider(obj, falsev);
			function initSudoSlider(obj, destroyT)
			{
				
				//if (option[6]/*vertical*/) option[19]/*autoheight*/ = falsev; // With the new system of determining the position of the slides, this line is no longer needed. 
				destroyed = falsev; // In case this isn't the first init. 
				// There are some things we don't do at init. 
				init = truev; // I know it's an ugly workaround, but it works. 
				
				// Fix for nested list items
				ul = obj.children("ul");
				li = ul.children("li");
				liConti = li;
				// Some variables i'm gonna use alot. 
				s = li.length;
				// The below two lines shouldn't be necessary anymore.
				//w = li.eq(0).outerWidth(truev); // All slides must be same width, so this shouldn't be a problem. And it makes it posibble to mave multiple slides pr. "page" (2 slides in the viewport).
				//h = li.eq(0).outerHeight(truev); // Same, just the height. 
				
				// Now we are going to fix the document, if it's 'broken'. (No <ul> or no <li>). 
				// I assume that it's can only be broken, if ajax is enabled. If it's broken without Ajax being enabled, the script doesn't have anything to fill the holes. 
				if (option[25]/*ajax*/)
				{
					// Is the ul element there?
					if (ul.length == 0)
					{
						// No it's not, lets create it. 
						obj.append('<ul></ul>');
						ul = obj.children("ul");
					}
				
					// Do we have enough list elements to fill out all the ajax documents. 
					if (option[25]/*ajax*/.length > s)
					{
						// No we dont. 
						for (var i = 1; i <= option[25]/*ajax*/.length - s; i++) ul.append('<li><p>' + option[35] + '</p></li>');
						li = ul.children("li");
						s = li.length;
					}
				}				
				
				// Continuing with the variables. 
				t = 0;
				ot = t;
				nt = t;
				ts = s-1;
				
				clickable = truev;
				buttonclicked = falsev;
				fading = falsev;
				ajaxloading = falsev;
				autoheightdocument = 0;
				numericControls = new Array();
				numericContainer = falsev;
				destroyed = falsev;
				fontsmoothing = screen.fontSmoothingEnabled;
				
				// Set obj overflow to hidden (and position to relative <strike>, if fade is enabled. </strike>)
				obj.css("overflow","hidden");
				if (obj.css("position") == "static") obj.css("position","relative"); // Fixed a lot of IE6 + IE7 bugs. 
	
				// Float items to the left, and make sure that all elements are shown. 
				li.css({'float': 'left', 'display': 'block'});
				
				// Okay, now we have a lot of the variables in place, now we can check for some special conditions. 
				
				// The user doens't always put a text in the numericText. 
				// With this, if the user dont, the code will. 
				for(var i=0;i<s;i++)
				{
					if (option[15]/*numericText*/[i] == undefined) option[15]/*numericText*/[i] = (i+1);
					// Same thing for ajax. 
					if (option[25]/*ajax*/ && option[25]/*ajax*/[i] == undefined) option[25]/*ajax*/[i] = falsev;
				}

				// Clone elements for continuous scrolling
				if(option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					a = 0;
					if(option[6]/*vertical*/)
					{
						for (i = option[40]/*slideCount*/;i >= 1 ;i--)
						{
							// First we create the elements, pretending AJAX is a city in Russia. 
							// ul.prepend(li.filter(":last-child").clone().css("margin-top","-"+ h +"px"));
							var tmpchild = li.eq(-option[40]/*slideCount*/+i-1).clone();
							a = a + tmpchild.outerWidth(truev);
							tmpchild.css("margin-top","-"+ a +"px")
                                                        
							ul.prepend(tmpchild);
							ul.append(li.eq(option[40]/*slideCount*/-i).clone().css({'z-index' : '0'}));
						}
					} 
					// IE6 bugs if i just use else here (atleast the IE6 in IETester (http://www.my-debugbar.com/wiki/IETester/HomePage)). No idea why, but it's IE6 and i'm not supprised. 
					if (!option[6]/*vertical*/)
					{
						for (i = option[40]/*slideCount*/;i >= 1 ;i--)
						{       var z=0;
							// First we create the elements, pretending AJAX is a city in Russia. 
							var tmpchild = li.eq(-option[40]/*slideCount*/+i-1).clone();
							a = a + tmpchild.outerWidth(truev);
							tmpchild.css("margin-left","-"+ a +"px")
                                                        
                                                        $(".yd-prev .img").eq(3).css("border", "1px solid #000");
                                                        z=z+1;
							ul.prepend(tmpchild);
							ul.append(li.eq(option[40]/*slideCount*/-i).clone().css({'z-index' : '0'}));
                                                        
						}
							
					}
					// This variable is also defined later, that's for the cases where Ajax is off, i also need to define it now, because the below code needs it. 
					liConti = ul.children("li"); // This might fix something. 
					// Now, lets check if AJAX really is a city in Russia.
					if (option[25]/*ajax*/) 
					{
						// Now we move from Russia back to reallity (nothing bad about the Russians, it's just a saying in Denmark.)
						// Starting with putting the first document after the last. 
						if (option[25]/*ajax*/[0]) ajaxLoad(0, (option[27]/*startSlide*/ == 1) ? truev : falsev, 0, falsev);
						option[25]/*ajax*/[0] = falsev;
						// And putting the last document before the first. 
						if (option[25]/*ajax*/[ts]) ajaxLoad(ts, (option[27]/*startSlide*/ == ts) ? truev : falsev, 0, falsev);
						option[25]/*ajax*/[ts] = falsev;
						
						// If slidecount is also enabled, i need to preload some more. 
						if (option[40]/*slideCount*/ > 1)
						{
							preloadEverything(truev);
						}
					}
				}
				
				// Now that the slide content is in place, some adjustments can be made. 
				heightWidthAdjust();
                                
				
				// And i can make this variable for later use. 
				// The variable contains every <li> element. 
				liConti = ul.children("li");
				
				// Display the controls.
				controls = falsev;
				if(option[0]/*controlsShow*/)
				{
					// Instead of just generating HTML, i make it a little smarter. 
					controls = $('<span ' + option[37]/*controlsAttr*/ + '></span>');
					if (option[3]/*insertAfter*/) $(obj).after(controls);
					else $(obj).before(controls);
					
					if(option[13]/*numeric*/) {
						numericContainer = controls.prepend('<ol '+ option[14]/*numericAttr*/ +'></ol>').children();
						var substract = option[11]/*continuous*/ ? 1 : option[40]/*slideCount*/;
						for(var i=0;i<s-substract+1;i++)
						{
							numericControls[i] = $(document.createElement("li"))
							.attr({'rel' : (i+1)})
							.html('<a href="#"><span>'+ option[15]/*numericText*/[i] +'</span></a>') 
							.appendTo(numericContainer)
							.click(function(){
								goToSlide($(this).attr('rel') - 1, truev);
								return falsev;
							});
						};
					}
					if(option[4]/*firstShow*/) firstbutton = makecontrol(option[36]/*firstHtml*/, "first");
					if(option[5]/*lastShow*/) lastbutton = makecontrol(option[38]/*lastHtml*/, "last");
					if(option[12]/*prevNext*/){
						nextbutton = makecontrol(option[34]/*nextHtml*/, "next");
						prevbutton = makecontrol(option[33]/*prevHtml*/, "prev");
					}
				};
				
				// Preload elements. 
				if (option[26]/*preloadAjax*/) preloadEverything(truev);
				
				
				// Lets make those fast/normal/fast into some numbers we can make calculations with.
				option[1]/*controlsFadeSpeed*/ = textSpeedToNumber(option[1]/*controlsFadeSpeed*/);
				option[7]/*speed*/ = textSpeedToNumber(option[7]/*speed*/);
				option[10]/*pause*/ = textSpeedToNumber(option[10]/*pause*/);
				option[18]/*speedhistory*/ = textSpeedToNumber(option[18]/*speedhistory*/);
				option[23]/*fadespeed*/ = textSpeedToNumber(option[23]/*fadespeed*/);
				
				// And make sure that slideCount is a number.
				option[40]/*slideCount*/ = parseInt(option[40]/*slideCount*/,10)
				
				// customLinks. Easy to make, great to use. 
				// And if you wan't it even more flexible, you can use the public methods (http://webbies.dk/SudoSlider/help/) like sudoSlider.goToSlide('next');
				if (option[20]/*customLink*/) 
				{
					// Using live, that way javascript ajax-loaded buttons and javascript generated content will work.
					$(option[20]/*customLink*/).live('click', function() {
						a = $(this).attr('rel');
						if (a) {
							// Check for special events
							if (a == 'stop') 
							{
								option[9]/*auto*/ = falsev;
								stopAuto();
							}
							else if (a == 'start')
							{
								if (!option[11]/*continuous*/) baseSlider.setOption('continuous', truev);
								timeout = startAuto(option[10]/*pause*/);
								option[9]/*auto*/ = truev;
							}
							else if (a == 'block') clickable = falsev; // Simple, beautifull.
							else if (a == 'unblock') clickable = truev; // -||-
							// The general case. 
							// That means, typeof(a) == numbers and first,last,next,prev
							// I dont make any kind of input validation, meaning that it's quite easy to break the script with non-valid input. 
							else if (clickable) goToSlide((a == parseInt(a)) ? a - 1 : a, truev);
						}
						return falsev;
					}); 
				}
				
				// Starting auto
				if (option[9]/*auto*/) timeout = startAuto(option[10]/*pause*/);
				
				// Lets make those bookmarks and back/forward buttons work. 
				// And startslide etc. 
				// + If re-initiated, the slider will be at the same slide. 
				if (destroyT) animate(destroyT,falsev,falsev,falsev); 
				else if (option[17]/*history*/) {
					// Going to the correct slide at load. 
					$.address.init(function(e) {
						if (!destroyT) animate(filterUrlHash(e.value),falsev,falsev,falsev);
					})
					// Sliding/fading to the correct slide, on url change. 
					.change(function(e) {
						var i = filterUrlHash(e.value);
						if (i != t) goToSlide(i, falsev);
					});
				}
				// The startSlide setting only require one line of code. And here it is:
				else if (option[27]/*startSlide*/) animate(option[27]/*startSlide*/ - 1,falsev,falsev,falsev); 
				// doing it anyway. good way to fix bugs. 
				// And i only preload the next and previous slide after init (which this is). So i'm doing it. 
				// + if i didn't do this, a lot of things wouldn't happen on page load. By always animating, i ensure that everthing that's supposed to happen, do happen. 
				else animate(0,falsev,falsev,falsev); 
			}
			
			/*
			 * The functions do the magic. 
			 */
			function preloadEverything(adjust) //hï¿½nsesuppe
			{
				for (var i=0;i<=ts;i++) // Preload everything.
				{	
					if (option[25]/*ajax*/[i])
					{
						// If somethings is to be loaded, lets load it. 
						ajaxLoad(i, (option[27]/*startSlide*/ == i && adjust) ? truev : falsev, 0, falsev);
						// Making sure it aint loaded again. 
						option[25]/*ajax*/[i] = falsev;
					}
				}
			}
			
			function heightWidthAdjust()
			{
				a = 0;
				if(option[6]/*vertical*/)
				{
					for (var i = -1;i<=s;i++) a = a + li.eq(i).outerHeight(truev);
					ul.height(a*4);
				}
				else
				{
					for (var i = -1;i<=s;i++) a = a + li.eq(i).outerWidth(truev);
					ul.width(a*4);
				}
			}
			function startAuto(pause)
			{
                            border();
				autoOn = truev; // The variable telling that an automatic slideshow is running. 
				return setTimeout(function(){
					goToSlide("next", falsev);
				},pause);
			}
			function stopAuto()
			{
				clearTimeout(timeout);
				autoOn = falsev; // The variable telling that auto is no longer in charge. 
			}
			function textSpeedToNumber(speed)
			{
				if (parseInt(speed)) var returnspeed = parseInt(speed);
				else 
				{
					var returnspeed = 400;
					switch(speed)
					{
					case 'fast':
						returnspeed = 200;
					case 'normal':
						returnspeed = 400;
					case 'medium':
						returnspeed = 400;
					case 'slow':
						returnspeed = 600;
					}
				}
				return returnspeed;
			};
			// I go a long way to save lines of code. 
			function makecontrol(html, action)
			{
				return $(html).prependTo(controls).click(function(){
					goToSlide(action, truev);
					return falsev;
				});
			}
			// <strike>Simple function</strike>A litle complecated function after moving the auto-slideshow code and introducing some "smart" animations. great work. 
			function goToSlide(i, clicked)
			{
				
				if (!destroyed)
				{
					// Ahhh, recursive functions. I love me. 
					if (option[9]/*auto*/)
					{
						var delay = option[7]/*speed*/;
						if (fading && option[22]/*crossFade*/) delay = parseInt((delay)*(3/5));
						else if (fading) delay = 0;
						// Stopping auto if clicked. And also continuing after X seconds of inactivity. 
						if(clicked){
							stopAuto();
							if (option[41]/*resumePause*/) timeout = startAuto(delay + option[41]/*resumePause*/);
						}
						// Continuing if not clicked.
						else timeout = startAuto(option[10]/*pause*/ + delay); 
					}
					
					if (option[21]/*fade*/)
					{
						fadeto(i, clicked);
					}
					else 
					{
						if (option[11]/*continuous*/)
						{
							// Just a little smart thing, that stops the slider from performing way to "large" animations. 
							// Not necessary when using fade, therefore i placed it here. 
							a = t;
							// Finding the "real" slide we are at. (-2 == 4). 
							if (a<0) a = a + s;
							if (a>ts) a = a - s;
							// And if i try to navigate to the neighbour, then why do it by sliding across the entire slider. 
							if (i == a + 1) i = 'next';
							if (i == a - 1) i = 'prev';
							// And when navigating from the first to the last (and the other way around). 
							if (a == 0 && i == ts) i = 'prev';
							if (a == ts && i == 0) i = 'next';
							
						}
						// And now the animation itself. 
						animate(i,clicked,truev,falsev);
					}
				}
			};
			function runOnImagesLoaded(e,_cb)
			{
				// This function is based on the onImagesLoaded plugin by soundphed, that was in a comment on this page "http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript#comment-92". 
				e.each(function() {
					var $imgs = (this.tagName.toLowerCase()==='img')?$(this):$('img',this),
					_cont = this,
					i = 0,
					_done=function() {
						if( typeof _cb === 'function' ) _cb(_cont);
					};
					
					if( $imgs.length ) {
						$imgs.each(function() {
							var _img = this,
							_checki=function(e) {
								if((_img.complete) || (_img.readyState=='complete'&&e.type=='readystatechange') )
								{
									if( ++i===$imgs.length ) _done();
								}
								else if( _img.readyState === undefined ) // dont for IE
								{
									$(_img).attr('src',$(_img).attr('src')); // re-fire load event
								}
							}; // _checki \\
							$(_img).bind('load readystatechange', function(e){_checki(e);});
							_checki({type:'readystatechange'}); // bind to 'load' event...
						});
					} else _done();
				});
			};
			
			// Is the file a image? (This function is not only used in the Ajaxload function)
			function imageCheck(file)
			{
				var len = file.length;
				var ext = file.substr(len-4, 4);
				
				if (ext == '.jpg' || ext == '.png' || ext == '.bmp' || ext == '.gif' || file.substr(len-5, 5) == '.jpeg') return truev;
				return falsev;
			}
			function fadeControl (fadeOpacity,fadetime,nextcontrol)
			{
				if (!option[11]/*continuous*/)
				{
					if (nextcontrol)
					{
						var eA = nextbutton,
						eB = lastbutton,
						directionA = 'next',
						directionB = 'last',
						firstlastshow = option[5]/*lastShow*/;
					}
					else
					{
						var eA = prevbutton,
						eB = firstbutton,
						directionA = 'prev',
						directionB = 'first',
						firstlastshow = option[4]/*firstShow*/;
					}
				
					if (option[12]/*prevNext*/)
					{
						if (fadeOpacity == 0) eA.fadeOut(fadetime);
						else eA.fadeIn(fadetime);
					}
					if (firstlastshow)
					{
						if (fadeOpacity == 0) eB.fadeOut(fadetime);
						else eB.fadeIn(fadetime);
					}
					if(option[20]/*customLink*/)
					{
						$(option[20]/*customLink*/)
						.filter(function(index) { 
							return ($(this).attr("rel") == directionA || $(this).attr("rel") == directionB);
						})
						.fadeTo(fadetime, fadeOpacity, function() { if (fadeOpacity == 0) $(this).hide();});
					} 
				}
			};
			// Fade the controls, if we are at the end of the slide. 
			// It's all the different kind of controls. 
			function fadeControls (a,fadetime)
			{
				if(a==0) fadeControl (0,fadetime,falsev);
				else fadeControl (1,fadetime,falsev);
				
				// The new way of doing it. 
				if (a >= s - option[40]/*slideCount*/) fadeControl(0, fadetime, truev);
				// Not using a else, because IE6 doesn't like that. 
				if (a < s - option[40]/*slideCount*/)fadeControl(1, fadetime, truev);
				
				// Here is the old way of doing it. 
				/* if(a==ts) fadeControl (0,fadetime,truev);
				else fadeControl (1,fadetime,truev);*/
			};
			
			
			
			// Updating the 'current' class
			function setCurrent(i)
			{
				i = parseInt((i>ts) ? i=0 : ((i<0)? i= ts+i+1 : i)) + 1;
				for(var a=0;a<numericControls.length;a++) setCurrentElement(numericControls[a], i);
				if(option[20]/*customLink*/) setCurrentElement(option[20]/*customLink*/, i);
			};
			function setCurrentElement(element,i)
			{
				$(element)
					.filter(".current")
					.removeClass("current")
					.each(function() {
						if ($.isFunction(option[31]/*uncurrentFunc*/)){ option[31]/*uncurrentFunc*/.call(this, $(this).attr("rel")); }
					});
				$(element)
					.filter(function() { 
						// Tried to do it other ways, but i found that this is the only reliable way of doing it.
						return $(this).attr("rel") == i; 
					})
					.addClass("current")
					.each(function(index) {
						if ($.isFunction(option[32]/*currentFunc*/)){ option[32]/*currentFunc*/.call(this, i); }
					});
			};
			// Find out wich numericText fits the current url. 
			function filterUrlHash(t)
			{
				var te = 0;
				for (var i=0;i<=s;i=i+1) if (option[15]/*numericText*/[i] == t) te = i;
				return te;
			};
			function autoadjust(i, speed)
			{
				// Both autoheight and autowidth can be enabled at the same time. It's like magic. 
				if (option[19]/*autoheight*/) autoheight(i, speed);
				if (option[39]/*autowidth*/) autowidth(i, speed);
			}
			// Automaticly adjust the height, i love this function. 
			function autoheight(i, speed)
			{
				obj.ready(function() {
					if (i == s) i = 0;
					// First i run it. In case there are no images. 
					var nheight = li.eq(i).height();
					if (nheight != 0) setHeight(nheight, speed);
					// Then i run it again after the images has been loaded. (If any)
					runOnImagesLoaded(li.eq(i),function(imgtarget){
						obj.ready(function() {
							nheight = $(imgtarget).height();
							if (nheight != 0) setHeight(nheight, speed);
						});
					});
				});
			};
			// Automaticly adjust the width (sick). 
			function autowidth(i, speed)
			{
				obj.ready(function() {
					if (i == s) i = 0;
					// First i run it. In case there are no images. 
					var nwidth = li.eq(i).width();
					if (nwidth != 0) setWidth(nwidth, speed);
					// Then i run it again after the images has been loaded. (If any)
					runOnImagesLoaded(li.eq(i),function(imgtarget){
						obj.ready(function() {
							nwidth = $(imgtarget).width();
							if (nwidth != 0) setWidth(nwidth, speed);
						});
					});
				});
			};
			function setWidth(nwidth, speed)
			{
				obj.animate(
					{ width:nwidth},
					{
						queue:falsev,
						duration:speed,
						easing:option[8]/*ease*/
					}
				);
			};
			function setHeight(nheight, speed)
			{
				obj.animate(
					{ height:nheight},
					{
						queue:falsev,
						duration:speed,
						easing:option[8]/*ease*/
					}
				);
			};
			function adjustPosition()
			{
				// Anything complicated here? No, so move on. The good stuff comes in the next function. 
				if (option[6]/*vertical*/) ul.css("margin-top",getSlidePos(t, falsev));
				else ul.css("margin-left",getSlidePos(t, truev)); 
			};
			// This is a bit complicated, because Firefox won't handle it right. 
			// If i just used .position(), Firefox gets the position 1-2 px off pr. slide (i have no idea why). 
			function getSlidePos(slide, width) // getSlidePosWidth
			{
				var p = 0;
				var goTo = slide - ((option[11]/*continuous*/ && !option[21]/*fade*/) ? 1-option[40]/*slideCount*/ : 1);
				var add = (option[11]/*continuous*/ && !option[21]/*fade*/) ? add = option[40]/*slideCount*/ : 0;
				for (var i = 0;i<=goTo;i++){
					if (width) p = p - liConti.eq(i + add).outerWidth(truev);
					else p = p - liConti.eq(i + add).outerHeight(truev);
				}
				return p;
			};

			// When the animation finishes (fade or sliding), we need to adjust the slider. 
			function adjust()
			{
				
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					if(t>ts) t=0;
					if(t<1-option[40]/*slideCount*/) t=s-option[40]/*slideCount*/;
				}
				else
				{
					if(t>ts) t=0;
					if(t<0) t=ts;
				}
				// Keeping the below line in case something else fucks up. (It shouldn't)
				if (t==ts && !option[21]/*fade*/) preloadEverything(falsev);
				if(!option[24]/*updateBefore*/) setCurrent(t);
				adjustPosition();
				clickable = truev;
				if(option[17]/*history*/ && buttonclicked) window.location.hash = option[15]/*numericText*/[t];
				if (!fading)
				{
					a = t + 1;
					if (a<1) a = a + s;
					if (a>s) a = a - s;
					// Lets run the after animation function.
					afterAniCall(li.eq(t), a)
					if (option[11]/*continuous*/ && !option[21]/*fade*/) // Never needed if it's a fade animation. 
					{
						// Might look complicated, and it is.
						// To see the logic, you need to 'uncompress' the code. 
						// But it's basicly just determining which continuous-"clone" i need to call afterAniFunc on. 
						if (t < option[40]/*slideCount*/) afterAniCall(liConti.eq((t<0) ? t + option[40]/*slideCount*/ : t - option[40]/*slideCount*/), a);
						if (t > ts - option[40]/*slideCount*/) afterAniCall(liConti.eq(option[40]/*slideCount*/ + t - ts - 1), a);
					}
				}
			};
			function afterAniCall(el, a)
			{
				if ($.isFunction(option[30]/*afterAniFunc*/)) option[30]/*afterAniFunc*/.call(el, a);
			};
			function beforeAniCall(el, a)
			{
				if ($.isFunction(option[29]/*beforeAniFunc*/)) option[29]/*beforeAniFunc*/.call(el, a);
			};
			// Convert the direction into a usefull number.
			function filterDir(dir, ot)
			{
				var nt = t; // i dont want to mess with the 't' variable. This function doens't allways return the t-value, it can be used for other things.
				switch(dir)
				{
					case "next":
						nt = (ot>=ts) ? (option[11]/*continuous*/ ? nt+1 : (t==0) ? 1 : 0) : nt+1;
						break;
					case "prev":
						nt = (nt<=0) ? (option[11]/*continuous*/ ? nt-1 : (t==ts) ? ts-1 : ts) : nt-1;
						break;
					case "first":
						nt = 0;
						break;
					case "last":
						nt = ts;
						break;
					default:
						nt = parseInt(dir);
					break;
				};
				return nt;
			};
			// Load a ajax document (or i image) into a list element. 
			// If testing this locally (loading everything from a harddisk instead of the internet), it may not work. 
			// But then try to upload it to a server, and see it shine. 
			function ajaxLoad(i, adjust, speed, ajaxCallBack)
			{
				// <strike>Not as complicated as it looks. </strike> Everything complicated about this line disappeared in version 2.0.12
				var targetslide = li.eq(i);
				// What speed should the autoheight function animate with?
				var ajaxspeed = (fading) ? (!option[22]/*crossFade*/ ? parseInt(option[23]/*fadespeed*/ * (2/5)) : option[23]/*fadespeed*/) : speed;
				// The script itself is not using the 'tt' variable. But a custom function can use it. 
				var tt = i + 1;
				if (imageCheck(option[25]/*ajax*/[i])) 
				{
					// Load the image.
					targetslide.html(' ').append($(new Image()).attr('src', option[25]/*ajax*/[i]));
					// When the document is ready again, we launch autoadjust.
					runOnImagesLoaded(targetslide,function(img){
						var target = $(img).children();
						// If the image is to wide, shrink it. 
						var a = 0;
						finishImageLoading(target, a);
						function finishImageLoading(target, a)
						{
							a++;
							var width = target.width(),
							height = target.height(),
							slidewidth = target.parent().width();
							// If width == 0, that means it's not ready yet. 
							// So we wait <strike>5</strike> 1 ms. 
							if (width == 0 && a != 20) setTimeout(function() { finishImageLoading(target, a); }, 1);
							else
							{
								
								target.attr({'oldheight' : height, 'oldwidth' : width});
								 // The last part (height:auto) forces the browser to think about the <li> elements height. 
								if (width > slidewidth) target.animate({ width: slidewidth, height: (height/width)*slidewidth}, 0).parent().animate({height: (height/width)*slidewidth}, 0).css('height', 'auto');
								// If we want, we can launch a function here. 
								if ($.isFunction(option[28]/*ajaxLoadFunction*/)){option[28]/*ajaxLoadFunction*/.call($(img), tt, truev);}
								// Lets just make some adjustments
								ajaxAdjust(i, target.parent(), ajaxCallBack);
								if (adjust) autoadjust(i, ajaxspeed);
							}
						}
						
					});
				}
				else
				{
					
					// Load the document into the list element. 
					targetslide.load(option[25]/*ajax*/[i], function(response, status, xhr) {
						if (status == "error" || !$(this).html()) $(this).html("Sorry but there was an error: " + (xhr.status || 'no content') + " " + xhr.statusText);
						// Lets just make some adjustments
						ajaxAdjust(i, $(this), ajaxCallBack);
						if (adjust) adjustPosition();
						// If we want, we can launch a function here. 
						if (status != "error" && $.isFunction(option[28]/*ajaxLoadFunction*/)){option[28]/*ajaxLoadFunction*/.call($(this), tt, falsev);}
						// Lets adjust the height, i don't care if there's an error or not. 
						// var nheight = $(this).height(); // Why did i put that there??? Delete this comment when reason is found. 
						if (adjust) autoadjust(i, ajaxspeed); 
					});
				}
			};
			function ajaxAdjust(i, target, ajaxCallBack){
				if ($.isFunction(ajaxCallBack)) ajaxCallBack();
				// If this is the "continuous" elements (the ones before the first and after the last). 
				heightWidthAdjust();
				
				// Now to see if the generated content needs to be inserted anywhere else. 
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					if (i < option[40]/*slideCount*/)  //hï¿½nsesuppe
					{
						liConti.eq((i<0) ? i + option[40]/*slideCount*/ : i - option[40]/*slideCount*/).replaceWith($(target).clone());
					}
					if (i > ts - option[40]/*slideCount*/)
					{
						liConti.eq(option[40]/*slideCount*/ + i - ts - 1).replaceWith($(target).clone());
					}
					// The liConti gets messed up a bit in the above code, therefore i fix it. 
					liConti = ul.children("li");
				}
			};
			// It's not only a slider, it can also fade from slide to slide. 
			function fadeto(i, clicked)
			{
				if (i != t && !destroyed && clickable) // We doesn't want something to happen all the time. The URL can change a lot, and cause som "flickering". 
				{
					ajaxloading = falsev;
					// Update the current class of the buttons. 
					if (option[24]/*updateBefore*/) setCurrent(filterDir(i, ot));
					// Only clickable if not clicked.
					clickable = !clicked;
					// Setting the speed. 
					var speed = (!clicked && !option[9]/*auto*/ && option[17]/*history*/) ? option[23]/*fadespeed*/ * (option[18]/*speedhistory*/ / option[7]/*speed*/) : option[23]/*fadespeed*/;
					var ll = filterDir(i, ot);
					// I don't want to fade to a continuous clone, i go directly to the target. 
					if(ll>ts) ll=0; 
					if(ll<0) ll=ts;
					// Lets make sure the prev/next buttons also fade. 
					if(option[2]/*controlsFade*/) fadeControls (ll,option[1]/*controlsFadeSpeed*/);

					// Lets load it before we animate to it. 
					if (option[25]/*ajax*/ && option[25]/*ajax*/[ll])
					{
						ajaxLoad(ll, falsev, speed, function(){
							option[25]/*ajax*/[ll] = falsev;
							clickable = truev;
							adjustPosition();
							fadeto(ll, truev);
						});
					}
					else
					{
						autoadjust(ll,option[23]/*fadespeed*/); // The height animation takes the full lenght of the fade animation (fadein + fadeout if it's not crossfading).  
					
						// Define the target. 
						var target = li.eq(ll);
						// So lets run the function.
						beforeAniCall(target, ll + 1)
						// Crossfading?
						if (option[22]/*crossFade*/)
						{
							// I clone the target, and fade it in, then hide the cloned element while adjusting the slider to show the real target.
							target.clone().prependTo(obj).css({'z-index' : '100000', 'position' : 'absolute', 'list-style' : 'none', 'top' : '0', 'left' : '0'}).
							// Lets fade it in. 
							hide().fadeIn(option[23]/*fadespeed*/, function() {
								if (fontsmoothing) this.style.removeAttribute("filter"); // Fix cleartype
								// So the animate function knows what to do. 
								clickable = truev;
								fading = truev;
								animate(ll,falsev,falsev,falsev); // Moving to the correct place.
								// Removing the clone, if i dont, it will just be a pain in the ....
								$(this).remove();
								if(option[17]/*history*/ && clicked) window.location.hash = option[15]/*numericText*/[t]; // It's just one line of code, no need to make a function of it. 
								// Lets put that variable back to the default (and not during animation) value. 
								fading = falsev;
								// Now run that after animation function.
								// We already got the target and the slider number from earlier.
								// So lets run the function.
								afterAniCall(target, ll + 1);
							});
						}
						else
						{
							// fadeOut and fadeIn.
							var fadeinspeed = parseInt((speed)*(3/5)),
							fadeoutspeed = speed - fadeinspeed,
							// I set the opacity to something higher than 0, because if it's 0, the content that i try to read (to make the autoheight work etc.) aint there.
							noncrossfadetargets = li.children();
							noncrossfadetargets.stop().fadeTo(fadeoutspeed, 0.0001, function(){
								// So the animation function knows what to do. 
								clickable = truev;
								fading = truev;
								animate(ll,falsev,falsev,falsev); // Moving to the correct place.
								// Only clickable if not clicked.
								clickable = !clicked; 
								// Now, lets fade the slider back in. 
								// Got no idea why the .add(li) is nesecary, but it is. (If it isn't there, the first slide never fades back in). 
								noncrossfadetargets.add(li).stop().fadeTo(fadeinspeed, 1, function(){
									if (fontsmoothing) this.style.removeAttribute("filter"); // Fix cleartype
									if(option[17]/*history*/ && clicked) window.location.hash = option[15]/*numericText*/[t]; // It's just one line of code, no need to make a function of it. 
									clickable = truev;
									fading = falsev;
									// Now run that after animation function.
									// We already got the target and the slider number from earlier.
									// So lets run the function.
									afterAniCall(target, ll + 1);
								});
							});
						}
					}
				}
			};
			function animate(dir,clicked,time,ajaxcallback) // (Direction, did the user click something, is this to be done in >1ms?, is this inside a ajaxCallBack?) 
			{
				if ((clickable && !destroyed && (filterDir(dir, ot) != t || init)) || ajaxcallback)
				{
					ajaxloading = falsev;
					clickable = (!clicked && !option[9]/*auto*/) ? truev : option[16]/*clickableAni*/;
					// to the adjust function. 
					buttonclicked = clicked;
					ot = t;
					t = filterDir(dir, ot);
					if (option[24]/*updateBefore*/) setCurrent(t);
					// Calculating the speed to do the animation with. 
					var diff = Math.sqrt(Math.abs(ot-t)),
					speed = parseInt(diff*option[7]/*speed*/);
					if (!clicked && !option[9]/*auto*/) speed = parseInt(diff*option[18]/*speedhistory*/); // Auto:truev and history:truev doens't work well together, and they ain't supposed to. 
					if (!time) speed = 0;
					// Ajax begins here 
					// I also these variables in the below code (running custom function).
					var i = t;
					if (i<0) i = i + s;
					if (i>ts) i = i - s;
					if (ajaxcallback)
					{
						speed = oldSpeed;
						// Do a check if it can continue.
						if (dontCountinue) dontCountinue--;
					}
					else if (option[25]/*ajax*/)
					{
						// Loading the target slide, if not already loaded. 
						if (option[25]/*ajax*/[i]) 
						{
							ajaxLoad(i, truev, speed, falsev);
							option[25]/*ajax*/[i] = falsev; 
							ajaxloading = truev;
						}
						// The slider need to have all slides that are scrolled over loaded, before it can do the animation.
						// That's not easy, because the slider is only loaded once a callback is fired. 
						if (!fading)
						{
							var aa = (ot>t) ? t : ot,
							ab = (ot>t) ? ot : t;
							dontCountinue = 0;
							oldSpeed = speed;
							for (var a = aa; a <= ab; a++)
							{
								if (a<=ts && a>=0 && option[25]/*ajax*/[a])
								{
									ajaxLoad(a, falsev, speed, function(){
										animate(dir,clicked,time, a);
									});
									option[25]/*ajax*/[a] = falsev; 
									dontCountinue++;
								}
							}
						}
						// Then we have to preload the next one. 
						if (i + 1 <= ts && option[25]/*ajax*/[i + 1])
						{
							ajaxLoad(i + 1, falsev, 0, falsev);
							option[25]/*ajax*/[i + 1] = falsev;
						}
					}
					if (!dontCountinue)
					{
						// Lets create a variable for later use
						// Here, IE6 bugs if i write " if (t < 0) ". (At least it did at some point, don't now if it's still the case).
						if (t < 1-1) var contiElement = liConti.eq(option[40]/*slideCount*/+t);
						if (t > ts) var contiElement = liConti.eq(t-s-option[40]/*slideCount*/);
						// Ajax ends here
						if (!fading)
						{
							// Lets run the before animation function.
							beforeAniCall(li.eq(i), i+1)
							if (option[11]/*continuous*/ && !option[21]/*fade*/) // Never needed if it's a fade animation. 
							{
								if (t < option[40]/*slideCount*/) beforeAniCall(liConti.eq((t<0) ? t + option[40]/*slideCount*/ : t - option[40]/*slideCount*/),i+1);
								if (t > ts - option[40]/*slideCount*/ || t == -option[40]/*slideCount*/) beforeAniCall(liConti.eq((t == -option[40]/*slideCount*/) ? -1 : option[40]/*slideCount*/ + t - ts - 1),i+1);
							}
						}
						// Start animation. 
						if (!fading && !ajaxloading) autoadjust(t, speed);
						if(option[6]/*vertical*/) {
							var p = getSlidePos(t, falsev);
							ul.animate(
								{ marginTop: p },
								{
									queue:falsev,
									duration:speed,
									easing:option[8]/*ease*/,
									complete:adjust
								}
							);
						} 
						else 
						{
							var p = getSlidePos(t, truev);
							ul.animate(
								{ marginLeft: p},
								{
									queue:falsev,
									duration:speed,
									easing:option[8]/*ease*/,
									complete:adjust
								}
							);
							
						};
						// End animation. 
						
						// Fading the next/prev/last/first controls in/out if needed. 
						if(option[2]/*controlsFade*/)
						{
							var fadetime = option[1]/*controlsFadeSpeed*/;
							if (!clicked && !option[9]/*auto*/) fadetime = (option[18]/*speedhistory*/ / option[7]/*speed*/) * option[1]/*controlsFadeSpeed*/;					
							if (!time) fadetime = 0;
							if (fading) fadetime = parseInt((option[23]/*fadespeed*/)*(3/5));
							fadeControls (t,fadetime);
						}
						// Stop init, first animation is done. 
						init = falsev; //nasty workaround, but it works. 
					};
				}
			};
			function returnOptionNumber(name) // Get the number from the name. 
			{
				var optionsUserName = [
					'controlsShow',
					'controlsFadeSpeed',
					'controlsFade',
					'insertAfter',
					'firstShow',
					'lastShow',
					'vertical',
					'speed',
					'ease',
					'auto',
					'pause',
					'continuous',
					'prevNext',
					'numeric',
					'numericAttr',
					'numericText',
					'clickableAni',
					'history',
					'speedhistory',
					'autoheight',
					'customLink',
					'fade',
					'crossFade',
					'fadespeed',
					'updateBefore',
					'ajax',
					'preloadAjax',
					'startSlide',
					'ajaxLoadFunction',
					'beforeAniFunc',
					'afterAniFunc',
					'uncurrentFunc',
					'currentFunc',
					'prevHtml',
					'nextHtml',
					'loadingText',
					'firstHtml',
					'controlsAttr',
					'lastHtml',
					'autowidth',
					'slideCount',
					'resumePause'
				];
				for(var i=0;i<optionsUserName.length;i++) if (optionsUserName[i] == name) var optionnumber = i;
				return optionnumber;
			}
		   /*
			* Public functions. 
			*/
			baseSlider.getOption = function(a){
				return option[returnOptionNumber(a)];
			}
			baseSlider.setOption = function(a, val){
				baseSlider.destroy();
				option[returnOptionNumber(a)] = val;
				baseSlider.init();
			}
			baseSlider.insertSlide = function(html, pos, numtext){
				// If there's no content, this doesn't make sense. 
				if (html)
				{
					// First we make it easier to work. 
					baseSlider.destroy();
					// pos = 0 means before everything else. 
					// pos = 1 means after the first slide.
					if (pos > s) pos = s; // If you try to add a slide after the last slide fix. 
					var html = '<li>' + html + '</li>';
					if (!pos || pos == 0) ul.prepend(html);
					else li.eq(pos -1).after(html);
					// Finally, we make it work again. 
					if (pos <= destroyT || (!pos || pos == 0)) destroyT++;
					if (option[15]/*numericText*/.length < pos){ option[15]/*numericText*/.length = pos;}
					option[15]/*numericText*/.splice(pos,0,numtext || parseInt(pos,10)+1);
					baseSlider.init();
				}
			}
			baseSlider.removeSlide = function(pos){
				pos--; // 1 == the first. 
				// First we make it easier to work. 
				baseSlider.destroy();
				// Then we work. 
				li.eq(pos).remove();
				option[15]/*numericText*/.splice(pos,1);
				if (pos < destroyT) destroyT--;
				// Finally, we make it work again. 
				baseSlider.init();
			}
			baseSlider.goToSlide = function(a){
				goToSlide((a == parseInt(a)) ? a - 1 : a, truev);
			}
			baseSlider.block = function(){
				clickable = falsev; // Simple, beautifull.
			}
			
			baseSlider.unblock = function(){
				clickable = truev; // Simple, beautifull.
			}
			
			baseSlider.startAuto = function(){
				if (!option[11]/*continuous*/) baseSlider.setOption('continuous', truev);
				option[9]/*auto*/ = truev;
				timeout = startAuto(option[10]/*pause*/);
			}
			
			baseSlider.stopAuto = function(){
				option[9]/*auto*/ = falsev;
				stopAuto();
			}
			
			baseSlider.destroy = function(){
				destroyT = t;
				// First, i remove the controls. 
				if (controls) controls.remove(); // that's it.
				// Now to set a variable, so nothing is run. 
				destroyed = truev; // No animation, no fading, no clicking from now. 
				// Then remove the customLink bindings:
				$(option[20]/*customLink*/).die("click");
				// Now remove the "continuous clones". 
				if (option[11]/*continuous*/ && !option[21]/*fade*/)
				{
					for (a=1;a<=option[40]/*slideCount*/;a++)
					{
						liConti.eq(a-1).remove();
						liConti.eq(-a).remove();
					}
				}
				// And now it's done. The only way to make this slider do something visible, is by making a new init. 
			}
			baseSlider.init = function(){
				if (destroyed) {
					initSudoSlider(obj, destroyT);	
				}
			}
			baseSlider.adjust = function(speed){
				if (!speed) speed = 0;
				heightWidthAdjust();
				autoadjust(i, speed)
			}
			baseSlider.getValue = function(a){
				switch(a)
				{
					case 'currentSlide':
						return t + 1;
					case 'totalSlides':
						return s;
					case 'clickable':
						return clickable;
					case 'destroyed':
						return destroyed;
					case 'autoAnimation':
						return autoOn;
				}
				return undefined;
			}
			
		});
	};
})(jQuery);
/*! include jquery.tmpl.js */
/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function( jQuery, undefined ){
	var oldManip = jQuery.fn.domManip, tmplItmAtt = "_tmplitem", htmlExpr = /^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,
		newTmplItems = {}, wrappedItems = {}, appendToTmplItems, topTmplItem = { key: 0, data: {} }, itemKey = 0, cloneIndex = 0, stack = [];

	function newTmplItem( options, parentItem, fn, data ) {
		// Returns a template item data structure for a new rendered instance of a template (a 'template item').
		// The content field is a hierarchical array of strings and nested items (to be
		// removed and replaced by nodes field of dom elements, once inserted in DOM).
		var newItem = {
			data: data || (data === 0 || data === false) ? data : (parentItem ? parentItem.data : {}),
			_wrap: parentItem ? parentItem._wrap : null,
			tmpl: null,
			parent: parentItem || null,
			nodes: [],
			calls: tiCalls,
			nest: tiNest,
			wrap: tiWrap,
			html: tiHtml,
			update: tiUpdate
		};
		if ( options ) {
			jQuery.extend( newItem, options, { nodes: [], parent: parentItem });
		}
		if ( fn ) {
			// Build the hierarchical content to be used during insertion into DOM
			newItem.tmpl = fn;
			newItem._ctnt = newItem._ctnt || newItem.tmpl( jQuery, newItem );
			newItem.key = ++itemKey;
			// Keep track of new template item, until it is stored as jQuery Data on DOM element
			(stack.length ? wrappedItems : newTmplItems)[itemKey] = newItem;
		}
		return newItem;
	}

	// Override appendTo etc., in order to provide support for targeting multiple elements. (This code would disappear if integrated in jquery core).
	jQuery.each({
		appendTo: "append",
		prependTo: "prepend",
		insertBefore: "before",
		insertAfter: "after",
		replaceAll: "replaceWith"
	}, function( name, original ) {
		jQuery.fn[ name ] = function( selector ) {
			var ret = [], insert = jQuery( selector ), elems, i, l, tmplItems,
				parent = this.length === 1 && this[0].parentNode;

			appendToTmplItems = newTmplItems || {};
			if ( parent && parent.nodeType === 11 && parent.childNodes.length === 1 && insert.length === 1 ) {
				insert[ original ]( this[0] );
				ret = this;
			} else {
				for ( i = 0, l = insert.length; i < l; i++ ) {
					cloneIndex = i;
					elems = (i > 0 ? this.clone(true) : this).get();
					jQuery( insert[i] )[ original ]( elems );
					ret = ret.concat( elems );
				}
				cloneIndex = 0;
				ret = this.pushStack( ret, name, insert.selector );
			}
			tmplItems = appendToTmplItems;
			appendToTmplItems = null;
			jQuery.tmpl.complete( tmplItems );
			return ret;
		};
	});

	jQuery.fn.extend({
		// Use first wrapped element as template markup.
		// Return wrapped set of template items, obtained by rendering template against data.
		tmpl: function( data, options, parentItem ) {
			return jQuery.tmpl( this[0], data, options, parentItem );
		},

		// Find which rendered template item the first wrapped DOM element belongs to
		tmplItem: function() {
			return jQuery.tmplItem( this[0] );
		},

		// Consider the first wrapped element as a template declaration, and get the compiled template or store it as a named template.
		template: function( name ) {
			return jQuery.template( name, this[0] );
		},

		domManip: function( args, table, callback, options ) {
			if ( args[0] && jQuery.isArray( args[0] )) {
				var dmArgs = jQuery.makeArray( arguments ), elems = args[0], elemsLength = elems.length, i = 0, tmplItem;
				while ( i < elemsLength && !(tmplItem = jQuery.data( elems[i++], "tmplItem" ))) {}
				if ( tmplItem && cloneIndex ) {
					dmArgs[2] = function( fragClone ) {
						// Handler called by oldManip when rendered template has been inserted into DOM.
						jQuery.tmpl.afterManip( this, fragClone, callback );
					};
				}
				oldManip.apply( this, dmArgs );
			} else {
				oldManip.apply( this, arguments );
			}
			cloneIndex = 0;
			if ( !appendToTmplItems ) {
				jQuery.tmpl.complete( newTmplItems );
			}
			return this;
		}
	});

	jQuery.extend({
		// Return wrapped set of template items, obtained by rendering template against data.
		tmpl: function( tmpl, data, options, parentItem ) {
			var ret, topLevel = !parentItem;
			if ( topLevel ) {
				// This is a top-level tmpl call (not from a nested template using {{tmpl}})
				parentItem = topTmplItem;
				tmpl = jQuery.template[tmpl] || jQuery.template( null, tmpl );
				wrappedItems = {}; // Any wrapped items will be rebuilt, since this is top level
			} else if ( !tmpl ) {
				// The template item is already associated with DOM - this is a refresh.
				// Re-evaluate rendered template for the parentItem
				tmpl = parentItem.tmpl;
				newTmplItems[parentItem.key] = parentItem;
				parentItem.nodes = [];
				if ( parentItem.wrapped ) {
					updateWrapped( parentItem, parentItem.wrapped );
				}
				// Rebuild, without creating a new template item
				return jQuery( build( parentItem, null, parentItem.tmpl( jQuery, parentItem ) ));
			}
			if ( !tmpl ) {
				return []; // Could throw...
			}
			if ( typeof data === "function" ) {
				data = data.call( parentItem || {} );
			}
			if ( options && options.wrapped ) {
				updateWrapped( options, options.wrapped );
			}
			ret = jQuery.isArray( data ) ?
				jQuery.map( data, function( dataItem ) {
					return dataItem ? newTmplItem( options, parentItem, tmpl, dataItem ) : null;
				}) :
				[ newTmplItem( options, parentItem, tmpl, data ) ];
			return topLevel ? jQuery( build( parentItem, null, ret ) ) : ret;
		},

		// Return rendered template item for an element.
		tmplItem: function( elem ) {
			var tmplItem;
			if ( elem instanceof jQuery ) {
				elem = elem[0];
			}
			while ( elem && elem.nodeType === 1 && !(tmplItem = jQuery.data( elem, "tmplItem" )) && (elem = elem.parentNode) ) {}
			return tmplItem || topTmplItem;
		},

		// Set:
		// Use $.template( name, tmpl ) to cache a named template,
		// where tmpl is a template string, a script element or a jQuery instance wrapping a script element, etc.
		// Use $( "selector" ).template( name ) to provide access by name to a script block template declaration.

		// Get:
		// Use $.template( name ) to access a cached template.
		// Also $( selectorToScriptBlock ).template(), or $.template( null, templateString )
		// will return the compiled template, without adding a name reference.
		// If templateString includes at least one HTML tag, $.template( templateString ) is equivalent
		// to $.template( null, templateString )
		template: function( name, tmpl ) {
			if (tmpl) {
				// Compile template and associate with name
				if ( typeof tmpl === "string" ) {
					// This is an HTML string being passed directly in.
					tmpl = buildTmplFn( tmpl );
				} else if ( tmpl instanceof jQuery ) {
					tmpl = tmpl[0] || {};
				}
				if ( tmpl.nodeType ) {
					// If this is a template block, use cached copy, or generate tmpl function and cache.
					tmpl = jQuery.data( tmpl, "tmpl" ) || jQuery.data( tmpl, "tmpl", buildTmplFn( tmpl.innerHTML ));
					// Issue: In IE, if the container element is not a script block, the innerHTML will remove quotes from attribute values whenever the value does not include white space.
					// This means that foo="${x}" will not work if the value of x includes white space: foo="${x}" -> foo=value of x.
					// To correct this, include space in tag: foo="${ x }" -> foo="value of x"
				}
				return typeof name === "string" ? (jQuery.template[name] = tmpl) : tmpl;
			}
			// Return named compiled template
			return name ? (typeof name !== "string" ? jQuery.template( null, name ):
				(jQuery.template[name] ||
					// If not in map, and not containing at least on HTML tag, treat as a selector.
					// (If integrated with core, use quickExpr.exec)
					jQuery.template( null, htmlExpr.test( name ) ? name : jQuery( name )))) : null;
		},

		encode: function( text ) {
			// Do HTML encoding replacing < > & and ' and " by corresponding entities.
			return ("" + text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");
		}
	});

	jQuery.extend( jQuery.tmpl, {
		tag: {
			"tmpl": {
				_default: { $2: "null" },
				open: "if($notnull_1){__=__.concat($item.nest($1,$2));}"
				// tmpl target parameter can be of type function, so use $1, not $1a (so not auto detection of functions)
				// This means that {{tmpl foo}} treats foo as a template (which IS a function).
				// Explicit parens can be used if foo is a function that returns a template: {{tmpl foo()}}.
			},
			"wrap": {
				_default: { $2: "null" },
				open: "$item.calls(__,$1,$2);__=[];",
				close: "call=$item.calls();__=call._.concat($item.wrap(call,__));"
			},
			"each": {
				_default: { $2: "$index, $value" },
				open: "if($notnull_1){$.each($1a,function($2){with(this){",
				close: "}});}"
			},
			"if": {
				open: "if(($notnull_1) && $1a){",
				close: "}"
			},
			"else": {
				_default: { $1: "true" },
				open: "}else if(($notnull_1) && $1a){"
			},
			"html": {
				// Unecoded expression evaluation.
				open: "if($notnull_1){__.push($1a);}"
			},
			"=": {
				// Encoded expression evaluation. Abbreviated form is ${}.
				_default: { $1: "$data" },
				open: "if($notnull_1){__.push($.encode($1a));}"
			},
			"!": {
				// Comment tag. Skipped by parser
				open: ""
			}
		},

		// This stub can be overridden, e.g. in jquery.tmplPlus for providing rendered events
		complete: function( items ) {
			newTmplItems = {};
		},

		// Call this from code which overrides domManip, or equivalent
		// Manage cloning/storing template items etc.
		afterManip: function afterManip( elem, fragClone, callback ) {
			// Provides cloned fragment ready for fixup prior to and after insertion into DOM
			var content = fragClone.nodeType === 11 ?
				jQuery.makeArray(fragClone.childNodes) :
				fragClone.nodeType === 1 ? [fragClone] : [];

			// Return fragment to original caller (e.g. append) for DOM insertion
			callback.call( elem, fragClone );

			// Fragment has been inserted:- Add inserted nodes to tmplItem data structure. Replace inserted element annotations by jQuery.data.
			storeTmplItems( content );
			cloneIndex++;
		}
	});

	//========================== Private helper functions, used by code above ==========================

	function build( tmplItem, nested, content ) {
		// Convert hierarchical content into flat string array
		// and finally return array of fragments ready for DOM insertion
		var frag, ret = content ? jQuery.map( content, function( item ) {
			return (typeof item === "string") ?
				// Insert template item annotations, to be converted to jQuery.data( "tmplItem" ) when elems are inserted into DOM.
				(tmplItem.key ? item.replace( /(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g, "$1 " + tmplItmAtt + "=\"" + tmplItem.key + "\" $2" ) : item) :
				// This is a child template item. Build nested template.
				build( item, tmplItem, item._ctnt );
		}) :
		// If content is not defined, insert tmplItem directly. Not a template item. May be a string, or a string array, e.g. from {{html $item.html()}}.
		tmplItem;
		if ( nested ) {
			return ret;
		}

		// top-level template
		ret = ret.join("");

		// Support templates which have initial or final text nodes, or consist only of text
		// Also support HTML entities within the HTML markup.
		ret.replace( /^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/, function( all, before, middle, after) {
			frag = jQuery( middle ).get();

			storeTmplItems( frag );
			if ( before ) {
				frag = unencode( before ).concat(frag);
			}
			if ( after ) {
				frag = frag.concat(unencode( after ));
			}
		});
		return frag ? frag : unencode( ret );
	}

	function unencode( text ) {
		// Use createElement, since createTextNode will not render HTML entities correctly
		var el = document.createElement( "div" );
		el.innerHTML = text;
		return jQuery.makeArray(el.childNodes);
	}

	// Generate a reusable function that will serve to render a template against data
	function buildTmplFn( markup ) {
		return new Function("jQuery","$item",
			// Use the variable __ to hold a string array while building the compiled template. (See https://github.com/jquery/jquery-tmpl/issues#issue/10).
			"var $=jQuery,call,__=[],$data=$item.data;" +

			// Introduce the data as local variables using with(){}
			"with($data){__.push('" +

			// Convert the template into pure JavaScript
			jQuery.trim(markup)
				.replace( /([\\'])/g, "\\$1" )
				.replace( /[\r\t\n]/g, " " )
				.replace( /\$\{([^\}]*)\}/g, "{{= $1}}" )
				.replace( /\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
				function( all, slash, type, fnargs, target, parens, args ) {
					var tag = jQuery.tmpl.tag[ type ], def, expr, exprAutoFnDetect;
					if ( !tag ) {
						throw "Unknown template tag: " + type;
					}
					def = tag._default || [];
					if ( parens && !/\w$/.test(target)) {
						target += parens;
						parens = "";
					}
					if ( target ) {
						target = unescape( target );
						args = args ? ("," + unescape( args ) + ")") : (parens ? ")" : "");
						// Support for target being things like a.toLowerCase();
						// In that case don't call with template item as 'this' pointer. Just evaluate...
						expr = parens ? (target.indexOf(".") > -1 ? target + unescape( parens ) : ("(" + target + ").call($item" + args)) : target;
						exprAutoFnDetect = parens ? expr : "(typeof(" + target + ")==='function'?(" + target + ").call($item):(" + target + "))";
					} else {
						exprAutoFnDetect = expr = def.$1 || "null";
					}
					fnargs = unescape( fnargs );
					return "');" +
						tag[ slash ? "close" : "open" ]
							.split( "$notnull_1" ).join( target ? "typeof(" + target + ")!=='undefined' && (" + target + ")!=null" : "true" )
							.split( "$1a" ).join( exprAutoFnDetect )
							.split( "$1" ).join( expr )
							.split( "$2" ).join( fnargs || def.$2 || "" ) +
						"__.push('";
				}) +
			"');}return __;"
		);
	}
	function updateWrapped( options, wrapped ) {
		// Build the wrapped content.
		options._wrap = build( options, true,
			// Suport imperative scenario in which options.wrapped can be set to a selector or an HTML string.
			jQuery.isArray( wrapped ) ? wrapped : [htmlExpr.test( wrapped ) ? wrapped : jQuery( wrapped ).html()]
		).join("");
	}

	function unescape( args ) {
		return args ? args.replace( /\\'/g, "'").replace(/\\\\/g, "\\" ) : null;
	}
	function outerHtml( elem ) {
		var div = document.createElement("div");
		div.appendChild( elem.cloneNode(true) );
		return div.innerHTML;
	}

	// Store template items in jQuery.data(), ensuring a unique tmplItem data data structure for each rendered template instance.
	function storeTmplItems( content ) {
		var keySuffix = "_" + cloneIndex, elem, elems, newClonedItems = {}, i, l, m;
		for ( i = 0, l = content.length; i < l; i++ ) {
			if ( (elem = content[i]).nodeType !== 1 ) {
				continue;
			}
			elems = elem.getElementsByTagName("*");
			for ( m = elems.length - 1; m >= 0; m-- ) {
				processItemKey( elems[m] );
			}
			processItemKey( elem );
		}
		function processItemKey( el ) {
			var pntKey, pntNode = el, pntItem, tmplItem, key;
			// Ensure that each rendered template inserted into the DOM has its own template item,
			if ( (key = el.getAttribute( tmplItmAtt ))) {
				while ( pntNode.parentNode && (pntNode = pntNode.parentNode).nodeType === 1 && !(pntKey = pntNode.getAttribute( tmplItmAtt ))) { }
				if ( pntKey !== key ) {
					// The next ancestor with a _tmplitem expando is on a different key than this one.
					// So this is a top-level element within this template item
					// Set pntNode to the key of the parentNode, or to 0 if pntNode.parentNode is null, or pntNode is a fragment.
					pntNode = pntNode.parentNode ? (pntNode.nodeType === 11 ? 0 : (pntNode.getAttribute( tmplItmAtt ) || 0)) : 0;
					if ( !(tmplItem = newTmplItems[key]) ) {
						// The item is for wrapped content, and was copied from the temporary parent wrappedItem.
						tmplItem = wrappedItems[key];
						tmplItem = newTmplItem( tmplItem, newTmplItems[pntNode]||wrappedItems[pntNode] );
						tmplItem.key = ++itemKey;
						newTmplItems[itemKey] = tmplItem;
					}
					if ( cloneIndex ) {
						cloneTmplItem( key );
					}
				}
				el.removeAttribute( tmplItmAtt );
			} else if ( cloneIndex && (tmplItem = jQuery.data( el, "tmplItem" )) ) {
				// This was a rendered element, cloned during append or appendTo etc.
				// TmplItem stored in jQuery data has already been cloned in cloneCopyEvent. We must replace it with a fresh cloned tmplItem.
				cloneTmplItem( tmplItem.key );
				newTmplItems[tmplItem.key] = tmplItem;
				pntNode = jQuery.data( el.parentNode, "tmplItem" );
				pntNode = pntNode ? pntNode.key : 0;
			}
			if ( tmplItem ) {
				pntItem = tmplItem;
				// Find the template item of the parent element.
				// (Using !=, not !==, since pntItem.key is number, and pntNode may be a string)
				while ( pntItem && pntItem.key != pntNode ) {
					// Add this element as a top-level node for this rendered template item, as well as for any
					// ancestor items between this item and the item of its parent element
					pntItem.nodes.push( el );
					pntItem = pntItem.parent;
				}
				// Delete content built during rendering - reduce API surface area and memory use, and avoid exposing of stale data after rendering...
				delete tmplItem._ctnt;
				delete tmplItem._wrap;
				// Store template item as jQuery data on the element
				jQuery.data( el, "tmplItem", tmplItem );
			}
			function cloneTmplItem( key ) {
				key = key + keySuffix;
				tmplItem = newClonedItems[key] =
					(newClonedItems[key] || newTmplItem( tmplItem, newTmplItems[tmplItem.parent.key + keySuffix] || tmplItem.parent ));
			}
		}
	}

	//---- Helper functions for template item ----

	function tiCalls( content, tmpl, data, options ) {
		if ( !content ) {
			return stack.pop();
		}
		stack.push({ _: content, tmpl: tmpl, item:this, data: data, options: options });
	}

	function tiNest( tmpl, data, options ) {
		// nested template, using {{tmpl}} tag
		return jQuery.tmpl( jQuery.template( tmpl ), data, options, this );
	}

	function tiWrap( call, wrapped ) {
		// nested template, using {{wrap}} tag
		var options = call.options || {};
		options.wrapped = wrapped;
		// Apply the template, which may incorporate wrapped content,
		return jQuery.tmpl( jQuery.template( call.tmpl ), call.data, options, call.item );
	}

	function tiHtml( filter, textOnly ) {
		var wrapped = this._wrap;
		return jQuery.map(
			jQuery( jQuery.isArray( wrapped ) ? wrapped.join("") : wrapped ).filter( filter || "*" ),
			function(e) {
				return textOnly ?
					e.innerText || e.textContent :
					e.outerHTML || outerHtml(e);
			});
	}

	function tiUpdate() {
		var coll = this.nodes;
		jQuery.tmpl( null, null, null, this).insertBefore( coll[0] );
		jQuery( coll ).remove();
	}
})( jQuery );
/*! include jquery.tmplPlus.js */
/*!
 * tmplPlus.js: for jQuery Templates Plugin 1.0.0pre
 * Additional templating features or support for more advanced/less common scenarios.
 * Requires jquery.tmpl.js
 * http://github.com/jquery/jquery-tmpl
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function (jQuery) {
	var oldComplete = jQuery.tmpl.complete, oldManip = jQuery.fn.domManip;

	// Override jQuery.tmpl.complete in order to provide rendered event.
	jQuery.tmpl.complete = function( tmplItems ) {
		var tmplItem;
		oldComplete( tmplItems);
		for ( tmplItem in tmplItems ) {
			tmplItem =  tmplItems[tmplItem];
			if ( tmplItem.addedTmplItems && jQuery.inArray( tmplItem, tmplItem.addedTmplItems ) === -1  ) {
				tmplItem.addedTmplItems.push( tmplItem );
			}
		}
		for ( tmplItem in tmplItems ) {
			tmplItem =  tmplItems[tmplItem];
			// Raise rendered event
			if ( tmplItem.rendered ) {
				tmplItem.rendered( tmplItem );
			}
		}
	};

	jQuery.extend({
		tmplCmd: function( command, data, tmplItems ) {
			var retTmplItems = [], before;
			function find( data, tmplItems ) {
				var found = [], tmplItem, ti, tl = tmplItems.length, dataItem, di = 0, dl = data.length;
				for ( ; di < dl; ) {
					dataItem = data[di++];
					for ( ti = 0; ti < tl; ) {
						tmplItem = tmplItems[ti++];
						if ( tmplItem.data === dataItem ) {
							found.push( tmplItem );
						}
					}
				}
				return found;
			}

			data = jQuery.isArray( data ) ? data : [ data ];
			switch ( command ) {
				case "find":
					return find( data, tmplItems );
				case "replace":
					data.reverse();
			}
			jQuery.each( tmplItems ? find( data, tmplItems ) : data, function( i, tmplItem ) {
				coll = tmplItem.nodes;
				switch ( command ) {
					case "update":
						tmplItem.update();
						break;
					case "remove":
						jQuery( coll ).remove();
						if ( tmplItems ) {
							tmplItems.splice( jQuery.inArray( tmplItem, tmplItems ), 1 );
						}
						break;
					case "replace":
						before = before ?
							jQuery( coll ).insertBefore( before )[0] :
							jQuery( coll ).appendTo( coll[0].parentNode )[0];
						retTmplItems.unshift( tmplItem );
				}
			});
			return retTmplItems;
		}
	});

	jQuery.fn.extend({
		domManip: function (args, table, callback, options) {
			var data = args[1], tmpl = args[0], dmArgs;
			if ( args.length >= 2 && typeof data === "object" && !data.nodeType && !(data instanceof jQuery)) {
				// args[1] is data, for a template.
				dmArgs = jQuery.makeArray( arguments );

				// Eval template to obtain fragment to clone and insert
				dmArgs[0] = [ jQuery.tmpl( jQuery.template( tmpl ), data, args[2], args[3] ) ];

				dmArgs[2] = function( fragClone ) {
					// Handler called by oldManip when rendered template has been inserted into DOM.
					jQuery.tmpl.afterManip( this, fragClone, callback );
				};
				return oldManip.apply( this, dmArgs );
			}
			return oldManip.apply( this, arguments );
		}
	});
})(jQuery);
/*! include jquery.ui.totop.js */
/*
|--------------------------------------------------------------------------
| UItoTop jQuery Plugin 1.1
| http://www.mattvarone.com/web-design/uitotop-jquery-plugin/
|--------------------------------------------------------------------------
*/

(function($){
	$.fn.UItoTop = function(options) {

 		var defaults = {
			text: 'To Top',
			min: 200,
			inDelay:600,
			outDelay:400,
  			containerID: 'toTop',
			containerHoverID: 'toTopHover',
			scrollSpeed: 1200,
			easingType: 'linear'
 		};

 		var settings = $.extend(defaults, options);
		var containerIDhash = '#' + settings.containerID;
		var containerHoverIDHash = '#'+settings.containerHoverID;
		
		$('body').append('<a href="#" id="'+settings.containerID+'">'+settings.text+'</a>');
		$(containerIDhash).hide().click(function(){
			$('html, body').animate({scrollTop:0}, settings.scrollSpeed, settings.easingType);
			$('#'+settings.containerHoverID, this).stop().animate({'opacity': 0 }, settings.inDelay, settings.easingType);
			return false;
		})
		.prepend('<span id="'+settings.containerHoverID+'"></span>')
		.hover(function() {
				$(containerHoverIDHash, this).stop().animate({
					'opacity': 1
				}, 600, 'linear');
			}, function() { 
				$(containerHoverIDHash, this).stop().animate({
					'opacity': 0
				}, 700, 'linear');
			});
					
		$(window).scroll(function() {
			var sd = $(window).scrollTop();
			if(typeof document.body.style.maxHeight === "undefined") {
				$(containerIDhash).css({
					'position': 'absolute',
					'top': $(window).scrollTop() + $(window).height() - 50
				});
			}
			if ( sd > settings.min ) 
				$(containerIDhash).fadeIn(settings.inDelay);
			else 
				$(containerIDhash).fadeOut(settings.Outdelay);
		});

};
})(jQuery);
/*! include jquery.uniform.js */
/*

Uniform v1.7.5
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.4 or newer

Much thanks to Thomas Reynolds and Buck Wilson for their help and advice on this

Disabling text selection is made possible by Mathias Bynens <http://mathiasbynens.be/>
and his noSelect plugin. <http://github.com/mathiasbynens/noSelect-jQuery-Plugin>

Also, thanks to David Kaneda and Eugene Bond for their contributions to the plugin

License:
MIT License - http://www.opensource.org/licenses/mit-license.php

Enjoy!

*/

(function($) {
  $.uniform = {
    options: {
      selectClass:   'selector',
      radioClass: 'radio',
      checkboxClass: 'checker',
      fileClass: 'uploader',
      filenameClass: 'filename',
      fileBtnClass: 'action',
      fileDefaultText: '',
      fileBtnText: '',
      checkedClass: 'checked',
      focusClass: 'focus',
      disabledClass: 'disabled',
      buttonClass: 'uniformbutton',
      activeClass: 'active',
      hoverClass: 'hover',
      useID: true,
      idPrefix: 'uniform',
      resetSelector: false,
      autoHide: true
    },
    elements: []
  };

  if($.browser.msie && $.browser.version < 7){
    $.support.selectOpacity = false;
  }else{
    $.support.selectOpacity = true;
  }

  $.fn.uniform = function(options) {

    options = $.extend($.uniform.options, options);

    var el = this;
    //code for specifying a reset button
    if(options.resetSelector != false){
      $(options.resetSelector).mouseup(function(){
        function resetThis(){
          $.uniform.update(el);
        }
        setTimeout(resetThis, 10);
      });
    }
    
    function doInput(elem){
      $el = $(elem);
      $el.addClass($el.attr("type"));
      storeElement(elem);
    }
    
    function doTextarea(elem){
      $(elem).addClass("uniform");
      storeElement(elem);
    }
    
    function doButton(elem){
      var $el = $(elem);
      
      var divTag = $("<div>"),
          spanTag = $("<span>");
      
      divTag.addClass(options.buttonClass);
      
      if(options.useID && $el.attr("id") != "") divTag.attr("id", options.idPrefix+"-"+$el.attr("id"));
      
      var btnText;
      
      if($el.is("a") || $el.is("button")){
        btnText = $el.text();
      }else if($el.is(":submit") || $el.is(":reset") || $el.is("input[type=button]")){
        btnText = $el.attr("value");
      }
      
      btnText = btnText == "" ? $el.is(":reset") ? "Reset" : "Submit" : btnText;
      
      spanTag.html(btnText);
      
      $el.css("opacity", 0);
      $el.wrap(divTag);
      $el.wrap(spanTag);
      
      //redefine variables
      divTag = $el.closest("div");
      spanTag = $el.closest("span");
      
      if($el.is(":disabled")) divTag.addClass(options.disabledClass);
      
      divTag.bind({
        "mouseenter.uniform": function(){
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function(){
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        },
        "mousedown.uniform touchbegin.uniform": function(){
          divTag.addClass(options.activeClass);
        },
        "mouseup.uniform touchend.uniform": function(){
          divTag.removeClass(options.activeClass);
        },
        "click.uniform touchend.uniform": function(e){
          if($(e.target).is("span") || $(e.target).is("div")){    
            if(elem[0].dispatchEvent){
              var ev = document.createEvent('MouseEvents');
              ev.initEvent( 'click', true, true );
              elem[0].dispatchEvent(ev);
            }else{
              elem[0].click();
            }
          }
        }
      });
      
      elem.bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        }
      });
      
      $.uniform.noSelect(divTag);
      storeElement(elem);
      
    }

    function doSelect(elem){
      var $el = $(elem);
      
      var divTag = $('<div />'),
          spanTag = $('<span />');
      
      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.selectClass);

      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }
      
      var selected = elem.find(":selected:first");
      if(selected.length == 0){
        selected = elem.find("option:first");
      }
      spanTag.html(selected.html());
      
      elem.css('opacity', 0);
      elem.wrap(divTag);
      elem.before(spanTag);

      //redefine variables
      divTag = elem.parent("div");
      spanTag = elem.siblings("span");

      elem.bind({
        "change.uniform": function() {
          spanTag.text(elem.find(":selected").html());
          divTag.removeClass(options.activeClass);
        },
        "focus.uniform": function() {
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function() {
          divTag.removeClass(options.focusClass);
          divTag.removeClass(options.activeClass);
        },
        "mousedown.uniform touchbegin.uniform": function() {
          divTag.addClass(options.activeClass);
        },
        "mouseup.uniform touchend.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "click.uniform touchend.uniform": function(){
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        },
        "keyup.uniform": function(){
          spanTag.text(elem.find(":selected").html());
        }
      });
      
      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }
      $.uniform.noSelect(spanTag);
      
      storeElement(elem);

    }

    function doCheckbox(elem){
      var $el = $(elem);
      
      var divTag = $('<div />'),
          spanTag = $('<span />');
      
      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }
      
      divTag.addClass(options.checkboxClass);

      //assign the id of the element
      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }

      //wrap with the proper elements
      $(elem).wrap(divTag);
      $(elem).wrap(spanTag);

      //redefine variables
      spanTag = elem.parent();
      divTag = spanTag.parent();

      //hide normal input and add focus classes
      $(elem)
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "click.uniform touchend.uniform": function(){
          if(!$(elem).attr("checked")){
            //box was just unchecked, uncheck span
            spanTag.removeClass(options.checkedClass);
          }else{
            //box was just checked, check span.
            spanTag.addClass(options.checkedClass);
          }
        },
        "mousedown.uniform touchbegin.uniform": function() {
          divTag.addClass(options.activeClass);
        },
        "mouseup.uniform touchend.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });
      
      //handle defaults
      if($(elem).attr("checked")){
        //box is checked by default, check our box
        spanTag.addClass(options.checkedClass);
      }

      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }

      storeElement(elem);
    }

    function doRadio(elem){
      var $el = $(elem);
      
      var divTag = $('<div />'),
          spanTag = $('<span />');
          
      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.radioClass);

      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }

      //wrap with the proper elements
      $(elem).wrap(divTag);
      $(elem).wrap(spanTag);

      //redefine variables
      spanTag = elem.parent();
      divTag = spanTag.parent();

      //hide normal input and add focus classes
      $(elem)
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "click.uniform touchend.uniform": function(){
          if(!$(elem).attr("checked")){
            //box was just unchecked, uncheck span
            spanTag.removeClass(options.checkedClass);
          }else{
            //box was just checked, check span
            var classes = options.radioClass.split(" ")[0];
            $("." + classes + " span." + options.checkedClass + ":has([name='" + $(elem).attr('name') + "'])").removeClass(options.checkedClass);
            spanTag.addClass(options.checkedClass);
          }
        },
        "mousedown.uniform touchend.uniform": function() {
          if(!$(elem).is(":disabled")){
            divTag.addClass(options.activeClass);
          }
        },
        "mouseup.uniform touchbegin.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform touchend.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });

      //handle defaults
      if($(elem).attr("checked")){
        //box is checked by default, check span
        spanTag.addClass(options.checkedClass);
      }
      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }

      storeElement(elem);

    }

    function doFile(elem){
      //sanitize input
      var $el = $(elem);

      var divTag = $('<div />'),
          filenameTag = $('<span>'+options.fileDefaultText+'</span>'),
          btnTag = $('<span>'+options.fileBtnText+'</span>');
      
      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.fileClass);
      filenameTag.addClass(options.filenameClass);
      btnTag.addClass(options.fileBtnClass);

      if(options.useID && $el.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+$el.attr("id"));
      }

      //wrap with the proper elements
      $el.wrap(divTag);
      $el.after(btnTag);
      $el.after(filenameTag);

      //redefine variables
      divTag = $el.closest("div");
      filenameTag = $el.siblings("."+options.filenameClass);
      btnTag = $el.siblings("."+options.fileBtnClass);

      //set the size
      if(!$el.attr("size")){
        var divWidth = divTag.width();
        //$el.css("width", divWidth);
        $el.attr("size", divWidth/10);
      }

      //actions
      var setFilename = function()
      {
        var filename = $el.val();
        if (filename === '')
        {
          filename = options.fileDefaultText;
        }
        else
        {
          filename = filename.split(/[\/\\]+/);
          filename = filename[(filename.length-1)];
        }
        filenameTag.text(filename);
      };

      // Account for input saved across refreshes
      setFilename();

      $el
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "mousedown.uniform": function() {
          if(!$(elem).is(":disabled")){
            divTag.addClass(options.activeClass);
          }
        },
        "mouseup.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });

      // IE7 doesn't fire onChange until blur or second fire.
      if ($.browser.msie){
        // IE considers browser chrome blocking I/O, so it
        // suspends tiemouts until after the file has been selected.
        $el.bind('click.uniform.ie7', function() {
          setTimeout(setFilename, 0);
        });
      }else{
        // All other browsers behave properly
        $el.bind('change.uniform', setFilename);
      }

      //handle defaults
      if($el.attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }
      
      $.uniform.noSelect(filenameTag);
      $.uniform.noSelect(btnTag);
      
      storeElement(elem);

    }
    
    $.uniform.restore = function(elem){
      if(elem == undefined){
        elem = $($.uniform.elements);
      }
      
      $(elem).each(function(){
        if($(this).is(":checkbox")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }else if($(this).is("select")){
          //remove sibling span
          $(this).siblings("span").remove();
          //unwrap parent div
          $(this).unwrap();
        }else if($(this).is(":radio")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }else if($(this).is(":file")){
          //remove sibling spans
          $(this).siblings("span").remove();
          //unwrap parent div
          $(this).unwrap();
        }else if($(this).is("button, :submit, :reset, a, input[type='button']")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }
        
        //unbind events
        $(this).unbind(".uniform");
        
        //reset inline style
        $(this).css("opacity", "1");
        
        //remove item from list of uniformed elements
        var index = $.inArray($(elem), $.uniform.elements);
        $.uniform.elements.splice(index, 1);
      });
    };

    function storeElement(elem){
      //store this element in our global array
      elem = $(elem).get();
      if(elem.length > 1){
        $.each(elem, function(i, val){
          $.uniform.elements.push(val);
        });
      }else{
        $.uniform.elements.push(elem);
      }
    }
    
    //noSelect v1.0
    $.uniform.noSelect = function(elem) {
      function f() {
       return false;
      };
      $(elem).each(function() {
       this.onselectstart = this.ondragstart = f; // Webkit & IE
       $(this)
        .mousedown(f) // Webkit & Opera
        .css({ MozUserSelect: 'none' }); // Firefox
      });
     };

    $.uniform.update = function(elem){
      if(elem == undefined){
        elem = $($.uniform.elements);
      }
      //sanitize input
      elem = $(elem);

      elem.each(function(){
        //do to each item in the selector
        //function to reset all classes
        var $e = $(this);

        if($e.is("select")){
          //element is a select
          var spanTag = $e.siblings("span");
          var divTag = $e.parent("div");

          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);

          //reset current selected text
          spanTag.html($e.find(":selected").html());

          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }

        }else if($e.is(":checkbox")){
          //element is a checkbox
          var spanTag = $e.closest("span");
          var divTag = $e.closest("div");

          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);
          spanTag.removeClass(options.checkedClass);

          if($e.is(":checked")){
            spanTag.addClass(options.checkedClass);
          }
          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }

        }else if($e.is(":radio")){
          //element is a radio
          var spanTag = $e.closest("span");
          var divTag = $e.closest("div");

          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);
          spanTag.removeClass(options.checkedClass);

          if($e.is(":checked")){
            spanTag.addClass(options.checkedClass);
          }

          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }
        }else if($e.is(":file")){
          var divTag = $e.parent("div");
          var filenameTag = $e.siblings(options.filenameClass);
          btnTag = $e.siblings(options.fileBtnClass);

          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);

          filenameTag.text($e.val());

          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }
        }else if($e.is(":submit") || $e.is(":reset") || $e.is("button") || $e.is("a") || elem.is("input[type=button]")){
          var divTag = $e.closest("div");
          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);
          
          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }
          
        }
        
      });
    };

    return this.each(function() {
      if($.support.selectOpacity){
        var elem = $(this);

        if(elem.is("select")){
          //element is a select
          if(elem.attr("multiple") != true){
            //element is not a multi-select
            if(elem.attr("size") == undefined || elem.attr("size") <= 1){
              doSelect(elem);
            }
          }
        }else if(elem.is(":checkbox")){
          //element is a checkbox
          doCheckbox(elem);
        }else if(elem.is(":radio")){
          //element is a radio
          doRadio(elem);
        }else if(elem.is(":file")){
          //element is a file upload
          doFile(elem);
        }else if(elem.is(":text, :password, input[type='email']")){
          doInput(elem);
        }else if(elem.is("textarea")){
          doTextarea(elem);
        }else if(elem.is("a") || elem.is(":submit") || elem.is(":reset") || elem.is("button") || elem.is("input[type=button]")){
          doButton(elem);
        }
          
      }
    });
  };
})(jQuery);
/*! include money.js */
/*

* Price Format jQuery Plugin
* Created By Eduardo Cuducos - cuducos [at] gmail [dot] com
* Currently maintained by Flavio Silveira - flavio [at] gmail [dot] com
* Version: 1.4
* Release: 2011-05-17

* original char limit by Flavio Silveira <http://flaviosilveira.com>
* original keydown event attachment by Kaihua Qi
* keydown fixes by Thasmo <http://thasmo.com>
* Clear Prefix on Blur suggest by Ricardo Mendes from PhonoWay

*/

(function($) {

	$.fn.priceFormat = function(options) {

		var defaults = {
			prefix: 'US$ ',
			centsSeparator: '.', 
			thousandsSeparator: ',',
			limit: false,
			centsLimit: 2,
			clearPrefix: false
		};

		var options = $.extend(defaults, options);

		return this.each(function() {

			// pre defined options
			var obj = $(this);
			var is_number = /[0-9]/;

			// load the pluggings settings
			var prefix = options.prefix;
			var centsSeparator = options.centsSeparator;
			var thousandsSeparator = options.thousandsSeparator;
			var limit = options.limit;
			var centsLimit = options.centsLimit;
			var clearPrefix = options.clearPrefix;

			// skip everything that isn't a number
			// and also skip the left zeroes
			function to_numbers (str) {
				var formatted = '';
				for (var i=0;i<(str.length);i++) {
					char = str.charAt(i);
					if (formatted.length==0 && char==0) char = false;
					if (char && char.match(is_number)) {
						if (limit) {
							if (formatted.length < limit) formatted = formatted+char;
						}else{
							formatted = formatted+char;
						}
					}
				}
				return formatted;
			}

			// format to fill with zeros to complete cents chars
			function fill_with_zeroes (str) {
				while (str.length<(centsLimit+1)) str = '0'+str;
				return str;
			}

			// format as price
			function price_format (str) {

				// formatting settings
				var formatted = fill_with_zeroes(to_numbers(str));
				var thousandsFormatted = '';
				var thousandsCount = 0;

				// split integer from cents
				var centsVal = formatted.substr(formatted.length-centsLimit,centsLimit);
				var integerVal = formatted.substr(0,formatted.length-centsLimit);

				// apply cents pontuation
				formatted = integerVal+centsSeparator+centsVal;

				// apply thousands pontuation
				if (thousandsSeparator) {
					for (var j=integerVal.length;j>0;j--) {
						char = integerVal.substr(j-1,1);
						thousandsCount++;
						if (thousandsCount%3==0) char = thousandsSeparator+char;
						thousandsFormatted = char+thousandsFormatted;
					}
					if (thousandsFormatted.substr(0,1)==thousandsSeparator) thousandsFormatted = thousandsFormatted.substring(1,thousandsFormatted.length);
					formatted = thousandsFormatted+centsSeparator+centsVal;
				}

				// apply the prefix
				if (prefix) formatted = prefix+formatted;

				return formatted;

			}

			// filter what user type (only numbers and functional keys)
			function key_check (e) {
		
				var code = (e.keyCode ? e.keyCode : e.which);
				var typed = String.fromCharCode(code);
				var functional = false;
				var str = obj.val();
				var newValue = price_format(str+typed);
				
				// allow keypad numbers, 0 to 9
				if(code >= 96 && code <= 105) functional = true;

				// check Backspace, Tab, Enter, and left/right arrows
				if (code ==  8) functional = true;
				if (code ==  9) functional = true;
				if (code == 13) functional = true;
				if (code == 37) functional = true;
				if (code == 39) functional = true;

				if (!functional) {
					e.preventDefault();
					e.stopPropagation();
					if (str!=newValue) obj.val(newValue);
				}

			}

			// inster formatted price as a value of an input field
			function price_it () {
				var str = obj.val();
				var price = price_format(str);
				if (str != price) obj.val(price);
			}
			
			// Add prefix on focus
			function add_prefix()
			{
				var val = obj.val();
				obj.val(prefix + val);
			}
			
			// Clear prefix on blur if is set to true
			function clear_prefix()
			{
				var array = obj.val().split(prefix); 
				obj.val(array[1]);
			}
			
			// bind the actions
			$(this).bind('keydown', key_check);
			$(this).bind('keyup', price_it);
			
			// Clear Prefix and Add Prefix if need
			if(clearPrefix)
			{
				$(this).bind('focusout', function()
				{ 
					clear_prefix();
				});
				
				$(this).bind('focusin', function()
				{ 
					add_prefix();
				});
			}
			
			// If value has content
			if ($(this).val().length>0)
			{
				price_it();
				
				if(clearPrefix)
					clear_prefix();
			}
				
	
		});
	
	}; 		
	
})(jQuery);
/*! include postmessage.js */
/*
* jQuery postMessage - v0.5 - 9/11/2009
* http://benalman.com/projects/jquery-postmessage-plugin/
*
* Copyright (c) 2009 "Cowboy" Ben Alman
* Dual licensed under the MIT and GPL licenses.
* http://benalman.com/about/license/
*/
(function($){var g,d,j=1,a,b=this,f=!1,h="postMessage",e="addEventListener",c,i=b[h]&&!$.browser.opera;$[h]=function(k,l,m){if(!l){return}k=typeof k==="string"?k:$.param(k);m=m||parent;if(i){m[h](k,l.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(l){m.location=l.replace(/#.*$/,"")+"#"+(+new Date)+(j++)+"&"+k}}};$.receiveMessage=c=function(l,m,k){if(i){if(l){a&&c();a=function(n){if((typeof m==="string"&&n.origin!==m)||($.isFunction(m)&&m(n.origin)===f)){return f}l(n)}}if(b[e]){b[l?e:"removeEventListener"]("message",a,f)}else{b[l?"attachEvent":"detachEvent"]("onmessage",a)}}else{g&&clearInterval(g);g=null;if(l){k=typeof m==="number"?m:typeof k==="number"?k:100;g=setInterval(function(){var o=document.location.hash,n=/^#?\d+&/;if(o!==d&&n.test(o)){d=o;l({data:o.replace(n,"")})}},k)}}}})(jQuery);
/*! include quicksearch.js */
(function($, window, document, undefined) {
    $.fn.quicksearch = function (target, opt) {
		
        var timeout, cache, rowcache, jq_results, val = '', e = this, options = $.extend({ 
            delay: 100,
            selector: null,
            stripeRows: null,
            loader: null,
            noResults: '',
            bind: 'keyup',
            onBefore: function () { 
                return;
            },
            onAfter: function () { 
                return;
            },
            show: function () {
                this.style.display = "";
            },
            hide: function () {
                this.style.display = "none";
            },
            prepareQuery: function (val) {
                return val.toLowerCase().split(' ');
            },
            testQuery: function (query, txt, _row) {
                for (var i = 0; i < query.length; i += 1) {
                    if (txt.indexOf(query[i]) === -1) {
                        return false;
                    }
                }
                return true;
            }
        }, opt);
		
        this.go = function () {
			
            var i = 0, 
            noresults = true, 
            query = options.prepareQuery(val),
            val_empty = (val.replace(' ', '').length === 0);
			
            for (var i = 0, len = rowcache.length; i < len; i++) {
                if (val_empty || options.testQuery(query, cache[i], rowcache[i])) {
                    options.show.apply(rowcache[i]);
                    noresults = false;
                } else {
                    options.hide.apply(rowcache[i]);
                }
            }
			
            if (noresults) {
                this.results(false);
            } else {
                this.results(true);
                this.stripe();
            }
			
            this.loader(false);
            options.onAfter();
			
            return this;
        };
		
        this.stripe = function () {
			
            if (typeof options.stripeRows === "object" && options.stripeRows !== null)
            {
                var joined = options.stripeRows.join(' ');
                var stripeRows_length = options.stripeRows.length;
				
                jq_results.not(':hidden').each(function (i) {
                    $(this).removeClass(joined).addClass(options.stripeRows[i % stripeRows_length]);
                });
            }
			
            return this;
        };
		
        this.strip_html = function (input) {
            var output = input.replace(new RegExp('<[^<]+\>', 'g'), "");
            output = $.trim(output.toLowerCase());
            return output;
        };
		
        this.results = function (bool) {
            if (typeof options.noResults === "string" && options.noResults !== "") {
                if (bool) {
                    $(options.noResults).hide();
                } else {
                    $(options.noResults).show();
                }
            }
            return this;
        };
		
        this.loader = function (bool) {
            if (typeof options.loader === "string" && options.loader !== "") {
                (bool) ? $(options.loader).show() : $(options.loader).hide();
            }
            return this;
        };
		
        this.cache = function () {
			
            jq_results = $(target);
			
            if (typeof options.noResults === "string" && options.noResults !== "") {
                jq_results = jq_results.not(options.noResults);
            }
			
            var t = (typeof options.selector === "string") ? jq_results.find(options.selector) : $(target).not(options.noResults);
            cache = t.map(function () {
                return e.strip_html(this.innerHTML);
            });
			
            rowcache = jq_results.map(function () {
                return this;
            });
			
            return this.go();
        };
		
        this.trigger = function () {
            this.loader(true);
            options.onBefore();
			
            window.clearTimeout(timeout);
            timeout = window.setTimeout(function () {
                e.go();
            }, options.delay);
			
            return this;
        };
		
        this.cache();
        this.results(true);
        this.stripe();
        this.loader(false);
		
        return this.each(function () {
            if ( options.bind == 'enter' ){
                $(this).bind('keyup', function (_e, keyCode) {
                    if(_e.keyCode == 13 || keyCode === 13) {
                        val = $(this).val();
                        e.trigger();
                    }
                });
            }
            else{               
                $(this).bind(options.bind, function () {
                    val = $(this).val();
                    e.trigger();
                });
            }
        });
		
    };

}(jQuery, this, document));
/*! include simpletooltip.js */
/**
*
*	simpleTooltip jQuery plugin, by Marius ILIE
*	visit http://dev.mariusilie.net for details
*
**/
(function($){ $.fn.simpletooltip = function(title){
	return this.each(function() {
            
                                var text = "";
                                if(typeof title != 'undefined' && title.length > 0  ) {
                                       text = title;
                                }else {
                                      text = $(this).attr("title");
                                }            		
                                
		$(this).attr("title", "");
		if(text != undefined) {
			$(this).unbind('mouseenter.tooltip').bind('mouseenter.tooltip', function(e){
				var tipX = e.pageX + 12;
				var tipY = e.pageY + 12;
				$(this).attr("title", ""); 
				$("body").append("<div id='simpleTooltip' style='position: absolute; z-index: 100; display: none;'>" + text + "</div>");
				if($.browser.msie) var tipWidth = $("#simpleTooltip").outerWidth(true)
				else var tipWidth = $("#simpleTooltip").width()
				$("#simpleTooltip").width(tipWidth);
				$("#simpleTooltip").css("left", tipX).css("top", tipY).fadeIn("medium");
			});
                        
                                               $(this).bind("mouseleave.tooltip" , function(){
				$("#simpleTooltip").remove();
				$(this).attr("title", text);
			});
			$(this).mousemove(function(e){
				var tipX = e.pageX + 25;
				var tipY = e.pageY + 0;
				var tipWidth = $("#simpleTooltip").outerWidth(true);
				var tipHeight = $("#simpleTooltip").outerHeight(true);
				if(tipX + tipWidth > $(window).scrollLeft() + $(window).width()) tipX = e.pageX - tipWidth;
				if($(window).height()+$(window).scrollTop() < tipY + tipHeight) tipY = e.pageY - tipHeight;
				$("#simpleTooltip").css("left", tipX).css("top", tipY).fadeIn("medium");
			});
		}
	});
}})(jQuery);
/*! include superfish.js */
/*
 * Superfish v1.4.8 - jQuery menu widget
 * Copyright (c) 2008 Joel Birch
 *
 * Dual licensed under the MIT and GPL licenses:
 * 	http://www.opensource.org/licenses/mit-license.php
 * 	http://www.gnu.org/licenses/gpl.html
 *
 * CHANGELOG: http://users.tpg.com.au/j_birch/plugins/superfish/changelog.txt
 */


(function($){
    $.fn.superfish = function(op){

        var sf = $.fn.superfish,
        c = sf.c,
        $arrow = $(['<span class="',c.arrowClass,'"> Â»</span>'].join('')),
        over = function(){
            var $$ = $(this), menu = getMenu($$);
            clearTimeout(menu.sfTimer);
            $$.showSuperfishUl().siblings().hideSuperfishUl();
        },
        out = function(){
            var $$ = $(this), menu = getMenu($$), o = sf.op;
            clearTimeout(menu.sfTimer);
            menu.sfTimer=setTimeout(function(){
                o.retainPath=($.inArray($$[0],o.$path)>-1);
                $$.hideSuperfishUl();
                if (o.$path.length && $$.parents(['li.',o.hoverClass].join('')).length<1){
                    over.call(o.$path);
                }
            },o.delay);	
        },
        getMenu = function($menu){
            var menu = $menu.parents(['ul.',c.menuClass,':first'].join(''))[0];
            sf.op = sf.o[menu.serial];
            return menu;
        },
        addArrow = function($a){
            $a.addClass(c.anchorClass).append($arrow.clone());
        };
			
        return this.each(function() {
            var s = this.serial = sf.o.length;
            var o = $.extend({},sf.defaults,op);
            o.$path = $('li.'+o.pathClass,this).slice(0,o.pathLevels).each(function(){
                $(this).addClass([o.hoverClass,c.bcClass].join(' '))
                .filter('li:has(ul)').removeClass(o.pathClass);
            });
            sf.o[s] = sf.op = o;
			
            $('li:has(ul)',this)[($.fn.hoverIntent && !o.disableHI) ? 'hoverIntent' : 'hover'](over,out).each(function() {
                if (o.autoArrows) addArrow( $('>a:first-child',this) );
            })
            .not('.'+c.bcClass)
            .hideSuperfishUl();
			
            var $a = $('a',this);
            $a.each(function(i){
                var $li = $a.eq(i).parents('li');
                $a.eq(i).focus(function(){
                    over.call($li);
                }).blur(function(){
                    out.call($li);
                });
            });
            o.onInit.call(this);
			
        }).each(function() {
            var menuClasses = [c.menuClass];
            if (sf.op.dropShadows  && !($.browser.msie && $.browser.version < 7)) menuClasses.push(c.shadowClass);
            $(this).addClass(menuClasses.join(' '));
        });
    };

    var sf = $.fn.superfish;
    sf.o = [];
    sf.op = {};
    sf.IE7fix = function(){
        var o = sf.op;
        if ($.browser.msie && $.browser.version > 6 && o.dropShadows && o.animation.opacity!=undefined)
            this.toggleClass(sf.c.shadowClass+'-off');
    };
    sf.c = {
        bcClass     : 'sf-breadcrumb',
        menuClass   : 'sf-js-enabled',
        anchorClass : 'sf-with-ul',
        arrowClass  : 'sf-sub-indicator',
        shadowClass : 'sf-shadow'
    };
    sf.defaults = {
        hoverClass	: 'sfHover',
        pathClass	: 'overideThisToUse',
        pathLevels	: 1,
        delay		: 800,
        animation	: {
            opacity:'show'
        },
        speed		: 'normal',
        autoArrows	: true,
        dropShadows : true,
        disableHI	: false,		// true disables hoverIntent detection
        onInit		: function(){}, // callback functions
        onBeforeShow: function(){},
        onShow		: function(){},
        onHide		: function(){}
    };
    $.fn.extend({
        hideSuperfishUl : function(){
            var o = sf.op,
            not = (o.retainPath===true) ? o.$path : '';
            o.retainPath = false;
            var $ul = $(['li.',o.hoverClass].join(''),this).add(this).not(not).removeClass(o.hoverClass)
            .find('>ul').hide().css('visibility','hidden');
            o.onHide.call($ul);
            return this;
        },
        showSuperfishUl : function(){
            if(this.find('>ul:hidden').length)
            {	
                var o = sf.op,
                sh = sf.c.shadowClass+'-off',
                $ul = this.addClass(o.hoverClass)
                .find('>ul:hidden').css('visibility','visible');
						
                sf.IE7fix.call($ul);
                o.onBeforeShow.call($ul);
                $ul.animate(o.animation,o.speed,function(){
                    sf.IE7fix.call($ul);
                    o.onShow.call($ul);
                });
            }
            return this;
        }
    });

})(jQuery);
/*! include timepicker.js */
/*
 * Copyright (c) 2006 Sam Collett (http://www.texotela.co.uk)
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 */
 
/*
 * A time picker for jQuery
 * Based on original timePicker by Sam Collet (http://www.texotela.co.uk)
 * @name     timePicker
 * @version  0.1 
 * @author   Anders Fajerson (http://perifer.se)
 * @example  $("#mytime").timePicker();
 * @example  $("#mytime").timePicker({step:30, startTime:"15:00", endTime:"18:00"}); 
 */

(function($){
  
    $.fn.timePicker = function(options) {
        // Build main options before element iteration
        var settings = $.extend({}, $.fn.timePicker.defaults, options);  
    
        return this.each(function() {
            $.timePicker(this, settings);
        });
    };
  
    $.timePicker = function (elm, settings) {
        var elm = $(elm)[0];  
        // old script:
        // return elm.timePicker || (elm.timePicker = new jQuery._timePicker(elm, settings));
	
        // changed to improve functionality
        return (elm.timePicker = new jQuery._timePicker(elm, settings));
    };
  
    $._timePicker = function(elm, settings) {
    
        var tpOver = false;
        var startTime = normaliseTime(settings.startTime);
        var endTime = normaliseTime(settings.endTime);
    
        $(elm).attr('autocomplete', 'OFF'); // Disable browser autocomplete
    
        var times = [];
        var time = new Date(startTime); // Create a new date object.
        while(time <= endTime) {
            times[times.length] = formatTime(time, settings);
            time = new Date(time.setMinutes(time.getMinutes() + settings.step));
        }

        var $tpDiv = $('<div class="time-picker'+ (settings.show24Hours ? '' : ' time-picker-12hours') +'"></div>');
        var $tpList = $('<ul></ul>');
    
        // Build the list.
        for(var i = 0; i < times.length; i++) {
            $tpList.append("<li>" + times[i] + "</li>");
        }
        $tpDiv.append($tpList);
        // Store element offset.
        // Append the timPicker to the body and position it.
        $tpDiv.appendTo('body').hide();
    
        $("li", $tpList).unbind().mouseover(function() {
            $("li.selected", $tpDiv).removeClass("selected");  // TODO: only needs to run once.
            $(this).addClass("selected");
        }).mousedown(function() {
            tpOver = true;
        }).click(function() {
            setTimeVal(elm, this, $tpDiv, settings);
            tpOver = false;
        });
    
        // Store ananymous function in variable since it's used twice.
        var showPicker = function() {
            var elmOffset = $(elm).offset();
            $tpDiv.css({
            'top':elmOffset.top,
            'left':elmOffset.left
            }).show(); // Show picker.
            $tpDiv.mouseover(function() { // Have to use mouseover instead of mousedown because of Opera
                tpOver = true;
            }).mouseout(function() {
                tpOver = false;
            });
            $("li", $tpDiv).removeClass("selected");
      
            // Try to find a time in the list that matches the entered time.
            var time = this.value ? timeStringToDate(this.value, settings) : startTime;
            var startMin = startTime.getHours() * 60 + startTime.getMinutes();
            var min = (time.getHours() * 60 + time.getMinutes()) - startMin;
            var steps = Math.round(min / settings.step);
            var roundTime = normaliseTime(new Date(2001, 0, 0, 0, (steps * settings.step + (startMin)), 0));
            roundTime = (startTime < roundTime && roundTime < endTime) ? roundTime : startTime;
      
            var $matchedTime = $("li:contains(" + formatTime(roundTime, settings) + ")", $tpDiv);
      
            if ($matchedTime.length) {
                $matchedTime.addClass("selected");
                // Scroll to matched time.
                $tpDiv[0].scrollTop = $matchedTime[0].offsetTop;
            }
        };
    
        $(elm).unbind().focus(showPicker).click(showPicker)
        // Hide timepicker on blur
        .blur(function() {
            if (!tpOver && $tpDiv[0].parentNode) { // Don't remove when timePicker is clicked or when already removed
                $tpDiv.hide();
            }
        })
    
        // Key support
        .keypress(function(e) {
            switch (e.keyCode) {
                case 38: // Up arrow.
                case 63232: // Safari up arrow.
                    var $selected = $("li.selected", $tpList);
                    var prev = $selected.prev().addClass("selected")[0];
                    if (prev) {
                        $selected.removeClass("selected");
                        $tpDiv[0].scrollTop = prev.offsetTop;
                    }
                    return false;
                    break;
                case 40: // Down arrow.
                case 63233: // Safari down arrow.
                    var $selected = $("li.selected", $tpList);
                    var next = $selected.length ? $selected.next().addClass("selected")[0] : $("li:first").addClass("selected")[0];
                    if (next) {
                        $selected.removeClass("selected");
                        $tpDiv[0].scrollTop = next.offsetTop;
                    }
                    return false;
                    break;
                case 13: // Enter
                    if (!$tpDiv.is(":hidden")) {
                        var sel = $("li.selected", $tpList)[0];
                        setTimeVal(elm, sel, $tpDiv, settings);
                        return false;
                    }
                    break;
            }
        });
    
        // Helper function to get an inputs current time as Date object.
        // Returns a Date object.
        this.getTime = function() {
            return timeStringToDate(elm.value, settings);
        };
        // Helper function to set a time input.
        // Takes a Date object.
        this.setTime = function(time) {
            elm.value = formatTime(normaliseTime(time), settings);
            // Trigger element's change events.
            $(elm).change();
        };
    
    }; // End fn;   
  
    // Plugin defaults.
    $.fn.timePicker.defaults = {
        step:30,
        startTime: new Date(0, 0, 0, 0, 0, 0),
        endTime: new Date(0, 0, 0, 23, 30, 0),
        separator: ':',
        show24Hours: true
    };
  
    // Private functions.
  
    function setTimeVal(elm, sel, $tpDiv, settings) {
        // Update input field
        elm.value = $(sel).text();
        // Trigger element's change events.
        $(elm).change();
        // Keep focus for all but IE (which doesn't like it)
        if (!$.browser.msie) {
            elm.focus();
        }
        // Hide picker
        $tpDiv.hide();
    }
  
    function formatTime(time, settings) {
        var h = time.getHours();
        var hours = settings.show24Hours ? h : (((h + 11) % 12) + 1);
        var minutes = time.getMinutes();
        return formatNumber(hours) + settings.separator + formatNumber(minutes) + (settings.show24Hours ? '' : ((h < 12) ? ' AM' : ' PM'));
    }
  
    function formatNumber(value) {
        return (value < 10 ? '0' : '') + value;
    }
  
    function timeStringToDate(input, settings) {
        if (input) {
            var array = input.split(settings.separator);
            var hours = parseFloat(array[0]);
            var minutes = parseFloat(array[1]);
            var time = new Date(0, 0, 0, hours, minutes, 0);
            return normaliseTime(time);
        }
        return null;
    }
  
    /* Normalise time object to a common date. */
    function normaliseTime(time) {
        time.setFullYear(2001);
        time.setMonth(0);
        time.setDate(0);
        return time;
    }
  
})(jQuery);
/*! include tooltip.js */
(function($){
    // Avoids parent / child tooltip control race.
    var tooltipStack = [];
    $.fn.tooltip = function(){
        return this.each(function() {
            var text = $(this).attr("title");
            $(this).attr("title", "");
            
            if(text != undefined) {
                $(this).hover(function(e){
                    var current = $("#tooltip");
                    if (current.length > 0){
                        tooltipStack.push(current.clone());
                        $("#tooltip").remove();
                    }
                    
                    $(this).attr("title", "");
                    var tipX = e.pageX + 12;
                    var tipY = e.pageY + 12;
                    $("body").append("<div id='tooltip' style='position: absolute; z-index: 100; display: none;'>" + text + "</div>");
                    var tipWidth = null;
                    if($.browser.msie){
                        tipWidth = $("#tooltip").outerWidth(true);
                    }
                    else{
                        tipWidth = $("#tooltip").width();
                    }
                    $("#tooltip").width(tipWidth);
                    $("#tooltip").css("left", tipX).css("top", tipY).show();
                }, function(){
                    $(this).attr("title", text);
                    $("#tooltip").remove();
                    if (tooltipStack.length > 0){
                        var last = tooltipStack.pop();
                        $("body").append(last);
                    }
                });
                $(this).mousemove(function(e){
                    var tipX = e.pageX + 12;
                    var tipY = e.pageY + 12;
                    var tipWidth = $("#tooltip").outerWidth(true);
                    var tipHeight = $("#tooltip").outerHeight(true);
                    if(tipX + tipWidth > $(window).scrollLeft() + $(window).width()){
                        tipX = e.pageX - tipWidth;
                    }
                    if($(window).height()+$(window).scrollTop() < tipY + tipHeight){
                        tipY = e.pageY - tipHeight;
                    }
                    $("#tooltip").css("left", tipX).css("top", tipY).show();
                });
            }
        });
    };
})(jQuery);
/*! include validation-i18n.js */
/**
 * Remote validation engine language
 * @author vpriem
 * @since 11.04.2011
 */
(function($) {
    $.fn.validationEngineLanguage = function(){};
    $.validationEngineLanguage = {
        _allrules: false,
        allRules: function() {
            if (this._allrules !== false) {
                return this._allrules;
            }
            var allrules = {};
            $.ajax({
                async: false,
                dataType: "json",
                url: "/request/validation",
                success: function (data) {
                    allrules = data;
                }
            });
            this._allrules = allrules;
            return this._allrules;
        }
    };
})(jQuery);
/*! include validation.js */
/*
 * Inline Form Validation Engine 1.6.4, jQuery plugin
 *
 * Copyright(c) 2009, Cedric Dugas
 * http://www.position-relative.net
 *
 * Form validation engine allowing custom regex rules to be added.
 * Thanks to Francois Duquette and Teddy Limousin
 * and everyone helping me find bugs on the forum
 * Licenced under the MIT Licence
 */

(function($) {

	$.fn.validationEngine = function(settings) {

	if($.validationEngineLanguage){				// IS THERE A LANGUAGE LOCALISATION ?
		allRules = $.validationEngineLanguage.allRules();
	}else{
		$.validationEngine.debug("Validation engine rules are not loaded check your external file");
	}
 	settings = jQuery.extend({
		allrules:allRules,
		validationEventTriggers:"focusout",
		inlineValidation: false,
		returnIsValid:false,
		liveEvent:true,
		unbindEngine:true,
		ajaxSubmit: false,
		scroll:true,
		promptPosition: "topRight",	// OPENNING BOX POSITION, IMPLEMENTED: topLeft, topRight, bottomLeft, centerRight, bottomRight
		success : false,
		beforeSuccess :  function() {},
		failure : function() {},
                                onErrorShow: function(/*Domelement*/ caller) {},
                                onErrorClose: function(/*Domelement*/  caller) {}
	}, settings);
	$.validationEngine.settings = settings;
	$.validationEngine.ajaxValidArray = new Array();	// ARRAY FOR AJAX: VALIDATION MEMORY

	if(settings.inlineValidation == true){ 		// Validating Inline ?
		if(!settings.returnIsValid){					// NEEDED FOR THE SETTING returnIsValid
			allowReturnIsvalid = false;
			if(settings.liveEvent){						// LIVE event, vast performance improvement over BIND
				$(this).find("[class*=validate][type!=checkbox]").live(settings.validationEventTriggers, function(caller){_inlinEvent(this);});
				$(this).find("[class*=validate][type=checkbox]").live("click", function(caller){_inlinEvent(this);});
			}else{
				$(this).find("[class*=validate]").not("[type=checkbox]").bind(settings.validationEventTriggers, function(caller){_inlinEvent(this);});
				$(this).find("[class*=validate][type=checkbox]").bind("click", function(caller){_inlinEvent(this);});
			}
			firstvalid = false;
		}
			function _inlinEvent(caller){
				$.validationEngine.settings = settings;
				if($.validationEngine.intercept == false || !$.validationEngine.intercept){		// STOP INLINE VALIDATION THIS TIME ONLY
					$.validationEngine.onSubmitValid=false;
					$.validationEngine.loadValidation(caller);
				}else{
					$.validationEngine.intercept = false;
				}
			}
	}
	if (settings.returnIsValid){		// Do validation and return true or false, it bypass everything;
		if ($.validationEngine.submitValidation(this,settings)){
			return false;
		}else{
			return true;
		}
	}
	$(this).bind("submit", function(caller){   // ON FORM SUBMIT, CONTROL AJAX FUNCTION IF SPECIFIED ON DOCUMENT READY
		$.validationEngine.onSubmitValid = true;
		$.validationEngine.settings = settings;
		if($.validationEngine.submitValidation(this,settings) == false){
			if($.validationEngine.submitForm(this,settings) == true) {return false;}
		}else{
			settings.failure && settings.failure();
			return false;
		}
	});
	$(".formError").live("click",function(){	 // REMOVE BOX ON CLICK
		$(".formError").fadeOut(150,function(){
			$(this).remove();
		});
	});
        
        /**
         * remove the error notifications on focus an input field
         * @author fhaferkorn
         * @since 05.10.2011
         * 
         * @see http://ticket.yourdelivery.local/browse/YD-223
         */
        $("input").live('focus', function(){
                $(".formError").fadeOut(150,function(){
			$(this).remove();
		});
        });
};
$.validationEngine = {
	defaultSetting : function(caller) {		// NOT GENERALLY USED, NEEDED FOR THE API, DO NOT TOUCH
		if($.validationEngineLanguage){
			allRules = $.validationEngineLanguage.allRules();
		}else{
			$.validationEngine.debug("Validation engine rules are not loaded check your external file");
		}
		settings = {
			allrules:allRules,
			validationEventTriggers:"blur",
			inlineValidation: true,
			returnIsValid:false,
			scroll:true,
			unbindEngine:true,
			ajaxSubmit: false,
			promptPosition: "topRight",	// OPENNING BOX POSITION, IMPLEMENTED: topLeft, topRight, bottomLeft, centerRight, bottomRight
			success : false,
			failure : function() {},
                                                onErrorShow: function(caller) {},
                                                onErrorClose: function(caller) {}
		};
		$.validationEngine.settings = settings;
	},
	loadValidation : function(caller) {		// GET VALIDATIONS TO BE EXECUTED
		if(!$.validationEngine.settings){
			$.validationEngine.defaultSetting();
		}
		rulesParsing = $(caller).attr('class');
		rulesRegExp = /\[(.*)\]/;
		getRules = rulesRegExp.exec(rulesParsing);
		str = getRules[1];
		pattern = /\[|,|\]/;
		result= str.split(pattern);
		var validateCalll = $.validationEngine.validateCall(caller,result);
		return validateCalll;
	},
	validateCall : function(caller,rules) {	// EXECUTE VALIDATION REQUIRED BY THE USER FOR THIS FIELD
		var promptText ="";

		if(!$(caller).attr("id")) {$.validationEngine.debug("This field have no ID attribut( name & class displayed): "+$(caller).attr("name")+" "+$(caller).attr("class"));}

		caller = caller;
		ajaxValidate = false;
		var callerName = $(caller).attr("name");
		$.validationEngine.isError = false;
		$.validationEngine.showTriangle = true;
		callerType = $(caller).attr("type");

		for (i=0; i<rules.length;i++){
			switch (rules[i]){
			case "optional":
				if(!$(caller).val()){
					$.validationEngine.closePrompt(caller);
					return $.validationEngine.isError;
				}
			break;
			case "required":
				_required(caller,rules);
			break;
            case "payment" :_required(caller, rules);                                                                       
                                                break;                        
            case "prename":
				_required(caller,rules);
			break;
            case "name":
				_required(caller,rules);
			break;
            case "telefon":
				_required(caller,rules);
			break;
            case "password":
				_required(caller,rules);
			break;
            case "street":
				_required(caller,rules);
			break;
            case "plz":
				_required(caller,rules);
			break;
            case "company":
				_required(caller,rules);
			break;
            case "hausnr":
				_required(caller,rules);
			break;
            case "agb":
				_required(caller,rules);
			break;
            case "privacy":
				_required(caller,rules);
			break;
            case "projectnumber":
				_required(caller,rules);
			break;
            case "message":
				_required(caller,rules);
			break;
			case "custom":
				 _customRegex(caller,rules,i);
			break;
			case "exemptString":
				 _exemptString(caller,rules,i);
			break;
			case "ajax":
				if(!$.validationEngine.onSubmitValid){
					_ajax(caller,rules,i);
				}
			break;
			case "length":
				 _length(caller,rules,i);
			break;
			case "maxCheckbox":
				_maxCheckbox(caller,rules,i);
			 	groupname = $(caller).attr("name");
			 	caller = $("input[name='"+groupname+"']");
			break;
			case "minCheckbox":
				_minCheckbox(caller,rules,i);
				groupname = $(caller).attr("name");
			 	caller = $("input[name='"+groupname+"']");
			break;
			case "confirm":
				 _confirm(caller,rules,i);
			break;
			case "funcCall":
		     	_funcCall(caller,rules,i);
			break;
			default :
			}
		}
		radioHack();
		if ($.validationEngine.isError == true){
			linkTofield = $.validationEngine.linkTofield(caller);

			($("div."+linkTofield).size() ==0) ? $.validationEngine.buildPrompt(caller,promptText,"error")	: $.validationEngine.updatePromptText(caller,promptText);
		}else{$.validationEngine.closePrompt(caller);}
		/* UNFORTUNATE RADIO AND CHECKBOX GROUP HACKS */
		/* As my validation is looping input with id's we need a hack for my validation to understand to group these inputs */
		function radioHack(){
	      if($("input[name='"+callerName+"']").size()> 1 && (callerType == "radio" || callerType == "checkbox")) {        // Hack for radio/checkbox group button, the validation go the first radio/checkbox of the group
	          caller = $("input[name='"+callerName+"'][type!=hidden]:first");
	          $.validationEngine.showTriangle = false;
	      }
	    }
		/* VALIDATION FUNCTIONS */
		function _required(caller,rules){   // VALIDATE BLANK FIELD
			callerType = $(caller).attr("type");
			if (callerType == "text" || callerType == "password" || callerType == "textarea"){

				if(!$(caller).val()){
					$.validationEngine.isError = true;
					promptText += $.validationEngine.settings.allrules[rules[i]].alertText+"<br />";
				}
			}
			if (callerType == "radio" || callerType == "checkbox" ){
				callerName = $(caller).attr("name");

				if($("input[name='"+callerName+"']:checked").size() == 0) {
					$.validationEngine.isError = true;
					if($("input[name='"+callerName+"']").size() ==1) {
						promptText += $.validationEngine.settings.allrules[rules[i]].alertTextCheckboxe+"<br />";
					}else{
						 promptText += $.validationEngine.settings.allrules[rules[i]].alertTextCheckboxMultiple+"<br />";
					}
				}
			}
			if (callerType == "select-one") { // added by paul@kinetek.net for select boxes, Thank you
				if(!$(caller).val()) {
					$.validationEngine.isError = true;
					promptText += $.validationEngine.settings.allrules[rules[i]].alertText+"<br />";
				}
			}
			if (callerType == "select-multiple") { // added by paul@kinetek.net for select boxes, Thank you
				if(!$(caller).find("option:selected").val()) {
					$.validationEngine.isError = true;
					promptText += $.validationEngine.settings.allrules[rules[i]].alertText+"<br />";
				}
			}
		}      
		function _customRegex(caller,rules,position){		 // VALIDATE REGEX RULES
			customRule = rules[position+1];
			pattern = eval($.validationEngine.settings.allrules[customRule].regex);

			if(!pattern.test($(caller).attr('value'))){
				$.validationEngine.isError = true;
				promptText += $.validationEngine.settings.allrules[customRule].alertText+"<br />";
			}
		}
		function _exemptString(caller,rules,position){		 // VALIDATE REGEX RULES
			customString = rules[position+1];
			if(customString == $(caller).attr('value')){
				$.validationEngine.isError = true;
				promptText += $.validationEngine.settings.allrules['required'].alertText+"<br />";
			}
		}

		function _funcCall(caller,rules,position){  		// VALIDATE CUSTOM FUNCTIONS OUTSIDE OF THE ENGINE SCOPE
			customRule = rules[position+1];
			funce = $.validationEngine.settings.allrules[customRule].nname;

			var fn = window[funce];
			if (typeof(fn) === 'function'){
				var fn_result = fn();
				$.validationEngine.isError = fn_result;
				promptText += $.validationEngine.settings.allrules[customRule].alertText+"<br />";
			}
		}
		function _ajax(caller,rules,position){				 // VALIDATE AJAX RULES

			customAjaxRule = rules[position+1];
			postfile = $.validationEngine.settings.allrules[customAjaxRule].file;
			fieldValue = $(caller).val();
			ajaxCaller = caller;
			fieldId = $(caller).attr("id");
			ajaxValidate = true;
			ajaxisError = $.validationEngine.isError;

			if(!$.validationEngine.settings.allrules[customAjaxRule].extraData){
				extraData = $.validationEngine.settings.allrules[customAjaxRule].extraData;
			}else{
				extraData = "";
			}
			/* AJAX VALIDATION HAS ITS OWN UPDATE AND BUILD UNLIKE OTHER RULES */
			if(!ajaxisError){
				$.ajax({
				   	type: "POST",
				   	url: postfile,
				   	async: true,
				   	data: "validateValue="+fieldValue+"&validateId="+fieldId+"&validateError="+customAjaxRule+extraData,
				   	beforeSend: function(){		// BUILD A LOADING PROMPT IF LOAD TEXT EXIST
				   		if($.validationEngine.settings.allrules[customAjaxRule].alertTextLoad){

				   			if(!$("div."+fieldId+"formError")[0]){
	 			 				return $.validationEngine.buildPrompt(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextLoad,"load");
	 			 			}else{
	 			 				$.validationEngine.updatePromptText(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextLoad,"load");
	 			 			}
			   			}
			  	 	},
			  	 	error: function(data,transport){$.validationEngine.debug("error in the ajax: "+data.status+" "+transport);},
					success: function(data){					// GET SUCCESS DATA RETURN JSON
						data = eval( "("+data+")");				// GET JSON DATA FROM PHP AND PARSE IT
						ajaxisError = data.jsonValidateReturn[2];
						customAjaxRule = data.jsonValidateReturn[1];
						ajaxCaller = $("#"+data.jsonValidateReturn[0])[0];
						fieldId = ajaxCaller;
						ajaxErrorLength = $.validationEngine.ajaxValidArray.length;
						existInarray = false;

			 			 if(ajaxisError == "false"){			// DATA FALSE UPDATE PROMPT WITH ERROR;

			 			 	_checkInArray(false);				// Check if ajax validation alreay used on this field

			 			 	if(!existInarray){		 			// Add ajax error to stop submit
				 			 	$.validationEngine.ajaxValidArray[ajaxErrorLength] =  new Array(2);
				 			 	$.validationEngine.ajaxValidArray[ajaxErrorLength][0] = fieldId;
				 			 	$.validationEngine.ajaxValidArray[ajaxErrorLength][1] = false;
				 			 	existInarray = false;
			 			 	}

			 			 	$.validationEngine.ajaxValid = false;
							promptText += $.validationEngine.settings.allrules[customAjaxRule].alertText+"<br />";
							$.validationEngine.updatePromptText(ajaxCaller,promptText,"",true);
						 }else{
						 	_checkInArray(true);
						 	$.validationEngine.ajaxValid = true;
						 	if(!customAjaxRule)	{$.validationEngine.debug("wrong ajax response, are you on a server or in xampp? if not delete de ajax[ajaxUser] validating rule from your form ")}
	 			 			if($.validationEngine.settings.allrules[customAjaxRule].alertTextOk){	// NO OK TEXT MEAN CLOSE PROMPT
	 			 				 				$.validationEngine.updatePromptText(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextOk,"pass",true);
 			 				}else{
				 			 	ajaxValidate = false;
				 			 	$.validationEngine.closePrompt(ajaxCaller);
 			 				}
			 			 }
			 			function  _checkInArray(validate){
			 				for(x=0;x<ajaxErrorLength;x++){
			 			 		if($.validationEngine.ajaxValidArray[x][0] == fieldId){
			 			 			$.validationEngine.ajaxValidArray[x][1] = validate;
			 			 			existInarray = true;

			 			 		}
			 			 	}
			 			}
			 		}
				});
			}
		}
		function _confirm(caller,rules,position){		 // VALIDATE FIELD MATCH
			confirmField = rules[position+1];

			if($(caller).attr('value') != $("#"+confirmField).attr('value')){
				$.validationEngine.isError = true;
				promptText += $.validationEngine.settings.allrules["confirm"].alertText+"<br />";
			}
		}
		function _length(caller,rules,position){    	  // VALIDATE LENGTH

			startLength = eval(rules[position+1]);
			endLength = eval(rules[position+2]);
			feildLength = $(caller).attr('value').length;

			if(feildLength<startLength || feildLength>endLength){
				$.validationEngine.isError = true;
				promptText += $.validationEngine.settings.allrules["length"].alertText.replace("%s",startLength).replace("%s",endLength)+"<br />"
			}
		}
		function _maxCheckbox(caller,rules,position){  	  // VALIDATE CHECKBOX NUMBER

			nbCheck = eval(rules[position+1]);
			groupname = $(caller).attr("name");
			groupSize = $("input[name='"+groupname+"']:checked").size();
			if(groupSize > nbCheck){
				$.validationEngine.showTriangle = false;
				$.validationEngine.isError = true;
				promptText += $.validationEngine.settings.allrules["maxCheckbox"].alertText+"<br />";
			}
		}
		function _minCheckbox(caller,rules,position){  	  // VALIDATE CHECKBOX NUMBER

			nbCheck = eval(rules[position+1]);
			groupname = $(caller).attr("name");
			groupSize = $("input[name='"+groupname+"']:checked").size();
			if(groupSize < nbCheck){

				$.validationEngine.isError = true;
				$.validationEngine.showTriangle = false;
				promptText += $.validationEngine.settings.allrules["minCheckbox"].alertText+" "+nbCheck+" "+$.validationEngine.settings.allrules["minCheckbox"].alertText2+"<br />";
			}
		}
		return($.validationEngine.isError) ? $.validationEngine.isError : false;
	},
	submitForm : function(caller){
		if($.validationEngine.settings.ajaxSubmit){
			if($.validationEngine.settings.ajaxSubmitExtraData){
				extraData = $.validationEngine.settings.ajaxSubmitExtraData;
			}else{
				extraData = "";
			}
			$.ajax({
			   	type: "POST",
			   	url: $.validationEngine.settings.ajaxSubmitFile,
			   	async: true,
			   	data: $(caller).serialize()+"&"+extraData,
			   	error: function(data,transport){$.validationEngine.debug("error in the ajax: "+data.status+" "+transport)},
			   	success: function(data){
			   		if(data == "true"){			// EVERYTING IS FINE, SHOW SUCCESS MESSAGE
			   			$(caller).css("opacity",1)
			   			$(caller).animate({opacity: 0, height: 0}, function(){
			   				$(caller).css("display","none");
			   				$(caller).before("<div class='ajaxSubmit'>"+$.validationEngine.settings.ajaxSubmitMessage+"</div>");
			   				$.validationEngine.closePrompt(".formError",true);
			   				$(".ajaxSubmit").show("slow");
			   				if ($.validationEngine.settings.success){	// AJAX SUCCESS, STOP THE LOCATION UPDATE
								$.validationEngine.settings.success && $.validationEngine.settings.success();
								return false;
							}
			   			})
		   			}else{						// HOUSTON WE GOT A PROBLEM (SOMETING IS NOT VALIDATING)
			   			data = eval( "("+data+")");
			   			if(!data.jsonValidateReturn){
			   				 $.validationEngine.debug("you are not going into the success fonction and jsonValidateReturn return nothing");
			   			}
			   			errorNumber = data.jsonValidateReturn.length
			   			for(index=0; index<errorNumber; index++){
			   				fieldId = data.jsonValidateReturn[index][0];
			   				promptError = data.jsonValidateReturn[index][1];
			   				type = data.jsonValidateReturn[index][2];
			   				$.validationEngine.buildPrompt(fieldId,promptError,type);
		   				}
	   				}
   				}
			})
			return true;
		}
		// LOOK FOR BEFORE SUCCESS METHOD
			if(!$.validationEngine.settings.beforeSuccess()){
				if ($.validationEngine.settings.success){	// AJAX SUCCESS, STOP THE LOCATION UPDATE
					if($.validationEngine.settings.unbindEngine){$(caller).unbind("submit")}
					$.validationEngine.settings.success && $.validationEngine.settings.success();
					return true;
				}
			}else{
				return true;
			}
		return false;
	},
	buildPrompt : function(caller,promptText,type,ajaxed) {			// ERROR PROMPT CREATION AND DISPLAY WHEN AN ERROR OCCUR                                
		if(!$.validationEngine.settings){
			$.validationEngine.defaultSetting()
		}
                                $.validationEngine.settings.onErrorShow(caller);
		deleteItself = "." + $(caller).attr("id") + "formError"

		if($(deleteItself)[0]){
			$(deleteItself).stop();
			$(deleteItself).remove();
		}
		var divFormError = document.createElement('div');
		var formErrorContent = document.createElement('div');
		linkTofield = $.validationEngine.linkTofield(caller)
		$(divFormError).addClass("formError")

		if(type == "pass"){$(divFormError).addClass("greenPopup")}
		if(type == "load"){$(divFormError).addClass("blackPopup")}
		if(ajaxed){$(divFormError).addClass("ajaxed")}

		$(divFormError).addClass(linkTofield);
		$(formErrorContent).addClass("formErrorContent");

		$("body").append(divFormError);
		$(divFormError).append(formErrorContent);

		if($.validationEngine.showTriangle != false){		// NO TRIANGLE ON MAX CHECKBOX AND RADIO
			var arrow = document.createElement('div');
			$(arrow).addClass("formErrorArrow");
			$(divFormError).append(arrow);
			if($.validationEngine.settings.promptPosition == "bottomLeft" || $.validationEngine.settings.promptPosition == "bottomRight"){
			$(arrow).addClass("formErrorArrowBottom")
			$(arrow).html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');
		}
			if($.validationEngine.settings.promptPosition == "topLeft" || $.validationEngine.settings.promptPosition == "topRight"){
				$(divFormError).append(arrow);
				$(arrow).html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');
			}
		}
		$(formErrorContent).html(promptText)

		callerTopPosition = $(caller).offset().top;
		callerleftPosition = $(caller).offset().left;
		callerWidth =  $(caller).width();
		inputHeight = $(divFormError).height();

		/* POSITIONNING */
		if($.validationEngine.settings.promptPosition == "topRight"){callerleftPosition +=  callerWidth -30;callerTopPosition += -inputHeight -10;}
		if($.validationEngine.settings.promptPosition == "topLeft"){callerTopPosition += -inputHeight -10;}

		if($.validationEngine.settings.promptPosition == "centerRight"){callerleftPosition +=  callerWidth +13;}

		if($.validationEngine.settings.promptPosition == "bottomLeft"){
			callerHeight =  $(caller).height();
			callerleftPosition = callerleftPosition;
			callerTopPosition = callerTopPosition + callerHeight + 15;
		}
		if($.validationEngine.settings.promptPosition == "bottomRight"){
			callerHeight =  $(caller).height();
			callerleftPosition +=  callerWidth -30;
			callerTopPosition +=  callerHeight + 15;
		}
		$(divFormError).css({
			top:callerTopPosition,
			left:callerleftPosition,
			opacity:0
		})
                
                                
                              
		return $(divFormError).animate({"opacity":0.87},function(){return true;});
	},
	updatePromptText : function(caller,promptText,type,ajaxed) {	// UPDATE TEXT ERROR IF AN ERROR IS ALREADY DISPLAYED

		linkTofield = $.validationEngine.linkTofield(caller);
		var updateThisPrompt =  "."+linkTofield;

		if(type == "pass") {$(updateThisPrompt).addClass("greenPopup")}else{$(updateThisPrompt).removeClass("greenPopup")};
		if(type == "load") {$(updateThisPrompt).addClass("blackPopup")}else{$(updateThisPrompt).removeClass("blackPopup")};
		if(ajaxed) {$(updateThisPrompt).addClass("ajaxed")}else{$(updateThisPrompt).removeClass("ajaxed")};

		$(updateThisPrompt).find(".formErrorContent").html(promptText);
		callerTopPosition  = $(caller).offset().top;
		inputHeight = $(updateThisPrompt).height();

		if($.validationEngine.settings.promptPosition == "bottomLeft" || $.validationEngine.settings.promptPosition == "bottomRight"){
			callerHeight =  $(caller).height();
			callerTopPosition =  callerTopPosition + callerHeight + 15;
		}
		if($.validationEngine.settings.promptPosition == "centerRight"){callerleftPosition +=  callerWidth +13;}
		if($.validationEngine.settings.promptPosition == "topLeft" || $.validationEngine.settings.promptPosition == "topRight"){
			callerTopPosition = callerTopPosition  -inputHeight -10;
		}
		$(updateThisPrompt).animate({top:callerTopPosition});
	},
	linkTofield : function(caller){
		linkTofield = $(caller).attr("id") + "formError";
		linkTofield = linkTofield.replace(/\[/g,"");
		linkTofield = linkTofield.replace(/\]/g,"");
		return linkTofield;
	},
	closePrompt : function(caller,outside) {						// CLOSE PROMPT WHEN ERROR CORRECTED                             
		if(!$.validationEngine.settings){
			$.validationEngine.defaultSetting()
		}
                                $.validationEngine.settings.onErrorClose(caller);
		if(outside){
			$(caller).fadeTo("fast",0,function(){
				$(caller).remove();
			});
			return false;
		}
		if(typeof(ajaxValidate)=='undefined'){ajaxValidate = false}
		if(!ajaxValidate){
			linkTofield = $.validationEngine.linkTofield(caller);
			closingPrompt = "."+linkTofield;
			$(closingPrompt).fadeTo("fast",0,function(){
				$(closingPrompt).remove();
			});
		}
	},
	debug : function(error) {
		if(!$("#debugMode")[0]){
			$("body").append("<div id='debugMode'><div class='debugError'><strong>This is a debug mode, you got a problem with your form, it will try to help you, refresh when you think you nailed down the problem</strong></div></div>");
		}
		$(".debugError").append("<div class='debugerror'>"+error+"</div>");
	},
	submitValidation : function(caller) {					// FORM SUBMIT VALIDATION LOOPING INLINE VALIDATION
		var stopForm = false;
		$.validationEngine.ajaxValid = true;
		$(caller).find(".formError").remove();
		var toValidateSize = $(caller).find("[class*=validate]").size();

		$(caller).find("[class*=validate]").each(function(){
			linkTofield = $.validationEngine.linkTofield(this);

			if(!$("."+linkTofield).hasClass("ajaxed")){	// DO NOT UPDATE ALREADY AJAXED FIELDS (only happen if no normal errors, don't worry)
				var validationPass = $.validationEngine.loadValidation(this);
				return(validationPass) ? stopForm = true : "";
			};
		});
		ajaxErrorLength = $.validationEngine.ajaxValidArray.length;		// LOOK IF SOME AJAX IS NOT VALIDATE
		for(x=0;x<ajaxErrorLength;x++){
	 		if($.validationEngine.ajaxValidArray[x][1] == false){
	 			$.validationEngine.ajaxValid = false;
 			}
 		}
		if(stopForm || !$.validationEngine.ajaxValid){		// GET IF THERE IS AN ERROR OR NOT FROM THIS VALIDATION FUNCTIONS
			if($.validationEngine.settings.scroll){
				destination = $(".formError:not('.greenPopup'):first").offset().top;
				$(".formError:not('.greenPopup')").each(function(){
					testDestination = $(this).offset().top;
					if(destination>testDestination){
						destination = $(this).offset().top;
					}
				})
				$("html:not(:animated),body:not(:animated)").animate({scrollTop: destination}, 1100);
			}
			return true;
		}else{
			return false;
		}
	}
}
})(jQuery);
/*! include autocomplete.js */
/**
 * Plz autocomplete
 * @author vpriem
 * @since 16.03.2011
 */

/*
 *
 * This is the old PLZ Plugin new is in -> plz-autocomplete
 * can be removed on finish YD-3186
 *
 **/
/*
(function($) {
    
    $.fn.plzAutocomplete = function (submit) {
        
        return this.each(function(){
            if (this.type !== 'text') return;

            var input = this;
            $(input).attr("autocomplete", "off");
            
            var extraValues = {};
            var classListString = $(input).attr('class');
            var valuesRegExp = /yd-autocomplete-value\[(\w+)\[(\w+)\]\]/g;
            var foundValue;
            while ((foundValue = valuesRegExp.exec(classListString))) {
                extraValues[foundValue[1]] = foundValue[2];
            }
            
            var cache = {}, lastXhr = null;
            
            $(input).keyup(function(event){
                // remove cityId on change
                if (event.which != 13) {
                    $(this).prev()
                        .val("");
                    $(this.form)
                        .removeData('href')
                        .removeData('city');
                }
            })
            .autocomplete({
                delay: 200,
                minLength: 2,
                focus: function (event, ui) {
                    return false;
                },
                source: function(request, response) {
                    $.extend(request, extraValues);
                    
                    var term = request.term;
                    if (term in cache) {
                        if(cache[term].length == 0) {
                            $(input).addClass('yd-form-invalid');
                        } else {
                            $(input).removeClass('yd-form-invalid');
                        }
                        log('loading data from cache for plz ' + term);
                        response(cache[term]);
                        return;
                    }

                    if (lastXhr !== null) {
                        lastXhr.abort();
                    }
                    $(input).addClass('waiting');
                    lastXhr = $.getJSON("/autocomplete/plz", request, function(data, status, xhr) {
                        $(input).removeClass('waiting');
                        if(!data || data.length == 0) {
                            $(input).addClass('yd-form-invalid');
                        } else {
                            $(input).removeClass('yd-form-invalid');
                        }
                        log('get data for plz ' + term);
                        cache[term] = data;
                        if (xhr === lastXhr) {
                            response(data);
                        }
                    });
                },
                open: function(event, ui) {
                    var term = input.value;
                    if (term in cache) {
                        if (cache[term].length == 1) {
                            var item = cache[term][0];
                            $(input.form)
                                .data('href', "/" + item.restUrl)
                                .data('city', item.id);
                                
                            $(input).autocomplete("close")
                                .val(item.value)
                                .prev()
                                .val(item.id);
                        }
                    }
                },
                select: function (event, ui) {
                    $(input.form)
                        .data('href', "/" + ui.item.restUrl)
                        .data('city', ui.item.id);

                    $(input).autocomplete("close")
                        .val(ui.item.value)
                        .prev()
                        .val(ui.item.id);
                        
                    ydRecurring.setLastArea(ui.item.plz);

                    if (submit === true || $(input).hasClass("yd-plz-autocomplete-autosubmit")) {
                        $(input.form).submit();
                    }
                    return false;
                }
            });
        });
    };
})(jQuery);
*/
/*! include confirmation.js */
/**
 * Emptytext
 * @author vpriem
 * @since 14.04.2011
 */
(function($) {
    $.fn.confirmation = function() {
        return this.each(function(){

            var text = this.title;
            this.title = "";

            if (!text.length) {
                text = "Are you sure?";
            }

            $(this).click(function(){
                return confirm(text);
            });

        });
    };
})(jQuery);
/*! include csh-address-autocomplete.js */
/**
 * CSH address form autocomplete plugin
 *
 * @author Matthias Laug <laug@lieferando.de>, Marek Hejduk <m.hejduk@pyszne.pl>
 * @since 19.04.2012
 */
(function($) {

    "use strict";

    var ENTER_CODE = 13,
        defaults = {
            mode: 'csh',
            selectors: {
                cityId: 'input[name="cityId"]',
                plz: 'input[name="plz"]',
                city: 'input[name="city"]',
                street: 'input[name="street"]',
                hausnr: 'input[name="hausnr"]',
                serviceId: 'input[name="serviceId"]',
                cshAcCity: 'input.yd-csh-autocomplete-city',
                cshAcStreet: 'input.yd-csh-autocomplete-street',
                newAddressForm: 'form.yd-new-address-form'
            },
            classes: {
                acLoading: 'ui-autocomplete-loading',
                inputValid: 'yd-form-valid',
                inputInvalid: 'yd-form-invalid'
            },
            elements: {
                cityId: '<input type="hidden" name="cityId" value="" />',
                plz: '<input type="hidden" name="plz" value="" />'
            },
            ac: {
                minLength: 2,
                delay: 50
            },
            focusoutDelay: 500
        };

    var bindCshAddressAutocomplete = function ($this, settings) {
        log('Appeding CSH-address autocomplete feature');

        var $cityId = $(settings.selectors['cityId'], $this),
            $plz = $(settings.selectors['plz'], $this),
            $city = $(settings.selectors['city'], $this),
            $street = $(settings.selectors['street'], $this),
            $hausnr = $(settings.selectors['hausnr'], $this),
            serviceId = $(settings.selectors['serviceId'], $this).val() || 0,
            isNewAddress = $this.is(settings.selectors['newAddressForm']),
            lookupAllTimeout = null;

        if (!$cityId.length) {
            $cityId = $(settings.elements['cityId']).appendTo($this);
        }
        if (!$plz.length) {
            $plz = $(settings.elements['plz']).appendTo($this);
        }

        // Check current values at the beginning
        lookupAll(true);

        // Sets form input fields as invalid due to AC mismatched value
        function setFieldAsInvalid($el) {
            // in new address form input errors are not signalized
            if (!isNewAddress) {
                $el.removeClass(settings.classes['inputValid']).addClass(settings.classes['inputInvalid']);
            }
        }

        // City AC shortcut
        function getCityJSON(successCallback, errorCallback) {
            $.ydAcAjax({
                data: {
                    service: serviceId,
                    term: $city.val().toLowerCase()
                },
                urltype : "cityUrl",
                success: successCallback || function () {},
                error: errorCallback || function () {},
                complete: function () {
                    $city.removeClass(settings.classes['acLoading']);
                }
            });
        }

        // Street AC shortcut
        function getStreetJSON(successCallback, errorCallback) {
            $.ydAcAjax({
                data: {
                    service: serviceId,
                    city: $city.val().toLowerCase(),
                    term: $street.val().toLowerCase()
                },
                urltype : "streetUrl",
                success: successCallback || function () {},
                error: errorCallback || function () {},
                complete: function () {
                    $street.removeClass(settings.classes['acLoading']);
                }
            });
        }

        // Checker function for validating already typed/selected AC values
        function lookupAll(isStart) {
            if (isStart) {
                $cityId.val(0).data('noVerboseData', true);
                $plz.val('');
                $street.data('city', '');
                log('Checking previous address form values...');
            } else {
                log('Checking current address form values...');
            }

            var cityName = $city.val(),
                streetName = $street.val(),
                cityId = $cityId.val();

            if (cityName.length > 0) {
                log('Checking city name: ' + cityName);
                getCityJSON(function (cityData) {
                    var checkStreet = false;
                    if (cityData.length == 1) {
                        // Exactly one match
                        var singleCityData = cityData[0];
                        $city.val(cityName = singleCityData.value);
                        log('Updated city name: ' + cityName);
                        if (singleCityData.cityId > 0) {
                            $cityId.val(cityId = singleCityData.cityId).data('noVerboseData', true);
                            $plz.val(singleCityData.plz);
                            log('Non-verbose city ' + cityName + ' - setting cityId: ' + cityId);
                        } else {
                            $cityId.val(cityId = 0).data('noVerboseData', false);
                            $plz.val('');
                            checkStreet = true;
                        }
                    } else if (cityData.length > 1) {
                        // multimatch - street/housnr must be also checked
                        var firstCityData = cityData[0];
                        if (firstCityData.cityId > 0) {
                            log('Multimatch lookup result for city name: ' + cityName);
                        } else {
                            $city.val(cityName = firstCityData.value);
                            log('Updated verbose city name: ' + cityName);
                        }
                        $cityId.val(cityId = 0).data('noVerboseData', false);
                        $plz.val('');
                        checkStreet = true;
                    } else {
                        // city data failure - nothing matching found
                        $cityId.val(0).data('noVerboseData', true);
                        $plz.val('');
                        setFieldAsInvalid($city);
                        log('City lookup mismatch for name: ' + cityName);
                    }
                    $street.data('city', cityName);
                    if (checkStreet) {
                        if (streetName.length > 0) {
                            getStreetJSON(function (streetData) {
                                var isSingleData = (streetData.length == 1),
                                    firstStreetData = streetData[0];

                                // There is possibility that complete street name is just a part of another - must check it!
                                if (!isSingleData) {
                                    var lowerStreetName = streetName.toLowerCase();
                                    for (var d = 0; d < streetData.length; d++) {
                                        if (lowerStreetName == streetData[d].value.toLowerCase()) {
                                            // ...and that is this case
                                            firstStreetData = streetData[d];
                                            isSingleData = true;
                                            log('A precedent - complete street name: ' + streetName + ' is a part of another one');
                                            break ;
                                        }
                                    }
                                }

                                if (isSingleData) {
                                    // Single matching street - updating name
                                    var rangeCount = firstStreetData.count;
                                    $street.val(streetName = firstStreetData.value);
                                    log('Found one match for street with ' + rangeCount + ' number range(s), using: ' + streetName);
                                    if (rangeCount <= 1 && firstStreetData.cityId > 0) {
                                        // Single range - using its cityId
                                        $cityId.val(cityId = firstStreetData.cityId);
                                        $plz.val(firstStreetData.plz);
                                        log('Single or empty range for street: ' + streetName + ' - setting cityId:' + cityId);
                                    } else {
                                        log('Multiple range for street: ' + streetName + ' - cityId and plz stay unknown');
                                    }
                                } else {
                                    // No matching street or multimatch result - in both cases we don't know plz and cityId
                                    $cityId.val(0);
                                    $plz.val('');
                                    setFieldAsInvalid($street);
                                    if (streetData.length > 1) {
                                        log('Found more than one match during lookup for street: ' + streetName);
                                    } else {
                                        log('Nothing found during lookup for street: ' + streetName);
                                    }
                                }
                            }, function () {
                                // street AJAX error - treating as AC mismatch
                                $cityId.val(0);
                                $plz.val('');
                                setFieldAsInvalid($street);
                            });
                        } else {
                            // empty street name - giving up
                            $cityId.val(0);
                            $plz.val('');
                            log('No street name set - cityId and plz stay unknown');
                        }
                    }
                }, function () {
                    // city AJAX error - treating as AC mismatch
                    $cityId.val(0);
                    $plz.val('');
                    setFieldAsInvalid($city);
                });
            } else {
                // empty city name - giving up
                $cityId.val(0).data('noVerboseData', true);
                $plz.val('');
                log('No city name set - cityId and plz stay unknown');
            }
        }

        // City name autocomplete handler
        $(settings.selectors['cshAcCity'], $this).attr("autocomplete", "off")
            .keyup(function (ev) {
                // remove cityId on change
                if (ev.which != ENTER_CODE) {
                    $cityId.val(0);
                    $plz.val('');
                }
            }).focusout(function () {
                $.ydAcAbort("cityUrl");
                $cityId.val(0);
                // wait a bit, to let the autocomplete work its way through :)
                if (lookupAllTimeout !== null) {
                    clearTimeout(lookupAllTimeout);
                }
                lookupAllTimeout = setTimeout(lookupAll, settings.focusoutDelay);
            }).autocomplete($.extend({
                focus: function () {
                    return false;
                },
                source: function (request, response) {
                    $.ydAcAbort("cityUrl");
                    $.ydAcAbort("streetUrl");
                    log('Invoking city AC for term: ' + request.term);
                    getCityJSON(response);
                },
                select: function (ev, ui) {
                    var cityId = ui.item.cityId,
                        cityName = ui.item.value;
                    $city.val(cityName);
                    // if we select a new city, which is not the same as before, we have to clear others address fields
                    if ($street.data('city') && $street.data('city') != cityName) {
                        $street.val('').data('city', cityName);
                        $hausnr.val('');
                    }
                    if (cityId > 0) {
                        log('City ' + cityName + ' has no verbose information - setting cityId: ' + cityId);
                        $cityId.val(cityId).data('noVerboseData', true);
                        $plz.val(ui.item.plz);
                        // Storing id of current's verbose record also in cookie
                        ydState.setVerbose(ui.item.vId);
                    }
                    else {
                        log('City ' + cityName + ' has verbose information - waiting for street and house number');
                        $cityId.data('noVerboseData', false);
                    }
                }
            }, settings.ac));

        // Street name autocomplete handler
        $(settings.selectors['cshAcStreet'], $this).attr("autocomplete", "off")
            .keyup(function (ev) {
                // remove cityId on change
                if (ev.which != ENTER_CODE && !$cityId.data('noVerboseData')) {
                    $cityId.val(0);
                    $plz.val('');
                }
            }).focusout(function() {
                $.ydAcAbort("streetUrl");
                // wait a bit, to let the autocomplete work its way through :)
                if (lookupAllTimeout !== null) {
                    clearTimeout(lookupAllTimeout);
                }
                lookupAllTimeout = setTimeout(lookupAll, settings.focusoutDelay);
            }).autocomplete($.extend({
                focus: function () {
                    return false;
                },
                source: function (request, response) {
                    $.ydAcAbort("streetUrl");
                    var cityName = $city.val();
                    if (cityName.length > 0 && !$cityId.data('noVerboseData')) {
                        // street AC have sense only when city is known
                        log('Invoking street AC for city: ' + cityName + ' and term: ' + request.term);
                        getStreetJSON(response);
                    } else {
                        $street.removeClass(settings.classes['acLoading']);
                    }
                },
                select: function (ev, ui) {
                    log('Found ' + ui.item.number + ' street number ranges');
                    if (!ui.item.number || ui.item.count == 1) {
                        var cityId = ui.item.cityId;
                        log('Setting: ' + cityId + ' as new cityId');
                        $cityId.val(cityId);
                        $plz.val(ui.item.plz);
                        // Storing id of current's verbose record also in cookie
                        ydState.setVerbose(ui.item.vId);
                    }
                    $street.data('city', $city.val());
                }
            }, settings.ac));

        // Form submission event handler - prevents from storing incomplete address data
        $this.submit(function () {
            if (!$city.val().length || !$street.val().length || !$hausnr.val().length) {
                log('Stop form submitting - address seems to be incomplete');
                lookupAll();
                // TODO: allow to go through when there will be accurate error messages
                return false;
            }
            log('All OK - going through');
            return true;
        });
    };
    
    var unbindCshAddressAutocomplete = function ($this, settings) {
        $(settings.selectors['cshAcCity'], $this).autocomplete('destroy');
        $(settings.selectors['cshAcStreet'], $this).autocomplete('destroy');
        $(settings.selectors['cityId']).val(0).removeData('noVerboseData');
        $(settings.selectors['plz']).val('');
        $(settings.selectors['street']).removeData('city');
        log('CHS-address autocomplete destroyed');
    };

    var methods = {
        // Method to initialize Autocomplete plugin
        init: function (options) {
            var settings = $.extend({}, defaults, options);
            $.ydAcAjaxSettings.init({
                mode: settings.mode
            });

            return this.each(function () {
                bindCshAddressAutocomplete($(this), settings);
            });
        },
        // Method to destroy Autocomplete plugin
        destroy: function () {
            return this.each(function () {
                unbindCshAddressAutocomplete($(this), $.extend({}, defaults));
            });
        }
    };

    // Main AC plugin for address forms in CSH mode
    $.fn.cshAddressAutocomplete = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
    };
})(jQuery);
/*! include csh-legacy-autocomplete.js */
/**
* autocomplete for poland
*
* @author Matthias Laug <laug@lieferando.de>
* @since 19.04.2012
*/

(function($) {

    "use strict";

    $.fn.cshAutocomplete = function(options) {
        // TODO: nothing - this is a legacy version
        return ;
        
        return this.each(function(){
        

            log('Appeding csh autocomplete feature');

            var $this = $(this),
            isSearchBar = $this.hasClass('yd-csh-search-form');

            //add elements, if not present (this cityId field needs to be search globally)
            var cityId = $this.find('input[name="cityId"]');
            if ( cityId.length <= 0 ){
                $this.append('<input type="hidden" name="cityId" value="" />');
                cityId = $this.find('input[name="cityId"]');
            }

            var city = $this.find('input[name="city"]');
            if ( city.length <= 0 ){
                $this.append('<input type="text" name="city" value="" />');
                city = $this.find('input[name="city"]');
            }
            city.addClass('yd-csh-autocomplete-city');

            var plz = $this.find('input[name="plz"]');
            if ( plz.length <= 0 ){
                $this.append('<input type="hidden" name="plz" value="" />');
                plz = $this.find('input[name="plz"]');
            }

            var street = $this.find('input[name="street"]');
            if ( street.length <= 0 ){
                $this.append('<input type="text" name="street" value="" />');
                street = $this.find('input[name="street"]');
            }

            var hausnr = $this.find('input[name="hausnr"]');
            if ( hausnr.length <= 0 ){
                $this.append('<input type="text" name="hausnr" class="yd-only-nr yd-csh-autocomplete-number" value="" />');
                hausnr = $this.find('input[name="hausnr"]');
            }

            if (isSearchBar) {
                hausnr.val('').hide();
                street.addClass('yd-csh-autocomplete-street').removeClass('yd-csh-autocomplete-is-short');
            }

            //get service Id if available
            var service = $this.find('input[name="serviceId"]');
            var serviceId = 0;
            if ( service.length > 0 ){
                serviceId = service.val();
            }

            // error indicators (search-bar only)
            var $cityIndicator = $('span.yd-csh-autocomplete-helper1', $this),
            $streetIndicator = $('span.yd-csh-autocomplete-helper2', $this),
            $hausnrIndicator = $('span.yd-csh-autocomplete-helper3', $this);

            function setFieldIsValid(field, isValid) {
                if (isSearchBar) {
                    var $indicator;
                    if (field == city) {
                        $indicator = $cityIndicator;
                    } else if (field == street) {
                        $indicator = $streetIndicator;
                    } else if (field == hausnr) {
                        $indicator = $hausnrIndicator;
                    } else {
                        log('What an error indicator?!');
                        return ;
                    }
                    if (isValid) {
                        $indicator.removeClass('yd-csh-autocomplete-error');
                    } else {
                        $indicator.addClass('yd-csh-autocomplete-error');
                    }
                } else {
                    if (isValid) {
                        field.addClass('yd-form-valid').removeClass('yd-form-invalid');
                    } else {
                        field.addClass('yd-form-invalid').removeClass('yd-form-valid');
                    }
                }
            }

            //define xhr headers for street and city completion
            var streetXhr = null;
            var cityXhr = null;

            /**
         * Aborts street AC request, if any is being fired
         *
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 31.05.2012
         */
            function abortStreetXhr() {
                if (streetXhr !== null && typeof streetXhr.abort == 'function') {
                    streetXhr.abort();
                    streetXhr = null;
                }
            }

            /**
         * Aborts city AC request, if any is being fired
         *
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 31.05.2012
         */
            function abortCityXhr() {
                if (cityXhr !== null && typeof cityXhr.abort == 'function') {
                    cityXhr.abort();
                    cityXhr = null;
                }
            }

            // Cache storages for AJAX lookup requests
            var streetCache = {},
            cityCache = {};

            /**
         * Executes AJAX and processes the results - universar AC $.ajax wrapper
         * Rather do not use directly - see below
         *
         * @access private
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 31.05.2012
         */
            function _getAutocompleteJSON(successCallback, errorCallback, cache, ajaxOptions) {
                return $.ajax($.extend({
                    dataType : 'json',
                    beforeSend: function (xhr, settings) {
                        if (typeof $.ajaxSettings.beforeSend == 'function') {
                            if ($.ajaxSettings.beforeSend(xhr, settings) === false) {
                                return false;
                            }
                        }
                        if (this.url in cache) {
                            log('Using cached AC entry for url: ' + this.url);
                            var cachedContent = cache[this.url];
                            if (cachedContent.isSuccess) {
                                successCallback(cachedContent.data);
                            } else {
                                errorCallback(cachedContent.status);
                            }
                            return false;
                        }
                        return (typeof $.ajaxSettings.beforeSend == 'function')
                        ? $.ajaxSettings.beforeSend(xhr, settings)
                        : true;
                    },
                    success: function (data) {
                        if (!(this.url in cache)) {
                            cache[this.url] = {
                                isSuccess: true,
                                data: data
                            };
                        }
                        successCallback(data);
                    },
                    error: function (xhr, state) {
                        // beware - do not cache aborted request responses!
                        if (!(this.url in cache) && state == 'error') {
                            cache[this.url] = {
                                isSuccess: false,
                                status: xhr.status
                            };
                        }
                        errorCallback(xhr.status);
                    }
                }, ajaxOptions));
            }

            /**
         * Executes AJAX and processes the results for city AC
         *
         * @access private
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 31.05.2012
         */
            function getCityJSON(successCallback, errorCallback, ajaxOptions) {
                cityXhr = _getAutocompleteJSON(
                    (typeof successCallback == 'function')? successCallback: function () {},
                    (typeof errorCallback == 'function')? errorCallback: function () {},
                    cityCache,
                    $.extend({
                        url: '/autocomplete/city',
                        data: {
                            service: serviceId,
                            term: city.val().toLowerCase()
                        }
                    }, ajaxOptions || {})
                    );
            }

            /**
         * Executes AJAX and processes the results for street AC
         *
         * @access private
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 31.05.2012
         */
            function getStreetJSON(successCallback, errorCallback, ajaxOptions) {
                cityXhr = _getAutocompleteJSON(
                    (typeof successCallback == 'function')? successCallback: function () {},
                    (typeof errorCallback == 'function')? errorCallback: function () {},
                    streetCache,
                    $.extend({
                        url: '/autocomplete/street',
                        data: {
                            service: serviceId,
                            city: city.val().toLowerCase(),
                            term: street.val().toLowerCase()
                        }
                    }, ajaxOptions || {})
                    );
            }

            var citySelected = false;
            //add city list for suggestions of biggest cities
            if ( $('#yd-select-plz-form').length == 0){
                $.ajax({
                    url : '/request_cityverbose_autocomplete/city',
                    success : function(html){
                        log('adding favo box');
                        $this.append(html);

                        //select a city from the list
                        $('a.yd-csh-select-city', $this).click(function(){
                            var clickCity = $(this).attr('data-city');
                            var clickCityId = $(this).attr('data-city-id');
                            log('adding city from favo box ' + clickCity);
                            city.val(clickCity);
                            plCheckStreet(clickCity);

                            if ( clickCityId > 0 ){
                                log('selected a small city from the list, using ' + clickCityId + ' directly');
                                cityId.data('noVerboseData',true);
                                cityId.val(clickCityId);
                            }

                            citySelected = true;
                            $('div.yd-csh-select-city-list', $this).hide();
                            setFieldIsValid(city, true);
                            if (isSearchBar) {
                                street.focus();
                            }
                        });

                        //stop and hide
                        var hideTimeout = null;
                        $('input.yd-csh-autocomplete-street', $this).click(function(){
                            $('div.yd-csh-select-city-list', $this).hide();
                        });

                        $('input.yd-csh-autocomplete-number', $this).click(function(){
                            $('div.yd-csh-select-city-list', $this).hide();
                        });
                        $('input.yd-csh-autocomplete-city', $this).click(function(){
                            $('div.yd-csh-select-city-list', $this).show();
                            clearTimeout(hideTimeout);
                            hideTimeout = null;
                        });

                        city.focusout(function () {
                            var $selectCityList = $('div.yd-csh-select-city-list', $this);
                            if ($selectCityList.is(':visible')) {
                                hideTimeout = setTimeout(function () {
                                    $selectCityList.hide();
                                }, 2500);
                            }
                        });
                    }
                });
            }

            function lookupCity(isPrevious) {
                var cityInput = city.val();
                if (cityInput.length > 0) {
                    if (isPrevious) {
                        log('Applying previous city input value: ' + cityInput);
                    } else {
                        log('City autocomplete not selected, trying to find entry matching to current input value: ' + cityInput);
                    }
                    getCityJSON(function (data) {
                        var cityName = null;
                        if (data.length == 1) {
                            cityName = data[0].value;
                            cityId.val(data[0].cityId);
                            log('City lookup says (the only matching): ' + cityName);
                            if (data[0].cityId > 0 && isSearchBar) {
                                // cityId set - so we don't need both street name and number
                                street.val('');
                                hausnr.val('').hide();
                                setFieldIsValid(street, true);
                                setFieldIsValid(hausnr, true);
                            }
                        }
                        else {
                            citySelected = false;
                            if (data.length > 1) {
                                if (data[0].cityId == 0) {
                                    cityName = data[0].value;
                                    cityId.val(data[0].cityId);
                                    log('City lookup says (the first multi-plz matching): ' + cityName);
                                } else {
                                    log('Found more than one match during city lookup');
                                }
                            } else {
                                log('Nothing found during city lookup');
                            }
                            setFieldIsValid(city, false);
                        }
                        citySelected = (cityName !== null);
                        if (citySelected) {
                            city.val(cityName);
                            setFieldIsValid(city, true);
                        } else {
                            setFieldIsValid(city, false);
                        }
                    }, function (status) {
                        city.removeClass('ui-autocomplete-loading');
                        if (status == '404') {
                            // no city found
                            setFieldIsValid(city, false);
                        }
                    });
                } else {
                    log('Can not lookup for city as input value is empty');
                    setFieldIsValid(city, false);
                }
            }

            /**
         * use this method to autocomplete current input. If we find only one result
         * using autocomplete, we use that to fill out street data
         *
         * @author Matthias Laug <laug@lieferando.de>
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 10.05.2012
         */
            function lookupStreet(isPrevious){
                //check if cityId has been set
                log('did not click autocomplete, trying to find depending on current input value');
                var cityInput = city.val(),
                streetInput = street.val();

                if (cityInput.length > 0 && streetInput.length > 0) {

                    if (isPrevious) {
                        log('Applying previous street input value: ' + streetInput);
                    } else {
                        log('Street autocomplete not selected, trying to find entry matching to current input value: ' + streetInput);
                    }

                    getStreetJSON(function (data) {
                        var isSingleData = (data.length == 1),
                        streetData = data[0];

                        // There is possibility that complete street name is just a part of another - must check it!
                        if (!isSingleData) {
                            for (var d = 0; d < data.length; d++) {
                                if (street.val().toLowerCase() == data[d].value.toLowerCase()) {
                                    // ...and that is this case
                                    streetData = data[d];
                                    isSingleData = true;
                                    log('A precedent - complete street name is a part of another one');
                                    break ;
                                }
                            }
                        }

                        if (isSingleData) {
                            log('Found one match for street with ' + streetData.count + ' number ranges, using: ' + streetData.value);

                            street.val(streetData.value);
                            street.data('city', city.val());

                            if (streetData.count <= 1) {
                                log('since there is only one or no number range given, we use this current cityId ' + streetData.cityId);
                                plz.val(streetData.plz);
                                cityId.val(streetData.cityId);
                            }

                            var isHausnrNeeded = (streetData.count > 1);
                            //more than one possible cityId for that street, need more information -> hausnr
                            toggleStreetNumber(isHausnrNeeded);
                            setFieldIsValid(street, true);
                            if (isSearchBar) {
                                setFieldIsValid(hausnr, !(isHausnrNeeded && isPrevious));
                            }
                        }
                        else {
                            if (data.length > 1) {
                                log('Found more than one match during street lookup');
                            } else {
                                log('Nothing found during street lookup');
                            }
                            setFieldIsValid(street, false);
                        }
                    }, function (status) {
                        street.removeClass('ui-autocomplete-loading');
                        if (status == '404') {
                            //no street found
                            setFieldIsValid(street, false);
                        }
                    });
                } else {
                    log('Can not lookup for street as input value (or city) is empty');
                    setFieldIsValid(street, streetInput.length > 0);
                }
            }

            //prepopulate some field, based on get variables
            log('checking for old values');
            if (isSearchBar) {
                var urlVars = getUrlVars();
                var errorCity = decodeURI(urlVars['city']);
                var errorStreet = decodeURI(urlVars['street']);

                if ( errorCity !== 'undefined'){
                    city.val(errorCity.split('#')[0]);
                    lookupCity(true);
                }

                if ( errorStreet !== 'undefined'){
                    street.val(errorStreet.split('#')[0]);
                    lookupStreet(true);
                }
            } else {
                if (city.val().length > 0) {
                    lookupCity(true);
                }
                if (street.val().length > 0) {
                    lookupStreet(true);
                }
            }

            /**
        * @author Matthias Laug <laug@lieferando.de>
        * @since 18.05.2012
        */
            function plCheckStreet(city){
                if ( street.data('city') && street.data('city') != city ){
                    street.val('');
                    if (hausnr.is(':visible')) {
                        hausnr.val('');
                    }
                }
                street.data('city', city);
            }

            /**
         * Hides hausnr field for searchbar, if needed
         *
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 20.06.2012
         */
            function toggleStreetNumber(showInput){
                if (isSearchBar) {
                    // Toggling hausnr (must be shown only when needed, hidden otherwise)
                    if (showInput) {
                        log('showing hausnr input, if not already visible');
                        //shorten the form elements
                        $this.addClass('yd-csh-autocomplete-is-short');
                        hausnr.show();
                    } else {
                        log('hiding hausnr input, if visible yet');
                        //shorten the form elements
                        $this.removeClass('yd-csh-autocomplete-is-short');
                        hausnr.hide();
                    }
                }
            }


            /**
        * city remote autocompletion
        * @author Matthias Laug <laug@lieferando.de>
        * @author Marek Hejduk <m.hejduk@pyszne.pl>
        * @since 18.04.2012
        */
            $('input.yd-csh-autocomplete-city', $this).each(function(){

                var input = this;
                $(input).attr("autocomplete", "off");
                $(input).focusout(function(){

                    abortCityXhr();
                    citySelected = false;

                    //wait a bit, to let the autocomplete work its way through :)
                    setTimeout(function() {
                        if (!citySelected) {
                            lookupCity();
                        }
                    }, 500);

                }).autocomplete({
                    delay: 200,
                    minLength: 2,
                    focus: function (event, ui) {
                        return false;
                    },

                    source: function(request, response) {

                        //hide proposal list on autocomplete
                        $('.yd-csh-select-city-list', $this).hide();
                        abortCityXhr();
                        abortStreetXhr();
                        getCityJSON(function (data) {
                            log('get data for city: ' + request.term);
                            response(data);
                        }, function (status) {
                            city.removeClass('ui-autocomplete-loading');
                            if (status == '404') {
                                setFieldIsValid(city, false);
                            }
                        });
                    },

                    select: function (event, ui) {
                        city.val(ui.item.value);
                        citySelected = true;
                        //if we select a new city, which is not the same as before, we have to clear the adresse field
                        plCheckStreet(ui.item.value);
                        if ( ui.item.cityId > 0 ){
                            log('this city has no verbose information, so customer may enter whatever he wants, we will add the cityId ' + ui.item.cityId + ' at once');
                            cityId.data('noVerboseData',true);
                            cityId.val(ui.item.cityId);
                            plz.val(ui.item.plz);
                            ydState.setVerbose(ui.item.vId);
                        }
                        else{
                            log('this city has verbose information, clearing cityId to get satisfied with more information');
                            cityId.val(null);
                            cityId.data('noVerboseData',false);
                        }
                        setFieldIsValid(city, true);
                        if (isSearchBar) {
                            street.focus();
                        }
                    }
                });

            });

            /**
        * Street remote autocompletion
        * @author Matthias Laug <laug@lieferando.de>
        * @author Marek Hejduk <m.hejduk@pyszne.pl>
        * @since 18.04.2012
        */
            $('input.yd-csh-autocomplete-street', $this).each(function(){

                var input = this;
                $(input).attr("autocomplete", "off");

                $(input).keyup(function(event){
                    // remove cityId on change
                    if (event.which != 13 && !cityId.data('noVerboseData')) {
                        $('input[name="cityId"]', $this).val(0);
                    }
                }).focusout(function(){

                    abortStreetXhr();

                    //wait a bit, to let the autocomplete work its way through :)
                    setTimeout(function(){
                        if ( cityId.length == 0 || cityId.val() <= 0 ){
                            lookupStreet();
                        }
                    }, 500);

                }).focus(function(event){

                    if ( city.val().length == 0 && !cityId.data('noVerboseData')) {
                        setFieldIsValid(city, false);

                    }

                }).autocomplete({
                    delay: 200,
                    minLength: 2,
                    focus: function (event, ui) {
                        return false;
                    },

                    source: function(request, response) {
                        abortCityXhr();
                        abortStreetXhr();

                        if (city.val().length == 0) {
                            setFieldIsValid(city, false);
                        }
                        else {
                            getStreetJSON(function (data) {
                                log('get data for street: ' + request.term);
                                setFieldIsValid(city, true);
                                response(data);
                            }, function (status) {
                                street.removeClass('ui-autocomplete-loading');
                                if (isSearchBar) {
                                    if (status == '406') {
                                        //no city has been provided
                                        if (!cityId.data('noVerboseData')) {
                                            setFieldIsValid(city, false);
                                        }
                                    } else if (status == '404') {
                                        //no street found
                                        setFieldIsValid(street, false);
                                    }
                                }
                            });
                        }

                    },

                    select: function (event, ui) {

                        log('Found ' + ui.item.number + ' street number ranges');
                        toggleStreetNumber(ui.item.count > 1);

                        if ( !ui.item.number || ui.item.count == 1 ){
                            log('adding ' + ui.item.plz + ' to plz field');
                            plz.val(ui.item.plz);

                            log('adding ' + ui.item.cityId + ' to cityId field, since only one selection available');
                            cityId.val(ui.item.cityId);
                            ydState.setVerbose(ui.item.vId);
                        }

                        street.data('city', city.val());
                        setFieldIsValid(street, true);
                        if (isSearchBar && ui.item.count > 1) {
                            hausnr.focus();
                        }
                    }
                });
            });

            /**
         * Hausnr change event
         *
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 20.06.2012
         */
            hausnr.change(function () {
                var hausnrInput = hausnr.val();
                log('House number manually set to: ' + hausnrInput);
                lookupStreet();
                // extracting first numeric fragment from hausnr for checking
                setFieldIsValid(hausnr, hausnrInput.replace(/\D.*$/, '').length > 0);
            });

            /**
         * Search form submit validator
         * @author Marek Hejduk <m.hejduk@pyszne.pl>
         * @since 24.05.2012
         */
            $this.submit(function () {

                if ( $('#yd-select-plz-form').length > 0 ){

                    var currentCityId = parseInt(cityId.val());
                    if ( currentCityId == NaN || currentCityId <= 0 ){

                        log('All OK - triggering autcompletion if no cityId has been set yet to finalize menu page');
                        $.ajax({
                            url : '/request_cityverbose_autocomplete/finalize',
                            type : 'POST',
                            dataType : 'json',

                            data : {
                                city : city.val(),
                                street : street.val(),
                                hausnr : hausnr.val()
                            },

                            success : function(json){
                                cityId.val(json.cityId);
                                setFieldIsValid(city, true);
                                setFieldIsValid(street, true);
                                setFieldIsValid(hausnr, true);
                                $('#yd-select-plz-form').trigger('submit'); //trigger submit for menu trigger to handle everything else
                            },

                            error : function(){
                                setFieldIsValid(city, false);
                                setFieldIsValid(street, false);
                                setFieldIsValid(hausnr, false);
                            }
                        });

                        return false; //return false, so that submit will no be triggered
                    }

                }
                else{
                    if (isSearchBar) {
                        if ($cityIndicator.hasClass('yd-csh-autocomplete-error') || $streetIndicator.hasClass('yd-csh-autocomplete-error') || $hausnrIndicator.hasClass('yd-csh-autocomplete-error')) {
                            log('Stop search form submitting - at least one error indicator is on');
                            return false;
                        }
                    }
                    if (!citySelected) {
                        setFieldIsValid(city, false);
                        city.select();
                        log('Stop search form submitting - missing or unknown city');
                        return false;
                    } else if (cityId.length == 0 || cityId.val() <= 0) {
                        // extracting first numeric fragment from hausnr for checking
                        if (hausnr.is(':visible') && !hausnr.val().replace(/\D.*$/, '').length) {
                            setFieldIsValid(hausnr, false);
                            hausnr.select();
                            log('Stop search form submitting - missing or invalid house number');
                            return false;
                        } else if (!street.val().length) {
                            setFieldIsValid(street, false);
                            street.select();
                            log('Stop search form submitting - missing street');
                            return false;
                        }
                    }

                    log('All OK - outgoing');
                    return true;
                }
            });
        });
    }
})(jQuery);
/*! include csh-search-autocomplete.js */
/**
 * CSH search form autocomplete plugin
 *
 * @author Matthias Laug <laug@lieferando.de>, Marek Hejduk <m.hejduk@pyszne.pl>
 * @since 19.04.2012
 */
(function($) {

    "use strict";

    var ENTER_CODE = 13,
        defaults = {
            mode: 'csh',
            selectors: {
                cityId: 'input[name="cityId"]',
                plz: 'input[name="plz"]',
                city: 'input[name="city"]',
                street: 'input[name="street"]',
                hausnr: 'input[name="hausnr"]',
                serviceId: 'input[name="serviceId"]',
                cshAcCity: 'input.yd-csh-autocomplete-city',
                cshAcStreet: 'input.yd-csh-autocomplete-street',
                cshAcNumber: 'input.yd-csh-autocomplete-number',
                cshSelectCityList: 'div.yd-csh-select-city-list',
                cshSelectCityLink: 'a.yd-csh-select-city',
                indicatorCity: 'span.yd-csh-autocomplete-helper1',
                indicatorStreet: 'span.yd-csh-autocomplete-helper2',
                indicatorHausnr: 'span.yd-csh-autocomplete-helper3',
                lightboxForm: '#yd-select-plz-form'
            },
            classes: {
                acLoading: 'ui-autocomplete-loading',
                inputInvalid: 'yd-csh-autocomplete-error'
            },
            elements: {
                cityId: '<input type="hidden" name="cityId" value="" />',
                plz: '<input type="hidden" name="plz" value="" />'
            },
            ac: {
                minLength: 2,
                delay: 50
            },
            focusoutDelay: 500,
            selectCityHideDelay: 2500
        };

    var bindCshSearchAutocomplete = function($this, settings) {
        log('Appeding CSH-search autocomplete feature');

        var $cityId = $(settings.selectors['cityId'], $this),
            $plz = $(settings.selectors['plz'], $this),
            $city = $(settings.selectors['city'], $this),
            $street = $(settings.selectors['street'], $this),
            $hausnr = $(settings.selectors['hausnr'], $this),
            $indicators = {
                'city': $(settings.selectors['indicatorCity'], $this),
                'street': $(settings.selectors['indicatorStreet'], $this),
                'hausnr': $(settings.selectors['indicatorHausnr'], $this)
            },
            $selectCityList = $(settings.selectors['cshSelectCityList'], $this),
            serviceId = $(settings.selectors['serviceId'], $this).val() || 0,
            isLightbox = $this.is(settings.selectors['lightboxForm']),
            lookupCityTimeout = null,
            lookupStreetTimeout = null;

        $city.data('indicator', 'city');
        $street.data('indicator', 'street');
        $hausnr.data('indicator', 'hausnr');

        if (!$cityId.length) {
            $cityId = $(settings.elements['cityId']).appendTo($this);
        }
        if (!$plz.length) {
            $plz = $(settings.elements['plz']).appendTo($this);
        }

        appendSelectCity();
        lookupAtStart();

        // checks whether house nr is valid (must have at least one digit at the beginning)
        function isHausnrValid() {
            return ($hausnr.val().replace(/\D.*$/, '').length > 0);
        }

        // Sets or checks input field validity status
        function fieldValidity($el, isValid) {
            var $indicator = $indicators[$el.data('indicator')],
                inputInvalidClass = settings.classes['inputInvalid'];
            if (isValid !== undefined) {
                if (isValid) {
                    $indicator.removeClass(inputInvalidClass);
                } else {
                    $indicator.addClass(inputInvalidClass);
                }
            }
            return !$indicator.hasClass(inputInvalidClass);
        }

        // City AC shortcut
        function getCityJSON(successCallback, errorCallback) {
            $.ydAcAjax({
                mode: "csh",
                data: {
                    service: serviceId,
                    term: $city.val().toLowerCase()
                },
                urltype : "cityUrl",
                success: successCallback || function () {},
                error: errorCallback || function () {},
                complete: function () {
                    $city.removeClass(settings.classes['acLoading']);
                }
            });
        }

        // Street AC shortcut
        function getStreetJSON(successCallback, errorCallback) {
            $.ydAcAjax({
                mode: "csh",
                data: {
                    service: serviceId,
                    city: $city.val().toLowerCase(),
                    term: $street.val().toLowerCase()
                },
                urltype : "streetUrl",
                success: successCallback || function () {},
                error: errorCallback || function () {},
                complete: function () {
                    $street.removeClass(settings.classes['acLoading']);
                }
            });
        }

        // Appends a select-city box (for non-lightbox only)
        function appendSelectCity() {
            if (isLightbox) {
                return ;
            }
            $.ydAcAjax({
                dataType: 'html',
                urltype: "selectCityUrl",
                success: function (html) {
                    $this.append(html);
                    // re-assignment (element did not exist before)
                    $selectCityList = $(settings.selectors['cshSelectCityList'], $this);
                    log('Appended select city box');

                    // event handlers
                    var hideTimeout = null;

                    $(settings.selectors['cshSelectCityLink'], $this).click(function () {
                        var cityId = $(this).attr('data-city-id'),
                            cityName = $(this).attr('data-city');
                        $city.val(cityName);
                        checkCityOfStreet();

                        if (cityId > 0) {
                            log('selected a small city from the list, using ' + cityId + ' directly');
                            $cityId.data('noVerboseData', true);
                            $cityId.val(cityId);
                        } else {
                            $cityId.data('noVerboseData', false);
                            $cityId.val(0);
                        }

                        $selectCityList.hide();
                        fieldValidity($city, true);
                        $street.focus();
                    });

                    // stop and hide
                    $(settings.selectors['cshAcCity'], $this).focus(function () {
                        $selectCityList.show();
                        clearTimeout(hideTimeout);
                        hideTimeout = null;
                    });

                    var selectCityHide = function () {
                        $selectCityList.hide();
                    };
                    $(settings.selectors['cshAcStreet'], $this).focus(selectCityHide);
                    $(settings.selectors['cshAcNumber'], $this).focus(selectCityHide);

                    $city.focusout(function () {
                        if ($selectCityList.is(':visible')) {
                            hideTimeout = setTimeout(selectCityHide, settings.selectCityHideDelay);
                        }
                    });
                }
            });
        }

        // Checker for previous search form values
        function lookupAtStart() {
            log('Checking previous search form values...');
            $cityId.val(0).data('noVerboseData', true);
            $plz.val('');
            $street.data('city', '');

            if (isLightbox) {
                // Preserve previous form field values
                toggleHausnr($hausnr.val().length > 0);
            } else {
                // Prepopulate field with previously used values, based on GET variables
                var urlVars = getUrlVars();
                $city.val(('city' in urlVars)? decodeURI(urlVars['city']).split('#')[0]: '');
                $street.val(('street' in urlVars)? decodeURI(urlVars['street']).split('#')[0]: '');
                if ('hausnr' in urlVars) {
                    $hausnr.val(decodeURI(urlVars['street']).split('#')[0]);
                    toggleHausnr(true);
                } else {
                    toggleHausnr(false);
                }
            }

            lookupCity(true);
        }

        // AJAX-based lookup for just typed city name
        function lookupCity(atStart) {
            var cityName = $city.val(),
                streetName = $street.val(),
                cityId = $cityId.val();

            var handleCityMismatch = function () {
                $cityId.val(0).data('noVerboseData', true);
                $plz.val('');
                fieldValidity($city, cityName.length > 0 || atStart);
                fieldValidity($street, streetName.length > 0 || atStart);
                toggleHausnr(false);
                if (cityName.length > 0) {
                    log('City lookup mismatch for name: ' + cityName);
                } else {
                    log('City name is empty');
                }
            };

            if (cityName.length > 0) {
                log('Checking city name: ' + cityName);
                getCityJSON(function (cityData) {
                    var checkStreet = false;
                    if (cityData.length == 1) {
                        // Exactly one match
                        var singleCityData = cityData[0];
                        $city.val(cityName = singleCityData.value);
                        log('Updated city name: ' + cityName);
                        if (singleCityData.cityId > 0) {
                            $cityId.val(cityId = singleCityData.cityId).data('noVerboseData', true);
                            $plz.val(singleCityData.plz);
                            fieldValidity($city, true);
                            fieldValidity($street, streetName.length > 0);
                            toggleHausnr(false);
                            log('Non-verbose city ' + cityName + ' - setting cityId: ' + cityId);
                        } else {
                            $cityId.val(cityId = 0).data('noVerboseData', false);
                            $plz.val('');
                            fieldValidity($city, true);
                            checkStreet = true;
                        }
                    } else if (cityData.length > 1) {
                        // multimatch - street/housnr must be also checked
                        var firstCityData = cityData[0];
                        if (firstCityData.cityId > 0) {
                            log('Multimatch lookup result for city name: ' + cityName);
                        } else {
                            $city.val(cityName = firstCityData.value);
                            log('Updated verbose city name: ' + cityName);
                        }
                        $cityId.val(cityId = 0).data('noVerboseData', false);
                        $plz.val('');
                        fieldValidity($city, true);
                        checkStreet = true;
                    } else {
                        // city data failure - nothing matching found (should never happen with status 200)
                        handleCityMismatch();
                    }
                    if (checkStreet) {
                        if (atStart) {
                            $street.data('city', cityName);
                            lookupStreet(atStart);
                        } else {
                            checkCityOfStreet();
                        }
                    }
                }, function () {
                    // AJAX error - 404 means AC mismatch but any other is treated in the same way
                    handleCityMismatch();
                });
            } else {
                // empty city name
                 handleCityMismatch();
            }
        }

        // AJAX-based lookup for just typed street name
        function lookupStreet(atStart) {
            var cityName = $city.val(),
                streetName = $street.val(),
                houseNr = $hausnr.val(),
                cityId = $cityId.val();

            var handleStreetMismatch = function () {
                if ($cityId.data('noVerboseData')) {
                    fieldValidity($street, atStart || streetName.length > 0);
                } else {
                    $cityId.val(0);
                    $plz.val('');
                    fieldValidity($street, atStart && !streetName.length);
                }                
                toggleHausnr(false);
                if (streetName.length > 0) {
                    log('Street lookup mismatch for name: ' + streetName);
                } else {
                    log('Street name is empty');
                }
            };

            if (streetName.length > 0) {
                log('Checking street name: ' + streetName + ' for city: ' + cityName);
                if ($cityId.data('noVerboseData')) {
                    // no verbose data for current city - AJAX check has no sense
                    handleStreetMismatch();
                } else {
                    // standard checking
                    getStreetJSON(function (streetData) {
                        var isSingleData = (streetData.length == 1),
                            firstStreetData = streetData[0];

                        // There is possibility that complete street name is just a part of another - must check it!
                        if (!isSingleData) {
                            var lowerStreetName = streetName.toLowerCase();
                            for (var d = 0; d < streetData.length; d++) {
                                if (lowerStreetName == streetData[d].value.toLowerCase()) {
                                    // ...and that is this case
                                    firstStreetData = streetData[d];
                                    isSingleData = true;
                                    log('A precedent - complete street name: ' + streetName + ' is a part of another one');
                                    break ;
                                }
                            }
                        }

                        if (isSingleData) {
                            // Single matching street - updating name
                            var rangeCount = firstStreetData.count;
                            $street.val(streetName = firstStreetData.value);
                            log('Found one match for street with ' + rangeCount + ' number range(s), using: ' + streetName);
                            if (rangeCount <= 1 && firstStreetData.cityId > 0) {
                                // Single range - using its cityId
                                $cityId.val(cityId = firstStreetData.cityId);
                                $plz.val(firstStreetData.plz);
                                fieldValidity($street, true);
                                toggleHausnr(false);
                                log('Single or empty range for street: ' + streetName + ' - setting cityId:' + cityId);
                            } else {
                                fieldValidity($street, true);
                                fieldValidity($hausnr, isHausnrValid() || (atStart && !houseNr.length));
                                toggleHausnr(true);
                                log('Multiple range for street: ' + streetName + ' - cityId and plz stay unknown');
                            }
                        } else {
                            // No matching street (should never happen with status 200) or multimatch result
                            // in both cases we don't know plz and cityId
                            handleStreetMismatch();
                        }
                    }, function () {
                        // AJAX error - 404/406 mean AC mismatch but any other is treated in the same way
                        handleStreetMismatch();
                    });
                }
            } else {
                // empty street name - giving up
                handleStreetMismatch();
            }
        }

        // Checks whether current city belongs to current street
        function checkCityOfStreet() {
            var cityName = $city.val();
            if ($street.data('city') != cityName) {
                fieldValidity($street, true);
                $street.val('');
                toggleHausnr(false);
            }
            $street.data('city', cityName);
        }

        // House nr input toggler (must be shown only when needed, hidden otherwise)
        function toggleHausnr(toBeShown) {            
            if (toBeShown) {
                log('Showing hausnr input, if not already visible');
                //shorten the form elements
                $this.addClass('yd-csh-autocomplete-is-short');
                $hausnr.show();
            } else {
                log('Hiding hausnr input, if visible yet');
                //shorten the form elements
                $this.removeClass('yd-csh-autocomplete-is-short');
                $hausnr.val('').hide();
                fieldValidity($hausnr, true);
            }
        }

        // City name autocomplete handler
        $(settings.selectors['cshAcCity'], $this).attr("autocomplete", "off")
            .keyup(function (ev) {
                // remove cityId on change
                if (ev.which != ENTER_CODE) {
                    $cityId.val(0);
                    $plz.val('');
                }
                if ($city.val().length > 0) {
                    $selectCityList.hide();
                }
            }).focusout(function() {
                $.ydAcAbort("cityUrl");
                $cityId.val(0);
                // wait a bit, to let the autocomplete work its way through :)
                if (lookupCityTimeout !== null) {
                    clearTimeout(lookupCityTimeout);
                }
                lookupCityTimeout = setTimeout(lookupCity, settings.focusoutDelay);
            }).autocomplete($.extend({
                focus: function () {
                    return false;
                },
                source: function (request, response) {
                    $.ydAcAbort("cityUrl");
                    $.ydAcAbort("streetUrl");
                    log('Invoking city AC for term: ' + request.term);
                    getCityJSON(response, function (xhr, state) {
                        if (state != 'abort') {
                            fieldValidity($city, false);
                        }
                    });
                },
                select: function (ev, ui) {
                    var cityId = ui.item.cityId,
                        cityName = ui.item.value;
                    $city.val(cityName);
                    if (cityId > 0) {
                        log('City ' + cityName + ' has no verbose information - setting cityId: ' + cityId);
                        $cityId.val(cityId).data('noVerboseData', true);
                        $plz.val(ui.item.plz);
                        // Storing id of current's verbose record also in cookie
                        ydState.setVerbose(ui.item.vId);
                    }
                    else {
                        log('City ' + cityName + ' has verbose information - waiting for street and house number');
                        $cityId.data('noVerboseData', false);
                    }
                    fieldValidity($city, true);
                    checkCityOfStreet();
                    $street.focus();
                }
            }, settings.ac));

        // Street name autocomplete handler
        $(settings.selectors['cshAcStreet'], $this).attr("autocomplete", "off")
            .keyup(function (ev) {
                // remove cityId on change
                if (ev.which != ENTER_CODE && !$cityId.data('noVerboseData')) {
                    $cityId.val(0);
                    $plz.val('');
                }
            }).focusout(function() {
                $.ydAcAbort("streetUrl");
                // wait a bit, to let the autocomplete work its way through :)
                if (lookupStreetTimeout !== null) {
                    clearTimeout(lookupStreetTimeout);
                }
                lookupStreetTimeout = setTimeout(lookupStreet, settings.focusoutDelay);
            }).autocomplete($.extend({
                focus: function () {
                    return false;
                },
                source: function (request, response) {
                    $.ydAcAbort("streetUrl");
                    var cityName = $city.val();
                    if (cityName.length > 0 && !$cityId.data('noVerboseData')) {
                        // street AC have sense only when city is known
                        log('Invoking street AC for city: ' + cityName + ' and term: ' + request.term);
                        getStreetJSON(response, function (xhr, state) {
                            if (state != 'abort') {
                                fieldValidity((xhr.status == 406)? $city: $street, false);
                            }
                        });
                    } else {
                        $street.removeClass(settings.classes['acLoading']);
                    }
                },
                select: function (ev, ui) {
                    fieldValidity($street, true);
                    $street.data('city', $city.val());
                    if (!ui.item.number || ui.item.count == 1) {
                        var cityId = ui.item.cityId;
                        log('Setting: ' + cityId + ' as new cityId');
                        $cityId.val(cityId);
                        $plz.val(ui.item.plz);
                        toggleHausnr(false);
                        // Storing id of current's verbose record also in cookie
                        ydState.setVerbose(ui.item.vId);
                    } else {
                        toggleHausnr(true);
                        fieldValidity($hausnr, isHausnrValid() || !$hausnr.val().length);
                        $hausnr.focus();
                    }
                }
            }, settings.ac));

        $(settings.selectors['cshAcNumber'], $this).change(function () {
            var houseNr = $(this).val();
            $hausnr.val(houseNr);
            fieldValidity($hausnr, isHausnrValid());
            log('House number set to: ' + houseNr);
        });

        $this.submit(function (ev, isRepeated) {
            var cityId = $cityId.val(),
                isValidCityId = (cityId > 0);

            if (isLightbox) {
                if (!isRepeated && !isValidCityId) {
                    // checking AJAX will be invoked, on success submit event will be re-triggered and propagated
                    ev.stopImmediatePropagation();
                    log('Triggering autcompletion if as no cityId has been set yet to finalize menu page');
                    $.ydAcAjax({
                        type: "POST",
                        data: {
                            city: $city.val(),
                            street: $street.val(),
                            hausnr: $hausnr.val()
                        },
                        urltype: "finalCheckUrl",
                        success: function(response) {
                            $cityId.val(response.cityId);
                            fieldValidity($city, true);
                            fieldValidity($street, true);
                            fieldValidity($hausnr, true);
                            //trigger submit for menu trigger to handle everything else
                            $(settings.selectors['lightboxForm']).trigger('submit', [true]);
                        },
                        error: function () {
                            var cityName = $city.val(),
                                streetName = $street.val();
                            if (cityName.length > 0 && streetName.length > 0) {
                                // impossible to say, what exactly is invalid
                                fieldValidity($city, false);
                                fieldValidity($street, false);
                            } else {
                                fieldValidity($city, cityName.length > 0);
                                fieldValidity($street, streetName.length > 0);
                            }
                            if ($hausnr.is(':visible')) {
                                fieldValidity($hausnr, isHausnrValid());
                            }
                            log('Stop lightbox form submitting - could not retrieve cityId');
                        }
                    });
                    return false;
                }
                if (isValidCityId) {
                    // prevent from displaying suggestions in weird positions after closing lightbox
                    $city.autocomplete('destroy');
                    $street.autocomplete('destroy');
                    log('All OK - closing the lightbox form');
                }
                return false;
            }
            else {
                if (!fieldValidity($city) || !fieldValidity($street) || ($hausnr.is(':visible') && !fieldValidity($hausnr))) {
                    log('Stop search form submitting - at least one error indicator is on');
                    return false;
                } else {
                    if (isValidCityId) {
                        log('All OK, cityId known - outgoing');
                    } else {
                        log('CityId still stays unknown, but all search form values are OK - outgoing...');
                    }
                    return true;
                }
            }
        });
    };

    var unbindCshSearchAutocomplete = function ($this, settings) {
        $(settings.selectors['cshAcCity'], $this).autocomplete('destroy');
        $(settings.selectors['cshAcStreet'], $this).autocomplete('destroy');
        $(settings.selectors['cityId']).val(0).removeData('noVerboseData');
        $(settings.selectors['plz']).val('');
        $(settings.selectors['street']).removeData('city');
        log('CSH-search autocomplete destroyed');
    };

    var methods = {
        // Method to initialize Autocomplete plugin
        init: function (options) {
            var settings = $.extend({}, defaults, options);
            $.ydAcAjaxSettings.init({
                mode: settings.mode
            });

            return this.each(function () {
                bindCshSearchAutocomplete($(this), settings);
            });
        },
        // Method to destroy Autocomplete plugin
        destroy: function() {
            return this.each(function () {
                unbindCshSearchAutocomplete($(this), $.extend({}, defaults));
            });
        }
    };

    $.fn.cshSearchAutocomplete = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
    };
})(jQuery);
/*! include emptytext.js */
/**
 * Emptytext
 * @author vpriem
 * @since 23.03.2011
 */
(function($) {
    $.fn.emptytext = function() {
        return this.each(function(){

            var type = this.type.toLowerCase();
            if (type !== 'text' && type !== 'password' && type !== 'textarea') return;

            var emptytext = this.title;
            this.title = "";

            if (!emptytext.length) return;
                
            if ($(this.form).data("emptytext") !== true) {
                $(this.form).data("emptytext", true)
                            .submit(function(){
                                $(".yd-empty-text", this).trigger("click.emptytext");
                            });
                    
                $(":submit", this.form).click(function(){
                    $(".yd-empty-text", this.form).trigger("click.emptytext");
                });
            }

            if (!this.value.length) {
                this.value = emptytext;
            }

            $(this)
                .bind("click.emptytext keydown.emptytext", function(){
                    if (this.value == emptytext) {
                        $(this).removeClass("yd-empty-text")
                               .val("");
                    }
                })
                .bind("blur.emptytext", function(){
                    if (!this.value.length || this.value == emptytext) {
                        $(this).addClass("yd-empty-text")
                               .val(emptytext);
                    }
                });
        });
    };
})(jQuery);
/*! include formToggle.js */
/**
 * Form Toggle
 * @author vpriem
 * @since 10.06.2011
 */
(function($) {
    $.fn.formToggle = function() {
        return this.each(function(){

            var toggeled = $(this).data('formToggle');

            if (toggeled === undefined) {
                toggeled = false;
            }
            
            if (toggeled === false) {
                $(':input:disabled, :input[readonly="readonly"]', this)
                    .data('wasDisabled', true);
                
                $(":text, :password, textarea", this)
                    .attr("readonly", "readonly")
                    .addClass("yd-form-toggled");
                
                $(":radio, :checkbox, :file, select", this)
                    .attr("disabled", "disabled")
                    .addClass("yd-form-toggled");
                    
                $(":button, :submit, :reset", this)
                    .css({visibility: "hidden"});
            }
            else {
                $(":text, :password, textarea", this).each(function(){
                   var $this = $(this).removeClass("yd-form-toggled");
                   
                   if ($this.data('wasDisabled') === true) {
                       $this.removeData("wasDisabled");
                   }
                   else {
                       $this.removeAttr("readonly");
                   }
                });
                
                $(":radio, :checkbox, :file, select", this).each(function(){
                   var $this = $(this).removeClass("yd-form-toggled");
                   
                   if ($this.data('wasDisabled') === true) {
                       $this.removeData("wasDisabled");
                   }
                   else {
                       $this.removeAttr("disabled");
                   }
                });
                
                $(":button, :submit, :reset", this)
                    .css({visibility: "visible"});
            }
            
            $(this).data('formToggle', !toggeled);
        });
    };
})(jQuery);
/*! include grid.js */
(function($) {

    $.fn.gridBox = function(){
        return this.each(function(){
            var $this = $(this);
            var $parent = $(this).parent(".yd-grid");
            
            var $box = $parent.find('.yd-grid-box');
            if (!$box.length) {
                $box = $('<div class="yd-grid-box"></div>').appendTo($parent);
            }
            
            if (!$(".yd-grid-box-close", $box).length) {
                $box.prepend('<a href="#" class="yd-grid-box-close"></a>');
            }
            if (!$(".yd-grid-box-content", $box).length) {
                $box.append('<ul class="yd-grid-box-content"><li class="yd-grid-box-loading"></li></ul>');
            }
            
            $this.live("click", function(){
                log('clicked a grid trigger');

                // hiding all other boxes
                $('.yd-grid-box').hide();
                
                // check if box already loaded
                if ($this.data('loaded')) {
                    log('box already loaded, showing former output');
                    $box.show();
                    return false;
                }

                $box.show();
                
                var callback = $this.attr('data-grid-callback');
                log('searching for callback ' + callback);
                try {
                    var fn = window[callback] || function ($b, $c) {
                        log('default callback triggered');
                        $b.show();
                    };
                    if (typeof fn === 'function') {
                        fn.call($this[0], $box, $("ul", $box));
                        $this.data('loaded', true);
                        return false;
                    }
                }
                catch(e) {
                    log('error while loading callback ' + callback + ': ' + e);
                }

                log('could not find or trigger callback ' + callback);
            });
        });
    };
})(jQuery);

$(document).ready(function(){
    $('.yd-grid-trigger').gridBox();
    
    $('.yd-grid-box-close').live("click", function(){
        $(this).parent().hide();
        return false;
    });
});
/*! include lang.js */
/**
 * Lang
 * @author vpriem
 * @since 07.09.2011
 */
(function($) {
    $.lang = function(tag) {
        var msg = $("#yd-lang-" + tag).html() || "";
        
        if (arguments.length > 1) {
            for (var i = 1; i < arguments.length; i++) {
              msg = msg.replace(/(%s|%d)/, arguments[i]);
           }
        }

        return msg;
    };
    
    $.nlang = function(tag1, tag2, n) {
        var msg1 = $("#yd-lang-" + tag1).html() || "";
        var msg2 = $("#yd-lang-" + tag2).html() || "";
        
        var msg = msg1;
        if (n > 1) {
            msg = msg2;
        }

        if (arguments.length > 3) {
            for (var i = 3; i < arguments.length; i++) {
              msg = msg.replace(/(%s|%d)/, arguments[i]);
           }
        }

        return msg;
    };
})(jQuery);
/*! include main-autocomplete.js */
/**
 * autocomplete Mode dedection and Global Ajax
 * @author Toni Meuschke <meuschke@lieferando.de>
 * @since 20.08.2012
 */

(function($){
    
    "use strict";
    
    // This plugin dedect the AC mode and load or destroy the current plugin (PLZ/CSH)
    // please bind it to the form 
    
    var defaults = {
        mode : "PLZ",
        pluginNames : {
            'plz': "plzAutocomplete",
            'csh-search': "cshSearchAutocomplete",
            'csh-address': "cshAddressAutocomplete"
        }
    },
    
    // function to call the current plugin and pipe the method
    callPlugin = function($this, mode, method, object){
        var pluginNames = defaults.pluginNames;
        mode = (mode || defaults.mode).toLowerCase();
        if (mode in pluginNames) {
            $this[pluginNames[mode]](method, object);
        }
    },
    methods = {
        // Method to initialize Autocomplete plugin
        init: function(options, method, object) {
            return this.each(function(){
                var $this = $(this),
                settings = $.extend({}, defaults, options),
                data = $this.data("ydautocomplete");
                if (!data){
                    $this.data("ydautocomplete", {
                        settings: settings
                    });
                    callPlugin($this, settings.mode, method, object);                
                } else {
                    log( "For this Form AC is already init !" );
                }
            });
        },
        // Method to destroy Autocomplete plugin
        destroy: function() {
            return this.each(function(){
                var $this = $(this),
                data = $this.data("ydautocomplete"),
                settings = data && data.settings ? data.settings : false;
                if (settings) {
                    $this.removeData('ydautocomplete');
                    callPlugin($this, settings.mode, "destroy");
                }
            });
        },
        piping : function(method, callMethod , object){
            return this.each(function(){
                var $this = $(this),
                data = $this.data("ydautocomplete"),
                settings = data && data.settings ? data.settings : false;
                if (settings) {
                    callPlugin($this, settings.mode, callMethod, object);
                } else {
                    log( "This form has no AC !" );
                }
            });
        }
    
    };
    
    $.fn.ydAutocomplete = function(method) {
        if (methods[method] && method !== "piping") {
            return methods[method].apply(this, arguments);
        }
        
        if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
        
        if (methods === "piping" && arguments.length > 1) {
            return methods.piping.apply(this, arguments);
        }
        
        log('Method ' +  method + ' does not exist !');
    };
    
    /*
     * this is a global AC Ajax function with default Urls and caching use it to call JSON
     * @param {
     * succes : function(){} // callback
     * beforeSend : function(){} // callback
     * error : function(){} // callback
     * mode: "plz" // mode String "plz" or "csh" not require is grep from ydAcAjaxSettings you can set it by init()
     * urltype : "cityUrl" // String of default Object url name 
     * data : {term : "077"} // data object to send with ajax  
     * 
     * }
     * 
     */
    
    // This is the ajax Cache
    var cache = [],
    // this array include last XHR indexed by urltype
    lastXHR = {};
    
    $.extend({
        //Use init function to set global default settings
        ydAcAjaxSettings: { 
            mode: "plz",
            defaultUrl: "/autocomplete/plz",
            plz: {
                plzUrl : "/autocomplete/plz"
            },
            csh: {
                cityUrl: "/autocomplete/city",
                streetUrl: '/autocomplete/street',
                finalCheckUrl: '/request_cityverbose_autocomplete/finalize',
                selectCityUrl: '/request_cityverbose_autocomplete/city'
            },
            init: function(options){
                $.ydAcAjaxSettings = $.extend({}, this, options);
            },
            clearCache : function(){
               cache = []; 
            },
            getCache: function(url){
                return url ? cache[url] : cache;
            }
        },
        // this is the global AC ajax function
        ydAcAjax : function(ajaxOptions) {
            var success = ajaxOptions.success || function(){},
                error = ajaxOptions.error || function(){},
                beforeSend = ajaxOptions.beforeSend || function(){},
                complete = ajaxOptions.complete || function(){},
                // Merge ajaxOptions with default Settings
                settings = $.extend({}, $.ydAcAjaxSettings, ajaxOptions),
                urltype = settings.urltype,
                url = (urltype)
                    ? settings[settings.mode][settings.urltype]
                    : settings[settings.mode][settings.defaultUrl];
            // Temporary returning...
            lastXHR[urltype] = $.ajax({
                type: settings.type || 'GET',
                dataType: settings.dataType || 'json',
                url: url,
                data: settings.data,
                beforeSend: function(jqXHR, settings){
                    var url = this.url;
                    //get data from cache and abort XHR
                    if (cache[url]) {
                        success(cache[url]);
                        return false;
                    }
                    //terminate last ajax request of current type (if any)
                    if (lastXHR[urltype]) {
                        if (typeof lastXHR[urltype].abort == 'function') {
                            lastXHR[urltype].abort();
                        }
                        delete lastXHR[urltype];
                    }
                    //beforesend callback
                    $.ajaxSettings.beforeSend(jqXHR, settings);
                    beforeSend(jqXHR, settings);
                    return true;
                },
                success: function(data, textStatus, jqXHR){
                    //set data in cahce 
                    cache[this.url] = data;
                    // succes callback
                    success(data, textStatus, jqXHR);
                },
                complete: function(jqXHR, textStatus){
                    //delete openXHR object
                    if (lastXHR[urltype]) {
                        delete lastXHR[urltype];
                    }
                    //complete callback
                    complete(jqXHR, textStatus);
                },
                error: function(jqXHR, textStatus, errorThrown){
                    //error callback
                    error(jqXHR, textStatus, errorThrown);
                }

            });
        },
        ydAcAbort: function(urltype) {
            if (lastXHR[urltype]) {
                if (typeof lastXHR[urltype].abort == 'function') {
                    lastXHR[urltype].abort();
                }
                delete lastXHR[urltype];
            }
        }
    });
    
})(jQuery);
/*! include plz-autocomplete.js */
/**
 * thats a sub plugin for PLZ Autocomplete please use 
 * $.fn.ydAutocomplete to bind it on a form selector
 * @author Toni Meuschke <meuschke@lieferando.de>
 * @since 21.08.2012
 */

(function($) {

    "use strict";
    
    var lastObjectSet = {}
    ,lastKeyCode;
    

    var defaults = {
        mode: "plz",
        loadingClass: 'waiting',
        input: 'input[name="plz"]',
        inputCityId: 'input[name="cityId"]',
        inputCityIdHtml: '<input type="hidden" id="cityId" name="cityId" value="" />',
        autosubmitClass: "yd-plz-autocomplete-autosubmit",
        cityidRequired: "yd-form-plz-required",
        moveCaretIds: ["yd-plz-search", "yd-plz-search-big"],
        minLength: 2,
        delay: 150
    },
    bindPlzAutocomplete = function($this, settings) {
        var $plzInput = $this.find(defaults.input),
        $cityidInput = $this.find(defaults.inputCityId),
        ajaxData = {};
        
        //remove yd-only nr
        if($plzInput.hasClass('yd-only-nr')){
            $plzInput.keyup(function(event){
                if (event.which != 13) { // enter key
                    if(lastObjectSet && lastObjectSet.city){
                        var lastSetCityString = lastObjectSet.city.substring(0, lastObjectSet.city.length - 1); 
                        if( this.value.search(lastSetCityString) != -1){
                            this.value = this.value.replace(lastSetCityString, "");
                            lastObjectSet = {};
                        }
                    }
                     this.value = this.value.replace(/[^\d\-]/g, "");
                }
            });
        }
        
        $plzInput.keydown(function(e){
            lastKeyCode = e.keyCode ? e.keyCode : e.which;
        });
        
        //Move caret to position 0
        var id = $plzInput.attr("id");
        if ($plzInput.is(":visible") && (id == defaults.moveCaretIds[0] || id == defaults.moveCaretIds[1])) {
            $plzInput.focus()
            .caret(0);
        }
        //check if plz input is in form 
        if (!$plzInput.length) {
            throw new Error("PLZ FORM HAS NO PLZ INPUT!");
            return false;
        }
        // insert hidden cityid input
        if (!$cityidInput.length) {
            $cityidInput = $(defaults.inputCityIdHtml);
            $cityidInput.before($plzInput);
        }

        // check if form require cityid (register view)
        if ($plzInput.hasClass(defaults.cityidRequired)) {
            $plzInput.bind('blur', function(){
                if ($plzInput.val().length > 0 && $cityidInput.val().length == 0) {
                    $plzInput.removeClass('yd-form-valid').addClass('yd-form-invalid');
                }
            }).blur();
        }
        
        // bind jQuery UI autocomplete
        $plzInput.keyup(function(event){
            // remove cityId on change
            if (event.which != 13) {
                $cityidInput.val("");
                $this.removeData('href')
                .removeData('city');
            }
        }).autocomplete({
            delay: settings.delay,
            minLength: settings.minLength,
            focus: function (event, ui) {
                return false;
            },
            source: function(request, response) {
                var term = request.term;    
                $plzInput.addClass(settings.loadingClass);
                //call global AC Ajax
                $.ydAcAjax({
                    data: {
                        term: term
                    },
                    urltype: "plzUrl",
                    success: function(data){
                        if (!data || data.length == 0) {
                            $plzInput.addClass('yd-form-invalid');
                        } else {
                            $plzInput.removeClass('yd-form-invalid');
                        }
                        ajaxData[term] = data;
                        response(data);
                    },
                    complete: function(){
                        $plzInput.removeClass(settings.loadingClass);
                    }
                });
            },
            open: function(event, ui) {
                if(lastKeyCode != 8){
                    var term = $plzInput.val();
                    if (term in ajaxData) {
                        if (ajaxData[term].length == 1) {
                            var item = ajaxData[term][0];
                            $this.data('href', "/" + item.restUrl)
                            .data('city', item.id);
                                
                            $plzInput.autocomplete("close")
                            .val(item.value);
                            lastObjectSet = item;
                            $cityidInput.val(item.id);
                        }
                    }
                }
            },
            select: function (event, ui) {
                $this
                .data('href', "/" + ui.item.restUrl)
                .data('city', ui.item.id);

                $plzInput.autocomplete("close")
                .val(ui.item.value);
                $cityidInput.val(ui.item.id);
                // Set Area Cookie        
                ydRecurring.setLastArea(ui.item.plz);
                
                if ($plzInput.hasClass(settings.autosubmitClass)) {
                    $this.submit();
                }
                
                return false;
            }
        });
    },
    unbindPlzAutocomplete = function($this, settings){
        $this.removeData("plzAutocomplete");
        $this.autocomplete("destroy");
    },
    methods = {
        // Method to initialize Autocomplete plugin
        init: function(options) {
            // merge settings
            var settings = $.extend({}, defaults, options);
            
            return this.each(function(){
                var $this = $(this);
                
                // check if element is Form
                if (!$this.is("form")){
                    log("plzAutocomplete can only bind to form");
                    return;
                }
                
                $.ydAcAjaxSettings.init({
                    mode: defaults.mode
                });
                
                // bind settings to form
                $this.data("plzAutocomplete", settings);
                bindPlzAutocomplete($this, settings);
            });
            
        },
        // Method to destroy Autocomplete plugin
        destroy: function() {
            return this.each(function() {
                unbindPlzAutocomplete($(this), $.extend({}, defaults));
                $(this).find(defaults.input).autocomplete("destroy");
            });
        }
    };

    $.fn.plzAutocomplete = function(method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        }
        
        if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
    };
})(jQuery);
/*! include val.js */
/**
 * intVal / floatVal
 * @author vpriem
 * @since 13.09.2011
 */
(function($) {
    $.fn.intVal = function (value) {
        if (value === undefined) {
            return parseInt($(this).val());
        }
        
        return $(this).val(parseInt(value));
    };
    
    $.fn.floatVal = function (value) {
        if (value === undefined) {
            return parseFloat($(this).val());
        }
        
        return $(this).val(parseFloat(value));
    }; 
})(jQuery);
/*! include zoomer.js */
(function($){
    $.fn.Zoomer=function(b){
        var c=$.extend({
            speedView:200,
            speedRemove:200,
            altAnim:false,
            speedTitle:200,
            debug:false
        },b);
        var d=$.extend(c,b);
        function e(s){
            if(typeof console!="undefined"&&typeof console.debug!="undefined"){
                console.log(s)
            }else{
                alert(s)
            }
        }
        if(d.speedView==undefined||d.speedRemove==undefined||d.altAnim==undefined||d.speedTitle==undefined){
            e('speedView: '+d.speedView);
            e('speedRemove: '+d.speedRemove);
            e('altAnim: '+d.altAnim);
            e('speedTitle: '+d.speedTitle);
            return false
        }
        if(d.debug==undefined){
            e('speedView: '+d.speedView);
            e('speedRemove: '+d.speedRemove);
            e('altAnim: '+d.altAnim);
            e('speedTitle: '+d.speedTitle);
            return false
        }
        if(typeof d.speedView!="undefined"||typeof d.speedRemove!="undefined"||typeof d.altAnim!="undefined"||typeof d.speedTitle!="undefined"){
            if(d.debug==true){
                e('speedView: '+d.speedView);
                e('speedRemove: '+d.speedRemove);
                e('altAnim: '+d.altAnim);
                e('speedTitle: '+d.speedTitle)
            }
            $(this).hover(function(){
                $(this).css({
                    'z-index':'10'
                });
                $(this).find('img').addClass("hover").stop().animate({
                    marginTop:'-75px',
                    marginLeft:'-75px',
                    top:'50%',
                    left:'50%',
                    width:'150px',
                    height:'150px'
                },d.speedView);
                if(d.altAnim==true){
                    var a=$(this).find("img").attr("alt");
                    if(a.length!=0){
                        $(this).prepend('<span class="title">'+a+'</span>');
                        $('.title').animate({
                            marginLeft:'-25px',
                            marginTop:'100px'
                        },d.speedTitle).css({
                            'z-index':'10',
                            'position':'absolute',
                            'float':'left'
                        })
                    }
                }
            },function(){
                $(this).css({
                    'z-index':'0'
                });
                $(this).find('img').removeClass("hover").stop().animate({
                    marginTop:'0',
                    marginLeft:'0',
                    top:'0',
                    left:'0',
                    width:'100px',
                    height:'100px'
                },d.speedRemove);
                $(this).find('.title').remove()
            })
        }
    }
})(jQuery);
/*! include cookie.js */
/**
 * Cookie detection
 * @author vpriem
 * @since 10.02.2011
 */
function isCookieEnabled(){
    var cookieEnabled;
    if (typeof navigator.cookieEnabled === "undefined"){
        document.cookie = "testcookie=qwertz; expires=0; path=/";
        cookieEnabled = document.cookie.indexOf("testcookie") < 0;
    }
    else {
        cookieEnabled = navigator.cookieEnabled;
    }
    return cookieEnabled;
}
/*! include date.js */
/**
 * Return unix timestamp
 * @author vpriem
 * @since 28.09.2011
 * @return int
 */
Date.prototype.getTimestamp = function(){
    
    return this.getTime() / 1000;
};

/**
 * Set unix timestamp
 * @author vpriem
 * @since 28.09.2011
 * @param int s
 * @return Date
 */
Date.prototype.setTimestamp = function(s){
    
    this.setTime(parseInt(s) * 1000);
    return this;
};

/**
 * Return unix timestamp since midnight
 * @author vpriem
 * @since 28.09.2011
 * @return int
 */
Date.prototype.getTimestampSinceMidnight = function(){
    
    var secs = 0;
    secs += this.getSeconds();
    secs += this.getMinutes() * 60;
    secs += this.getHours() * 60 * 60;
    return secs;
};

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

var dateFormat = function () {
    var	token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
    timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
    timezoneClip = /[^-+\dA-Z]/g,
    pad = function (val, len) {
        val = String(val);
        len = len || 2;
        while (val.length < len) val = "0" + val;
        return val;
    };

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc) {
        var dF = dateFormat;

        // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
        if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
        }

        // Passing date through Date applies Date.parse, if necessary
        date = date ? new Date(date) : new Date;
        if (isNaN(date)) throw SyntaxError("invalid date");

        mask = String(dF.masks[mask] || mask || dF.masks["default"]);

        // Allow setting the utc argument via the mask
        if (mask.slice(0, 4) == "UTC:") {
            mask = mask.slice(4);
            utc = true;
        }

        var	_ = utc ? "getUTC" : "get",
        d = date[_ + "Date"](),
        D = date[_ + "Day"](),
        m = date[_ + "Month"](),
        y = date[_ + "FullYear"](),
        H = date[_ + "Hours"](),
        M = date[_ + "Minutes"](),
        s = date[_ + "Seconds"](),
        L = date[_ + "Milliseconds"](),
        o = utc ? 0 : date.getTimezoneOffset(),
        flags = {
            d:    d,
            dd:   pad(d),
            ddd:  dF.i18n.dayNames[D],
            dddd: dF.i18n.dayNames[D + 7],
            m:    m + 1,
            mm:   pad(m + 1),
            mmm:  dF.i18n.monthNames[m],
            mmmm: dF.i18n.monthNames[m + 12],
            yy:   String(y).slice(2),
            yyyy: y,
            h:    H % 12 || 12,
            hh:   pad(H % 12 || 12),
            H:    H,
            HH:   pad(H),
            M:    M,
            MM:   pad(M),
            s:    s,
            ss:   pad(s),
            l:    pad(L, 3),
            L:    pad(L > 99 ? Math.round(L / 10) : L),
            t:    H < 12 ? "a"  : "p",
            tt:   H < 12 ? "am" : "pm",
            T:    H < 12 ? "A"  : "P",
            TT:   H < 12 ? "AM" : "PM",
            Z:    utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
            o:    (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
            S:    ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
        };

        return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
        });
    };
}();

// Some common format strings
dateFormat.masks = {
    "default":      "ddd mmm dd yyyy HH:MM:ss",
    shortDate:      "m/d/yy",
    mediumDate:     "mmm d, yyyy",
    longDate:       "mmmm d, yyyy",
    fullDate:       "dddd, mmmm d, yyyy",
    shortTime:      "h:MM TT",
    mediumTime:     "h:MM:ss TT",
    longTime:       "h:MM:ss TT Z",
    isoDate:        "yyyy-mm-dd",
    deDate:         "dd.mm.yyyy",
    isoTime:        "HH:MM:ss",
    isoDateTime:    "yyyy-mm-dd'T'HH:MM:ss",
    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
};

// Internationalization strings
dateFormat.i18n = {
    dayNames: [
    "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    ],
    monthNames: [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
    "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ]
};

// For convenience...
Date.prototype.format = function (mask, utc) {
    return dateFormat(this, mask, utc);
};
/*! include datepicker.js */
/**
 *  give date in form "dd.mm.yyyy" !!!
 */
function getDateFromString (dateString) {
    
    return new Date(dateString.split('.')[2], dateString.split('.')[1] - 1, dateString.split('.')[0]);
}

/**
 * @author Felix Haferkorn <haferkorn@lieferando.de>
 * @since 05.01.2010
 * @param string type
 * @param string idDatepickerElement
 * @param string start
 * @param string end
 */
function initDatepicker (type, idDatepickerElement, start, end) {

    switch (type) {
        case "default":
            $(idDatepickerElement).datepicker({
                minDate: new Date('01 January 2008'),
                maxDate: '+52w'
            });
            break;
        
        case "full":
            $("#" + idDatepickerElement ).datepicker({
                minDate: new Date('01 January 2008'),
                maxDate: '+52w'
            });
            break;
            
        case "before":
            $("#" + idDatepickerElement ).datepicker({
                minDate: new Date('01 January 2008'),
                maxDate: '-1d'
            });
            break;
            
        case "beforeAndToday":
            $("#" + idDatepickerElement ).datepicker({
                minDate: new Date('01 January 2008'),
                maxDate: 'now'
            });
            break;
            
        case "now":
            $("#" + idDatepickerElement ).datepicker({
                minDate: new Date(),
                maxDate: '+52w'
            });
            break;
            
        case "startEnd":
            // use start and end to define
            $("#" + idDatepickerElement ).datepicker({
                minDate: getDateFromString(start),
                maxDate: '+52w'
            });
            break;
            
        case 'raw':
            $("#" + idDatepickerElement ).datepicker({
                minDate: new Date('01 January 2008'),
                maxDate: new Date(),
                dateFormat : 'yy-mm-dd',
                defaultDate: '2010-01-01'
            });
            break;

        default:
            break;
    }
}

/**
 * check wether date of datepicker
 */
function checkDatepickerToday (idDatepickerElement) {

    var date = getDateFromString($('#' + idDatepickerElement).val());
    var today = new Date();

    if (today.getDate() == date.getDate() && today.getMonth() == date.getMonth() && today.getYear() == date.getYear()) {
        return true;
    }
    return false;
}
/*! include dialog.js */
/**
 * Open a jQuery dialog box
 * @author vpriem
 * @since 08.02.2011
 * @param string url
 * @param object options
 */
var openedUrl = {}; // client side cache
function openDialog (url, options, complete) {
    if (openedUrl[url] === undefined) {
        $('#dialog')
            .html('<div class="yd-lightbox-loading">&nbsp;</div>')
            .dialog(options)
            .load(url, function (resp) {
                openedUrl[url] = resp;
                $('.yd-lightbox-content-container', this).scrollTop(0);
                if (complete !== undefined) {
                    complete.call(this);
                }
               //beautyfication of be bubble boxes
               $('.be-dialogs .yd-grid-box').before('<br /><br />');                
            });
        return;
    }
    
    $('#dialog')
        .html(openedUrl[url])
        .dialog(options).each(function(){
                if (complete !== undefined) {
                    complete.call(this);                                        
                }                          
        });
}

/**
 * Close the jQuery dialog box
 * @author vpriem
 * @since 09.02.2011
 */
function closeDialog(destroy){
    
    var $d = $('.yd-dialog-parent')    
        .dialog('close');
        
    if (destroy === true) {
        $d.dialog('destroy');    
    }
}
/*! include encrypt.js */
function sha1(str) {
    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)
    // + namespaced by: Michael White (http://getsprink.com)
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   jslinted by: Anthon Pang (http://piwik.org)

    var
    rotate_left = function (n, s) {
        return (n << s) | (n >>> (32 - s));
    },

    cvt_hex = function (val) {
        var str = '',
        i,
        v;

        for (i = 7; i >= 0; i--) {
            v = (val >>> (i * 4)) & 0x0f;
            str += v.toString(16);
        }
        return str;
    },

    blockstart,
    i,
    j,
    W = [],
    H0 = 0x67452301,
    H1 = 0xEFCDAB89,
    H2 = 0x98BADCFE,
    H3 = 0x10325476,
    H4 = 0xC3D2E1F0,
    A,
    B,
    C,
    D,
    E,
    temp,
    str_len,
    word_array = [];

    str_len = str.length;

    for (i = 0; i < str_len - 3; i += 4) {
        j = str.charCodeAt(i) << 24 | str.charCodeAt(i + 1) << 16 |
        str.charCodeAt(i + 2) << 8 | str.charCodeAt(i + 3);
        word_array.push(j);
    }

    switch (str_len & 3) {
        case 0:
            i = 0x080000000;
            break;
        case 1:
            i = str.charCodeAt(str_len - 1) << 24 | 0x0800000;
            break;
        case 2:
            i = str.charCodeAt(str_len - 2) << 24 | str.charCodeAt(str_len - 1) << 16 | 0x08000;
            break;
        case 3:
            i = str.charCodeAt(str_len - 3) << 24 | str.charCodeAt(str_len - 2) << 16 | str.charCodeAt(str_len - 1) << 8 | 0x80;
            break;
    }

    word_array.push(i);

    while ((word_array.length & 15) !== 14) {
        word_array.push(0);
    }

    word_array.push(str_len >>> 29);
    word_array.push((str_len << 3) & 0x0ffffffff);

    for (blockstart = 0; blockstart < word_array.length; blockstart += 16) {
        for (i = 0; i < 16; i++) {
            W[i] = word_array[blockstart + i];
        }

        for (i = 16; i <= 79; i++) {
            W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);
        }

        A = H0;
        B = H1;
        C = H2;
        D = H3;
        E = H4;

        for (i = 0; i <= 19; i++) {
            temp = (rotate_left(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5A827999) & 0x0ffffffff;
            E = D;
            D = C;
            C = rotate_left(B, 30);
            B = A;
            A = temp;
        }

        for (i = 20; i <= 39; i++) {
            temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & 0x0ffffffff;
            E = D;
            D = C;
            C = rotate_left(B, 30);
            B = A;
            A = temp;
        }

        for (i = 40; i <= 59; i++) {
            temp = (rotate_left(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8F1BBCDC) & 0x0ffffffff;
            E = D;
            D = C;
            C = rotate_left(B, 30);
            B = A;
            A = temp;
        }

        for (i = 60; i <= 79; i++) {
            temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & 0x0ffffffff;
            E = D;
            D = C;
            C = rotate_left(B, 30);
            B = A;
            A = temp;
        }

        H0 = (H0 + A) & 0x0ffffffff;
        H1 = (H1 + B) & 0x0ffffffff;
        H2 = (H2 + C) & 0x0ffffffff;
        H3 = (H3 + D) & 0x0ffffffff;
        H4 = (H4 + E) & 0x0ffffffff;
    }

    temp = cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);
    return temp.toLowerCase();
}
/*! include history.js */
/**
 * Go to the last visted page
 * but stay on the same domain
 * @author vpriem
 * @since 08.05.2012
 */
historyBack = function () {

    if (typeof useNoHistoryBack !== 'undefined' && useNoHistoryBack) {
        window.close(); //if this is a popup it will be closed
        return;
    }

    if (history.length > 1 && document.referrer.length && document.referrer.split('/')[2] == window.location.host) {
        history.back();
    }
    else {
        location.href = "/";
    }
}
/*! include int.js */
/**
 * @author vpriem
 * @since 08.07.2011
 */
if (CURRENCY === undefined) {
    var CURRENCY = "â‚¬";
}
function int2price(price, currency, decimals, dec_point, thousands_sep) {
    
    if (currency === undefined) {
        currency = false;
    }
    
    if (decimals === undefined) {
        decimals = 2;
    }
    
    if (dec_point === undefined) {
        dec_point = ',';
    }
    
    if (thousands_sep === undefined) {
        thousands_sep = '.';
    }
    
    var d = Math.pow(10, decimals);
    price = '' + Math.round((price / 100) * d) / d;
    
    var p = price.split('.');
    if (p[0].length > 3) {
        var pos = p[0].length - 3;
        p[0] = p[0].substring(0, pos) + thousands_sep + p[0].substring(pos);
    }
    if (p.length < 2) {
        p.push('0');
    }
    if (p[1].length < decimals) {
        p[1] += new Array(decimals - p[1].length + 1).join('0');
    }
    if (!decimals) {
        p = p.splice(0, 1);
    }
    return p.join(dec_point) + (currency ? '&nbsp;' + CURRENCY : '');
}
/*! include json2.js */
/*
    http://www.JSON.org/json2.js
    2011-02-23

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*/

/*jslint evil: true, strict: false, regexp: false */

/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/


// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

var JSON;
if (!JSON) {
    JSON = {};
}

(function () {
    "use strict";

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    if (typeof Date.prototype.toJSON !== 'function') {

        Date.prototype.toJSON = function (key) {

            return isFinite(this.valueOf()) ?
                this.getUTCFullYear()     + '-' +
                f(this.getUTCMonth() + 1) + '-' +
                f(this.getUTCDate())      + 'T' +
                f(this.getUTCHours())     + ':' +
                f(this.getUTCMinutes())   + ':' +
                f(this.getUTCSeconds())   + 'Z' : null;
        };

        String.prototype.toJSON      =
            Number.prototype.toJSON  =
            Boolean.prototype.toJSON = function (key) {
                return this.valueOf();
            };
    }

    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        gap,
        indent,
        meta = {    // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"' : '\\"',
            '\\': '\\\\'
        },
        rep;


    function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string' ? c :
                '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }


    function str(key, holder) {

// Produce a string from holder[key].

        var i,          // The loop counter.
            k,          // The member key.
            v,          // The member value.
            length,
            mind = gap,
            partial,
            value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object' &&
                typeof value.toJSON === 'function') {
            value = value.toJSON(key);
        }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

// What happens next depends on the value's type.

        switch (typeof value) {
        case 'string':
            return quote(value);

        case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

            return isFinite(value) ? String(value) : 'null';

        case 'boolean':
        case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

            return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

        case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

            if (!value) {
                return 'null';
            }

// Make an array to hold the partial results of stringifying this object value.

            gap += indent;
            partial = [];

// Is the value an array?

            if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

                length = value.length;
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value) || 'null';
                }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

                v = partial.length === 0 ? '[]' : gap ?
                    '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' :
                    '[' + partial.join(',') + ']';
                gap = mind;
                return v;
            }

// If the replacer is an array, use it to select the members to be stringified.

            if (rep && typeof rep === 'object') {
                length = rep.length;
                for (i = 0; i < length; i += 1) {
                    if (typeof rep[i] === 'string') {
                        k = rep[i];
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            } else {

// Otherwise, iterate through all of the keys in the object.

                for (k in value) {
                    if (Object.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

            v = partial.length === 0 ? '{}' : gap ?
                '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' :
                '{' + partial.join(',') + '}';
            gap = mind;
            return v;
        }
    }

// If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== 'function') {
        JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

// If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                    (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

            return str('', {'': value});
        };
    }


// If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== 'function') {
        JSON.parse = function (text, reviver) {

// The parse method takes a text and an optional reviver function, and returns
// a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

// The walk method is used to recursively walk the resulting structure so
// that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


// Parsing happens in four stages. In the first stage, we replace certain
// Unicode characters with escape sequences. JavaScript handles many characters
// incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return '\\u' +
                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

// In the second stage, we run the text against regular expressions that look
// for non-JSON patterns. We are especially concerned with '()' and 'new'
// because they can cause invocation, and '=' because it can cause mutation.
// But just to be safe, we want to reject all unexpected forms.

// We split the second stage into 4 regexp operations in order to work around
// crippling inefficiencies in IE's and Safari's regexp engines. First we
// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
// replace all simple value tokens with ']' characters. Third, we delete all
// open brackets that follow a colon or comma or that begin the text. Finally,
// we look to see that the remaining characters are only whitespace or ']' or
// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if (/^[\],:{}\s]*$/
                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                        .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

// In the third stage we use the eval function to compile the text into a
// JavaScript structure. The '{' operator is subject to a syntactic ambiguity
// in JavaScript: it can begin a block or an object literal. We wrap the text
// in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

// In the optional fourth stage, we recursively walk the new structure, passing
// each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function' ?
                    walk({'': j}, '') : j;
            }

// If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());
/*! include notification.js */
/**
 * Notify the user
 * @author mlaug
 * @param string $type
 * - success
 * - error
 */
function notification (type, msg, perma, replace) {
    var $div = $(
        '<div class="notification rund ' + type + '">' +
        '   <a href="#" class="closeNotification"><img src="http://cdn.yourdelivery.de/images/yd-background/notification-close.png" alt="close" /></a>' +
        '   <ul><li>' + msg + '</li></ul>' +
        '</div>'
    )
    
    if(replace && $('#yd-notifications').children().length) {
        $div.replaceAll('#yd-notifications div');
    }else {
        $div.appendTo('#yd-notifications');
    }    
            
    if (perma === undefined || perma === false) {
        setTimeout(function(){
            $div.fadeOut('slow');
        }, 10000);
    }
}

$(document).ready(function(){
    if (!$("#yd-notifications").length) {
        $("body").prepend('<div id="yd-notifications"></div>');
    }
    $('div.notification').each(function(){
        var $this = $(this);
        if ($this.hasClass("notification-permanent")) {
            return;
        }
        setTimeout(function(){
            $this.fadeOut('slow');
        }, 5000);
    });
    $('a.closeNotification').live('click', function(){
        $(this).closest("div").fadeOut("fast", function(){
            $(this).remove();
        });
        return false;
    });
});
/*! include parse_url.js */
function getDomainName(url) {

    if ( url.length == 0 ){
        return null;
    }

    var url_parts = url.split('/');
    var domain_name_parts = url_parts[2].split(':');
    var domain_name = domain_name_parts[0];
    return domain_name;
}

function getPortNumber(url) {
    var url_parts = url.split('/');
    var domain_name_parts = url_parts[2].split(':');
    var port_number = domain_name_parts[1];
    return port_number;
}
/*! include popup.js */
/**
 * Show a centered popup
 * @author vpriem
 */
function popup (url, name, w, h, r, s) {
    if (r === undefined) {
        r = "no";
    }
    if (s === undefined) {
        s = "yes";
    }
    var x = (screen.availWidth - w) / 2;
    var y = (screen.availHeight - h) / 2;
    var pop = window.open(url, name, "left=" + x + ",top=" + y + ",width=" + w + ",height=" + h + ",resizable=" + r + ",scrollbars=" + s + ",status=no,directories=no,toolbar=no,location=no,menubar=no");
    pop.moveTo(x, y);
    pop.resizeTo(w, h);
    pop.focus();
    return false;
}
/*! include post.js */
/**
 * @author mlaug
 */
function prepareInput(params, form, name) {
    if (typeof(params) == 'string' || typeof(params) == 'number') {
        var hiddenField = document.createElement("input");        
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", name);
        hiddenField.setAttribute("value", params);       
        form.appendChild(hiddenField);
    }
    else if (typeof(params) == 'object') {
        for (var key in params) {
            if (name) {
                prepareInput(params[key], form, name  + "[" + key + "]");
            }
            else{
                prepareInput(params[key], form, key);
            }
        }
    }
}

/**
 * @author mlaug
 */
function post_to_url(path, params, method) {
    method = method || "post"; // Set method to post by default, if not specified.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);
    prepareInput(params, form);
    document.body.appendChild(form);
    form.submit();
}
/*! include queue.js */
/* Queue.js - a function for creating an efficient queue in JavaScript
 *
 * The author of this program, Safalra (Stephen Morley), irrevocably releases
 * all rights to this program, with the intention of it becoming part of the
 * public domain. Because this program is released into the public domain, it
 * comes with no warranty either expressed or implied, to the extent permitted
 * by law.
 *
 * For more public domain JavaScript code by the same author, visit:
 *
 * http://www.safalra.com/web-design/javascript/
 */
function Queue(){
    var _1=[];
    var _2=0;
    this.getSize=function(){
        return _1.length-_2;
    };

    this.isEmpty=function(){
        return (_1.length==0);
    };

    this.enqueue=function(_3){
        _1.push(_3);
    };

    this.dequeue=function(){
        var _4=undefined;
        if(_1.length){
            _4=_1[_2];
            if(++_2*2>=_1.length){
                _1=_1.slice(_2);
                _2=0;
            }
        }
        return _4;
    };

    this.getOldestElement=function(){
        var _5=undefined;
        if(_1.length){
            _5=_1[_2];
        }
        return _5;
    };

}
/*! include str_replace.js */
function str_replace (search, replace, subject, count) {

    var i = 0, j = 0, temp = '', repl = '', sl = 0, fl = 0,
    f = [].concat(search),
    r = [].concat(replace),
    s = subject,
    ra = r instanceof Array, sa = s instanceof Array;
    s = [].concat(s);
    if (count) {
        this.window[count] = 0;
    }

    for (i=0, sl=s.length; i < sl; i++) {
        if (s[i] === '') {
            continue;
        }
        for (j=0, fl=f.length; j < fl; j++) {
            temp = s[i]+'';
            repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];
            s[i] = (temp).split(f[j]).join(repl);
            if (count && s[i] !== temp) {
                this.window[count] += (temp.length-s[i].length)/f[j].length;
            }
        }
    }
    return sa ? s : s[0];
}
/*! include striptags.js */
/**
 * @author Andre Ponert <ponert@lieferando.de>
 * @since 20.09.2012
 */

//Only add this implementation if one does not already exist.
if (String.prototype.stripTags==null) String.prototype.stripTags=function(){
    return this.replace(/<\/?(?!\!)[^>]*>/gi, '');
}
/*! include time.js */
/**
 * Use new Date().getTimestamp() instead
 * @deprecated
 * @author vpriem
 * @since 25.08.2011
 * @return int
 */
function time(){
    
    return Math.round(new Date().getTime() / 1000);
}
/*! include timepicker.js */
function setTimepickerNow(idTimepickerElement){
    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes();

    while(minutes%15 > 0){
        minutes++;
    }

    if(minutes==60){
        minutes='00';
        hours++;
    }

    $("#"+idTimepickerElement).val(hours +':'+minutes);

}


function initTimepicker(type, idTimepickerElement, startTime, endTime) {

    var startHours = null;
    var startMinutes = null;
    var endHours = null;
    var endMinutes = null;
    var hours = null;
    var minutes = null;

    var now = new Date();

    switch (type){
        case 'full':
            // all times are shown
            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, 0, 0, 0),
                endTime:new Date(0, 0, 0, 23, 45, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });

            break;

        case "now":
            // starttime is now
            hours = now.getHours();
            minutes = now.getMinutes();

            while(minutes%15 > 0){
                minutes++;
            }

            if(minutes==60){
                minutes='00';
                hours++;
            }

            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, hours, minutes, 0),
                endTime:new Date(0, 0, 0, 23, 45, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });
            $('#'+idTimepickerElement).val('sofort');
            break;

        case "start":
            // starttime given
            if(startTime === null){
                break;
            }

            startHours = startTime.split(':')[0];
            startMinutes = startTime.split(':')[1];

            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, startHours, startMinutes, 0),
                endTime:new Date(0, 0, 0, 23, 45, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });

            break;

        case "end":
            // endtime given
            if(endTime === null){
                break;
            }

            endHours = endTime.split(':')[0];
            endMinutes = endTime.split(':')[1];

            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, 0, 0, 0),
                endTime:new Date(0, 0, 0, endHours, endMinutes, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });

            break;

        case "nowEnd":
            // endtime given at today
            if(endTime === null){
                break;
            }

            endHours = endTime.split(':')[0];
            endMinutes = endTime.split(':')[1];

            hours = now.getHours();
            minutes = now.getMinutes();

            while(minutes%15 > 0){
                minutes++;
            }

            if(minutes==60){
                minutes='00';
                hours++;
            }

            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, hours, minutes, 0),
                endTime:new Date(0, 0, 0, endHours, endMinutes, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });

            break;

        case "startEnd":
            // start- and endtime given
            if(startTime === null || endTime === null){
                break;
            }

            startHours = startTime.split(':')[0];
            startMinutes = startTime.split(':')[1];
            endHours = endTime.split(':')[0];
            endMinutes = endTime.split(':')[1];

            $("#"+idTimepickerElement).timePicker({
                startTime:new Date(0, 0, 0, startHours, startMinutes, 0),
                endTime:new Date(0, 0, 0, endHours, endMinutes, 0),
                show24Hours:true,
                separator:':',
                step: 15
            });
            break;

        default:
            // missing / wrong parameter start
            break;

    } // switch

} // initTimepicker
/*! include url.js */
/**
 * get all variables from a current get request 
 * made in the standard layout ?param=value&param=value
 * @author mlaug
 * @since 21.02.2011
 */
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}
/*! include base.js */
/**
 * if we get an 501 we have lost our session, too bad
 * if we get an 500 we need to throw our error page, so no further
 * if the useragent is an Googlebot, we do not fire any requests!
 * harm will be done
 * @author mlaug
 */
$.ajaxSetup({
    beforeSend: function (xhr) {
        if ( navigator.userAgent.indexOf('Googlebot') == -1 ){
            xhr.setRequestHeader("YourdeliveryDoormen", "kjfsdkjhdfsalkhjfdsalkhjfdas");
            return true;
        }
        return false;
    },
    error: function (xhr, status, err) {
        if ( production ){
            // session is gone for order
            if (xhr.status == "501") {
                location.href = '/error/session';
            }

            // we got an error, redirect
            if (xhr.status == "500") {
                location.href = '/error/throw';
            }
        }
    }
});

/**
 * Use unicode with base64
 * This not work :(
 * @author vpriem
 * @since 19.09.2011
 */
//if ($.base64) {
//    $.base64.is_unicode = true;
//}

/**
 * log to console, if firebug exists
 * @author mlaug
 * @since 06.06.2011
 */
function log(string) {  
    if (!production && window.console) {
        console.log(string);
    }
}

/**
 * Fix for jQuery UI Modal Dialog disables scrolling in Chrome
 * see YD-2917
 */
(function($) {
    if ($.ui && $.ui.dialog && $.browser.webkit) {
        $.ui.dialog.overlay.events = $.map(['focus', 'keydown', 'keypress'], function(event) { 
            return event + '.dialog-overlay';
        }).join(' ');
    }
}(jQuery));

/** 
 * @author mlaug
 * @since 05.01.2010
 */
$(document).ready(function(){

    /**
     * Append dialog div to body so that it can be used to apply any dialog
     * @author mlaug
     */
    $('body').append('<div id="dialog" class="yd-dialog-parent hidden"></div>');
    
    $('.yd-money').priceFormat({
        prefix: CURRENCY + " ",
        centsSeparator: ',',
        thousandsSeparator: '.'
    }); 
    
    /**
     * Show a confirmation box on click
     * @author vpriem
     */
    if ($.fn.confirmation) {
        $("a.yd-are-you-sure, :submit.yd-are-you-sure").confirmation();
    }

    /**
     * Submit the select form on change
     * @author vpriem
     */
    $("select.yd-submit-on-change").live('change',function(){
        this.form.submit();
    });

    /**
     * Submit a form on click
     * @author vpriem
     */
    $(".yd-submit-on-click").live("click", function(){
        $(this).closest("form").submit();
        this.blur();
        return false;
    });

    /**
     * Clear an input on click
     * @author mlaug
     */
    $(":input.yd-clear-on-click, :password.yd-clear-on-click").live("click", function(){
        this.value = "";
    });

    /**
     * Lightbox loading
     * @author vpriem, fhaferkorn (16.05.2011)
     */
    $("a.yd-lightbox-loading-on-click").live("click", function(){
        var href = $(this).attr('href');
        $('#dialog').html('<div class="yd-lightbox-loading">&nbsp;</div>');
        location.href = href;
    });

    /**
     * Close lightbox on click
     * @author vpriem
     * @since 14.04.2011
     */
    $(".yd-close-lightbox, .yd-dialogs-close, .be-dialogs-close").live("click", function(){
        closeDialog();
        this.blur();
        return false;
    });

    /**
     * Close and destroys a lightbox on click
     * @author Allen Frank <frank@lieferando.de>
     * @since 06.07.12
     */
    $(".yd-destroy-lightbox, .yd-dialogs-destroy, .be-dialogs-destroy").live("click", function(){
        closeDialog(true);
        this.blur();
        return false;
    });
    
    $('div.ui-widget-overlay').live('click',function(){
       if($('.yd-dialog-not-closeable').length){
           return false;
       }
       closeDialog();
    });

    /**
     * Allow only numbers to be typed in
     * allow - for poland
     * @author vpriem
     */
    $(':input.yd-only-nr:not(.yd-plz-autocomplete-autosubmit)').live('keyup', function(event){
        if (event.which != 13) { // enter key
            this.value = this.value.replace(/[^\d\-]/g, "");
        }
    });

    /**
     * Allow only alphanumeric characters
     * @author Allen Frank <frank@lieferando.de>
     */
    $(':input.yd-only-alphanumeric').live('keyup', function(event){
        this.value = this.value.replace(/[\s]/g, "");
    });

    /**
     * Empty text, display a default text
     * and remove it by typing
     * @author vpriem
     * @since 09.02.2011
     */
    $(':input.yd-empty-text, :password.yd-empty-text, textarea.yd-empty-text').emptytext();
    
    /**
     * Open a popup
     * @author vpriem
     * @since 09.02.2011
     */
    $("a.yd-popup").live('click', function(){
        popup(this.href, 'yd_popup', 650, 550);
        this.blur();
        return false;
    });

    /**
     * Form validation
     * @author vpriem
     * @since 15.02.2011
     */
    if ($.validationEngine) {
        if ($("form.yd-validation").length) {
            $("form.yd-validation").validationEngine({
                promptPosition: "topRight",
                validationEventTriggers: "blur",
                success: false,
                scroll: false
            });
        }
    }

    /**
     * Tooltips
     * @author vpriem
     * @since 16.02.2011
     */
    if ($.fn.tooltip) {
        $('.tooltip').tooltip();
    }

    /**
     * Autogrow
     * @author vpriem
     * @since 16.02.2011
     */
    if ($.fn.autogrow) {
        $("textarea").autogrow();
    }
    
    /**
     * @author mlaug
     * @since 28.04.2011
     */
    $('.copy-on-click').live('click', function(){
        $.copy($(this).html()); 
    });

    /**
     * Toggle helper
     * @author vpriem
     * @since 10.06.2011
     */
    $("a.yd-toggle, a.yd-fade-toggle, a.yd-slide-toggle").each(function(){
        if (this.hash === undefined) {
            return;
        }
        
        if (location.hash.length && location.hash == this.hash) {
            $(this.hash).show();
        }

        var labels = $(this).html().split("|");
        if (labels.length < 2) {
            labels.push(labels[0]);
        }

        if ($(this.hash + ":hidden").length) {
            labels = labels.reverse();
        }

        $(this)
        .html(labels[0])
        .toggle(function(){
            $(this).html(labels[1]);
        }, function(){
            $(this).html(labels[0]);
        })
        .click(function(){
            $(this.hash).toggle();
            this.blur();
            return false;
        });
    });

    //main tab is everywhere so put this in base.js
    /**
     * @todo: remove once great and fruit have been merged
     */
    $('#yd-tab-3, #yd-nav-layer').live('mouseover',function(){
        $('#yd-nav-layer').show();
    });
    $('#yd-tab-3, #yd-nav-layer').live('mouseout',function(){
        $('#yd-nav-layer').hide();
    });
    
    /**
     * @author vpriem
     * @since 04.07.2011
     */
    if ($.fn.formToggle) {
        $("form.yd-form-toggle").formToggle();
        $("a.yd-form-toggle").live('click',function(event){
            event.preventDefault();
            $(this)
            .blur()
            .closest("form")
            .formToggle();
        });
    }
    
});
/*! include 000-error-handler.js */
window.onerror = function(errorMessage, url, line) {
  var loggerUrl = "/jsLogger.php";
  var parameters = "?description=" + escape(errorMessage)
      + "&url=" + escape(url)
      + "&line=" + escape(line)
      + "&parent_url=" + escape(document.location.href)
      + "&user_agent=" + escape(navigator.userAgent);
 
  /** Send error to server */
  new Image().src = loggerUrl + parameters;
};
/*! include budget.js */
//budget object

var ydBudget = {
    
    _budget : {},
    
    get_budget : function(){
        return this._budget;
    },
    
    //add a validated budget
    add : function(email,amount,code,addition,addition2){
        
        //precheck
        if ( email === undefined || email == ''){
            log('no email provided');
            return false;
        }
        
        amount = parseInt(amount);
        if ( amount === undefined || isNaN(amount) || amount <= 0){
            log('no amount provided');
            return false;
        }
        
        if ( code === undefined ){
            log('undefined code, reseting to empty string');
            code = '';
        }
        
        if ( addition === undefined ){
            log('undefined addition, reseting to empty string');
            addition = '';
        }
        
        if ( addition2 === undefined ){
            log('undefined addition2, reseting to empty string');
            addition2 = '';
        }
        
        var hash = sha1(email);
        log('adding budget from ' + email);
        this._budget[hash] = {         
            email : email,
            amount : amount,
            code : code,
            addition : addition
        };
        
        //reset values
        $('#check_email').val("");
        $('#projectcode').val("");
        $('#check_amount_cent').val("");
        $('#check_amount_euro').val("");
        
        this.update_view();
        return hash;
    },
    
    //remove a budget
    remove : function(hash){
        var budgets = {};
        $.each(this._budget, function(k,v){
            if ( k != hash ){
                budgets[k] = v;
            }
            else{
                log('found ' + k + ' and remove it from budget');
            }
        });
        this._budget = budgets;
        this.update_view();
    },
    
    //get overall amount of all budgets
    get_amount : function(format){
        var amount = 0;
        $.each(this._budget, function(k,v){
            amount += parseInt(v.amount);
        });
        var form = $('#finishForm')[0];
        if ( form && form.own_budget){
            var own_budget = parseInt(form.own_budget.value);
            amount += own_budget;
        }
        else{
            amount = 0;
        }
        if ( format ){
            amount = int2price(amount,true);
        }
        return amount;
    },
    
    update_view : function(){
        $('#yd-invite-budget').html('');
        $('#budtable').html('');
        if ( !$.isEmptyObject(this._budget) ){
            log('found some budgets, will update view');
            $('#yd-invite-budget').show();
            $('#budtable').show();
            $.each(this._budget, function(k,v){
                if ( v ){
                    $('#yd-invite-budget').append('<li><em><a href="#" class="mail-erase yd-budget-erase" id="yd-budet-erase-'+ k +'-2"></a>' + v.email + '</em><span><b>' + int2price(v.amount,true) + '</b></span></li>');
                    $('#budtable').append('<span><a class="mail-erase yd-budget-erase cursor" id="yd-budget-erase-' + k + '-1"></a>Budget von '+ v.email +': <b>' + int2price(v.amount,true) + '</b></span>');
                    $('#budtable').append('<input type="hidden" name="budget['+k+'][email]" value="'+ v.email +'" />');
                    $('#budtable').append('<input type="hidden" name="budget['+k+'][amount]" value="'+ v.amount +'" />');
                    $('#budtable').append('<input type="hidden" name="budget['+k+'][code]" value="'+ v.code +'" />');
                    $('#budtable').append('<input type="hidden" name="budget['+k+'][addition]" value="'+ v.addition +'" />');
                }
            });
        }
        else{
            log('no budgets found, erase and hide view');
            $('#yd-invite-budget').hide();
            $('#budtable').hide();
        }
        
        ydOrder.update_view_amounts();
        
    }
    
};
/*! include customer.js */
/**
 * @author mlaug
 * @since 12.07.2011
 */
var ydCustomer = {

    _name: null,
    _prename: null,
    _company: null,
    _companyId: 0,
    _admin: 0,
    _hasLocations: 0,

    /**
     * @author vpriem
     * @since 23.08.2011
     * @return ydCustomer
     */
    init: function() {
        this._name = null;
        this._prename = null;
        this._company = null;
        this._companyId = 0;
        this._admin = 0;
        this._hasLocations = 0;
        return this.save();
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @param string name
     * @return ydCustomer
     */
    setName: function(name){
        this._name = name;
        return this.save();
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @return string
     */
    getName: function(){
        return this._name;
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @param string prename
     * @return ydCustomer
     */
    setPrename: function(prename){
        this._prename = prename;
        return this.save();
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @return string
     */
    getPrename: function(){
        return this._prename;
    },

    /**
     * @author vpriem
     * @since 25.07.2011
     * @return string
     */
    getFullname: function(){
        if (this._prename && this._name) {
            return this._prename + ' ' + this._name;
        } else {
            return (this._prename)? this._prename: this._name;
        }
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @param string company
     * @return ydCustomer
     */
    setCompany: function(company){
        this._company = company;
        return this.save();
    },

    /**
     * @author mlaug
     * @since 12.07.2011
     * @return string
     */
    getCompany: function(){
        return this._company;
    },

    /**
     * @author mlaug
     * @since 28.09.2011
     * @return ydCustomer
     */
    setCompanyId: function(id){
        this._companyId = id;
        return this.save();
    },

    /**
     * @author mlaug
     * @since 28.09.2011
     * @return string
     */
    getCompanyId: function(){
        return this._companyId;
    },

    /**
     * @author vpriem
     * @since 25.07.2011
     * @param int admin
     * @return ydCustomer
     */
    setAdmin: function(admin){
        this._admin = admin ? 1 : 0;
        return this.save();
    },

    /**
     * @author vpriem
     * @since 25.07.2011
     * @return int
     */
    isAdmin: function(){
        return this._admin;
    },

    /**
     * @author jens naie <naie@lieferando.de>
     * @since 20.08.2012
     * @param int hasLocations
     * @return ydCustomer
     */
    setHasLocations: function(hasLocations){
        this._hasLocations = hasLocations ? 1 : 0;
        return this.save();
    },

    /**
     * @author jens naie <naie@lieferando.de>
     * @since 20.08.2012
     * @return int
     */
    hasLocations: function(){
        return this._hasLocations
    },

    /**
     * @author mlaug
     * @since 11.07.2011
     * @return ydCustomer
     */
    read: function(){
        var state = $.cookie('yd-customer');
        if (state !== null) {
            state = decodeURIComponent($.base64.decode(state)).split("#");
            this._name = state[0] ? state[0] : null;
            this._prename = state[1] ? state[1] : null;
            this._company = state[2] ? state[2] : null;
            this._admin = parseInt(state[3]) ? 1 : 0;
            this._companyId = parseInt(state[4]) ? parseInt(state[4]) : 0;
            this._hasLocations = parseInt(state[5]) ? 1 : 0;
        }
        return this;
    },

    /**
     * @author mlaug
     * @since 11.07.2011
     * @return ydCustomer
     */
    save: function(){
        $.cookie('yd-customer', $.base64.encode(encodeURIComponent([
                this._name,
                this._prename,
                this._company,
                this._admin,
                this._companyId,
                this._hasLocations
            ].join("#"))), {
            path: '/'
        });
        return this;
    }

};
ydCustomer.read();
/*! include discount.js */
function YdDiscount(){
    return {
        discount : null,
        kind : 0,
        value : 0,
        min_amount : 0,
        cart_total : 0,
        get_amount : function(format){
            
            if ( this.kind == 1 ){
                return this.value;
            }
            else{
                if ( this.value == 100 ){
                    return this.cart_total;
                }
                else{
                    var perc = this.cart_total/100*this.value;
                    return perc;
                }
            }
            
        }
    };
}
/*! include meal.js */
/**
 * @author vpriem
 * @since 19.07.2011
 */
function YdSize(id, name, cost){
    return {
        id: id,
        name: name,
        cost: parseInt(cost)
    };
}

/**
 * @author vpriem
 * @since 19.07.2011
 */
function YdExtra(id, name, cost, count){
    return {
        id: id,
        name: name,
        cost: parseInt(cost),
        count: parseInt(count)
    };
}

/**
 * @author vpriem
 * @since 19.07.2011
 */
function YdOption(id, name, cost){
    return {
        id: id,
        name: name,
        cost: parseInt(cost)
    };
}

/**
 * @author vpriem
 * @since 19.07.2011
 * @hint put no functions in here, but in ydOrderPrototype
 * this object will be stored in html5 storage and will not store
 * any functions. Those will be extended onload
 */
var ydMealPrototype = {
    addExtra: function(extra){
        this.extras.push(extra);
    },
        
    addOption: function(option){
        this.options.push(option);
    },

    getCost: function(format){
        var total = this.size.cost;

        if (format === true) {
            return int2price(total, true);
        }

        return total;
    },
    
    getAllCost: function(format, single){
        var total = this.size.cost;

        $.each(this.extras, function(k, v){
            total += v.cost * v.count;
        });

        $.each(this.options, function(k, v){
            total += v.cost;
        });

        if (!single) {
            total = total * this.count;
        }

        if (format === true) {
            return int2price(total, true);
        }

        return total;
    },
    
    /**
     * Get HTML representation of this meal
     * @author vpriem
     * @since 28.11.2011
     * @param string hash
     * @return string
     */
    getHtml: function(hash){
        var html = '\
            <li class="yd-shopping-input yd-meal-' + hash + '" id="yd-meal-count-li-' + hash + '">\
                <input id="yd-meal-count-' + hash + '" type="text" name="meal[' + hash + '][count]" value="' + this.count + '" class="yd-only-nr yd-change-item-count" maxlength="3" />\
                <input class="yd-meal-' + hash + '" type="hidden" name="meal[' + hash + '][special]" value="' + this.special + '" />\
                <input class="yd-meal-' + hash + '" type="hidden" name="meal[' + hash + '][size]" value="' + this.size.id + '" />\
                <input class="yd-meal-' + this.id + '" type="hidden" name="meal[' + hash + '][id]" value="' + this.id + '" />\
            </li>\
            <li id="yd-meal-' + hash + '" class="yd-shopping-article yd-meal-' + hash + '">' + this.name +  " " + (this.exMinCost ? "<span class='yd-shopping-notmincost'> " + $.lang("exmincost") + "</span>" : "") + '</li>\
            <li class="yd-shopping-options yd-meal-' + hash + '">\
                <a class="yd-option-plus increase-item" id="yd-increase-item-' + hash + '"></a>\
                <a class="yd-option-minus decrease-item" id="yd-decrease-item-' + hash + '"></a>\
                <a class="yd-option-trash delete-item" id="yd-delete-item-' + hash + '"></a>\
            </li>\
            <li class="yd-shopping-extra yd-meal-' + hash + '">\
            <span class="yd-clearfix"><em>' + $.lang("size", this.size.name) + '</em><span class="yd-shopping-singular-price"> ' + $.lang("every", int2price(this.getCost(false))) + '</span></span>';

        var count = this.count;
        
        // append options
        $.each(this.options, function(k, v){
            html += '<input class="yd-meal-' + hash + '" type="hidden" name="meal[' + hash + '][options][]" value="' + v.id + '" />\n\
                     <span class="yd-clearfix"><em>' + v.name + '</em>';
            if (v.cost > 0) {
                html += '+&nbsp;' + int2price(v.cost * count, true);
            }
            html += '</span>';
        });

        // append extras
        $.each(this.extras, function(k, v){
            html += '<input class="yd-meal-' + hash + '" type="hidden" name="meal[' + hash + '][extras]['+v.id+'][id]" value="' + v.id + '" />\n\
                    <input class="yd-meal-' + hash + '" type="hidden" name="meal[' + hash + '][extras]['+v.id+'][count]" value="' + v.count + '" />\n\
                    <span class="yd-clearfix"><em>' + v.name + ' ' + v.count + 'x</em>';
            if (v.cost > 0) {
                html += '+&nbsp;' + int2price(v.cost * v.count * count);
            }
            html += '</span>';
        });

        html += '</li><li class="yd-shopping-price yd-meal-' + hash + '">' + this.getAllCost(true) + '</li>';
        
        return html;
    }
    
};

function YdMeal(){
    return $.extend({
        id: null,
        name: "",

        // how much is the fish?
        count: 1,

        // any "extra wurst?"
        special: "",

        // how much of this meal do we have to add
        minCount: 1,
        
        // is this meal from the minimum cost excluded
        exMinCost: true,
        
        size: {},
        extras: [],
        options: []
    }, ydMealPrototype);
}
/*! include order.js */
/**
 * @hint put no functions in here, but in ydOrderPrototype
 * this object will be stored in html5 storage and will not store
 * any functions. Those will be extended onload
 */
var ydOrder = {
    
    version: "1.2",
    service_id: 0,
    
    link_to_menu: null,
    
    //store any charge for paypal, credit here
    charge: 0,

    min_amount: 0,
    deliver_cost: 0,
    no_deliver_cost_above: 0,
    
    //discount
    discount : null,

    //store all the meals in here
    meals: {}
};

var ydOrderPrototype = {
    
    /**
     * Set service id
     * @author vpriem
     * @since 28.07.2011
     * @return ydOrder
     */
    set_service: function(service_id){
        this.service_id = parseInt(service_id);
        return this;
    },
    
    /**
     * Set min amount
     * @author vpriem
     * @since 11.07.2011
     * @return ydOrder
     */
    set_min_amount: function(amount){
        this.min_amount = parseInt(amount);
        $(".yd-min-amount, .yd-delivery-from").html(int2price(amount, true));      
        this.update_view_amounts();
        return this;
    },
    
    add_discount: function(discount){
        this.discount = discount;
        this.discount.cart_total = parseInt(this.calculate_amount());
        log("Discount Cart-total: " + this.discount.cart_total);
        this.check_payment();
    },
    
    remove_discount: function(){
        this.discount = null;
        this.check_payment();
        this.update_view_amounts();
    }, 
    
    check_payment: function(){
        var openAmount = this.calculate_open_amount();
        if (openAmount <= 0) {
            log("open amount <= 0 - hiding paymentcontent");
            $('#paymentcontent').hide();
            $('.yd-finish-payment').hide();
        }
        else {
            log("open amount > 0 - showing paymentcontent");
            $('#paymentcontent').show();
            $('.yd-finish-payment').show();
            
            if (openAmount <= 10) {
                log("open amount <= 10 - hiding ebanking");
                $('#yd-finish-payment-ebanking').hide();
            }
        }
    },
    
    /**
     * calculate the discount amount
     * @author mlaug
     * @since 08.07.2011 
     */
    get_discount: function(format){
        if ( this.discount === null ){
            if ( format ){
                return int2price(0, true);
            }
            return 0;
        }
        var amount = this.discount.get_amount();
        if (format === true) {
            return int2price(amount, true);
        }
        return amount;
    },
    
    /**
     * Set deliver cost
     * @author vpriem
     * @since 11.07.2011
     * @return ydOrder
     */
    set_deliver_cost: function(cost, noDeliverAbove){      
        this.deliver_cost = parseInt(cost);
        this.no_deliver_cost_above = noDeliverAbove;
        this.update_view_deliver_cost();
        this.update_view_amounts();
        return this;
    },
    
    /**
     * get deliver cost and keep in mind, that we may
     * have an upper limit
     * @author mlaug
     * @since 16.08.2011
     * @return integer
     */
    get_deliver_cost: function(total){
        if ( !total ){
            total = this.get_meal_amount();
        }
        var floorFeeCost = this.get_floorfee_cost();
        if ( this.no_deliver_cost_above == 0 || this.no_deliver_cost_above > total ){
            return this.deliver_cost + floorFeeCost;
        }  
        
        if(floorFeeCost > 0){
            log('found floorFeeCost: '+floorFeeCost);
            return floorFeeCost;
        }
        
        log('upper bound ' + this.no_deliver_cost_above + ' reached, returning 0 deliver cost');
        return 0;
    },
    
    /**
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 20.09.2011
     */
    get_floorfee_cost: function(){
        var floor = $('input[name=floor]').val();
        var floorfee = $('input[name=floorfee]').val();
        var mealCountTotal = this.get_meal_count_total();
        
        if (floor === undefined || floor == 'lift') {
            return 0;
        }

        if (floorfee < 1) {
            return 0;
        }
        
        return  floorfee * floor * mealCountTotal;
    },
    
    /**
     * get amount of all meals, just an helper
     * @author mlaug
     * @since 16.08.2011
     * @return integer
     */
    get_meal_amount: function(){
        var total = 0;
        $.each(this.meals, function(k, v){
            total += v.getAllCost();    
        });
        return total;
    },
    
    /**
     * calculate the full amount
     * @author mlaug
     * @since 08.07.2011 
     */
    calculate_amount: function(format){
        var total = 0;
        
        total += this.get_meal_amount();
        
        //add deliver cost, which is set in 006-triggers.js
        log("Deliver Cost: " +  this.get_deliver_cost(total));
        total += this.get_deliver_cost(total);
          
        
        if (format === true) {
            return int2price(total, true);
        }
        
        return total;
    },

    
    /**
     * calculate the min amount
     * @author vpriem
     * @since 21.07.2011 
     */
    calculate_min_amount: function(format){
        var total = 0;
        
        $.each(this.meals, function(k, v){
            if (!v.exMinCost || v.exMinCost == 0) {
                total += v.getAllCost();    
            }
        });
        
        if (format === true) {
            return int2price(total, true);
        }
        
        return total;
    },
    
    /**
     * check if the customer reached min amount
     * @author mlaug
     * @since 08.09.2011
     */
    is_minamount_reached: function(){ 
        if ( ydState.getKind() == 'comp' && typeof companyExceptions !== "undefined" ){          
            for(i=0;i<companyExceptions.length;i++){
                log('checking for ' + companyExceptions[i] + ' against ' + ydCustomer.getCompanyId());
                if ( companyExceptions[i] == ydCustomer.getCompanyId() ){
                    log('make an exception for this company, ignoring mincost');
                    return true;
                }
            }
        }
        
        if ( this.calculate_min_amount() == 0 ){
            return false;
        }
        if ( this.discount != null && this.discount.min_amount > this.min_amount){
            log('found an discount and discount min cost is higher as the one from service ');
            return this.calculate_min_amount() >= this.discount.min_amount;
        }
        return this.calculate_min_amount() >= this.min_amount;
    },
    
    /**
     * calculate the open amount
     * @author mlaug
     * @since 08.07.2011 
     */
    calculate_open_amount: function(format){     
        var total = this.calculate_amount() - this.get_discount();
        
        //remove budget
        if ( ydBudget ){
            total -= ydBudget.get_amount();
        }
        
        if ( total <= 0 ){
            total = 0;
        }
        
        if (format === true) {
            return int2price(total, true);
        }
        
        return total;
    },
   
    /**
     * calculate the charged amount for online payment
     * @author mlaug
     * @since 08.07.2011 
     */
    get_charge: function(format){
        if (format === true) {
            return int2price(this.charge, true);
        }
        
        return this.charge;
    },
    
    /**
     * get a meal from hash
     * @author vpriem
     * @since 22.08.2011
     * @param string hash
     * @return ydMeal|null
     */
    get_meal: function(hash){
        if (this.meals[hash] === undefined) {
            return null;
        }
        
        return this.meals[hash];
    },
    
    /**
     * add a meal to the current order
     * @author mlaug
     * @since 08.07.2011
     */
    add_meal: function(meal, hash, updateView){
        if (updateView === undefined) {
            updateView = true;
        }
        
        //get attributes from current meal
        if (hash === undefined || hash === null) {
            hash = "#" + meal.id + meal.size.id;
            $.each(meal.options, function(k, v){
                hash += v.id; 
            });
            $.each(meal.extras, function(k, v){
                hash += v.id;
            });
            hash += meal.special;
            hash = sha1(hash);
        }
        
        if (isNaN(meal.count)) {
            meal.count = 1;
        }
        
        if (this.meals[hash] === undefined) {        
            log('adding new meal to current order state ' + meal.id + ' with a count of ' + meal.count);
            this.meals[hash] = meal; 
        }
        else {
            log('update meal ' + meal.id + ' with count ' + meal.count);
            this.meals[hash].count += meal.count;
        }
        
        if (updateView === true) {
            //only in update view, where we are situated on the menu page
            try {
                //track with piwik that this item has been added     
                log('tracking item ' + meal.id);
                _paq.push(['addEcommerceItem',meal.id,meal.name,null,int2price(meal.size.cost, false, 2, '.'),meal.count]);
                _paq.push(['trackEcommerceCartUpdate',int2price(this.calculate_amount(), false, 2, '.')]);
            }
            catch (err) {
            }
            this.update_view();
        }
        
        this.store();
        
        return hash;
    },
    
    /**
     * remove one meal from stack
     * @author mlaug
     * @since 08.07.2011
     */
    remove_meal: function(hash){
        delete this.meals[hash];
        
        this.update_view();
        this.store();
        
        _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
    },
    
    /**
     * @author vpriem
     * @since 08.06.2012
     * @return ydOrder
     */
    clear_bucket: function(){     
        for (hash in this.meals) {
            delete this.meals[hash];
        }
        
        this.update_view();
        this.store();
        
        _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
        
        return this;
    },
    
    /**
     * get count of meals (do not mind how many of each)
     * @author mlaug
     * @since 26.07.2011
     */
    get_meal_count: function(){
        var count = 0;
        $.each(this.meals, function(k,v){
            count += 1;
        });
        return count;
    },
    
    /**
     * get count of meals (including count of each meal)
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 20.09.2011
     */
    get_meal_count_total: function(){
        var count = 0;
        $.each(this.meals, function(k,meal){
            if ( isNaN(meal.count) ){
                meal.count = 1;
            }
            count += meal.count;
        });
        return count;
    },
    
    /**
     * increase one meal in stack
     * @author mlaug
     * @since 08.07.2011
     */
    increase_meal: function(hash){
        if (this.meals[hash].count < 999) {
            this.meals[hash].count += 1;
        }
        this.update_view();
        this.store();
        _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
    },
    
    /**
     * dcrease one meal in stack
     * @author mlaug
     * @since 08.07.2011
     */
    decrease_meal: function(hash){
        if (this.meals[hash].count <= this.meals[hash].minCount) {
            this.remove_meal(hash);
            this.update_view();
            this.store();
            _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
            return false;
        }
        //it should be already done above, but we leave it here for the case if seom meals have "null" as minCount
        this.meals[hash].count -= 1;
        if (!this.meals[hash].count) {
            this.remove_meal(hash);
        }
        this.update_view();
        this.store();
        _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
    },
    
    /**
     * alter count of meal
     * @author vpriem
     * @since 13.07.2011
     * @return ydOrder
     */
    set_count: function(hash, count){
        count = parseInt(count);
        this.meals[hash].count = count;
        if (!count) {
            this.remove_meal(hash);
        }
        
        if (this.meals[hash].count < this.meals[hash].minCount) {
            this.remove_meal(hash);
        }
        
        this.update_view();
        this.store();
        _paq.push(['trackEcommerceCartUpdate', int2price(this.calculate_amount(), false, 2, '.')]);
        return this;
    },
    
    /**
     * update the entire view with the data
     * of the current order
     * @author mlaug
     * @since 08.07.2011
     */
    update_view: function(){     
        log('calling update_view');
        
        var $pos = $('#yd-shopping-positions').html("");
        
        $.each(this.meals, function(hash, meal){
            log('appending meal ' + hash + ' to current cart');
            $pos.append(meal.getHtml(hash));
        });
        
        $pos.append(
            '<input type="hidden" name="mode" value="' + YdMode + '" />\n\
            <input type="hidden" name="cityId" value="' + ydState.getCity() + '" />'
        );
    
        log('updating values');
            
        this.update_view_deliver_cost();
        this.update_view_amounts();
    },

    update_view_amounts: function(){    
        log('calling update_view_amounts');
        if (this.calculate_amount() > 0) {
            $("#yd-clear-bucket").show();
            $('#emptycart').hide();
        }
        else{
            $("#yd-clear-bucket").hide();
            $('#emptycart').show();
        }
        
        if (this.is_minamount_reached()) {
            $('#minamount').hide();
            $('.yd-finish-order').removeClass('yd-gray-button');
        }
        else{
            $('#minamount').show();
            $('.yd-finish-order').addClass('yd-gray-button');
        }
        
        // new elements to fill in all the amounts needed
        $('.yd-open-amount').html(this.calculate_open_amount(true));
        $('.yd-full-amount').html(this.calculate_amount(true));
        $('.yd-charge').html(this.get_charge(true));  
    },

    /**
     * update the deliver cost seperatly
     * @author mlaug
     * @since 16.08.2011
     */
    update_view_deliver_cost: function(){   
        var cost = this.get_deliver_cost();
        log('updating deliver costs in view: ' + cost);
        
        $(".yd-deliver-cost").html(int2price(cost, true));
        if (cost > 0) {
            $("#delivercost").show();
        }
        else {
            $("#delivercost").hide();
        }
    },

    /**
     * Store this order to storage
     * @author mlaug
     * @since 26.07.2011
     * @return ydOrder
     */
    store: function(){
        //once the view is updated, we store in html5 storage or fallback
        if (this.service_id) {
            log('store order to storage');
            
            this.link_to_menu = location.href;
            try{
                var current = $.Storage.set("order-" + this.service_id + '-' + YdMode, $.base64.encode(JSON.stringify(this)))
                var last = $.Storage.set("order-last", $.base64.encode(JSON.stringify(this)))

                if (current && last) {
                    log('successfully stored order with key: order-' + this.service_id + '-' + YdMode);
                }
                else{
                    log('failed to store order');
                }
            }
            catch ( err ){
                log('failed to store order ' + err);
            }
        }
        else {
            log('no service id received, cannot store order to storage')
        }
        
        return this;
    },
    
    /**
     * Restore this order from storage
     * @author vpriem
     * @since 28.07.2011
     * @return ydOrder
     */
    restore: function(updateView){
        if (!this.service_id) {
            log('no service id received, cannot restore order from storage');
            return this;
        }
            
        if ($("#finishForm").length) {
            log('restore order from form');
            
            var hash = [], id = [], name = [], count = [], cost = [], minCount = [], exMinCost = [], special = [], 
            size = [], sizeName = [];
            $("#finishForm :hidden.yd-order-meal").each(function(index){
                if (index % 9 == 0) {
                    var h = this.id.split("-")[3];
                    hash.push(h);
                    id.push(this.value);
                }
                else if (index % 9 == 1) name.push(this.value);
                else if (index % 9 == 2) cost.push(parseInt(this.value));
                else if (index % 9 == 3) count.push(parseInt(this.value));
                else if (index % 9 == 4) minCount.push(this.value);
                else if (index % 9 == 5) exMinCost.push(this.value);
                else if (index % 9 == 6) special.push(this.value);
                else if (index % 9 == 7) size.push(this.value);
                else if (index % 9 == 8) sizeName.push(this.value);
            });
            var ydMeal;
            for (var i = 0; i < hash.length; i++) {
                ydMeal = new YdMeal();
                ydMeal.id = id[i];
                ydMeal.name = name[i];
                ydMeal.count = parseInt(count[i]);
                ydMeal.minCount = parseInt(minCount[i]);
                ydMeal.exMinCost = parseInt(exMinCost[i]) ? true : false;
                ydMeal.special = special[i];
                ydMeal.size = new YdSize(size[i], sizeName[i], parseInt(cost[i]));
                this.add_meal(ydMeal, hash[i], updateView);
            }
            
            hash = [], id = [], name = [], cost = [];
            $("#finishForm :hidden.yd-order-option").each(function(index){
                if (index % 3 == 0) {
                    var h = this.id.split("-")[3];
                    hash.push(h);
                    id.push(this.value);
                }
                else if (index % 3 == 1) name.push(this.value);
                else if (index % 3 == 2) cost.push(parseInt(this.value));
            });
            var ydOption;
            for (var i = 0; i < hash.length; i++) {
                ydOption = new YdOption(id[i], name[i], cost[i]);
                ydMeal = this.get_meal(hash[i]);
                if (YdMeal !== null) {
                    ydMeal.addOption(ydOption);
                }
            }
            
            hash = [], id = [], name = [], cost = [], count = [];
            $("#finishForm :hidden.yd-order-extra").each(function(index){
                if (index % 5 == 0) {
                    var h = this.id.split("-")[3];
                    hash.push(h);
                    id.push(this.value);
                }
                else if (index % 5 == 2) name.push(this.value);
                else if (index % 5 == 3) cost.push(parseInt(this.value))
                else if (index % 5 == 4) count.push(parseInt(this.value));
            });
            var ydExtra;
            for (var i = 0; i < hash.length; i++) {
                ydExtra = new YdExtra(id[i], name[i], cost[i], count[i]);
                ydMeal = this.get_meal(hash[i]);
                if (YdMeal !== null) {
                    ydMeal.addExtra(ydExtra);
                }
            }
            
            this.deliver_cost = $('input[name="deliverCost"]').intVal() + this.get_floorfee_cost();       
            if ( ydCurrentRanges ){
                this.no_deliver_cost_above = parseInt(ydCurrentRanges[$('input[name="cityId"]').intVal()].noDeliverCostAbove);
            }            
            
            // we need to be sure
            this.store();
            if (updateView) {
                this.update_view();
            }
    
            return this;
        }
        else{  
            var order = null;
            try{
                order = $.Storage.get('order-' + this.service_id + '-' + YdMode);
            }
            catch ( err ){
                log('failed to get order from storage: ' + err);
            }
            if (order) {
                var decodedJson = $.base64.decode(order);
                if (decodedJson) {                
                    log('restore order from storage');
                    try{
                        order = JSON.parse(decodedJson);
                    }
                    catch ( err ){
                        log('failed to parse json from html5 storage: ' + err);
                        return this;
                    }
                    
                    if (order) {
                        if (order.version != this.version) {
                            log('version does not match, remove order from storage');
                            try{
                                $.Storage.remove('order-' + this.service_id);
                            }
                            catch ( err ){
                                log('failed to remove order from storage: ' + err);
                            }
                        }
                        else {
                            //extend all objects with its prototype to add the functions
                            $.extend(this, order, ydOrderPrototype);        
                            $.each(this.meals, function(k, v){
                                ydOrder.meals[k] = $.extend(v, ydMealPrototype); 
                            });

                            if (updateView) {
                                this.update_view();
                            }

                            //after all we validate written html against our object
                            if (!this.validate()) {
                            //what shall we do with the drunken sailor? 
                            }
                        }                    
                    }
                }
                else{
                    log('could not restore base64 string');
                }
            }
            else{
                log('could not find an order in html5 storage');
            }
        }
        
        this.update_view_amounts();
        return this;
    },
    
    /**
     * validate our order object against written html
     * this is needed if we load the html5 storage and the html
     * code has been written by php
     * @author mlaug
     * @since 26.07.2011
     */
    validate: function(){              
        var valid = true;
        
        //validate order cart
        valid = valid && $('.yd-full-amount').html() == this.calculate_amount(true);
        valid = valid && $('.yd-shopping-article').length == this.get_meal_count(true);
        
        //validate discount
        
        //validate anything else?
        
        log('validating html storage with written html, result: ' + valid);
        return valid;
    },
    
    /**
     * Call when finishing order
     * @author vpriem
     * @since 28.07.2011
     * @return ydOrder
     */
    finish: function(){
        if (this.service_id) {
            log('remove order from storage and clearing tracking cookie');
            $.cookie('yd-track',null);
            try{
                $.Storage.remove('order-' + this.service_id + '-' + YdMode);
            }
            catch ( err ){
                log('failed to remove order from storage: ' + err);
            }
        }
        else {
            log('no service id received, cannot remove order from storage')
        }
        
        return this;
    }
    
};

//add functions to ydOrder
$.extend(ydOrder, ydOrderPrototype);
/*! include recurring.js */
/**
 * @author Matthias Laug <laug@lieferando.de>
 * @since 21.05.2012
 * @return ydRecurring
 */
var ydRecurring = {

    _lastorder: null,
    _lastarea: null,
    _lastorderarea: null,

    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    init: function() {
        this._lastorder = null;
        this._lastarea = null;
        this._lastorderarea = null;
        return this;
    },
    
    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    setLastOrder: function(hash){
        log('setting lastorder in recurring cookie to ' + hash);
        this._lastorder = hash;
        return this.save();
    },
    
    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    setLastOrderArea: function(area){
        log('setting lastorderarea in recurring cookie to ' + area);
        this._lastorderarea = area;
        return this.save();
    },
    
    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    setLastArea: function(area){
        log('setting lastarea in recurring cookie to ' + area);
        this._lastarea = area;
        return this.save();
    },
    
    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     */
    loadLastOrder: function(){
        if (this._lastorder !== null) {     
            var $lastorder = $('#yd-my-last-order');
            if ($lastorder.length) {                
                $.ajax({
                    url: '/request_order/lastorder',
                    data: {
                        hash: this._lastorder,
                        mode: ydState.getMode(),
                        kind: ydState.getKind()
                    },
                    success: function (html) {
                        if (html.length) {
                            $lastorder
                            .html(html)
                            .fadeIn('slow');
                        }
                    }
                });
            }
        }
    },
    
    /**
     * inserting last area plz into autocomplete. If an order has been placed
     * we use that one instead of the last type one
     *
     * @author Matthias Laug <laug@lieferando.de>
     * @since 22.05.2012
     */
    loadLastArea: function(){
        var lastarea = this._lastorderarea !== null ? this._lastorderarea : this._lastarea;
        if (lastarea !== null) {
            log('found an area from recurring cookie: ' + lastarea);
            $('form[name="plzAutocomplete"]').each(function(){
                var plzInput = this.plz;
                plzInput.value = lastarea;
                setTimeout(function(){
                    $(plzInput).autocomplete("search" , lastarea); //trigger autocomplete
                }, 1000);
                $(plzInput).bind('keydown.loadlastarea click.loadlastarea', function(e){   
                    if(e.which != 13){
                        log('new input, clearing inserted value');
                        this.value = "";
                        $(this).unbind('.loadlastarea'); 
                    }
                });
            });
        }
    },

    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    read: function(){
        var state = $.cookie('yd-recurring');
        if (state !== null) {
            state = decodeURIComponent($.base64.decode(state)).split("#");
            this._lastorder = state[0] ? state[0] : null;
            this._lastarea = state[1] ? state[1] : null;
            this._lastorderarea = state[2] ? state[2] : null;
        }
        return this;
    },

    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 21.05.2012
     * @return ydRecurring
     */
    save: function(){
        $.cookie('yd-recurring', $.base64.encode(encodeURIComponent([
            this._lastorder,
            this._lastarea,
            this._lastorderarea
            ].join("#"))), {
            path: '/'
        });
        return this;
    }

};

ydRecurring.read();
$(document).ready(function(){
    ydRecurring.loadLastArea();
});
/*! include service.js */
/**
 * @author vpriem
 * @since 21.12.2011
 */
var ydServicePrototype = {
    
    /**
     * @author vpriem
     * @since 21.12.2011
     * @return boolean
     */
    isOpen: function(){
        
        if (this.type != "rest") {
            return false;
        }
        
        if (!this.openings.length) {
           return false; 
        }
        
        var now = new Date().getTimestampSinceMidnight();
        
        for (var i = 0; i < this.openings.length; i++) {
            var from = new Date().setTimestamp(this.openings[i][0]).getTimestampSinceMidnight();
            var until = new Date().setTimestamp(this.openings[i][1]).getTimestampSinceMidnight();

            if (now < from) {
                // never break
            }
            else if (now > until) {
                // never break
            }
            else { // we are between from and until
                return true;
            }
        }

        return false;
    },
    
    
    /**
     * Check if Service is Closing in defined Time
     * @var timeToClose Time in seconds
     * @author dhahn
     * @since 10.05.2012
     */
    isClosing: function(timeToClose) {
        
        if (!timeToClose) {
            timeToClose = 15*60;
        }
                   
        if (!this.openings.length) {
           return false; 
        }
        
        if (!this.isOpen()) {
            return false;
        }
        
        var now = new Date().getTimestampSinceMidnight();
        
        for (var i = 0; i < this.openings.length; i++) {
            var from = new Date().setTimestamp(this.openings[i][0]).getTimestampSinceMidnight();
            var until = new Date().setTimestamp(this.openings[i][1]).getTimestampSinceMidnight();
            
            log("time until:"+ until);
            
            // hack for Openings until next day, 86399 is 23:59:59
            if (until == 86399) {
                var firstFrom  = new Date().setTimestamp(this.openings[0][0]).getTimestampSinceMidnight();
                log("tmp: " + firstFrom);                
                if (firstFrom == 0) {
                    var firstUntil = new Date().setTimestamp(this.openings[0][1]).getTimestampSinceMidnight();
                    until = until + firstUntil;
                    log("final until: " + until);
                }
            }     
            
            if (now < from) {
                // never break;
            }
            else if (now > until) {
                // never break
            }
            else if (now + timeToClose > until) {
                return true;
            }
        }
        
        return false;
        
    }
    
};




/**
 * @author vpriem
 * @since 21.12.2011
 */
function YdService(id, type) {
    
    var service = {
        id: id,
        type: type || "rest",
        openings: []
    };
    
    if (typeof services !== "undefined") {
        $.each(services, function(i, s){
           if (s.id == service.id && s.type == service.type) {
               return $.extend(service, s, ydServicePrototype);
           }
        });
    }
    
    return $.extend(service, ydServicePrototype);
}
/*! include state.js */
/**
 * @author vpriem
 * @since 11.07.2011
 */
var ydState = {

    _city: null,
    _location: null,
    _kind: "priv",
    _mode: "rest",
    _number: 0,
    _verbose: null,

    /**
     * @author vpriem
     * @since 23.08.2011
     * @return ydCustomer
     */
    init: function() {
        this._city = null;
        this._location = null;
        this._kind = "priv";
        this._mode = "rest";
        this._verbose = null;
        return this.save();
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @param int city
     * @return ydState
     */
    setCity: function (city) {
        if (typeof ydCurrentRanges !== "undefined") {
            if (ydCurrentRanges[city] !== undefined) {
                var range = ydCurrentRanges[city];

                $("a.yd-set-city-url").attr("href", "/" + range.restUrl);

                var m =  range.deliverTime / 60;
                if (m < 60) {
                    $(".yd-deliver-time").html($.nlang("minute", "minutes", m, m));
                    $(".yd-menu-handling-time").html($.nlang("minute", "minutes", m, m));
                }
                else {
                    m = parseInt(m / 60);
                    $(".yd-deliver-time").html($.nlang("hour", "hours", m, m));
                    $(".yd-menu-handling-time").html($.nlang("hour", "hours", m, m));
                }

                $('span.yd-set-city-text').html(range.name);
                $('.yd-set-city-url').removeClass('hidden');

                if (typeof ydOrder !== "undefined") {
                    ydOrder.set_deliver_cost(range.deliverCost, range.noDeliverCostAbove)
                           .set_min_amount(range.minCost);
                }
            }
            else {
                return false;
            }
        }

        this._city = city;
        log(city);

        return this.save();
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return string
     */
    getCity: function(){
        return this._city;
    },

    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 22.05.2012
     */
    setVerbose: function(verbose){
        this._verbose = verbose;
        return this.save();
    },
    
    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 22.05.2012
     * @return integer
     */
    getVerbose: function(){
        return this._verbose;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @param int location
     * @return ydState
     */
    setLocation: function (location) {
        this._location = location;
        return this.save();
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return string
     */
    getLocation: function(){
        return this._location;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @param string kind priv|comp
     * @return ydState
     */
    setKind: function (kind) {
        this._kind = kind;
        log('change kind to ' + kind);
        return this.save();
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return string
     */
    getKind: function(){
        return this._kind;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return string
     */
    getMode: function(){
        return YdMode;
    },

    /**
     * @author Matthias Laug <laug@lieferando.de>
     * @since 15.12.2011
     * @return integer
     */
    getNumber: function(number){
        return this._number;
    },

    /**
     * @author Matthias Laug <laug@lieferandode.>
     * @since 15.12.2011
     * @param integer
     */
    setNumber: function(number){
        this._number = number;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return boolean
     */
    maybeLoggedIn: function(){
        var check =  $.cookie('YD_UID') !== null && (
                     ydCustomer.getName() !== null ||
                     ydCustomer.getPrename() !== null);
        if ( !check ){
            $.cookie('YD_UID',null);
        }
        return check;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return ydState
     */
    read: function(){
        var state = $.cookie('yd-state');
        if (state !== null) {
            state = $.base64.decode(state).split("#");
            this._city = state[0] ? state[0] : null;
            this._location = state[1] ? state[1] : null;
            this._kind = state[2] ? state[2] : "priv";
            this._mode = state[3] ? state[3] : "rest";
            this._number = state[4] ? state[4] : 0;
            this._verbose = state[5] ? state[5] : null;
        }
        return this;
    },

    /**
     * @author vpriem
     * @since 11.07.2011
     * @return ydState
     */
    save: function(){
        $.cookie('yd-state', $.base64.encode([this._city, this._location, this._kind, this._mode, this._number, this._verbose].join("#")), {
            path: '/'
        });
        return this;
    }
};
ydState.read();
/*! include 001-base.js */
var YdMode = "rest";

$(document).ready(function(){

    /**
     * login toggle
     * @author oknoblich
     * @since 06.03.2012
     */

    $(".yd-header-login").live('click', function(){
        $(".yd-login-window").toggle();
        $(this).toggleClass("active");
    });

    $(".yd-login-window-toggle").live('click', function(){
        $('.yd-login-window-top, .yd-login-window-bottom').slideToggle();
        $(this).toggleClass("active");
    });
    
    /**
     * close login window on click outside
     * @author bseifert
     * @since 30.08.2012
     */
    
    if($('.yd-login-window').length > 0){
        $('body').bind('click', function(event){
            var $target = $(event.target);
            if($target.parents('.yd-login-window').length > 0 || $target.hasClass('yd-header-login')){
                return;
            }        
            $('.yd-login-window').hide();
            $('.yd-header-login').removeClass('active');
        });
    }

    /**
     * button shining
     * @author oknoblich
     * @since 15.02.2012
     */

    var shine = function(){
        setTimeout(function(){
            $(".shine").animate({
                backgroundPosition: '350px'
            },1000, function(){
                $(".shine").css("background-position","-100px");
                shine();
            }); 
        }, 2000);
    };
    shine();

    /**
     * tabs global
     * @author oknoblich
     * @since 07.03.2011
     */

    $('#tabs').tabs({
        fx: {
            opacity: 'toggle'
        }
    });
    $('#subtabs').tabs({
        fx: {
            opacity: 'toggle'
        }
    });
    $('#subtabs2').tabs({
        fx: {
            opacity: 'toggle'
        }
    });

    /**
     * scroll to top button
     * @author oknoblich
     * @since 08.12.2011
     */

    $().UItoTop({
        easingType: 'easeOutQuart'
    });

    /**
     * button loading animation on click
     * @author oknoblich
     * @since 29.11.2011
     */
    if(!$.browser.msie || parseInt($.browser.version, 10) > 8) { // YD-3602: Doesn't work in IE 6,7,8
        $('.yd-button-140, .yd-button-190, .yd-button-240, .yd-button-250, .yd-button-280').wrapInner('<span></span>');
    }

    /**
     * simple tooltip
     * @author oknoblich
     * @since 29.11.2011
     */

    $("#yd-clear-bucket, .td-edit, .td-check, .td-heart, .td-letsgo, .td-delete, .td-thumb, .td-show, .td-star, .td-repeat").simpletooltip();

    /**
     * how it works
     * @author oknoblich
     * @since 27.07.2012
     */

    $("#yd-howitworks-new, .yd-header-how").live('click', function(){
        openDialog('/request/howitworks', {
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
        });
        return false;
    });

    /**
     * Dynamic dialog creation
     * @author mlaug
     * @since 24.06.2011
     */

    if ($('.yd-open-dialog-on-load').length) {
        var popup = $('.yd-open-dialog-on-load');
        popup.dialog({
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            },
            beforeClose: function(){
                return false;
            }
        });
        $('div.ui-dialog').attr('id','dialog-' + popup.attr('id'));       
    }

    /**
     * Cookie detection
     * @author vpriem
     * @since 10.02.2011
     */
    if (!isCookieEnabled()) {
        notification('error', "Sie kÃ¶nnen diese Seite leider nicht ohne Cookies verwenden!", true);
    }

    /**
     * Form validation and infos
     * @author vpriem
     * @since 10.02.2011
     */
    $(':input.yd-form-invalid').each(function(){
        if (this.value.length) {
            $(this)
            .removeClass('yd-form-invalid')
            .addClass('yd-form-valid');
        }
    });
    $(':input.yd-form-input')
    .live('focus', function(){
        $(".yd-form-info, .yd-form-info-left").hide();
        $(this)
        .closest("ul")
        .find(".yd-form-info")
        .show();
    })
    .live('blur', function(){
        if (this.value.length) {
            $(this)
            .removeClass('yd-form-invalid')
            .addClass('yd-form-valid');
        }
        else{
            $(this)
            .removeClass('yd-form-valid')
            .addClass('yd-form-invalid');
        }
        $(this)
        .closest("ul")
        .find(".yd-form-info")
        .hide();
    });

    /**
     * Check plz
     * @author vpriem
     * @since 10.02.2011
     */
    $('#yd-form-register-plz').live('blur', function(){
        var $input = $(this);
        $.ajax({
            url: '/request/ort/',
            data: {
                plz: this.value
            },
            success: function (json) {
                $('#dynamic-ort').html(json.ort);
            },
            error: function(){
                $('#dynamic-ort').html('Ort nicht gefunden');
                $input
                .removeClass('yd-form-valid')
                .addClass('yd-form-invalid');
            },
            dataType: "json"
        });
    });
 
    /**
     * Show user informations
     * @author vpriem
     * @since 25.07.2011
     */
    if (ydState.maybeLoggedIn()) {
        $('.yd-logged-out').hide();
        $('.yd-logged-in').show();
        
        $('.yd-customer-name')
        .html(ydCustomer.getFullname());
        if (ydCustomer.getFullname().length > 25) {
            $('.yd-customer-name')
            .html(ydCustomer.getFullname().slice(0, 25) + "...")
            .attr("title", ydCustomer.getFullname())
            .tooltip();
        }
        
        if (ydCustomer.getCompany()) {          
            $('.yd-customer-company')
            .html(' | ' + ydCustomer.getCompany())
            .show();
            if (ydCustomer.getCompany().length > 25) {
                $('.yd-customer-company')
                .html(' | ' + ydCustomer.getCompany().slice(0, 25) + "...")
                .attr("title", ydCustomer.getCompany())
                .tooltip();
            }
        }
        
        if (ydCustomer.isAdmin()) {
            $("#yd-customer-company-admin").show();
        }
        if($('#fb-connect').length) {
            window.fbAsyncInit = function() {
                $('.yd-form-facebook-block').show();
                fbAsyncInitConnect();
                $('.yd-facebook-login').live('click',function(){
                    FB.login(function(response) {
                        if (response.authResponse) {
                            location.href = "/user/fb-connect/?redirect_url=" + encodeURI(document.location.href);
                        }
                    }, {
                        scope: 'email,user_birthday,publish_actions'
                    });
                });
            }
        }
    } else if(typeof(FbAppId) != "undefined") {
        window.fbAsyncInit = function() {
            fbAsyncInitConnect();
            FB.getLoginStatus(function(response) {
                $('.yd-login-window-fb, #fb-login, .yd-form-facebook-block').show();
                if (response.status === 'connected') {
                    $('.yd-facebook-login').prop("href", "/user/fb-login/?redirect_url=" + encodeURI(document.location.href));
                } else {
                    $('.yd-facebook-login').live('click',function(){
                        FB.login(function(response) {
                            if (response.authResponse) {
                                location.href = "/user/fb-login/?redirect_url=" + encodeURI(document.location.href);
                            }
                        }, {
                            scope: 'email,user_birthday,publish_actions'
                        });
                    });
                }
            });
        }
    }
    
    /**
     * Go back
     * @author vpriem
     * @since 29.09.2011
     */
    $(".yd-go-back").live('click', function(){
        historyBack();
        return false;
    });
    
});
/*! include 001-piwik.js */
/*!
 * Piwik - Web Analytics
 *
 * JavaScript tracking client
 *
 * @link http://piwik.org
 * @source http://dev.piwik.org/trac/browser/trunk/js/piwik.js
 * @license http://www.opensource.org/licenses/bsd-license.php Simplified BSD
 */

// Refer to README for build instructions when minifying this file for distribution.

/*
 * Browser [In]Compatibility
 * - minimum required ECMAScript: ECMA-262, edition 3
 *
 * Incompatible with these (and earlier) versions of:
 * - IE4 - try..catch and for..in introduced in IE5
 * - IE5 - named anonymous functions, array.push, encodeURIComponent, and decodeURIComponent introduced in IE5.5
 * - Firefox 1.0 and Netscape 8.x - FF1.5 adds array.indexOf, among other things
 * - Mozilla 1.7 and Netscape 6.x-7.x
 * - Netscape 4.8
 * - Opera 6 - Error object (and Presto) introduced in Opera 7
 * - Opera 7
 */

/************************************************************
 * JSON - public domain reference implementation by Douglas Crockford
 * @link http://www.JSON.org/json2.js
 ************************************************************/
/*jslint evil: true, strict: true, regexp: false */
/*global JSON2 */
/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON2, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf,
    objectToJSON
*/

// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

if (!this.JSON2) {
    this.JSON2 = {};
}

(function () {
    "use strict";

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    function objectToJSON(value, key) {
        var objectType = Object.prototype.toString.apply(value);

        if (objectType === '[object Date]') {
            return isFinite(value.valueOf()) ?
            value.getUTCFullYear()     + '-' +
            f(value.getUTCMonth() + 1) + '-' +
            f(value.getUTCDate())      + 'T' +
            f(value.getUTCHours())     + ':' +
            f(value.getUTCMinutes())   + ':' +
            f(value.getUTCSeconds())   + 'Z' : null;
        }

        if (objectType === '[object String]' ||
            objectType === '[object Number]' ||
            objectType === '[object Boolean]') {
            return value.valueOf();
        }

        if (objectType !== '[object Array]' &&
            typeof value.toJSON === 'function') {
            return value.toJSON(key);
        }

        return value;
    }

    var cx = new RegExp('[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]', 'g'),
    // hack: workaround Snort false positive (sid 8443)
    pattern = '\\\\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',
    escapable = new RegExp('[' + pattern, 'g'),
    gap,
    indent,
    meta = {    // table of character substitutions
        '\b': '\\b',
        '\t': '\\t',
        '\n': '\\n',
        '\f': '\\f',
        '\r': '\\r',
        '"' : '\\"',
        '\\': '\\\\'
    },
    rep;

    function quote(string) {

        // If the string contains no control characters, no quote characters, and no
        // backslash characters, then we can safely slap some quotes around it.
        // Otherwise we must also replace the offending characters with safe escape
        // sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string' ? c :
            '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }

    function str(key, holder) {

        // Produce a string from holder[key].

        var i,          // The loop counter.
        k,          // The member key.
        v,          // The member value.
        length,
        mind = gap,
        partial,
        value = holder[key];

        // If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object') {
            value = objectToJSON(value, key);
        }

        // If we were called with a replacer function, then call the replacer to
        // obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

        // What happens next depends on the value's type.

        switch (typeof value) {
            case 'string':
                return quote(value);

            case 'number':

                // JSON numbers must be finite. Encode non-finite numbers as null.

                return isFinite(value) ? String(value) : 'null';

            case 'boolean':
            case 'null':

                // If the value is a boolean or null, convert it to a string. Note:
                // typeof null does not produce 'null'. The case is included here in
                // the remote chance that this gets fixed someday.

                return String(value);

            // If the type is 'object', we might be dealing with an object or an array or
            // null.

            case 'object':

                // Due to a specification blunder in ECMAScript, typeof null is 'object',
                // so watch out for that case.

                if (!value) {
                    return 'null';
                }

                // Make an array to hold the partial results of stringifying this object value.

                gap += indent;
                partial = [];

                // Is the value an array?

                if (Object.prototype.toString.apply(value) === '[object Array]') {

                    // The value is an array. Stringify every element. Use null as a placeholder
                    // for non-JSON values.

                    length = value.length;
                    for (i = 0; i < length; i += 1) {
                        partial[i] = str(i, value) || 'null';
                    }

                    // Join all of the elements together, separated with commas, and wrap them in
                    // brackets.

                    v = partial.length === 0 ? '[]' : gap ?
                    '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' :
                    '[' + partial.join(',') + ']';
                    gap = mind;
                    return v;
                }

                // If the replacer is an array, use it to select the members to be stringified.

                if (rep && typeof rep === 'object') {
                    length = rep.length;
                    for (i = 0; i < length; i += 1) {
                        if (typeof rep[i] === 'string') {
                            k = rep[i];
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ': ' : ':') + v);
                            }
                        }
                    }
                } else {

                    // Otherwise, iterate through all of the keys in the object.

                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ': ' : ':') + v);
                            }
                        }
                    }
                }

                // Join all of the member texts together, separated with commas,
                // and wrap them in braces.

                v = partial.length === 0 ? '{}' : gap ?
                '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' :
                '{' + partial.join(',') + '}';
                gap = mind;
                return v;
        }
    }

    // If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON2.stringify !== 'function') {
        JSON2.stringify = function (value, replacer, space) {

            // The stringify method takes a value and an optional replacer, and an optional
            // space parameter, and returns a JSON text. The replacer can be a function
            // that can replace values, or an array of strings that will select the keys.
            // A default replacer method can be provided. Use of the space parameter can
            // produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

            // If the space parameter is a number, make an indent string containing that
            // many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

            // If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

            // If there is a replacer, it must be a function or an array.
            // Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

            // Make a fake root object containing our value under the key of ''.
            // Return the result of stringifying the value.

            return str('', {
                '': value
            });
        };
    }

    // If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON2.parse !== 'function') {
        JSON2.parse = function (text, reviver) {

            // The parse method takes a text and an optional reviver function, and returns
            // a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

                // The walk method is used to recursively walk the resulting structure so
                // that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }

            // Parsing happens in four stages. In the first stage, we replace certain
            // Unicode characters with escape sequences. JavaScript handles many characters
            // incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return '\\u' +
                    ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

            // In the second stage, we run the text against regular expressions that look
            // for non-JSON patterns. We are especially concerned with '()' and 'new'
            // because they can cause invocation, and '=' because it can cause mutation.
            // But just to be safe, we want to reject all unexpected forms.

            // We split the second stage into 4 regexp operations in order to work around
            // crippling inefficiencies in IE's and Safari's regexp engines. First we
            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
            // replace all simple value tokens with ']' characters. Third, we delete all
            // open brackets that follow a colon or comma or that begin the text. Finally,
            // we look to see that the remaining characters are only whitespace or ']' or
            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if ((new RegExp('^[\\],:{}\\s]*$'))
                .test(text.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})', 'g'), '@')
                    .replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?', 'g'), ']')
                    .replace(new RegExp('(?:^|:|,)(?:\\s*\\[)+', 'g'), ''))) {

                // In the third stage we use the eval function to compile the text into a
                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity
                // in JavaScript: it can begin a block or an object literal. We wrap the text
                // in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

                // In the optional fourth stage, we recursively walk the new structure, passing
                // each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function' ?
                walk({
                    '': j
                }, '') : j;
            }

            // If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());
/************************************************************
 * end JSON
 ************************************************************/

/*jslint browser:true, plusplus:false, onevar:false, strict:true, evil:true */
/*global window unescape ActiveXObject _paq:true */
/*members encodeURIComponent, decodeURIComponent,
	shift, unshift,
	addEventListener, attachEvent, removeEventListener, detachEvent,
	cookie, domain, readyState, documentElement, doScroll, title,
	location, top, document, referrer, parent, links, href, protocol, GearsFactory,
	event, which, button, srcElement, type, target,
	parentNode, tagName, hostname, className,
	userAgent, cookieEnabled, platform, mimeTypes, enabledPlugin, javaEnabled,
	XDomainRequest, XMLHttpRequest, ActiveXObject, open, setRequestHeader, onreadystatechange, setRequestHeader, send, readyState, status,
	getTime, setTime, toGMTString, getHours, getMinutes, getSeconds,
	toLowerCase, charAt, indexOf, lastIndexOf, split, slice,
	onLoad, src,
	round, random,
	exec,
	res, width, height,
	pdf, qt, realp, wma, dir, fla, java, gears, ag,
	hook, getHook, getVisitorId, getVisitorInfo, setTrackerUrl, setSiteId,
	getAttributionInfo, getAttributionCampaignName, getAttributionCampaignKeyword, 
	getAttributionReferrerTimestamp, getAttributionReferrerUrl
	setCustomData, getCustomData,
	setCustomVariable, getCustomVariable, deleteCustomVariable,
	setDownloadExtensions, addDownloadExtensions,
	setDomains, setIgnoreClasses, setRequestMethod,
	setReferrerUrl, setCustomUrl, setDocumentTitle,
	setDownloadClasses, setLinkClasses,
	setCampaignNameKey, setCampaignKeywordKey,
	discardHashTag,
	setCookieNamePrefix, setCookieDomain, setCookiePath, setVisitorIdCookie,
	setVisitorCookieTimeout, setSessionCookieTimeout, setReferralCookieTimeout
	setConversionAttributionFirstReferrer,
	doNotTrack, setDoNotTrack,
	addListener, enableLinkTracking, setLinkTrackingTimer,
	setHeartBeatTimer, killFrame, redirectFile,
	trackGoal, trackLink, trackPageView, setEcommerceView, addEcommerceItem, trackEcommerceOrder, trackEcommerceCartUpdate,
	addPlugin, getTracker, getAsyncTracker
*/
var
// asynchronous tracker (or proxy)
_paq = _paq || [],

// Piwik singleton and namespace
Piwik =	Piwik || (function () {
    "use strict";

    /************************************************************
		 * Private data
		 ************************************************************/

    var expireDateTime,

    /* plugins */
    plugins = {},

    /* alias frequently used globals for added minification */
    documentAlias = document,
    navigatorAlias = navigator,
    screenAlias = screen,
    windowAlias = window,

    /* DOM Ready */
    hasLoaded = false,
    registeredOnLoadHandlers = [],

    /* encode */
    encodeWrapper = windowAlias.encodeURIComponent,

    /* decode */
    decodeWrapper = windowAlias.decodeURIComponent,

    /* asynchronous tracker */
    asyncTracker,

    /* iterator */
    i;

    /************************************************************
		 * Private methods
		 ************************************************************/

    /*
		 * Is property defined?
		 */
    function isDefined(property) {
        return typeof property !== 'undefined';
    }

    /*
		 * Is property a function?
		 */
    function isFunction(property) {
        return typeof property === 'function';
    }

    /*
		 * Is property an object?
		 *
		 * @return bool Returns true if property is null, an Object, or subclass of Object (i.e., an instanceof String, Date, etc.)
		 */
    function isObject(property) {
        return typeof property === 'object';
    }

    /*
		 * Is property a string?
		 */
    function isString(property) {
        return typeof property === 'string' || property instanceof String;
    }

    /*
		 * apply wrapper
		 *
		 * @param array parameterArray An array comprising either:
		 *      [ 'methodName', optional_parameters ]
		 * or:
		 *      [ functionObject, optional_parameters ]
		 */
    function apply(parameterArray) {
        var f = parameterArray.shift();

        if (isString(f)) {
            asyncTracker[f].apply(asyncTracker, parameterArray);
        } else {
            f.apply(asyncTracker, parameterArray);
        }
    }

    /*
		 * Cross-browser helper function to add event handler
		 */
    function addEventListener(element, eventType, eventHandler, useCapture) {
        if (element.addEventListener) {
            element.addEventListener(eventType, eventHandler, useCapture);
            return true;
        }
        if (element.attachEvent) {
            return element.attachEvent('on' + eventType, eventHandler);
        }
        element['on' + eventType] = eventHandler;
    }

    /*
		 * Call plugin hook methods
		 */
    function executePluginMethod(methodName, callback) {
        var result = '',
        i,
        pluginMethod;

        for (i in plugins) {
            if (Object.prototype.hasOwnProperty.call(plugins, i)) {
                pluginMethod = plugins[i][methodName];
                if (isFunction(pluginMethod)) {
                    result += pluginMethod(callback);
                }
            }
        }

        return result;
    }

    /*
		 * Handle beforeunload event
		 *
		 * Subject to Safari's "Runaway JavaScript Timer" and
		 * Chrome V8 extension that terminates JS that exhibits
		 * "slow unload", i.e., calling getTime() > 1000 times
		 */
    function beforeUnloadHandler() {
        var now;

        executePluginMethod('unload');

        /*
			 * Delay/pause (blocks UI)
			 */
        if (expireDateTime) {
            // the things we do for backwards compatibility...
            // in ECMA-262 5th ed., we could simply use:
            //     while (Date.now() < expireDateTime) { }
            do {
                now = new Date();
            } while (now.getTime() < expireDateTime);
        }
    }

    /*
		 * Handler for onload event
		 */
    function loadHandler() {
        var i;

        if (!hasLoaded) {
            hasLoaded = true;
            executePluginMethod('load');
            for (i = 0; i < registeredOnLoadHandlers.length; i++) {
                registeredOnLoadHandlers[i]();
            }
        }
        return true;
    }

    /*
		 * Add onload or DOM ready handler
		 */
    function addReadyListener() {
        var _timer;

        if (documentAlias.addEventListener) {
            addEventListener(documentAlias, 'DOMContentLoaded', function ready() {
                documentAlias.removeEventListener('DOMContentLoaded', ready, false);
                loadHandler();
            });
        } else if (documentAlias.attachEvent) {
            documentAlias.attachEvent('onreadystatechange', function ready() {
                if (documentAlias.readyState === 'complete') {
                    documentAlias.detachEvent('onreadystatechange', ready);
                    loadHandler();
                }
            });

            if (documentAlias.documentElement.doScroll && windowAlias === windowAlias.top) {
                (function ready() {
                    if (!hasLoaded) {
                        try {
                            documentAlias.documentElement.doScroll('left');
                        } catch (error) {
                            setTimeout(ready, 0);
                            return;
                        }
                        loadHandler();
                    }
                }());
            }
        }

        // sniff for older WebKit versions
        if ((new RegExp('WebKit')).test(navigatorAlias.userAgent)) {
            _timer = setInterval(function () {
                if (hasLoaded || /loaded|complete/.test(documentAlias.readyState)) {
                    clearInterval(_timer);
                    loadHandler();
                }
            }, 10);
        }

        // fallback
        addEventListener(windowAlias, 'load', loadHandler, false);
    }

    /*
		 * Get page referrer
		 */
    function getReferrer() {
        var referrer = '';

        try {
            referrer = windowAlias.top.document.referrer;
        } catch (e) {
            if (windowAlias.parent) {
                try {
                    referrer = windowAlias.parent.document.referrer;
                } catch (e2) {
                    referrer = '';
                }
            }
        }
        if (referrer === '') {
            referrer = documentAlias.referrer;
        }

        return referrer;
    }

    /*
		 * Extract scheme/protocol from URL
		 */
    function getProtocolScheme(url) {
        var e = new RegExp('^([a-z]+):'),
        matches = e.exec(url);

        return matches ? matches[1] : null;
    }

    /*
		 * Extract hostname from URL
		 */
    function getHostName(url) {
        // scheme : // [username [: password] @] hostame [: port] [/ [path] [? query] [# fragment]]
        var e = new RegExp('^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)'),
        matches = e.exec(url);

        return matches ? matches[1] : url;
    }

    /*
		 * Extract parameter from URL
		 */
    function getParameter(url, name) {
        // scheme : // [username [: password] @] hostame [: port] [/ [path] [? query] [# fragment]]
        var e = new RegExp('^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)'),
        matches = e.exec(url),
        f = new RegExp('(?:^|&)' + name + '=([^&]*)'),
        result = matches ? f.exec(matches[1]) : 0;

        return result ? decodeWrapper(result[1]) : '';
    }

    /*
		 * Set cookie value
		 */
    function setCookie(cookieName, value, msToExpire, path, domain, secure) {
        var expiryDate;

        // relative time to expire in milliseconds
        if (msToExpire) {
            expiryDate = new Date();
            expiryDate.setTime(expiryDate.getTime() + msToExpire);
        }

        documentAlias.cookie = cookieName + '=' + encodeWrapper(value) +
        (msToExpire ? ';expires=' + expiryDate.toGMTString() : '') +
        ';path=' + (path ? path : '/') +
        (domain ? ';domain=' + domain : '') +
        (secure ? ';secure' : '');
    }

    /*
		 * Get cookie value
		 */
    function getCookie(cookieName) {
        var cookiePattern = new RegExp('(^|;)[ ]*' + cookieName + '=([^;]*)'),

        cookieMatch = cookiePattern.exec(documentAlias.cookie);

        return cookieMatch ? decodeWrapper(cookieMatch[2]) : 0;
    }

    /*
		 * UTF-8 encoding
		 */
    function utf8_encode(argString) {
        return unescape(encodeWrapper(argString));
    }

    /************************************************************
		 * sha1
		 * - based on sha1 from http://phpjs.org/functions/sha1:512 (MIT / GPL v2)
		 ************************************************************/
    function sha1(str) {
        // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)
        // + namespaced by: Michael White (http://getsprink.com)
        // +      input by: Brett Zamir (http://brett-zamir.me)
        // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
        // +   jslinted by: Anthon Pang (http://piwik.org)

        var
        rotate_left = function (n, s) {
            return (n << s) | (n >>> (32 - s));
        },

        cvt_hex = function (val) {
            var str = '',
            i,
            v;

            for (i = 7; i >= 0; i--) {
                v = (val >>> (i * 4)) & 0x0f;
                str += v.toString(16);
            }
            return str;
        },

        blockstart,
        i,
        j,
        W = [],
        H0 = 0x67452301,
        H1 = 0xEFCDAB89,
        H2 = 0x98BADCFE,
        H3 = 0x10325476,
        H4 = 0xC3D2E1F0,
        A,
        B,
        C,
        D,
        E,
        temp,
        str_len,
        word_array = [];

        str = utf8_encode(str);
        str_len = str.length;

        for (i = 0; i < str_len - 3; i += 4) {
            j = str.charCodeAt(i) << 24 | str.charCodeAt(i + 1) << 16 |
            str.charCodeAt(i + 2) << 8 | str.charCodeAt(i + 3);
            word_array.push(j);
        }

        switch (str_len & 3) {
            case 0:
                i = 0x080000000;
                break;
            case 1:
                i = str.charCodeAt(str_len - 1) << 24 | 0x0800000;
                break;
            case 2:
                i = str.charCodeAt(str_len - 2) << 24 | str.charCodeAt(str_len - 1) << 16 | 0x08000;
                break;
            case 3:
                i = str.charCodeAt(str_len - 3) << 24 | str.charCodeAt(str_len - 2) << 16 | str.charCodeAt(str_len - 1) << 8 | 0x80;
                break;
        }

        word_array.push(i);

        while ((word_array.length & 15) !== 14) {
            word_array.push(0);
        }

        word_array.push(str_len >>> 29);
        word_array.push((str_len << 3) & 0x0ffffffff);

        for (blockstart = 0; blockstart < word_array.length; blockstart += 16) {
            for (i = 0; i < 16; i++) {
                W[i] = word_array[blockstart + i];
            }

            for (i = 16; i <= 79; i++) {
                W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);
            }

            A = H0;
            B = H1;
            C = H2;
            D = H3;
            E = H4;

            for (i = 0; i <= 19; i++) {
                temp = (rotate_left(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5A827999) & 0x0ffffffff;
                E = D;
                D = C;
                C = rotate_left(B, 30);
                B = A;
                A = temp;
            }

            for (i = 20; i <= 39; i++) {
                temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & 0x0ffffffff;
                E = D;
                D = C;
                C = rotate_left(B, 30);
                B = A;
                A = temp;
            }

            for (i = 40; i <= 59; i++) {
                temp = (rotate_left(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8F1BBCDC) & 0x0ffffffff;
                E = D;
                D = C;
                C = rotate_left(B, 30);
                B = A;
                A = temp;
            }

            for (i = 60; i <= 79; i++) {
                temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & 0x0ffffffff;
                E = D;
                D = C;
                C = rotate_left(B, 30);
                B = A;
                A = temp;
            }

            H0 = (H0 + A) & 0x0ffffffff;
            H1 = (H1 + B) & 0x0ffffffff;
            H2 = (H2 + C) & 0x0ffffffff;
            H3 = (H3 + D) & 0x0ffffffff;
            H4 = (H4 + E) & 0x0ffffffff;
        }

        temp = cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);
        return temp.toLowerCase();
    }
    /************************************************************
		 * end sha1
		 ************************************************************/

    /*
		 * Fix-up URL when page rendered from search engine cache or translated page
		 */
    function urlFixup(hostName, href, referrer) {
        if (hostName === 'translate.googleusercontent.com') {		// Google
            if (referrer === '') {
                referrer = href;
            }
            href = getParameter(href, 'u');
            hostName = getHostName(href);
        } else if (hostName === 'cc.bingj.com' ||					// Bing
            hostName === 'webcache.googleusercontent.com' ||	// Google
            hostName.slice(0, 5) === '74.6.') {					// Yahoo (via Inktomi 74.6.0.0/16)
            href = documentAlias.links[0].href;
            hostName = getHostName(href);
        }
        return [hostName, href, referrer];
    }

    /*
		 * Fix-up domain
		 */
    function domainFixup(domain) {
        var dl = domain.length;

        // remove trailing '.'
        if (domain.charAt(--dl) === '.') {
            domain = domain.slice(0, dl);
        }
        // remove leading '*'
        if (domain.slice(0, 2) === '*.') {
            domain = domain.slice(1);
        }
        return domain;
    }

    /*
		 * Piwik Tracker class
		 *
		 * trackerUrl and trackerSiteId are optional arguments to the constructor
		 *
		 * See: Tracker.setTrackerUrl() and Tracker.setSiteId()
		 */
    function Tracker(trackerUrl, siteId) {

        /************************************************************
			 * Private members
			 ************************************************************/

        var
        /*<DEBUG>*/
        /*
				 * registered test hooks
				 */
        registeredHooks = {},
        /*</DEBUG>*/

        // Current URL and Referrer URL
        locationArray = urlFixup(documentAlias.domain, windowAlias.location.href, getReferrer()),
        domainAlias = domainFixup(locationArray[0]),
        locationHrefAlias = locationArray[1],
        configReferrerUrl = locationArray[2],

        // Request method (GET or POST)
        configRequestMethod = 'GET',

        // Tracker URL
        configTrackerUrl = trackerUrl || '',

        // Site ID
        configTrackerSiteId = siteId || '',

        // Document URL
        configCustomUrl,

        // Document title
        configTitle = documentAlias.title,

        // Extensions to be treated as download links
        configDownloadExtensions = '7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip',

        // Hosts or alias(es) to not treat as outlinks
        configHostsAlias = [domainAlias],

        // HTML anchor element classes to not track
        configIgnoreClasses = [],

        // HTML anchor element classes to treat as downloads
        configDownloadClasses = [],

        // HTML anchor element classes to treat at outlinks
        configLinkClasses = [],

        // Maximum delay to wait for web bug image to be fetched (in milliseconds)
        configTrackerPause = 500,

        // Minimum visit time after initial page view (in milliseconds)
        configMinimumVisitTime,

        // Recurring heart beat after initial ping (in milliseconds)
        configHeartBeatTimer,

        // Disallow hash tags in URL
        configDiscardHashTag,

        // Custom data
        configCustomData,

        // Campaign names
        configCampaignNameParameters = [ 'pk_campaign', 'piwik_campaign', 'utm_campaign', 'utm_source', 'utm_medium' ],

        // Campaign keywords
        configCampaignKeywordParameters = [ 'pk_kwd', 'piwik_kwd', 'utm_term' ],

        // First-party cookie name prefix
        configCookieNamePrefix = '_pk_',

        // First-party cookie domain
        // User agent defaults to origin hostname
        configCookieDomain,

        // First-party cookie path
        // Default is user agent defined.
        configCookiePath,

        // Do Not Track
        configDoNotTrack,

        // Do we attribute the conversion to the first referrer or the most recent referrer?
        configConversionAttributionFirstReferrer,

        // Life of the visitor cookie (in milliseconds)
        configVisitorCookieTimeout = 63072000000, // 2 years

        // Life of the session cookie (in milliseconds)
        configSessionCookieTimeout = 1800000, // 30 minutes

        // Life of the referral cookie (in milliseconds)
        configReferralCookieTimeout = 15768000000, // 6 months
				
        // Should cookies have the secure flag set
        cookieSecure = documentAlias.location.protocol === 'https',

        // Custom Variables read from cookie, scope "visit" 
        customVariables = false,
				
        // Custom Variables, scope "page"
        customVariablesPage = {},
				
        // Custom Variables names and values are each truncated before being sent in the request or recorded in the cookie
        customVariableMaximumLength = 100,

        // Maximum number of custom variables
        maxCustomVariables = 5,

        // Ecommerce items
        ecommerceItems = {},
				
        // Browser features via client-side data collection
        browserFeatures = {},

        // Guard against installing the link tracker more than once per Tracker instance
        linkTrackingInstalled = false,

        // Guard against installing the activity tracker more than once per Tracker instance
        activityTrackingInstalled = false,

        // Last activity timestamp
        lastActivityTime,

        // Internal state of the pseudo click handler
        lastButton,
        lastTarget,

        // Hash function
        hash = sha1,

        // Domain hash value
        domainHash,

        // Visitor UUID
        visitorUUID;

        /*
			 * Removes hash tag from the URL
			 * 
			 * URLs are purified before being recorded in the cookie,
			 * or before being sent as GET parameters
			 */
        function purify(url) {
            var targetPattern;

            if (configDiscardHashTag) {
                targetPattern = new RegExp('#.*');
                return url.replace(targetPattern, '');
            }
            return url;
        }

        /*
			 * Resolve relative reference
			 *
			 * Note: not as described in rfc3986 section 5.2
			 */
        function resolveRelativeReference(baseUrl, url) {
            var protocol = getProtocolScheme(url),
            i;

            if (protocol) {
                return url;
            }

            if (url.slice(0, 1) === '/') {
                return getProtocolScheme(baseUrl) + '://' + getHostName(baseUrl) + url;
            }

            baseUrl = purify(baseUrl);
            if ((i = baseUrl.indexOf('?')) >= 0) {
                baseUrl = baseUrl.slice(0, i);
            }
            if ((i = baseUrl.lastIndexOf('/')) !== baseUrl.length - 1) {
                baseUrl = baseUrl.slice(0, i + 1);
            }

            return baseUrl + url;
        }

        /*
			 * Is the host local? (i.e., not an outlink)
			 */
        function isSiteHostName(hostName) {
            var i,
            alias,
            offset;

            for (i = 0; i < configHostsAlias.length; i++) {
                alias = domainFixup(configHostsAlias[i].toLowerCase());

                if (hostName === alias) {
                    return true;
                }

                if (alias.slice(0, 1) === '.') {
                    if (hostName === alias.slice(1)) {
                        return true;
                    }

                    offset = hostName.length - alias.length;
                    if ((offset > 0) && (hostName.slice(offset) === alias)) {
                        return true;
                    }
                }
            }
            return false;
        }

        /*
			 * Send image request to Piwik server using GET.
			 * The infamous web bug (or beacon) is a transparent, single pixel (1x1) image
			 */
        function getImage(request) {
            var image = new Image(1, 1);

            image.onLoad = function () { };
            image.src = configTrackerUrl + (configTrackerUrl.indexOf('?') < 0 ? '?' : '&') + request;
        }

        /*
			 * POST request to Piwik server using XMLHttpRequest.
			 */
        function sendXmlHttpRequest(request) {
            try {
                // we use the progid Microsoft.XMLHTTP because
                // IE5.5 included MSXML 2.5; the progid MSXML2.XMLHTTP
                // is pinned to MSXML2.XMLHTTP.3.0
                var xhr = windowAlias.XDomainRequest ? new windowAlias.XDomainRequest() :
                windowAlias.XMLHttpRequest ? new windowAlias.XMLHttpRequest() :
                windowAlias.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') :
                null;

                xhr.open('POST', configTrackerUrl, true);

                // fallback on error
                xhr.onreadystatechange = function () { 
                    if (this.readyState === 4 && this.status !== 200) { 
                        getImage(request); 
                    } 
                }; 

                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');

                // Safari: unsafe headers
                //					xhr.setRequestHeader('Content-Length', request.length);
                //					xhr.setRequestHeader('Connection', 'close');
                xhr.send(request);
            } catch (e) {
                // fallback
                getImage(request);
            }
        }

        /*
			 * Send request
			 */
        function sendRequest(request, delay) {
            var now = new Date();

            if (!configDoNotTrack) {
                if (configRequestMethod === 'POST') {
                    sendXmlHttpRequest(request);
                } else {
                    getImage(request);
                }

                expireDateTime = now.getTime() + delay;
            }
        }

        /*
			 * Get cookie name with prefix and domain hash
			 */
        function getCookieName(baseName) {
            // NOTE: If the cookie name is changed, we must also update the PiwikTracker.php which 
            // will attempt to discover first party cookies. eg. See the PHP Client method getVisitorId() 
            return configCookieNamePrefix + baseName + '.' + configTrackerSiteId + '.' + domainHash;
        }

        /*
			 * Does browser have cookies enabled (for this site)?
			 */
        function hasCookies() {
            var testCookieName = getCookieName('testcookie');

            if (!isDefined(navigatorAlias.cookieEnabled)) {
                setCookie(testCookieName, '1');
                return getCookie(testCookieName) === '1' ? '1' : '0';
            }

            return navigatorAlias.cookieEnabled ? '1' : '0';
        }

        /*
			 * Update domain hash
			 */
        function updateDomainHash() {
            domainHash = hash((configCookieDomain || domainAlias) + (configCookiePath || '/')).slice(0, 4); // 4 hexits = 16 bits
        }

        /*
			 * Inits the custom variables object
			 */
        function getCustomVariablesFromCookie() {
            var cookieName = getCookieName('cvar'),
            cookie = getCookie(cookieName);

            if (cookie.length) {
                cookie = JSON2.parse(cookie);
                if (isObject(cookie)) {
                    return cookie;
                }
            }
            return {};
        }

        /*
			 * Lazy loads the custom variables from the cookie, only once during this page view
			 */
        function loadCustomVariables() {
            if (customVariables === false) {
                customVariables = getCustomVariablesFromCookie();
            }
        }

        /*
			 * Process all "activity" events.
			 * For performance, this function must have low overhead.
			 */
        function activityHandler() {
            var now = new Date();

            lastActivityTime = now.getTime();
        }

        /*
			 * Sets the Visitor ID cookie: either the first time loadVisitorIdCookie is called
			 * or when there is a new visit or a new page view 
			 */
        function setVisitorIdCookie(uuid, createTs, visitCount, nowTs, lastVisitTs, lastEcommerceOrderTs) {
            setCookie(getCookieName('id'), uuid + '.' + createTs + '.' + visitCount + '.' + nowTs + '.' + lastVisitTs + '.' + lastEcommerceOrderTs, configVisitorCookieTimeout, configCookiePath, configCookieDomain, cookieSecure);
        }
			
        /*
			 * Load visitor ID cookie
			 */
        function loadVisitorIdCookie() {
            var now = new Date(),
            nowTs = Math.round(now.getTime() / 1000),
            id = getCookie(getCookieName('id')),
            tmpContainer;

            if (id) {
                tmpContainer = id.split('.');

                // returning visitor flag
                tmpContainer.unshift('0');
            } else {
                // uuid - generate a pseudo-unique ID to fingerprint this user;
                // note: this isn't a RFC4122-compliant UUID
                if (!visitorUUID) {
                    visitorUUID = hash(
                        (navigatorAlias.userAgent || '') +
                        (navigatorAlias.platform || '') +
                        JSON2.stringify(browserFeatures) + nowTs
                        ).slice(0, 16); // 16 hexits = 64 bits
                }

                tmpContainer = [
                // new visitor
                '1',

                // uuid
                visitorUUID,

                // creation timestamp - seconds since Unix epoch
                nowTs,

                // visitCount - 0 = no previous visit
                0,

                // current visit timestamp
                nowTs,

                // last visit timestamp - blank = no previous visit
                '',
						
                // last ecommerce order timestamp
                ''
                ];
            }
            return tmpContainer;
        }
			
        /*
			 * Loads the referrer attribution information
			 * 
			 * @returns array
			 *  0: campaign name
			 *  1: campaign keyword
			 *  2: timestamp
			 *  3: raw URL
			 */
        function loadReferrerAttributionCookie() {
            // NOTE: if the format of the cookie changes,
            // we must also update JS tests, PHP tracker, Integration tests, 
            // and notify other tracking clients (eg. Java) of the changes
            var cookie = getCookie(getCookieName('ref'));

            if (cookie.length) {
                try {
                    cookie = JSON2.parse(cookie);
                    if (isObject(cookie)) {
                        return cookie;
                    }
                } catch (err) {
                // Pre 1.3, this cookie was not JSON encoded
                }
            }
            return [
            '',
            '',
            0,
            ''
            ];
        }
			
        /*
			 * Returns the URL to call piwik.php,
			 * with the standard parameters (plugins, resolution, url, referrer, etc.).
			 * Sends the pageview and browser settings with every request in case of race conditions.
			 */
        function getRequest(request, customData, pluginMethod, currentEcommerceOrderTs) {
            var i,
            now = new Date(),
            nowTs = Math.round(now.getTime() / 1000),
            newVisitor,
            uuid,
            visitCount,
            createTs,
            currentVisitTs,
            lastVisitTs,
            lastEcommerceOrderTs,
            referralTs,
            referralUrl,
            referralUrlMaxLength = 1024,
            currentReferrerHostName,
            originalReferrerHostName,
            customVariablesCopy = customVariables,
            idname = getCookieName('id'),
            sesname = getCookieName('ses'),
            refname = getCookieName('ref'),
            cvarname = getCookieName('cvar'),
            id = loadVisitorIdCookie(),
            ses = getCookie(sesname),
            attributionCookie = loadReferrerAttributionCookie(),
            currentUrl = configCustomUrl || locationHrefAlias,
            campaignNameDetected,
            campaignKeywordDetected;

            if (configDoNotTrack) {
                setCookie(idname, '', -1, configCookiePath, configCookieDomain);
                setCookie(sesname, '', -1, configCookiePath, configCookieDomain);
                setCookie(cvarname, '', -1, configCookiePath, configCookieDomain);
                setCookie(refname, '', -1, configCookiePath, configCookieDomain);
                return '';
            }

            newVisitor = id[0];
            uuid = id[1];
            createTs = id[2];
            visitCount = id[3];
            currentVisitTs = id[4];
            lastVisitTs = id[5];
            // case migrating from pre-1.5 cookies
            if(!isDefined(id[6])) {
                id[6] = "";
            }
            lastEcommerceOrderTs = id[6];
				
            if(!isDefined(currentEcommerceOrderTs)) {
                currentEcommerceOrderTs = "";
            }

            campaignNameDetected = attributionCookie[0];
            campaignKeywordDetected = attributionCookie[1];
            referralTs = attributionCookie[2];
            referralUrl = attributionCookie[3];
				
            if (!ses) {
                // new session (aka new visit)
                visitCount++;

                lastVisitTs = currentVisitTs;

                // Detect the campaign information from the current URL
                // Only if campaign wasn't previously set
                // Or if it was set but we must attribute to the most recent one
                // Note: we are working on the currentUrl before purify() since we can parse the campaign parameters in the hash tag
                if(!configConversionAttributionFirstReferrer
                    || !campaignNameDetected.length) {
                    for( i in configCampaignNameParameters) {
                        if (Object.prototype.hasOwnProperty.call(configCampaignNameParameters, i)) {
                            campaignNameDetected = getParameter(currentUrl, configCampaignNameParameters[i]);
                            if(campaignNameDetected.length) {
                                break;
                            }
                        }
                    }
                    for( i in configCampaignKeywordParameters) {
                        if (Object.prototype.hasOwnProperty.call(configCampaignKeywordParameters, i)) {
                            campaignKeywordDetected = getParameter(currentUrl, configCampaignKeywordParameters[i]);
                            if(campaignKeywordDetected.length) {
                                break;
                            }
                        }
                    }
                }
					
                // Store the referrer URL and time in the cookie;
                // referral URL depends on the first or last referrer attribution
                currentReferrerHostName = getHostName(configReferrerUrl);
                originalReferrerHostName = referralUrl.length ? getHostName(referralUrl) : '';
                if (currentReferrerHostName.length && // there is a referrer
                    !isSiteHostName(currentReferrerHostName) && // domain is not the current domain
                    (!configConversionAttributionFirstReferrer || // attribute to last known referrer
                        !originalReferrerHostName.length || // previously empty
                        isSiteHostName(originalReferrerHostName))) { // previously set but in current domain
                    referralUrl = configReferrerUrl;
                }
					
                // Set the referral cookie if we have either a Referrer URL, or detected a Campaign (or both)
                if(referralUrl.length
                    || campaignNameDetected.length) {
                    referralTs = nowTs;
                    attributionCookie = [
                    campaignNameDetected,
                    campaignKeywordDetected,
                    referralTs,
                    purify(referralUrl.slice(0, referralUrlMaxLength))
                    ];
						
                    setCookie(refname, JSON2.stringify(attributionCookie), configReferralCookieTimeout, configCookiePath, configCookieDomain, cookieSecure);
                }
            }
            // build out the rest of the request
            request += '&idsite=' + configTrackerSiteId +
            '&rec=1' +
            '&r=' + String(Math.random()).slice(2,8) + // keep the string to a minimum
            '&h=' + now.getHours() + '&m=' + now.getMinutes() + '&s=' + now.getSeconds() +
            '&url=' + encodeWrapper(purify(currentUrl)) +
            (configReferrerUrl.length ? '&urlref=' + encodeWrapper(purify(configReferrerUrl)) : '') +
            '&_id=' + uuid + '&_idts=' + createTs + '&_idvc=' + visitCount + 
            '&_idn=' + newVisitor + // currently unused
            (campaignNameDetected.length ? '&_rcn=' + encodeWrapper(campaignNameDetected) : '') +
            (campaignKeywordDetected.length ? '&_rck=' + encodeWrapper(campaignKeywordDetected) : '') +
            '&_refts=' + referralTs +
            '&_viewts=' + lastVisitTs +
            (String(lastEcommerceOrderTs).length ? '&_ects=' + lastEcommerceOrderTs : '') +
            (String(referralUrl).length ? '&_ref=' + encodeWrapper(purify(referralUrl.slice(0, referralUrlMaxLength))) : '')
            ;

            // Custom Variables, scope "page"
            var customVariablesPageStringified = JSON2.stringify(customVariablesPage);
            if(customVariablesPageStringified.length > 2) {
                request += '&cvar=' + encodeWrapper(customVariablesPageStringified);
            }

            // browser features
            for (i in browserFeatures) {
                if (Object.prototype.hasOwnProperty.call(browserFeatures, i)) {
                    request += '&' + i + '=' + browserFeatures[i];
                }
            }

            // custom data
            if (customData) {
                request += '&data=' + encodeWrapper(JSON2.stringify(customData));
            } else if (configCustomData) {
                request += '&data=' + encodeWrapper(JSON2.stringify(configCustomData));
            }

            // Custom Variables, scope "visit"
            if (customVariables) {
                var customVariablesStringified = JSON2.stringify(customVariables);
                // Don't sent empty custom variables {}
                if(customVariablesStringified.length > 2) {
                    request += '&_cvar=' + encodeWrapper(customVariablesStringified);
                }

                // Don't save deleted custom variables in the cookie
                for (i in customVariablesCopy) {
                    if (Object.prototype.hasOwnProperty.call(customVariablesCopy, i)) {
                        if (customVariables[i][0] === '' || customVariables[i][1] === '') {
                            delete customVariables[i];
                        }
                    }
                }

                setCookie(cvarname, JSON2.stringify(customVariables), configSessionCookieTimeout, configCookiePath, configCookieDomain, cookieSecure);
            }

            // update cookies
            setVisitorIdCookie(uuid, createTs, visitCount, nowTs, lastVisitTs, isDefined(currentEcommerceOrderTs) && String(currentEcommerceOrderTs).length ? currentEcommerceOrderTs : lastEcommerceOrderTs);
            setCookie(sesname, '*', configSessionCookieTimeout, configCookiePath, configCookieDomain, cookieSecure);

            // tracker plugin hook
            request += executePluginMethod(pluginMethod);

            return request;
        }
			
        function logEcommerce(orderId, grandTotal, subTotal, tax, shipping, discount) {
            var request = 'idgoal=0', 
            lastEcommerceOrderTs,
            now = new Date(),
            items = [],
            sku;
				
            if(String(orderId).length) {
                request += '&ec_id=' + encodeWrapper(orderId);
                // Record date of order in the visitor cookie
                lastEcommerceOrderTs = Math.round(now.getTime() / 1000);
            }
				
            request += '&revenue=' + grandTotal;
            if(String(subTotal).length) {
                request += '&ec_st=' + subTotal;
            }
            if(String(tax).length) {
                request += '&ec_tx=' + tax;
            }
            if(String(shipping).length) {
                request += '&ec_sh=' + shipping;
            }
            if(String(discount).length) {
                request += '&ec_dt=' + discount;
            }
            if(ecommerceItems) {
                // Removing the SKU index in the array before JSON encoding
                for(sku in ecommerceItems) {
                    if (Object.prototype.hasOwnProperty.call(ecommerceItems, sku)) {
                        // Ensure name and category default to healthy value
                        if(!isDefined(ecommerceItems[sku][1])) {
                            ecommerceItems[sku][1] = "";
                        }
                        if(!isDefined(ecommerceItems[sku][2])) {
                            ecommerceItems[sku][2] = "";
                        }
                        // Set price to zero
                        if(!isDefined(ecommerceItems[sku][3])
                            || String(ecommerceItems[sku][3]).length === 0) {
                            ecommerceItems[sku][3] = 0;
                        }
                        // Set quantity to 1
                        if(!isDefined(ecommerceItems[sku][4])
                            || String(ecommerceItems[sku][4]).length === 0) {
                            ecommerceItems[sku][4] = 1;
                        }
                        items.push(ecommerceItems[sku]);
                    }
                }
                request += '&ec_items=' + encodeWrapper(JSON2.stringify(items));
            }
            request = getRequest(request, configCustomData, 'ecommerce', lastEcommerceOrderTs);
            sendRequest(request, configTrackerPause);
        }

        function logEcommerceOrder(orderId, grandTotal, subTotal, tax, shipping, discount) {
            if(String(orderId).length
                && isDefined(grandTotal)) {
                logEcommerce(orderId, grandTotal, subTotal, tax, shipping, discount);
            }	
        }

        function logEcommerceCartUpdate(grandTotal) {
            if(isDefined(grandTotal)) {
                logEcommerce("", grandTotal, "", "", "", "");
            }
        }
			
        /*
			 * Log the page view / visit
			 */
        function logPageView(customTitle, customData) {
            var now = new Date(),
            request = getRequest('action_name=' + encodeWrapper(customTitle || configTitle), customData, 'log');

            sendRequest(request, configTrackerPause);

            // send ping
            if (configMinimumVisitTime && configHeartBeatTimer && !activityTrackingInstalled) {
                activityTrackingInstalled = true;

                // add event handlers; cross-browser compatibility here varies significantly
                // @see http://quirksmode.org/dom/events
                addEventListener(documentAlias, 'click', activityHandler);
                addEventListener(documentAlias, 'mouseup', activityHandler);
                addEventListener(documentAlias, 'mousedown', activityHandler);
                addEventListener(documentAlias, 'mousemove', activityHandler);
                addEventListener(documentAlias, 'mousewheel', activityHandler);
                addEventListener(windowAlias, 'DOMMouseScroll', activityHandler);
                addEventListener(windowAlias, 'scroll', activityHandler);
                addEventListener(documentAlias, 'keypress', activityHandler);
                addEventListener(documentAlias, 'keydown', activityHandler);
                addEventListener(documentAlias, 'keyup', activityHandler);
                addEventListener(windowAlias, 'resize', activityHandler);
                addEventListener(windowAlias, 'focus', activityHandler);
                addEventListener(windowAlias, 'blur', activityHandler);

                // periodic check for activity
                lastActivityTime = now.getTime();
                setTimeout(function heartBeat() {
                    var now = new Date(),
                    request;

                    // there was activity during the heart beat period;
                    // on average, this is going to overstate the visitDuration by configHeartBeatTimer/2
                    if ((lastActivityTime + configHeartBeatTimer) > now.getTime()) {
                        // send ping if minimum visit time has elapsed
                        if (configMinimumVisitTime < now.getTime()) {
                            request = getRequest('ping=1', customData, 'ping');

                            sendRequest(request, configTrackerPause);
                        }

                        // resume heart beat
                        setTimeout(heartBeat, configHeartBeatTimer);
                    }
                // else heart beat cancelled due to inactivity
                }, configHeartBeatTimer);
            }
        }

        /*
			 * Log the goal with the server
			 */
        function logGoal(idGoal, customRevenue, customData) {
            var request = getRequest('idgoal=' + idGoal + (customRevenue ? '&revenue=' + customRevenue : ''), customData, 'goal');

            sendRequest(request, configTrackerPause);
        }

        /*
			 * Log the link or click with the server
			 */
        function logLink(url, linkType, customData) {
            var request = getRequest(linkType + '=' + encodeWrapper(purify(url)), customData, 'link');

            sendRequest(request, configTrackerPause);
        }

        /*
			 * Construct regular expression of classes
			 */
        function getClassesRegExp(configClasses, defaultClass) {
            var i,
            classesRegExp = '(^| )(piwik[_-]' + defaultClass;

            if (configClasses) {
                for (i = 0; i < configClasses.length; i++) {
                    classesRegExp += '|' + configClasses[i];
                }
            }
            classesRegExp += ')( |$)';

            return new RegExp(classesRegExp);
        }

        /*
			 * Link or Download?
			 */
        function getLinkType(className, href, isInLink) {
            // outlinks
            if (!isInLink) {
                return 'link';
            }

            // does class indicate whether it is an (explicit/forced) outlink or a download?
            var downloadPattern = getClassesRegExp(configDownloadClasses, 'download'),
            linkPattern = getClassesRegExp(configLinkClasses, 'link'),

            // does file extension indicate that it is a download?
            downloadExtensionsPattern = new RegExp('\\.(' + configDownloadExtensions + ')([?&#]|$)', 'i');

            // optimization of the if..elseif..else construct below
            return linkPattern.test(className) ? 'link' : (downloadPattern.test(className) || downloadExtensionsPattern.test(href) ? 'download' : 0);

        /*
				var linkType;

				if (linkPattern.test(className)) {
					// class attribute contains 'piwik_link' (or user's override)
					linkType = 'link';
				} else if (downloadPattern.test(className)) {
					// class attribute contains 'piwik_download' (or user's override)
					linkType = 'download';
				} else if (downloadExtensionsPattern.test(sourceHref)) {
					// file extension matches a defined download extension
					linkType = 'download';
				} else {
					// otherwise none of the above
					linkType = 0;
				}

				return linkType;
 */
        }

        /*
			 * Process clicks
			 */
        function processClick(sourceElement) {
            var parentElement,
            tag,
            linkType;

            while (!!(parentElement = sourceElement.parentNode) &&
                ((tag = sourceElement.tagName) !== 'A' && tag !== 'AREA')) {
                sourceElement = parentElement;
            }

            if (isDefined(sourceElement.href)) {
                // browsers, such as Safari, don't downcase hostname and href
                var originalSourceHostName = sourceElement.hostname || getHostName(sourceElement.href),
                sourceHostName = originalSourceHostName.toLowerCase(),
                sourceHref = sourceElement.href.replace(originalSourceHostName, sourceHostName),
                scriptProtocol = new RegExp('^(javascript|vbscript|jscript|mocha|livescript|ecmascript):', 'i');

                // ignore script pseudo-protocol links
                if (!scriptProtocol.test(sourceHref)) {
                    // track outlinks and all downloads
                    linkType = getLinkType(sourceElement.className, sourceHref, isSiteHostName(sourceHostName));
                    if (linkType) {
                        logLink(sourceHref, linkType);
                    }
                }
            }
        }

        /*
			 * Handle click event
			 */
        function clickHandler(evt) {
            var button,
            target;

            evt = evt || windowAlias.event;
            button = evt.which || evt.button;
            target = evt.target || evt.srcElement;

            // Using evt.type (added in IE4), we avoid defining separate handlers for mouseup and mousedown.
            if (evt.type === 'click') {
                if (target) {
                    processClick(target);
                }
            } else if (evt.type === 'mousedown') {
                if ((button === 1 || button === 2) && target) {
                    lastButton = button;
                    lastTarget = target;
                } else {
                    lastButton = lastTarget = null;
                }
            } else if (evt.type === 'mouseup') {
                if (button === lastButton && target === lastTarget) {
                    processClick(target);
                }
                lastButton = lastTarget = null;
            }
        }

        /*
			 * Add click listener to a DOM element
			 */
        function addClickListener(element, enable) {
            if (enable) {
                // for simplicity and performance, we ignore drag events
                addEventListener(element, 'mouseup', clickHandler, false);
                addEventListener(element, 'mousedown', clickHandler, false);
            } else {
                addEventListener(element, 'click', clickHandler, false);
            }
        }

        /*
			 * Add click handlers to anchor and AREA elements, except those to be ignored
			 */
        function addClickListeners(enable) {
            if (!linkTrackingInstalled) {
                linkTrackingInstalled = true;

                // iterate through anchor elements with href and AREA elements

                var i,
                ignorePattern = getClassesRegExp(configIgnoreClasses, 'ignore'),
                linkElements = documentAlias.links;

                if (linkElements) {
                    for (i = 0; i < linkElements.length; i++) {
                        if (!ignorePattern.test(linkElements[i].className)) {
                            addClickListener(linkElements[i], enable);
                        }
                    }
                }
            }
        }

        /*
			 * Browser features (plugins, resolution, cookies)
			 */
        function detectBrowserFeatures() {
            var i,
            mimeType,
            pluginMap = {
                // document types
                pdf: 'application/pdf',

                // media players
                qt: 'video/quicktime',
                realp: 'audio/x-pn-realaudio-plugin',
                wma: 'application/x-mplayer2',

                // interactive multimedia
                dir: 'application/x-director',
                fla: 'application/x-shockwave-flash',

                // RIA
                java: 'application/x-java-vm',
                gears: 'application/x-googlegears',
                ag: 'application/x-silverlight'
            };

            // general plugin detection
            if (navigatorAlias.mimeTypes && navigatorAlias.mimeTypes.length) {
                for (i in pluginMap) {
                    if (Object.prototype.hasOwnProperty.call(pluginMap, i)) {
                        mimeType = navigatorAlias.mimeTypes[pluginMap[i]];
                        browserFeatures[i] = (mimeType && mimeType.enabledPlugin) ? '1' : '0';
                    }
                }
            }

            // Safari and Opera
            // IE6/IE7 navigator.javaEnabled can't be aliased, so test directly
            if (typeof navigator.javaEnabled !== 'unknown' &&
                isDefined(navigatorAlias.javaEnabled) &&
                navigatorAlias.javaEnabled()) {
                browserFeatures.java = '1';
            }

            // Firefox
            if (isFunction(windowAlias.GearsFactory)) {
                browserFeatures.gears = '1';
            }

            // other browser features
            browserFeatures.res = screenAlias.width + 'x' + screenAlias.height;
            browserFeatures.cookie = hasCookies();
        }

        /*<DEBUG>*/
        /*
			 * Register a test hook. Using eval() permits access to otherwise
			 * privileged members.
			 */
        function registerHook(hookName, userHook) {
            var hookObj = null;

            if (isString(hookName) && !isDefined(registeredHooks[hookName]) && userHook) {
                if (isObject(userHook)) {
                    hookObj = userHook;
                } else if (isString(userHook)) {
                    try {
                        eval('hookObj =' + userHook);
                    } catch (e) { }
                }

                registeredHooks[hookName] = hookObj;
            }
            return hookObj;
        }
        /*</DEBUG>*/

        /************************************************************
			 * Constructor
			 ************************************************************/

        /*
			 * initialize tracker
			 */
        detectBrowserFeatures();
        updateDomainHash();

        /*<DEBUG>*/
        /*
			 * initialize test plugin
			 */
        executePluginMethod('run', registerHook);
        /*</DEBUG>*/

        /************************************************************
			 * Public data and methods
			 ************************************************************/

        return {
            /*<DEBUG>*/
            /*
				 * Test hook accessors
				 */
            hook: registeredHooks,
            getHook: function (hookName) {
                return registeredHooks[hookName];
            },
            /*</DEBUG>*/

            /**
				 * Get visitor ID (from first party cookie)
				 *
				 * @return string Visitor ID in hexits (or null, if not yet known)
				 */
            getVisitorId: function () {
                return (loadVisitorIdCookie())[1];
            },

            /**
				 * Get the visitor information (from first party cookie)
				 *
				 * @return array
				 */
            getVisitorInfo: function() {
                return loadVisitorIdCookie();
            },

            /**
				 * Get the Attribution information, which is an array that contains 
				 * the Referrer used to reach the site as well as the campaign name and keyword
				 * It is useful only when used in conjunction with Tracker API function setAttributionInfo() 
				 * To access specific data point, you should use the other functions getAttributionReferrer* and getAttributionCampaign*
				 * 
				 * @return array Attribution array, Example use:
				 *   1) Call JSON2.stringify(piwikTracker.getAttributionInfo()) 
				 *   2) Pass this json encoded string to the Tracking API (php or java client): setAttributionInfo()
				 */
            getAttributionInfo: function() {
                return loadReferrerAttributionCookie();
            },
				
            /**
				 * Get the Campaign name that was parsed from the landing page URL when the visitor 
				 * landed on the site originally
				 * 
				 * @return string
				 */
            getAttributionCampaignName: function() {
                return loadReferrerAttributionCookie()[0];
            },
				
            /**
				 * Get the Campaign keyword that was parsed from the landing page URL when the visitor 
				 * landed on the site originally
				 * 
				 * @return string
				 */
            getAttributionCampaignKeyword: function() {
                return loadReferrerAttributionCookie()[1];
            },

            /**
				 * Get the time at which the referrer (used for Goal Attribution) was detected
				 * 
				 * @return int Timestamp or 0 if no referrer currently set
				 */
            getAttributionReferrerTimestamp: function() {
                return loadReferrerAttributionCookie()[2];
            },
				
            /**
				 * Get the full referrer URL that will be used for Goal Attribution
				 * 
				 * @return string Raw URL, or empty string '' if no referrer currently set
				 */
            getAttributionReferrerUrl: function() {
                return loadReferrerAttributionCookie()[3];
            },
				
            /**
				 * Specify the Piwik server URL
				 *
				 * @param string trackerUrl
				 */
            setTrackerUrl: function (trackerUrl) {
                configTrackerUrl = trackerUrl;
            },

            /**
				 * Specify the site ID
				 *
				 * @param int|string siteId
				 */
            setSiteId: function (siteId) {
                configTrackerSiteId = siteId;
            },

            /**
				 * Pass custom data to the server
				 *
				 * Examples:
				 *   tracker.setCustomData(object);
				 *   tracker.setCustomData(key, value);
				 *
				 * @param mixed key_or_obj
				 * @param mixed opt_value
				 */
            setCustomData: function (key_or_obj, opt_value) {
                if (isObject(key_or_obj)) {
                    configCustomData = key_or_obj;
                } else {
                    if (!configCustomData) {
                        configCustomData = [];
                    }
                    configCustomData[key_or_obj] = opt_value;
                }
            },

            /**
				 * Get custom data
				 *
				 * @return mixed
				 */
            getCustomData: function () {
                return configCustomData;
            },

            /**
				 * Set custom variable within this visit
				 *
				 * @param int index
				 * @param string name
				 * @param string value
				 * @param string scope Scope of Custom Variable: 
				 *                     - "visit" will store the name/value in the visit and will persist it in the cookie for the duration of the visit,
				 *                     - "page" will store the name/value in the page view.
				 */
            setCustomVariable: function (index, name, value, scope) {
                var toRecord;
                if(!isDefined(scope)) {
                    scope = 'visit';
                }
                if (index > 0 && index <= maxCustomVariables) {
                    toRecord = [name.slice(0, customVariableMaximumLength), value.slice(0, customVariableMaximumLength)];
                    if(scope === 'visit' || scope === 2 /* GA compatibility/misuse */) {
                        loadCustomVariables();
                        customVariables[index] = toRecord;
                    }
                    else if(scope === 'page' || scope === 3 /* GA compatibility/misuse */ ) {
                        customVariablesPage[index] = toRecord;
                    }
                }
            },

            /**
				 * Get custom variable
				 *
				 * @param int index
				 * @param string scope Scope of Custom Variable: "visit" or "page" 
				 */
            getCustomVariable: function (index, scope) {
                var cvar;
                if(!isDefined(scope)) {
                    scope = "visit";
                }
                if(scope === "page" || scope === 3) {
                    cvar = customVariablesPage[index];
                }
                else if(scope === "visit" || scope === 2) {
                    loadCustomVariables();
                    cvar = customVariables[index];
                }
                if (!isDefined(cvar) 
                    || (cvar && cvar[0] === '')) {
                    return false;
                }
                return cvar;
            },

            /**
				 * Delete custom variable
				 *
				 * @param int index
				 */
            deleteCustomVariable: function (index, scope) {
                // Only delete if it was there already
                if (this.getCustomVariable(index, scope)) {
                    this.setCustomVariable(index, '', '', scope);
                }
            },

            /**
				 * Set delay for link tracking (in milliseconds)
				 *
				 * @param int delay
				 */
            setLinkTrackingTimer: function (delay) {
                configTrackerPause = delay;
            },

            /**
				 * Set list of file extensions to be recognized as downloads
				 *
				 * @param string extensions
				 */
            setDownloadExtensions: function (extensions) {
                configDownloadExtensions = extensions;
            },

            /**
				 * Specify additional file extensions to be recognized as downloads
				 *
				 * @param string extensions
				 */
            addDownloadExtensions: function (extensions) {
                configDownloadExtensions += '|' + extensions;
            },

            /**
				 * Set array of domains to be treated as local
				 *
				 * @param string|array hostsAlias
				 */
            setDomains: function (hostsAlias) {
                configHostsAlias = isString(hostsAlias) ? [hostsAlias] : hostsAlias;
                configHostsAlias.push(domainAlias);
            },

            /**
				 * Set array of classes to be ignored if present in link
				 *
				 * @param string|array ignoreClasses
				 */
            setIgnoreClasses: function (ignoreClasses) {
                configIgnoreClasses = isString(ignoreClasses) ? [ignoreClasses] : ignoreClasses;
            },

            /**
				 * Set request method
				 *
				 * @param string method GET or POST; default is GET
				 */
            setRequestMethod: function (method) {
                configRequestMethod = method || 'GET';
            },

            /**
				 * Override referrer
				 *
				 * @param string url
				 */
            setReferrerUrl: function (url) {
                configReferrerUrl = url;
            },

            /**
				 * Override url
				 *
				 * @param string url
				 */
            setCustomUrl: function (url) {
                configCustomUrl = resolveRelativeReference(locationHrefAlias, url);
            },

            /**
				 * Override document.title
				 *
				 * @param string title
				 */
            setDocumentTitle: function (title) {
                configTitle = title;
            },

            /**
				 * Set array of classes to be treated as downloads
				 *
				 * @param string|array downloadClasses
				 */
            setDownloadClasses: function (downloadClasses) {
                configDownloadClasses = isString(downloadClasses) ? [downloadClasses] : downloadClasses;
            },

            /**
				 * Set array of classes to be treated as outlinks
				 *
				 * @param string|array linkClasses
				 */
            setLinkClasses: function (linkClasses) {
                configLinkClasses = isString(linkClasses) ? [linkClasses] : linkClasses;
            },

            /**
				 * Set array of campaign name parameters
				 * 
				 * @see http://piwik.org/faq/how-to/#faq_120
				 * @param string|array campaignNames
				 */
            setCampaignNameKey: function (campaignNames) {
                configCampaignNameParameters = isString(campaignNames) ? [campaignNames] : campaignNames;
            },

            /**
				 * Set array of campaign keyword parameters
				 * 
				 * @see http://piwik.org/faq/how-to/#faq_120
				 * @param string|array campaignKeywords
				 */
            setCampaignKeywordKey: function (campaignKeywords) {
                configCampaignKeywordParameters = isString(campaignKeywords) ? [campaignKeywords] : campaignKeywords;
            },

            /**
				 * Strip hash tag (or anchor) from URL
				 *
				 * @param bool enableFilter
				 */
            discardHashTag: function (enableFilter) {
                configDiscardHashTag = enableFilter;
            },

            /**
				 * Set first-party cookie name prefix
				 *
				 * @param string cookieNamePrefix
				 */
            setCookieNamePrefix: function (cookieNamePrefix) {
                configCookieNamePrefix = cookieNamePrefix;
                // Re-init the Custom Variables cookie
                customVariables = getCustomVariablesFromCookie();
            },

            /**
				 * Set first-party cookie domain
				 *
				 * @param string domain
				 */
            setCookieDomain: function (domain) {
                configCookieDomain = domainFixup(domain);
                updateDomainHash();
            },

            /**
				 * Set first-party cookie path
				 *
				 * @param string domain
				 */
            setCookiePath: function (path) {
                configCookiePath = path;
                updateDomainHash();
            },

            /**
				 * Set visitor cookie timeout (in seconds)
				 *
				 * @param int timeout
				 */
            setVisitorCookieTimeout: function (timeout) {
                configVisitorCookieTimeout = timeout * 1000;
            },

            /**
				 * Set session cookie timeout (in seconds)
				 *
				 * @param int timeout
				 */
            setSessionCookieTimeout: function (timeout) {
                configSessionCookieTimeout = timeout * 1000;
            },

            /**
				 * Set referral cookie timeout (in seconds)
				 *
				 * @param int timeout
				 */
            setReferralCookieTimeout: function (timeout) {
                configReferralCookieTimeout = timeout * 1000;
            },

            /**
				 * Set conversion attribution to first referrer and campaign
				 *
				 * @param bool if true, use first referrer (and first campaign)
				 *             if false, use the last referrer (or campaign)
				 */
            setConversionAttributionFirstReferrer: function (enable) {
                configConversionAttributionFirstReferrer = enable;
            },

            /**
				 * Handle do-not-track requests
				 *
				 * @param bool enable If true, don't track if user agent sends 'do-not-track' header
				 */
            setDoNotTrack: function (enable) {
                configDoNotTrack = enable && navigatorAlias.doNotTrack;
            },

            /**
				 * Add click listener to a specific link element.
				 * When clicked, Piwik will log the click automatically.
				 *
				 * @param DOMElement element
				 * @param bool enable If true, use pseudo click-handler (mousedown+mouseup)
				 */
            addListener: function (element, enable) {
                addClickListener(element, enable);
            },

            /**
				 * Install link tracker
				 *
				 * The default behaviour is to use actual click events. However, some browsers
				 * (e.g., Firefox, Opera, and Konqueror) don't generate click events for the middle mouse button.
				 *
				 * To capture more "clicks", the pseudo click-handler uses mousedown + mouseup events.
				 * This is not industry standard and is vulnerable to false positives (e.g., drag events).
				 *
				 * There is a Safari/Chrome/Webkit bug that prevents tracking requests from being sent
				 * by either click handler.  The workaround is to set a target attribute (which can't
				 * be "_self", "_top", or "_parent").
				 *
				 * @see https://bugs.webkit.org/show_bug.cgi?id=54783
				 *
				 * @param bool enable If true, use pseudo click-handler (mousedown+mouseup)
				 */
            enableLinkTracking: function (enable) {
                if (hasLoaded) {
                    // the load event has already fired, add the click listeners now
                    addClickListeners(enable);
                } else {
                    // defer until page has loaded
                    registeredOnLoadHandlers.push(function () {
                        addClickListeners(enable);
                    });
                }
            },

            /**
				 * Set heartbeat (in seconds)
				 *
				 * @param int minimumVisitLength
				 * @param int heartBeatDelay
				 */
            setHeartBeatTimer: function (minimumVisitLength, heartBeatDelay) {
                var now = new Date();

                configMinimumVisitTime = now.getTime() + minimumVisitLength * 1000;
                configHeartBeatTimer = heartBeatDelay * 1000;
            },

            /**
				 * Frame buster
				 */
            killFrame: function () {
                if (windowAlias.location !== windowAlias.top.location) {
                    windowAlias.top.location = windowAlias.location;
                }
            },

            /**
				 * Redirect if browsing offline (aka file: buster)
				 *
				 * @param string url Redirect to this URL
				 */
            redirectFile: function (url) {
                if (windowAlias.location.protocol === 'file:') {
                    windowAlias.location = url;
                }
            },

            /**
				 * Trigger a goal
				 *
				 * @param int|string idGoal
				 * @param int|float customRevenue
				 * @param mixed customData
				 */
            trackGoal: function (idGoal, customRevenue, customData) {
                logGoal(idGoal, customRevenue, customData);
            },

            /**
				 * Manually log a click from your own code
				 *
				 * @param string sourceUrl
				 * @param string linkType
				 * @param mixed customData
				 */
            trackLink: function (sourceUrl, linkType, customData) {
                logLink(sourceUrl, linkType, customData);
            },

            /**
				 * Log visit to this page
				 *
				 * @param string customTitle
				 * @param mixed customData
				 */
            trackPageView: function (customTitle, customData) {
                logPageView(customTitle, customData);
            },
				

            /**
			     * Used to record that the current page view is an item (product) page view, or a Ecommerce Category page view.
			     * This must be called before trackPageView() on the product/category page. 
			     * It will set 3 custom variables of scope "page" with the SKU, Name and Category for this page view.
			     * Note: Custom Variables of scope "page" slots 3, 4 and 5 will be used.
			     *  
			     * On a category page, you can set the parameter category, and set the other parameters to empty string or false
			     * 
			     * Tracking Product/Category page views will allow Piwik to report on Product & Categories 
			     * conversion rates (Conversion rate = Ecommerce orders containing this product or category / Visits to the product or category)
			     * 
			     * @param string sku Item's SKU code being viewed
			     * @param string name Item's Name being viewed
			     * @param string category Category page being viewed. On an Item's page, this is the item's category
			     */
            setEcommerceView: function(sku, name, category) {
                if(isDefined(sku) && sku.length) {
                    customVariablesPage[3] = ['_pks', sku];
                }
                if(isDefined(name) && name.length) {
                    customVariablesPage[4] = ['_pkn', name];
                }
                if(isDefined(category) && category.length) {
                    customVariablesPage[5] = ['_pkc', category];
                }
            },
				
            /**
				 * Adds an item (product) that is in the current Cart or in the Ecommerce order.
				 * This function is called for every item (product) in the Cart or the Order. 
				 * The only required parameter is sku.
				 * 
				 * @param string sku (required) Item's SKU Code. This is the unique identifier for the product.
				 * @param string name (optional) Item's name
				 * @param string name (optional) Item's category
				 * @param float price (optional) Item's price. If not specified, will default to 0
				 * @param float quantity (optional) Item's quantity. If not specified, will default to 1
				 */
            addEcommerceItem: function(sku, name, category, price, quantity) {
                if(sku.length) {
                    ecommerceItems[sku] = [ sku, name, category, price, quantity ]; 
                }
            },
				
            /**
				 * Tracks an Ecommerce order.
				 * If the Ecommerce order contains items (products), you must call first the addEcommerceItem() for each item in the order.
				 * All revenues (grandTotal, subTotal, tax, shipping, discount) will be individually summed and reported in Piwik reports.
				 * Parameters orderId and grandTotal are required. For others, you can set empty string "" if you don't need specify them.
				 * 
				 * @param string|int orderId (required) Unique Order ID. 
				 *                   This will be used to count this order only once in the event the order page is reloaded several times.
				 *                   orderId must be unique for each transaction, even on different days, or the transaction will not be recorded by Piwik.
				 * @param float grandTotal (required) Grand Total revenue of the transaction (including tax, shipping, etc.)
				 * @param float subTotal (optional) Sub total amount, typically the sum of items prices for all items in this order (before Tax and Shipping costs are applied) 
				 * @param float tax (optional) Tax amount for this order
				 * @param float shipping (optional) Shipping amount for this order
				 * @param float discount (optional) Discounted amount in this order
				 */
            trackEcommerceOrder: function(orderId, grandTotal, subTotal, tax, shipping, discount) {
                logEcommerceOrder(orderId, grandTotal, subTotal, tax, shipping, discount);
            },
				
            /**
				 * Tracks a Cart Update (add item, remove item, update item).
				 * On every Cart update, you must call addEcommerceItem() for each item (product) in the cart, including the items that haven't been updated since the last cart update.
				 * Then you can call this function with the Cart grandTotal (typically the sum of all items' prices)
				 * 
				 * @param float grandTotal (required) Items (products) amount in the Cart
				 */
            trackEcommerceCartUpdate: function(grandTotal) {
                logEcommerceCartUpdate(grandTotal);
            }
				
        };
    }

    /************************************************************
		 * Proxy object
		 * - this allows the caller to continue push()'ing to _paq
		 *   after the Tracker has been initialized and loaded
		 ************************************************************/

    function TrackerProxy() {
        return {
            push: apply
        };
    }

    /************************************************************
		 * Constructor
		 ************************************************************/

    // initialize the Piwik singleton
    addEventListener(windowAlias, 'beforeunload', beforeUnloadHandler, false);
    addReadyListener();

    asyncTracker = new Tracker();

    for (i = 0; i < _paq.length; i++) {
        apply(_paq[i]);
    }

    // replace initialization array with proxy object
    _paq = new TrackerProxy();

    /************************************************************
		 * Public data and methods
		 ************************************************************/

    return {
        /**
			 * Add plugin
			 *
			 * @param string pluginName
			 * @param Object pluginObj
			 */
        addPlugin: function (pluginName, pluginObj) {
            plugins[pluginName] = pluginObj;
        },

        /**
			 * Get Tracker (factory method)
			 *
			 * @param string piwikUrl
			 * @param int|string siteId
			 * @return Tracker
			 */
        getTracker: function (piwikUrl, siteId) {
            return new Tracker(piwikUrl, siteId);
        },

        /**
			 * Get internal asynchronous tracker object
			 *
			 * @return Tracker
			 */
        getAsyncTracker: function () {
            return asyncTracker;
        }
    };
}()),

/************************************************************
	 * Deprecated functionality below
	 * - for legacy piwik.js compatibility
	 ************************************************************/

/*
	 * Piwik globals
	 *
	 *   var piwik_install_tracker, piwik_tracker_pause, piwik_download_extensions, piwik_hosts_alias, piwik_ignore_classes;
	 */

piwik_track,

/**
	 * Track page visit
	 *
	 * @param string documentTitle
	 * @param int|string siteId
	 * @param string piwikUrl
	 * @param mixed customData
	 */
piwik_log = function (documentTitle, siteId, piwikUrl, customData) {
    "use strict";

    function getOption(optionName) {
        try {
            return eval('piwik_' + optionName);
        } catch (e) { }

        return; /* undefined */
    }

    // instantiate the tracker
    var option,
    piwikTracker = Piwik.getTracker(piwikUrl, siteId);

    // initialize tracker
    piwikTracker.setDocumentTitle(documentTitle);
    piwikTracker.setCustomData(customData);

    // handle Piwik globals
    if (!!(option = getOption('tracker_pause'))) {
        piwikTracker.setLinkTrackingTimer(option);
    }
    if (!!(option = getOption('download_extensions'))) {
        piwikTracker.setDownloadExtensions(option);
    }
    if (!!(option = getOption('hosts_alias'))) {
        piwikTracker.setDomains(option);
    }
    if (!!(option = getOption('ignore_classes'))) {
        piwikTracker.setIgnoreClasses(option);
    }

    // track this page view
    piwikTracker.trackPageView();

    // default is to install the link tracker
    if ((getOption('install_tracker'))) {

        /**
			 * Track click manually (function is defined below)
			 *
			 * @param string sourceUrl
			 * @param int|string siteId
			 * @param string piwikUrl
			 * @param string linkType
			 */
        piwik_track = function (sourceUrl, siteId, piwikUrl, linkType) {
            piwikTracker.setSiteId(siteId);
            piwikTracker.setTrackerUrl(piwikUrl);
            piwikTracker.trackLink(sourceUrl, linkType);
        };

        // set-up link tracking
        piwikTracker.enableLinkTracking();
    }
};
/*! include 002-tracking.js */
/**
 * the piwik tracker is defined in the js-packager.php while compiling
 * since the id is stored in the application.ini
 * @see /public/js-packager.php
 */

/**
 *_piwikUrl is set in js-packer.php via application.ini
 */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://" + _piwikUrl : "http://" + _piwikUrl);
var _paq = _paq || [];

try {
    if ( !piwikId ){
        log("no piwikId defined");
    }
    else{
        (function(){
            log("using piwik id " + piwikId);
            _paq.push(['setSiteId', piwikId]);
            _paq.push(['setTrackerUrl', pkBaseURL+'piwik.php']);
            _paq.push(['enableLinkTracking']);
            log('successfully loading piwik tracker');
        })();
        
    }
} catch( err ) {
    log('failed to load piwik tracker' + err);
}

/**
 * set a cookie for internal tracking
 * @author mlaug
 * @since 29.03.2011
 */
function setCookieForSaleChannels(channel, subchannel, value){      
    var params = getUrlVars();     
    
    if ("yd_com" in params){
        var com_id = params['yd_com'];
        log('found yd_com link for url ' + com_id + ', writing cookie');
        $.cookie('yd-channels', $.base64.encode(JSON.stringify({
            com_id: com_id
        })), {
            path: '/',
            expires: 60 // 2 month, please edit in php too
        });
        return true;
    }              
    
    if ("utm_campaign" in params || "pk_campaign" in params) {
        $.cookie('yd-channels', '', {
            path: '/',
            expires: -1 // delete in highest path
        });
        return true;
    }
    
    return false;
}

$(document).ready(function(){
    setCookieForSaleChannels();
});
/*! include 002-facebook.js */
/**
* Facebook connect
* @author Jens Naie <naie@lieferando.de>
* @since 10.07.2012
*/
if(typeof(FbAppId) != "undefined" && typeof(FbDisable) == "undefined") {
    //initialize fbAsyncInit - will be replaced in 001-base.js after checking connection
    window.fbAsyncInit = function() {
            fbAsyncInitConnect();
    }
    window.fbAsyncInitConnect = function() {
        FB.init({
            appId: FbAppId,
            status: true,
            cookie: true,
            xfbml: true
        });
        //add event to like action
        FB.Event.subscribe('edge.create',
            function(response) {
                $.ajax({
                    type : 'POST',
                    url : '/request_user_fidelity/add',
                    data : {
                        action : 'facebookfan',
                        validate : '__**'
                    }
                });
            }
        );
    };
    $(document).ready(function(){
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/"+LOCALE+"/all.js";
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
    });
}
/*! include refactor.js */
/**
 * validated 10.02.2010
 */

$(document).ready(function(){

    $('#yd-loading-page').hide();
	
    // http document root of website
    var httpaddress = $("#httproot").val();

    // filter billings
    $('#startTime-compAdmin, #endTime-compAdmin').live('change', function(){
        var from = $('#startTime-compAdmin').val();
        var until = $('#endTime-compAdmin').val();

    // anzeigen alle from oder until zwischen start und end
    // class-/id-bereich ansprechen mÃ¶glich?????
    //$('.yd-billings').fadeOut();
        
    });

    // even and odd rows for tables
    function evenodd(){
        $("tr:even").addClass("even");
        $("tr:odd").addClass("odd");
    }
    evenodd();
	
    // ############### FORMS ########################
    $(".checkfield").each(function() {
        if($(this).val()==""){
            $(this).next().hide();
        }else{
            $(this).next().fadeIn();
        }
    });
    $(".checkfield").keyup(function() {
        if($(this).val()==""){
            $(this).next().hide();
        }else{
            $(this).next().fadeIn();
        }
    });    


    function checkValidBudgetTimes(elem){

        var from = elem.parent().find('.yd-budgettime-from').val();
        var until = elem.parent().find('.yd-budgettime-until').val();

        if( (from >= until) || !from.match(/^([0-1]?[0-9]|[2][0-3]):([0-5][0-9])$/) || !until.match(/^([0-1]?[0-9]|[2][0-3]):([0-5][0-9])$/) ){
            elem.
            parent().parent().
            find('.yd-budgettime').
            css('border','1px solid red');
            elem.addClass('invalid');
        }else{
            elem.
            parent().parent().
            find('.yd-budgettime').
            css('border','1px solid #D5D5D5');
            elem.removeClass('invalid');
        }
    }

    $('.yd-budgettime-amount').blur(function(){
        var val = $(this).val();
        if( val != '0,00' && !val.match(/((0)+(\,[1-9](\d)?))|((0)+(\,(\d)[1-9]+))|(([1-9]+(0)?)+(,\d+)?)|(([1-9]+(0)?)+(\,\d+)?)/) ){
            $(this).css('border','1px solid red').addClass('invalid');
        }else{
            $(this).css('border','1px solid #D5D5D5').removeClass('invalid');
        }
    });

    if( $('#yd-company-budget').length > 0 ){
        $('.yd-budgettime').each(function(){
            checkValidBudgetTimes($(this));
        });
    }
    
    $('.yd-budgettime').blur(function(){
        checkValidBudgetTimes($(this));
    });

    $('#yd-company-budget-submit').live('click',function(){
        $('.yd-budgettime').each(function(){
            checkValidBudgetTimes($(this));
        });
        if( $('.invalid'). length > 0 ){
            notification('error', 'Bitte Ã¼berprÃ¼fen Sie die Budgetzeiten.');
            return false;
        }
        $('#yd-company-budget').submit();
    });


    $('.yd-removebudgettime').live('click', function(){
        var el = $(this).parent().parent();
        if( !$(this).hasClass('persistent') ){
            notification("success", $.lang("bugdet-notification"));
            el.fadeOut(function() {
                $(this).remove();
            });
            return;
        }
        
        var $obj = $(this);
        var budgetTimeId = $obj.attr('id').split('-')[2];
        var budgetId = $('#budgetId').val();
        
        $.ajax({
            type: "POST",
            url: "/request_company/removebudgettime/",
            data: ({
                'budgetId'     : budgetId,
                'budgetTimeId' : budgetTimeId
            }),
            success : function(data){
                
                if( data == 1 ){
                    notification("success", $.lang("bugdet-notification"));
                    el.fadeOut(function() {
                        $(this).remove();
                    });
                }else{
                    notification('error', 'Konnte Budgetzeit nicht entfernen');
                }
            }
        });
        return false;
    });
	
    $(".yd-addbudgettime").click(function() {
        var el = $(this).parent().parent();
        el.clone(true).insertAfter(el).fadeOut(0, function() {
            $(this).find('.persistent').removeClass('persistent');
            var day = el.find('.day').val();
            var budgettimekey = el.find('.budgettimekey').val();
            //alert(budgettimekey);
            var $objFrom = $(this).find('.yd-budgettime-from');
            $objFrom.attr('name','new['+day+']['+(parseInt(budgettimekey)+1)+'][from]');
            $objFrom.attr('id','yd-budgettime-from-'+day+'-'+(parseInt(budgettimekey)+1));
            var $objUntil = $(this).find('.yd-budgettime-until');
            $objUntil.attr('name','new['+day+']['+(parseInt(budgettimekey)+1)+'][until]');
            $objUntil.attr('id','yd-budgettime-until-'+day+'-'+(parseInt(budgettimekey)+1));
            $(this).find('.yd-budgettime-amount').attr('name','new['+day+']['+(parseInt(budgettimekey)+1)+'][amount]');
            $(this).find('.budgettimekey').val((parseInt(budgettimekey)+1));
        }).fadeIn();
        return false;
    });


    
    $("#moveright").click(function() {
        $("#leftlist li input:checked").attr("checked",false).parent().fadeOut("fast", function() {
            $(this).clone().hide().appendTo("#rightlist ul").fadeIn(function(el) {
                var idd = $(this).attr("id").split("-");              
                $(this).find("input[type=hidden]").val(idd[1]);
                
            });
			
        }).remove();
        return false;
    });
	
    $("#moveleft").click(function() {
        $("#rightlist li input:checked").attr("checked",false).parent().fadeOut("fast", function() {
            $(this).clone().hide().appendTo("#leftlist ul").fadeIn(function() {
                $(this).find("input[type=hidden]").val("");
            });
        }).remove();
        return false;
    });
	
    var toggleLeft = true;
    $("#selectAllLeft").click(function() {
        $("#leftlist li input").attr("checked",toggleLeft);
        toggleLeft = !toggleLeft;
        return false;
    });
    
    var toggleRight = true;
    $("#selectAllRight").click(function() {
        $("#rightlist li input").attr("checked",toggleRight);
        toggleRight = !toggleRight;
        return false;
    });




    $("#moveright2").click(function() {
        $("#leftlist2 li input:checked").attr("checked",false).parent().fadeOut("fast", function() {
            $(this).clone().hide().appendTo("#rightlist2 ul").fadeIn(function(el) {
                var idd = $(this).attr("id").split("-");
                $(this).find("input:hidden").val(idd[1]);
            });

        }).remove();
        return false;
    });

    $("#moveleft2").click(function() {
        $("#rightlist2 li input:checked").attr("checked",false).parent().fadeOut("fast", function() {
            $(this).clone().hide().appendTo("#leftlist2 ul").fadeIn(function() {
                $(this).find("input:hidden").val("");
            });
        }).remove();
        return false;
    });

    var toggle = true;
    $("#selectAll2").click(function() {
        $("#leftlist2 li input").attr("checked",toggle);
        toggle = !toggle;
        return false;
    });

    //add a new project number to form
    var count = 0;
    $('#newProjectNumber').live('click',function(){

        $('#newInput').append(
            "<tr id='newnumber-"+count+"'><td><input type='text' name='newnumber-"+count+"' value='' /><td><input type='submit' value='entfernen' class='removenumber' id='removenumber-"+count+"' /></td></tr>"
            );
        count++;
        return false;

    });

    //remove a number from form which has not been created yet
    $('.removenumber').live('click',function(){

        var id = $(this).attr('id').split('-')[1];
        $('#newnumber-'+id).remove();
        return false;

    });


    $(".yd-link-deleteProjectNr").live('click',
        function(){
            var id = $(this).attr('id').split('-')[2];
            $.ajax({
                url:'/request_company/removeproject/id/'+id
            });
            notification('success','Projektcode erfolgreich entfernt');
            $('#yd-pn-' + id).remove();
            redirect('/');
            return false;
        }
        );


    $(".yd-link-delete-costcenter").live('click',
        function(){
            var id = $(this).attr('id').split('-')[2];
            $.ajax({
                url:'/request_company/removecostcenter/id/'+id
            });
            notification('success','Kostenstelle erfolgreich entfernt');
            $('#yd-td-pn-' + id).remove();
            return false;
        }
        );
    
    $('#yd-add-caddress').live('click',function(){
        location.href = '/company/address';
    });
        

    /**
     * Reset password of one employee
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 05.07.2011
     */
    $('#yd-resetEmployeePass').live('click',function(){
        var custId = $('#emplId').val();
        var realy = confirm('Soll das Passwort wirklich zurÃ¼ckgesetzt werden?');
        if(realy){
            notification('info', 'Bitte warten ...',true);
            $.ajax({
                url:'/request_company/newpassemployee/id/'+custId,
                dataType: "json",
                success: function(json){
                    $('.closeNotification').click();
                    if(json.result){
                        notification('success', json.msg);
                    }else{
                        notification('error', json.msg, true);
                    }
                }
            });
                
        }
        return false;
           
    }
    );



    /**
     * Reset all passwords of members of one budegt-group
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 05.07.2011
     */
    $('#yd-resetBudgetPasses').live('click', function(){
        var budgetId = $('#yd-resetBudgetPasses-id').val();
        var realy = confirm(this.title);
        if(realy){
            notification('info', 'Bitte warten ...',true);
            $.ajax({
                url:'/request_company/newpassesbudget/id/'+budgetId,
                dataType: "json",
                success: function(json){
                    $('.closeNotification').click();
                    if(json.result){
                        notification('success', json.msg);
                    }else{
                        notification('error', json.msg, true);
                    }
                }
            });
        }
        return false;
    });

        
    /**
     * Reset all passwords of members of one company
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 05.07.2011
     */
    $('#yd-resetCompanyPasses').live('click', function(){
        var compId = $('#yd-resetCompanyPasses-id').val();
        var realy = confirm(this.title);
        
        if(realy){
            notification('info', 'Bitte warten ...',true);
            $.ajax({
                url:'/request_company/newpassescomp/id/'+compId,
                dataType: "json",
                success: function(json){
                    $('.closeNotification').click();
                    if(json.result){
                        notification('success', json.msg);
                    }else{
                        notification('error', json.msg, true);
                    }
                }
            });
                
        }
        return false;
    });

    if($('#yd-company-need-code-check').length > 0){
        var variant = $('#yd-company-code-variant').val();
        if(variant == 0){
            $('#yd-company-need-code-check').hide();
        }
    }

    $('#yd-company-code-variant').live('change',function(){
        var variant = $('#yd-company-code-variant').val();
        if(variant == 0){
            $('#yd-company-need-code-check').hide();
        }else{
            $('#yd-company-need-code-check').show();
        }
    });
        

    $('#yd-company-save-code').live('click',function(){
        var codeVariant = $('#yd-company-code-variant').val();
        var needCode = $('#yd-company-need-code').attr('checked');
        if(codeVariant == '0'){
            needCode = false;
        }
        $.ajax({
            type: "POST",
            url:'/request_company/code',
            data:({
                'codeVariant'   : codeVariant,
                'needCode'      : needCode
            })
        });
        notification('success','Projektcodeeinstellungen wurden erfolgreich geÃ¤ndert');
    });
    
    /**
     * Accordion Slide-MenÃ¼
     */
    if($('#main-nav').length > 0){
        $("#main-nav li ul").hide();
        $("#main-nav li a.current").parent().find("ul").slideToggle("slow");
        $("#main-nav li a.nav-top-item").click(function(){
            $(this).parent().siblings().find("ul").slideUp("normal");
            $(this).next().slideToggle("normal");
            return false;
        });
        $("#main-nav li a.no-submenu").click(function(){
            window.location.href=this.href;
            return false;
        });
        $("#main-nav li .nav-top-item").hover(function(){
            $(this).stop().animate({
                paddingRight:"25px"
            },200);
        },function(){
            $(this).stop().animate({
                paddingRight:"15px"
            });
        });
    }

}); // end of document ready
/*! include 001-iframe.js */
$(document).ready(function(){
    
    var source_url = decodeURIComponent( document.location.hash.replace( /^#/, '' ) );
    
    $('.yd-frame-submit').each(function(k,href){
       var a = $(href);
       a.attr('href',a.attr('href') + '#' + encodeURIComponent(source_url)); 
    });
    
    /**
     * @author vpriem
     * @since 25.07.2011
     */
    if (!$('.yd-frame').length) {
        return;
    }

    /**
     * @author vpriem
     * @since 25.07.2011
     */
    $("#yd-start-order-form-iframe").submit(function(){
        var cityId = parseInt(this.cityId.value);              
        if (cityId) {
            if (typeof ydState !== "undefined") {
                ydState
                    .setCity(cityId);
            }
            
            location.href = this.action + "/" + cityId + '#' + encodeURIComponent(source_url);
        } else if ($('#yd-plz-search-iframe').val().length > 4) {
            location.href = this.action + "/?plz=" + $('yd-plz-search-iframe').val() + '#' + encodeURIComponent(source_url);
        }
        return false;
    });

    /**
     * @author vpriem
     * @since 25.07.2011
     */
    $('#yd-start-order-iframe').live('click', function(){
        $("#yd-start-order-form-iframe").submit();
        return false;
    });

    if ( typeof source_url === 'undefined' ){
    //we should do smth here as well
    }
    else{
        var currentIframeSize = 0; 
        window.setInterval(function() {
            var size = $('body').outerHeight(true);
            if ( currentIframeSize != size ){
                currentIframeSize = size;
                log('sending new size ' + size + ' to parent ' + source_url);
                $.postMessage({if_height : size}, source_url, parent);
            }
        }, 1000);
    }        

    /**
     * @author vpriem
     * @since 12.10.2011
     */
    $('.extras').hide();

    //show special text box for any meal
    $('.show-special').live('click',function(){
        var id = $(this).attr('id').split('-')[2];
        $('#special-'+id).slideToggle('fast');
    });

    /**
     * @author vpriem
     * @since 12.10.2011
     */
    $(".click-no-size").click(function(){
       $(this).closest("tr")
              .find("td.right:first")
              .click(); 
    });

    /**
     * @author vpriem
     * @since 12.10.2011
     */
    $('.click').click(function(){
        var mealId = this.id.split('-')[2];
        var sizeId = this.id.split('-')[3];
        
        if ($(this).hasClass('activeiframe')) {
            $('.activeiframe').removeClass('activeiframe');
            $('.extras').hide();
            return;
        }
        
        $('.activeiframe').removeClass('activeiframe');
        $('.extras').hide();
        $(this).addClass('activeiframe');

        // deselect all extras and options
        $('.addExtra').attr('checked', false);
        $('.yd-option-row-checkbox').attr('checked', false);

        $('#yd-extras-' + mealId + '-' + sizeId).show();
        if (!$('#yd-extras-' + mealId + '-' + sizeId).hasClass("loaded")) {
            $.ajax({
                url: '/request_iframe/callmeal/',
                data: {
                    id: mealId,
                    size: sizeId
                },
                success: function (html) {
                    $('#yd-extras-' + mealId + '-' + sizeId)
                        .addClass("loaded")
                        .html(html);
                }
            });
        }
    }); 

    // deprecated ?
    $('.clickd').live('click', function(){
        $('.click').removeClass('activeiframe');
        if ($(this).hasClass('right')) {
            $(this).addClass('activeiframe');
        }
        else{
            $(this).parent().find('.click-size:first').addClass('activeiframe');
        }
    });

    $(".food_side-iframe").live("click", function() {
        var catId = this.id.split('-')[1];
        $('.active_cat').hide();
        $('.active').removeClass('active');
        $('#yd-category-'+catId).show().addClass('active_cat');
        $(this).addClass('active');
        return false;
    });

    $('.yd-frame-payment').live('click', function(){
        if ( ydOrder.is_minamount_reached() ){            
            log('submitting form to parent');
            $('#yd-finish-order-form').submit();
            return false;
        }
        else{
            log('min amount has not been reached');               
            return false;
        }
    });

    $('.yd-select-service-and-switch-to-parent').live('click', function(){
        window.top.location.href = $(this).attr('href');
    });

    $('.yd-select-service-and-stay-in-frame').live('click', function(){
        location.href = $(this).attr('href');
    });

});
/*! include 002-qype.js */
$(document).ready(function(){
    
    $('#yd-plz-2').css('display','none');

    $('#yd-plz-1,#yd-plz-2').live('click',function(){
        $(this).parent().find('#yd-plz-1,#yd-plz-2').toggle();
    });
    
    //close the discount info field
    $('#yd-frame-discount-close, #yd-frame-discount-ok').live('click',function(){
        $('#yd-frame-discount').remove(); 
    });

    // search for new plz on press enter key
    $('#qype-search-plz-2').keyup(function(e){
        if(e.keyCode == 13) {
            var redirect = $('input[name=redirect_to]').val();
            var plz = $('#qype-search-plz-2').val();
            //redirect parent
            window.top.location.href = redirect + '?postcode=' + plz;
        }
    });
    
    $('#qype-search').live('click',function(){
        var redirect = $('input[name=redirect_to]').val();
        var plz = $('#qype-search-plz-2').val();
        //redirect parent 
        window.top.location.href = redirect + '?postcode=' + plz;
    });
    
    //hide blue boxes by default 
    $('.yd-frame-bluebox').css('display','none');

    //show blue box
    $('#yd-show-bluebox').live('click',function(){
        $(this).next().toggle();
    });
    
    //hide blue box again
    $('#yd-hide-bluebox').live('click',function(){
        $(this).parent().toggle();
    });

    //change the current plz of a selected service
    $('#qype-search-plz-1').live('change',function(){
        var cityId = $('#qype-search-plz-1').val();
        ydState.setCity(cityId);
        $('input[name=cityIdTmp]').val(cityId);
    });
    
    $('.yd-frame-payment-qype').live('click', function(event){
        if ( ydOrder.is_minamount_reached() ){ 
            event.stopPropagation();
            log('submitting form to parent');
            $('input[name=cityId]').val($('input[name=cityIdTmp]').val());
            $('input[name=cityIdTmp]').remove();
            $('#yd-finish-order-form').submit();
            log($('#yd-finish-order-form'));
          
            return false;
        }
        else{
            log('min amount has not been reached');
            // show info to user
            $('.min-amount-not-reached-info').fadeIn('fast');
            setTimeout(function(){
                $('.min-amount-not-reached-info').fadeOut('slow');
            }, 3000);
            return false;
        }
    });   
});
/*! include 003-studivz.js */

/*! include 000-base.js */
/**
 * Class for handling of Discount ajax and Code Verification
 * each step increments currentStep by one
 *  @author Daniel Hahn <hahn@lieferando.de>
 *  @since 20.01.2012
 */
var DiscountVerification = function () {
    /* Init Part */
    this.currentStep = 1;
    
    this.classBase = "yd-discount-progress-";
    
    this.base = null;
    
    this.referer = null;
    
    this.sendOK = null;        
    this.timeoutRunning = false;
    
    /**
     * Substitute reference for this
     * $this should refer to a jQuery Object, thats the convention
     * DiscountVerification should be used instead
     */
    var $this = this;
    
    
    /**
     * startup function only when class yd-discount-2012 exist
     */
    this.init = function() {
       
        this.base = $('.yd-discount-2012');
        
        if (this.base.length) {
            log(this.base);
            
            var baseId = this.base[0].id.split('-');
            baseId.shift();
            this.currentStep = baseId.shift();
            this.referer = baseId.join('-'); // cause referer may contains some "-"
            
            $('.yd-discount-submit')
            .on('click', $this.submit)
            .closest("form").submit(function(){
                /**
                     * Thats tricky we should use ajaxSubmit
                     * with input submit instead
                     */
                return false;
            });
            $('.yd-discount-reset').on('click', $this.reset);
            
        

            //add validation to tel number
            $('.send-sms').on('keyup',function(){
                if ( this.value.length > 0 && this.value.charAt(0) == 0 ){
                    $this.showErrors({
                        status : 'NOK',
                        response : $.lang('telephone-not-valid')
                    }, $(this).closest('form'));
                }
                else{
                    $('.formError').hide();
                }
                this.value = this.value.replace(/[^\d]/g, ""); //replace non numeric values
                this.value = this.value.replace(/^0/, "");
            });
        
            this.updateView();
        
        }
    };
    
    /**
     *
     * Generic submit for forms, with call of actions
     */
    this.submit = function() {
                
        log('DiscountVerification.submit');            
        var form = $(this).closest('form');
        $('#yd-discount-evaluation-wait').show();
        
      
        
        if(form) {
            $(form).ajaxSubmit({
                beforeSubmit: function(arr, $form, options) {
                    arr.push({
                        name: "referer", 
                        value: $this.referer
                    }); 
                },
                
                success:   function(response){
                    $('#yd-discount-evaluation-wait').hide();
                    var data = $.parseJSON(response);
                    log($this);
                    switch(this.url) {
                        case "/request_discount/code" :
                            $this.handleCode(data,form);
                            break;
                        
                        case "/request_discount/email" :
                            $this.handleEmail(data,form);
                            break;
                        
                        case "/request_discount/tel" :
                            $this.handleTel(data,form);
                            break;
                        
                        case "/request_discount/telcode" :
                            $this.handleTelcode(data,form);
                            break;
                        
                    }
                },
                
                error : function(){
                    $this.handleTelcode({
                        status : 'NOK',
                        response : 'Server Error'
                    },form);
                }
            });         
        }      
    };
    
    /**
     * Catch all clicks on reset and resend, without forms, based on ids
     */
    this.reset = function() {
        var id = this.id;    
        log(this);
        
        switch(id) {
            case "send-mail":
                $this.handleSendEmail(this);
                break;
                
            case "send-sms":
                $this.handleSendSms(this);
                break;
            
            case "send-code":
                $this.handleSendCode(this);
                break;
        }
        
    };
    
    /* Handler Part */
    
    /**
     * handle code verification
     */
    this.handleCode = function(data, form) {
        log('DiscountVerification.handleCode');
        log(data);
        if(data.status === "OK") {
            this.currentStep = 2;
            this.updateView();
        }else if(data.status === "NOK") {
           
            this.showErrors(data, form);
        }
        
    };
    
    
    /**
     * handle Email Verification
     */
    this.handleEmail = function(data, form) {
        log('DiscountVerification.handleEmail');
        log(data);
        log(form);     
        
        if(data.status === "OK") {
            this.currentStep = 3;
            this.updateView();
        }else if(data.status === "NOK") {
           
            this.showErrors(data, form);
        }
    };
    
    
    /**
     * handle telephone Number Verification
     */
    this.handleTel = function(data, form) {
        log('DiscountVerification.handleTel');
        log(data);
        if(data.status === "OK") {
            this.currentStep = 5;
            this.updateView();
        }else if(data.status === "NOK") {
           
            this.showErrors(data, form);
        }
    };
    
    /**
     * handle telephone code Verification and show final lightbox
     */
    this.handleTelcode = function(data,form) {
        log('DiscountVerification.handleTelcode');
        log(data);
        if(data.status === "OK") {
            //            this.currentStep = 6;
            //            this.updateView();           
            var options = {
                width : 600,
                height: 380,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                },
                beforeClose: function() {
                    window.location.href="/";
                }
            };
            
            $('#dialog')
            .html(data.response)
            .dialog(options);
            $('.formError').hide();
            $('.yd-discount-reset').off('click', $this.reset);
            $('.yd-discount-reset').on('click', $this.reset);

        }else if(data.status === "NOK") {
           
            this.showErrors(data, form);
        }
    };
    
    /* reset and resend part */
    
    this.handleChangeData = function() {
        log('DiscountVerification.handleChangeData');
        this.currentStep = 2;
        $(this.base).removeClass(this.classBase + 3);
        $(this.base).addClass(this.classBase+this.currentStep);
    };
    
    this.handleSendEmail = function(elem) {
        log('DiscountVerification.handleSendEmail');
        var referer = $this.referer;
        log(referer);
        $('#yd-discount-evaluation-wait').show();
        
        $.ajax({
            type: "post",
            url: "/request_discount/resendmail",
            data: "referer="+referer,
            success: function(response){
                $('#yd-discount-evaluation-wait').hide();
                
                var data = $.parseJSON(response);
                
                if(data.status === "NOK") {
                    $('#yd-discount-email-verification-data').html(data.response);
                    $('#yd-discount-email-verification-data').removeClass('question');
                }
                else {
                    log('DiscountVerification.sentEmail');                    
                }
            }
        });                    
    };
    
    this.handleSendSms = function(elem) {
        log('DiscountVerification.handleSendSms');
        
        var referer = $this.referer;
        log(this.timeoutRunning);
        if(this.sendOk != null) {
            $('#yd-discount-evaluation-wait').show();
            
            $.ajax({
                type: "post",
                url: "/request_discount/resendsms",
                data: "referer="+referer,
                success: function(response){                    
                    log(response);
                    var data = $.parseJSON(response);
                    
                    $('#yd-discount-evaluation-wait').hide();
                                        
                    if(data.status === "NOK") {
                        $('#yd-discount-tel-verification-data').html(data.response);
                    }
                    else {
                        log('DiscountVerification.sentSms');
                        $this.sendOk = null;
                        $(elem).next().show();
                        $('#timeout-sms').text("120");
                    }                    
                }
            });      
        }else if(!this.timeoutRunning) {            
            this.timeoutRunning = true;
            
            var counter = $('#timeout-sms');
            var time = counter.text();                
            var elemColor = $(elem).css('color');
            var elemCursor = $(elem).css('cursor');
            var elemUnderline = $(elem).css('text-decoration');
            
            $(elem).css('color', '#777777');
            $(elem).css('cursor', 'text');
            $(elem).css('text-decoration', 'none');
            
            var interval = window.setInterval(function() {                                            
                time--;
                counter.text(time);
                if(time < 1) {
                    clearInterval(interval);
                    $this.sendOk = 1;
                    $(elem).next().hide();
                    $this.timeoutRunning = false;
                    $(elem).css('color', elemColor);
                    $(elem).css('text-decoration', elemUnderline);
                    $(elem).css('cursor', elemCursor);
                }                                 
            }, 1000);
        }
    };
    
    this.handleSendCode = function(elem) {
        log('DiscountVerification.handleSendCode');
         
        var referer = $this.referer;
        log(referer);
        if(this.sendOk != null) {
            $.ajax({
                type: "post",
                url: "/request_discount/resendcode",
                data: "referer="+referer,
                success: function(){               
                    log('DiscountVerification.sentCode');         
                    $this.sendOk = null;
                    $(elem).next().show();
                    $('#timeout-code').text("120");
                }
            });    
        }else if(!this.timeoutRunning) {            
            this.timeoutRunning = true;
            
            var counter = $('#timeout-code');
            var time = counter.text();                
            var elemColor = $(elem).css('color');
            var elemCursor = $(elem).css('cursor');
            var elemUnderline = $(elem).css('text-decoration');
            
            $(elem).css('color', '#777777');
            $(elem).css('cursor', 'text');
            $(elem).css('text-decoration', 'none');
            
            var interval = window.setInterval(function() {                                            
                time--;
                counter.text(time);
                if(time < 1) {
                    clearInterval(interval);
                    $this.sendOk = 1;
                    $(elem).next().hide();
                    $this.timeoutRunning = false;
                    $(elem).css('color', elemColor);
                    $(elem).css('text-decoration', elemUnderline);
                    $(elem).css('cursor', elemCursor);
                }                                 
            }, 1000);
        }   
    };
            
    /* view part */
    
    this.updateView = function(){
        log('DiscountVerification.updateView to step ' + this.currentStep);
        $('.formError').hide();
        log(this.classBase+this.currentStep);
        $(this.base).removeClass(this.classBase + (this.currentStep-1));
        $(this.base).addClass(this.classBase+this.currentStep);
        //disable everything which is not needed
        //loop to 10, if any step will be added :)
        for(var i=0;i<6;i++){
            if ( i != this.currentStep && i <= 3 && this.currentStep <= 3){
                log('disable input of step ' + i);
                $('.yd-step'+i+' input').prop('disabled',true);
            }
            else{
                $('.yd-step'+i+' input').prop('disabled',false);
            }
        }
        
    };
    
    this.showErrors = function(data, form) {
        log('DiscountVerification.showErrors');
        $('.formError').hide();
        var container = this.buildErrorContainer();        
        if(data.response === "FIELDS")  {
            var formArray = $(form).serializeArray();
            $(formArray).each(function(i,item){                
                if(data[item.name] != undefined) {
                    
                    var input = $(form).find('input[name="'+item.name+'"]');
                    log($(input).next());
                    $(input).next().children().remove();
                    $(input).next().append(container).children(".formErrorContent").first().text(data[item.name]);
                    $(input).next().show();
                }                
            });                        
        }else {
            var error = $(form).find('.formError');
          
            $(error).children().remove();
            $(error).append(container).children().first().text(data.response);
            $(error).show();
            var input = $(form).find('input');
            $(input).addClass('yd-form-invalid');
        }     
          
       
         
    // log(error);
    };
   
    this.buildErrorContainer = function() {
        var container =   '<div class="formErrorContent"></div><div class="formErrorArrow"><div class="line10"></div><div class="line9"></div><div class="line8"></div><div class="line7"></div>';
        container += '<div class="line6"></div><div class="line5"></div><div class="line4"></div><div class="line3"></div><div class="line2"></div><div class="line1"></div></div>';
        return container;
    };
    
};

$(document).ready(function() {
    var discountInstance = new DiscountVerification();
    discountInstance.init();
    
    /**
     * toggle howto: discount codes
     * @author Benjamin Seifert <seifert@lieferando.de>
     * @since 04.09.2012
     */
    $('#show-howto').live('click', function(){
        $(this).toggleClass('active');
        $('.yd-discount-howto').animate({
            opacity: 'toggle',
            height: 'toggle'
        }, 400);
    });
   
});
/*! include 001-cookie.js */
/**
 * set a cookie for internal tracking
 * @author mlaug
 * @since 29.03.2011
 */
function setCookieForDiscount(){
    var params = getUrlVars();

    if ("disha" in params) {
        var rabattHash = params['disha'];
        log('found rabattHash  ' + rabattHash + ', requesting random discount code');

        $.ajax({
            type: "post",
            url: "/request_discount/randomcodefromdiscount/",
            data: 'rabattHash=' + rabattHash,
            success: function(response) {
                var data = $.parseJSON(response);

                if (data.status == 'OK') {
                    $.cookie('yd-rabatt-code', $.base64.encode(data.rabattCode), {
                        path: '/',
                        expires: 1
                    });
                    log('got random discount code and marked it reserved ' + data.rabattCode + ', written to cookie');
                } else {
                    log('discount is either invalid or not found.');
                }
            }
        });
    }

    if ("rabatt_code" in params){
        var code = params['rabatt_code'];
        log('found rabatt_code  ' + code + ', writing cookie');
        $.cookie('yd-rabatt-code', $.base64.encode(code), {
            path: '/',
            expires: 1 // exit when browser closed
        });
    }


    if(document.referrer.length != 0 && document.referrer.split('?')[0].indexOf(window.location.host) === -1 ) {
           $.cookie('yd-rabatt-code', null);
    }

    if($('#yd-success-page').length) {
          $.cookie('yd-rabatt-code', null);
    }

}

$(document).ready(function(){
    setCookieForDiscount();

    if($('#discount-code').length && $.cookie('yd-rabatt-code')) {
        var code = $.base64.decode($.cookie('yd-rabatt-code'));

        log('using yd-rabatt-code ' + code);
        $('#discount-code').val(code);

    }

});
/*! include 001-tabs.js */
$(document).ready(function(){

    /**
     * More/Less
     * @author oknoblich
     * @since 07.03.2011
     */

    $('.yd-read-more').attr('style', 'width:1020px').after('<a class="yd-read-more-link">Mehr lesen...</a>').hide();

    $(".yd-read-more-link").live('click', function(){
        $(this).siblings(".yd-read-more").slideToggle("fast");
        $(this).text() == 'Mehr lesen...' ? $(this).text('Weniger lesen...') : $(this).text('Mehr lesen...');
    });

    $('.yd-read-more-fr').attr('style', 'width:1020px').after('<a class="yd-read-more-link-fr">Plus...</a>').hide();

    $(".yd-read-more-link-fr").live('click', function(){
        $(this).siblings(".yd-read-more-fr").slideToggle("fast");
        $(this).text() == 'Plus...' ? $(this).text('Ou Moins...') : $(this).text('Plus...');
    });
    
    $('.yd-read-more-pl').attr('style', 'width:1020px').after('<a class="yd-read-more-link-pl">Czytaj dalej...</a>').hide();

    $(".yd-read-more-link-pl").live('click', function(){
        $(this).siblings(".yd-read-more-pl").slideToggle("fast");
        $(this).text() == 'Czytaj dalej...' ? $(this).text('Mniej dalej...') : $(this).text('Czytaj dalej...');
    });
    
    $('.yd-read-more-br').attr('style', 'width:1020px').after('<a class="yd-read-more-link-br">Ler mais...</a>').hide();

    $(".yd-read-more-link-br").live('click', function(){
        $(this).siblings(".yd-read-more-br").slideToggle("fast");
        $(this).text() == 'Ler mais...' ? $(this).text('Ler menos...') : $(this).text('Ler mais...');
    });
    
    $('.yd-read-more-es').attr('style', 'width:1020px').after('<a class="yd-read-more-link-es">Leer mÃ¡s...</a>').hide();

    $(".yd-read-more-link-es").live('click', function(){
        $(this).siblings(".yd-read-more-es").slideToggle("fast");
        $(this).text() == 'Leer mÃ¡s...' ? $(this).text('Leer menos...') : $(this).text('Leer mÃ¡s...');
    });

});
/*! include 002-newsletter.js */
$(document).ready(function(){

    /**
     * Register for newsletter
     * @author vpriem
     * @since 14.02.3011
     */
    $("#yd-register-newsletter").ajaxForm({
        success: function (data) {
            if (data.success) {
                notification("success", data.success);
            }
            else if (data.error) {
                notification("error", data.error);
            }
        },
        dataType: "json"
    });
    
    /**
     * register for newsletter at not-online-yet domains
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 27.06.2011
     */
    $('#closed-europe-submit').live('click', function(){
        $(this).addClass('closed-europe-submit-loading');
        $('#closed-europe-result').html('');
        var email = $('#closed-europe-email').val();
        if (email == '' || email.length < 5) {
            return false;
        }
        $.ajax({
            url: '/request_user/registernewsletter/',
            data: {
                email: email
            },
            success: function (json) {
                $('#closed-europe-submit').removeClass('closed-europe-submit-loading');
                if (json.success) {
                    $('#closed-europe-content').hide();
                    $('#closed-europe-thx').show();
                }
                else{
                    $('#closed-europe-result').html(json.error);
                }
            },
            dataType: "json"
        });
    });
    
});
/*! include 001-infocenter.js */
/**
 *javascript for infocenter
 * @author Felix Haferkorn <haferkorn@lieferando.de>
 * @since 02.05.2011
 */
$(document).ready(function(){

    /**
     * validate & submit contact form "firma anmelden"
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 02.05.2011
     */
    $('#yd-form-contact-company-submit').live('click', function(){
        $('.yd-form-contact-form').css('border', '1px solid #555555');

        var submit = this;
        var form = this.form;
        var name = $('input[name=name]');
        var email = $('input[name=email]');
        var tel = $('input[name=tel]');
        var comp = $('input[name=comp]');
        var ort = $('input[name=ort]');
        var msg = $('textarea[name=msg]');

        // check required values not empty
        var correct = true;
        if (name.val().length < 5) {
            name.css('border', '1px solid red');
            correct = false;
        }
        if (email.val().length < 5) {
            email.css('border', '1px solid red');
            correct = false;
        }
        if (comp.val().length < 5) {
            comp.css('border', '1px solid red');
            correct = false;
        }
        if (msg.val().length < 5) {
            msg.css('border', '1px solid red');
            correct = false;
        }

        if (!correct) {
            notification('error', 'Bitte prÃ¼fen Sie Ihre Eingabe');
            return false;
        }

        $(submit).hide();
        $.ajax({
            type: "POST",
            dataType: 'json',
            url: "/request_info/contactcompany",
            data: ({
                'email': email.val(),
                'name': name.val(),
                'ort': ort.val(),
                'comp': comp.val(),
                'tel': tel.val(),
                'msg': msg.val()
            }),
            success : function(json){
                $(submit).show();
                
                if (json.result === false) {
                    notification('error', json.msg);
                    return;
                }

                $(form).clearForm();
                notification('success', json.msg);
                $('form#yd-form-contact-company').hide();
                $('div#yd-form-contact-company-thx').show();
                $('span.yd-infoform-step1').html('1. Anfrage');
                $('span.yd-infoform-step2').html('<strong>2. Kontakt</strong>');
            },
            error: function(){
                $(submit).show();
                notification('error', 'Nachricht konnte nicht gesendet werden');
            }
        });
    });

    /**
     * open link for "Firma anmelden"
     * @author Felix Haferkorn
     * @since 28.03.2012
     */
    $('#yd-info-register-company').live('click', function(){
        location.href = "/info/firmaanmelden";
        return false;
    });

    /**
     * "Kostenrechner"
     * @author Felix Haferkorn
     * @since 28.03.2012
     */
    if($("#slider").length > 0){
        $("#slider").slider({
            value:15,
            min: 5,
            max: 50,
            step: 5,
            slide: function(event, ui) {

                var countBelege = $('#count-belege').val();
                var valueSlider = ui.value;
                var costYd = $('#cost-with-yd').html().split(' ')[0];

                if(countBelege != 0 && valueSlider != 0){
                    $('#cost-before').html((countBelege*valueSlider) + ' â‚¬');
                    $('#win-with-yd').html(((countBelege*valueSlider) - costYd) +' â‚¬');
                    $('#slider-val').val(ui.value);
                }
            }
        });
        $('#slider-val').val('10');
        $('#cost-before').html($('#count-belege').val()*15 + ' â‚¬');
        $('#win-with-yd').html((($('#count-belege').val()*15) - $('#cost-with-yd').html().split(' ')[0]) +' â‚¬');

        $('#count-belege').keyup(function(){
            var countBelege = $('#count-belege').val();
            var valueSlider = $('#slider-val').val();
            var costYd = $('#cost-with-yd').html().split(' ')[0];

            if(countBelege != 0 && valueSlider != 0){
                $('#cost-before').html((countBelege*valueSlider) + ' â‚¬');
                $('#win-with-yd').html(((countBelege*valueSlider) - costYd) +' â‚¬');
                $('#slider-val').val(valueSlider);
            }
        });
    }

    /**
     * show, hide and select dropdown for proposal category
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 02.05.2011
     */
    $('#sort').live('click', function(){
        $('#yd-sorting-middle-list').toggle();
    });

    $('.yd-sorting-middle-list').live('click', function(){
        var val = $(this).html();
        $('#yd-sorting-default').hide();
        $('#yd-sorting-value').html(val).show();
        $('input[name=dropdownval]').val(val);
        $('#yd-sorting-middle-list').toggle();
    });

    /**
     * Restaurant vorschlagen Besitzer Checkbox
     * @author Daniel Hahn <hahn@lieferando.de>
     * @since 10.08.2012
     */
    $('#yd-infocenter-propose-owner').click(function(){
        if($(this).prop('checked') == 1) {
             $('input[name="ownerName"]').show();
        }else {
            $('input[name="ownerName"]').hide();
        }
    });

    /**
     * Restaurant vorschlagen
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 02.05.2011
     */
    $('#yd-proposal-submit').live('click', function(){
        $('.yd-form-input').css('border', '1px solid #CCCCCC');

        var correct = true;
        $('.yd-form-input').each(function(){
            if ($(this).hasClass('yd-empty-text') && !$(this).hasClass('yd-not-required')) {
                correct = false;
                $(this).css('border', '1px solid red');
            }
        });

        var submit = this;
        var form = this.form;
        var service = $('input[name="service"]');
        var street = $('input[name="street"]');
        var ort = $('input[name="ort"]');
        var tel = $('input[name="tel"]');
        var category = $('input[name="dropdownval"]');
        var isOwner = $('input[name="isOwner"]');
        var name = $('input[name="ownerName"]');

        if (isOwner.is(':checked') && name.val().length <= 3) {
            name.css('border', '1px solid red');
            correct = false;
        }

        if (service.val().length < 3) {
            service.css('border', '1px solid red');
            correct = false;
        }

        if (street.val().length < 5) {
            street.css('border', '1px solid red');
            correct = false;
        }

        if (ort.val().length < 5) {
            ort.css('border', '1px solid red');
            correct = false;
        }

        if (tel.length && tel.val().length < 5) {
            tel.css('border', '1px solid red');
            correct = false;
        }

        if (!correct) {
            notification('error', $.lang("check-red-fields"));
            return false;
        }

        $(submit).hide();
        $.ajax({
            type: "POST",
            dataType: 'json',
            url: "/request_info/proposal",
            data: {
                'service': service.val(),
                'street': street.val(),
                'ort': ort.val(),
                'category': category.val(),
                'telefon':  tel.length ? tel.val() : "",
                'name': name.length ? name.val() : ""
            },
            success: function(json){
                $(submit).show();
                
                if (json.result === false) {
                    notification('warn', json.msg);
                    return;
                }

                $(form).clearForm("");
                $('#yd-restproposal').hide();
                $('#yd-restproposal-thx').show();
            },
            error: function(){
                $(submit).show();
                notification('error', 'Could not send message');
            }
        });
    });

    $('#yd-register-restaurant-submit').live('click', function(){
        $('.yd-form-input').css('border', '1px solid #CCCCCC');

        var submit = this;
        var form = this.form;
        var service = $('input[name=service]');
        var name = $('input[name=name]');
        var street = $('input[name=street]');
        var city = $('input[name=city]');
        var telefon = $('input[name=telefon]');
        var mobil = $('input[name=mobil]');
        var email = $('input[name=email]');
        var contacttime = $('input[name=dropdownval]');

        var correct = true;
        if (service.val().length < 3 || !service.hasClass('yd-form-valid')) {
            service.css('border', '1px solid red');
            correct = false;
        }

        if (name.val().length < 3 || !name.hasClass('yd-form-valid')) {
            name.css('border', '1px solid red');
            correct = false;
        }

        if (street.val().length < 5 || !street.hasClass('yd-form-valid')) {
            street.css('border', '1px solid red');
            correct = false;
        }

        if (city.val().length < 5 || !city.hasClass('yd-form-valid')) {
            city.css('border', '1px solid red');
            correct = false;
        }

        if (!correct) {
            return false;
        }

        $(submit).hide();
        $.ajax({
            type: "POST",
            dataType : 'json',
            url: "/request_info/registerrestaurant",
            data: ({
                'service': service.val(),
                'name': name.val(),
                'street': street.val(),
                'ort': city.val(),
                'telefon': telefon.val(),
                'mobil': mobil.val(),
                'email': email.val(),
                'contacttime': contacttime.val()
            }),
            success: function(json){
                $(submit).show();
                
                if (json.result === false) {
                    notification('warn', json.msg);
                    return;
                }

                $(form).clearForm("");
                $('#yd-registerrestaurant').hide();
                $('#yd-registerrestaurant-thx').show();
            },
            error: function(){
                $(submit).show();
                notification('error', 'Could not send message');
            }
        });
    });

    /**
     * validate and submit contact form (FAQ & Kundenservice) in INfoCenter
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 10.05.2011
     */
    $('#infocenter-contact-submit').live('click', function(){
        var submit = this;
        var form = this.form;
        var name = $('input[name="name"]');
        var email = $('input[name="email"]');
        var tel = $('input[name="tel"]');
        var comp = $('input[name="comp"]');
        var ort = $('input[name="ort"]');
        var msg = $('textarea[name="message"]');

        var correct = true;

        name.css('border', '');
        if (name.val().length < 3) {
            name.css('border', '1px solid red');
            correct = false;
        }

        email.css('border', '');
        if (email.val().length < 5) {
            email.css('border', '1px solid red');
            correct = false;
        }

        msg.css('border', '');
        if (msg.val().length < 5) {
            msg.css('border', '1px solid red');
            correct = false;
        }

        if (!correct){
            notification('error', $.lang('contact-check-red'));
            return false;
        }

        $(submit).hide();
        $.ajax({
            type: "POST",
            dataType: 'json',
            url: "/request_info/contactform",
            data: {
                'name': name.val(),
                'email': email.val(),
                'tel': tel.val(),
                'comp': comp.val(),
                'ort': ort.val(),
                'message': msg.val()
            },
            success: function(json){
                $(submit).show();

                if (json.result === false) {
                    notification('error', json.msg);
                    return;
                }

                $(form).clearForm();
                notification('success', json.msg);
            },
            error: function(){
                $(submit).show();
                notification('error', $.lang('contact-could-not-send'));
            }
        });
    });

});
/*! include 002-search.js */
$(document).ready(function(){
   
   /**
    * @author vpriem
    * @since 23.01.2012
    */
    $('#yd-infocenter-search-trigger').click(function() {
        $('#yd-infocenter-search').trigger("keyup", [13]);
        this.blur();
        return false;
    });
    
    if ($('#yd-infocenter-search').length) {
        $('#yd-infocenter-search').val("").quicksearch('.accordion li', {
            'selector': "p",
            'bind': "enter",
            'show': function() {
                var val = $('#yd-infocenter-search').val();
                if (!val.length) {
                    return;
                }

                $("a", this).addClass('active');
                $("p", this).addClass("yd-found-sth").show();
            },
            'hide': function() {
                var val = $('#yd-infocenter-search').val();
                if (!val.length) {
                    return;
                }

                $("a", this).removeClass('active');
                $("p", this).removeClass("yd-found-sth").hide();
            },
            onBefore: function() { 
                $("p.yd-found-sth").unhighlight();
            },
            onAfter: function() { 
                var val = $('#yd-infocenter-search').val();
                if (!val.length) {
                    return;
                }

                if (!$("p.yd-found-sth").length) {
                    notification("error", $.lang("infocenter-no-match"));
                    return;
                }

                var vals = val.toLowerCase().split(' ');
                for (var i = 0, n = vals.length; i < n; i++) {
                    $("p.yd-found-sth").highlight(vals[i]);
                }
                
                var results = $("span.highlight").length;
                notification("success", $.nlang("infocenter-found", "infocenter-found-n", results, results));
            }
        }).emptytext();
    }
    
});
/*! include omq-self-service.js */
/*!
 * OMQ self service javascript library
 * v-12-06
 * http://www.omq.de/
 *
 * Copyright 2011, OMQ GmbH Berlin Germany
 * http://www.omq.de/license
 *
 * Do  6 Sep 2012 09:19:41 CEST
 */

var omq=omq||{};
(function(){
    var a=false;
    var b=/xyz/.test(function(){
        xyz
        })?/\b_super\b/:/.*/;
    this.Obj_=function(){};
    
    Obj_.extend=function(g){
        var f=this.prototype;
        a=true;
        var d=new this();
        a=false;
        for(var c in g){
            if(typeof g[c]=="function"&&typeof f[c]=="function"&&b.test(g[c])){
                d[c]=(function(h,i){
                    return function(){
                        var k=this._super;
                        this._super=f[h];
                        var j=i.apply(this,arguments);
                        this._super=k;
                        return j
                        }
                    })(c,g[c])
            }else{
            d[c]=g[c]
            }
        }
        function e(){
    if(!a&&this.init){
        this.init.apply(this,arguments)
        }
    }
e.prototype=d;
e.constructor=e;
e.extend=arguments.callee;
return e
}
})();
var Obj=Obj_.extend({
    $:jQuery||$
    });
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.ERROR=1;
omq.widget.WARNING=2;
omq.widget.INFO=4;
omq.widget.DEBUG=8;
omq.widget.RELEASE_LEVEL=omq.widget.ERROR;
omq.widget.DEBUG_LEVEL=omq.widget.ERROR|omq.widget.WARNING|omq.widget.INFO|omq.widget.DEBUG;
omq.widget.Log=Obj.extend({
    ERROR_MSG:"An error occurred.",
    ERROR:1,
    WARNING:2,
    INFO:4,
    DEBUG:8,
    _level:1,
    init:function(a){
        this._level=a||this._level
        },
    ajaxError:function(b,e,c,a){
        var d="";
        d+=(b.status!=0)?"RESPONSE: "+b.statusText+" ["+b.status+"]\n":"";
        d+=(e!="")?"TEXT: "+e+"\n":"";
        d+=(c!=null)?"EXCEPTION: "+c+"\n":"";
        this.error(d,a)
        },
    error:function(b,a){
        if(this._level&this.ERROR){
            this.console("[ERROR] "+a);
            this.console("  "+b)
            }
        },
warning:function(b,a){
    if(this._level&this.WARNING){
        this.console("[WARNING] "+a);
        this.console("  "+b)
        }
    },
info:function(b,a){
    if(this._level&this.INFO){
        this.console("[INFO] "+a);
        this.console("  "+b)
        }
    },
debug:function(b,a){
    if(this._level&this.DEBUG){
        this.console("[DEBUG] "+a);
        this.console("  "+b)
        }
    },
console:function(a){
    if(window.console){
        window.console.log(a)
        }
    }
});
var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.de_DE={
    MORE:"mehr",
    CANCEL:"Abbrechen",
    SAVE:"Speichern",
    SEND:"Senden",
    ALERT:"FEHLER",
    CONNECTION_ERROR:"Die Verbindung zum Server ist fehlgeschlagen.",
    INPUT_QUESTION_TITLE:"Anfrage",
    OFFER_LIST_TITLE:"VorschlÃ¤ge",
    INPUT_CONTACT_TITLE:"Kontaktdaten",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Nachricht",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"MÃ¶gliche LÃ¶sungen zu Ihrer Anfrage werden hier angezeigt.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Anfrage",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Antwort",
    SOLUTION_WIDGET_NO_SOLUTION:".. Keine Antworten vorhanden.",
    EMPTY_PROBLEM_MESSAGE:"Bitte Nachricht eingeben!",
    EMPTY_NAME_MESSAGE:"Bitte Namen eingeben!",
    EMPTY_EMAIL_MESSAGE:"Bitte E-Mail-Adresse eingeben!",
    INVALID_EMAIL_MESSAGE:"UngÃ¼ltige Adresse!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.en_EN={
    MORE:"More",
    CANCEL:"Cancel",
    SAVE:"Save",
    SEND:"Send",
    ALERT:"Error",
    CONNECTION_ERROR:"No connection to server.",
    INPUT_QUESTION_TITLE:"Request",
    OFFER_LIST_TITLE:"Suggestions",
    INPUT_CONTACT_TITLE:"Contact Details",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Message",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Possible solutions to your request will be shown here.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Request",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Solution",
    SOLUTION_WIDGET_NO_SOLUTION:".. No solutionss available.",
    EMPTY_PROBLEM_MESSAGE:"Please enter details.",
    EMPTY_NAME_MESSAGE:"Please enter name!",
    EMPTY_EMAIL_MESSAGE:"Please enter E-Mail Address!",
    INVALID_EMAIL_MESSAGE:"Invalid Address!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.es_ES={
    MORE:"Mas",
    CANCEL:"Cancelar",
    SAVE:"Guardar",
    SEND:"Enviar",
    ALERT:"Error",
    CONNECTION_ERROR:"La conexiÃ³n con el servidor a sido interrumpida.",
    INPUT_QUESTION_TITLE:"Consulta",
    OFFER_LIST_TITLE:"Propuestas",
    INPUT_CONTACT_TITLE:"Datos de contacto",
    OMQ_LINK_TEXT:"Software de auto servicio by ",
    INPUT_PROBLEM_TITLE:"Mensaje",
    INPUT_NAME_TITLE:"Nombre",
    INPUT_EMAIL_TITLE:"E-mail",
    EMPTY_PROBLEMS_LIST_TITLE:"AquÃ­ se indicarÃ¡n las posibles respuestas a su consulta.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Consulta",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Respuesta",
    SOLUTION_WIDGET_NO_SOLUTION:"..ninguna respuesta disponible.",
    EMPTY_PROBLEM_MESSAGE:"Escriba por favor su mensaje!",
    EMPTY_NAME_MESSAGE:"Escriba su nombre por favor!",
    EMPTY_EMAIL_MESSAGE:"Introduzca su direcciÃ³n de correo electrÃ³nico!",
    INVALID_EMAIL_MESSAGE:"DirecciÃ³n no valida!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.fr_FR={
    MORE:"Plus",
    CANCEL:"Annuler",
    SAVE:"Sauvegaerder",
    SEND:"Envoyer",
    ALERT:"Erreur",
    CONNECTION_ERROR:"La connexion au serveur a Ã©chouÃ©.",
    INPUT_QUESTION_TITLE:"Question",
    OFFER_LIST_TITLE:"Propositions",
    INPUT_CONTACT_TITLE:"DonnÃ©es de contact",
    OMQ_LINK_TEXT:"Logiciel de libre-service en ligne par",
    INPUT_PROBLEM_TITLE:"Message",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Les rÃ©ponses possibles Ã  votre question sont affichÃ©es ici.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Question",
    SOLUTION_WIDGET_SOLUTION_TITLE:"RÃ©ponse",
    SOLUTION_WIDGET_NO_SOLUTION:"..aucune rÃ©ponse n'est disponible.",
    EMPTY_PROBLEM_MESSAGE:"Veuillez saisir le message !",
    EMPTY_NAME_MESSAGE:"Veuillez saisir le nom !",
    EMPTY_EMAIL_MESSAGE:"Veuillez saisir l'adresse e-mail !",
    INVALID_EMAIL_MESSAGE:"Adresse incorrecte !"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.it_IT={
    MORE:"Altro",
    CANCEL:"Annulla",
    SAVE:"Salva",
    SEND:"Invia",
    ALERT:"FEHLER",
    CONNECTION_ERROR:"Connessione server fallita.",
    INPUT_QUESTION_TITLE:"Richiesta",
    OFFER_LIST_TITLE:"Consigli",
    INPUT_CONTACT_TITLE:"Contatti",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Messaggio",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Le risposte piÃº adatte alla tua richiest verranno visualizzate qui.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Richiesta",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Risposta",
    SOLUTION_WIDGET_NO_SOLUTION:".. Nessuna risposta disponibile.",
    EMPTY_PROBLEM_MESSAGE:"Digita il messaggio!",
    EMPTY_NAME_MESSAGE:"Digita nome!",
    EMPTY_EMAIL_MESSAGE:"Digita indirizzo Mail!",
    INVALID_EMAIL_MESSAGE:"Indirizzo non valido!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.nl_NL={
    MORE:"meer",
    CANCEL:"Annuleren",
    SAVE:"Opslaan",
    SEND:"Zenden",
    ALERT:"FOUT",
    CONNECTION_ERROR:"De verbinding met de server is verbroken.",
    INPUT_QUESTION_TITLE:"Aanvraag",
    OFFER_LIST_TITLE:"Suggesties",
    INPUT_CONTACT_TITLE:"Contact-data",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Bericht",
    INPUT_NAME_TITLE:"Naam",
    INPUT_EMAIL_TITLE:"Email",
    EMPTY_PROBLEMS_LIST_TITLE:"Mogelijke antwoorden op uw aanvraag worden hier getoond.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Aanvraag",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Antwoord",
    SOLUTION_WIDGET_NO_SOLUTION:".. Geen antwoorden beschikbaar.",
    EMPTY_PROBLEM_MESSAGE:"A.u.b. bericht invoeren!",
    EMPTY_NAME_MESSAGE:"A.u.b. naam invoeren!",
    EMPTY_EMAIL_MESSAGE:"A.u.b. email-adres invoeren!",
    INVALID_EMAIL_MESSAGE:"Ongeldig adres!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.css_pattern={
    button_headlines:"ui_widget_hl_font",
    input_text:"ui_input_font",
    input_error:"ui_input_error_msg",
    input_tooltip:"ui_input_default_info",
    button_color:"ui_problem_bg",
    popup_headlines:"ui_popup_hl_font",
    popup_text:"ui_popup_font",
    popup_color:"ui_popup",
    color:"color",
    fonts:"font-family",
    size:"font-size",
    style:"font-style",
    background_color:"background-color"
};

var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Ajax=Obj.extend({
    _parent:null,
    _element:null,
    _options:null,
    POST:"POST",
    DATA_TYPE:"json",
    CONTENT_TYPE:"application/json;charset=utf-8",
    init:function(a){
        this._options=a;
        return this
        },
    post:function(b){
        var a=this;
        this.$.ajax({
            data:b.data,
            success:b.success,
            url:a._options.buildURL(b.path),
            type:a.POST,
            dataType:a.DATA_TYPE,
            contentType:(b.contentType!=null)?b.contentType:a.CONTENT_TYPE,
            error:function(c,e,d){
                a._options.log.ajaxError(c,e,d)
                }
            })
    },
get:function(b){
    var a=this;
    this.$.ajax({
        data:b.data,
        success:b.success,
        url:a._options.buildURL(b.path),
        dataType:a.DATA_TYPE,
        contentType:(b.contentType!=null)?b.contentType:a.CONTENT_TYPE,
        error:function(c,e,d){
            a._options.log.ajaxError(c,e,d)
            }
        })
}
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.AjaxPhpProxy=Obj.extend({
    _parent:null,
    _element:null,
    _options:null,
    GET:"GET",
    POST:"POST",
    DATA_TYPE:"json",
    CONTENT_TYPE:"application/json;charset=utf-8",
    init:function(a){
        this._parent=parent;
        this._options=a;
        return this
        },
    post:function(c){
        var a=this;
        var b={
            methode:this.POST,
            path:c.path,
            data:c.data
            };
            
        if(c.contentType!=null){
            b.contentType=c.contentType
            }
            this.$.ajax({
            data:b,
            success:c.success,
            url:a._options.buildURL(""),
            type:a.POST,
            dataType:a.DATA_TYPE,
            error:a._options.ajaxErrorHandler
            })
        },
    get:function(c){
        var a=this;
        var b={
            methode:this.GET,
            path:c.path,
            data:c.data
            };
            
        if(c.contentType!=null){
            b.contentType=c.contentType
            }
            this.$.ajax({
            data:b,
            success:c.success,
            url:a._options.buildURL(""),
            type:a.POST,
            dataType:a.DATA_TYPE,
            error:a._options.ajaxErrorHandler
            })
        }
    });
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.DynamicText=Obj.extend({
    _element:null,
    _options:null,
    _parent:null,
    _lastInputTimeoutID:0,
    ANALYSE_URL_G2_TEXT:function(b,a,c){
        return(c==null)?("/service/selfSupport/problems/page/"+b+"/size/"+a+"/search/criteria/text/language/all/cjson"):("/service/selfSupport/problems/page/"+b+"/size/"+a+"/search/criteria/text/language/"+c+"/cjson")
        },
    init:function(c,b,a){
        this._parent=c;
        this._element=b;
        this._options=a;
        this.startChangeHandler()
        },
    inputHandler:function(){
        var a=this;
        this._lastInputTimeoutID++;
        var b=this._lastInputTimeoutID;
        setTimeout(function(){
            a._options.log.debug("InputTimeoutID: "+b+"/"+a._lastInputTimeoutID,"omq.widget.DynamicText.inputHandler");
            if(b==a._lastInputTimeoutID){
                var c=a.getText();
                if(c!=""){
                    a.analyse(a.getText())
                    }
                }
        },500)
},
analyse:function(b){
    this._options.log.info("Text: "+b,"omq.widget.DynamicText.analyse");
    var a=this;
    this._options.ajax.post({
        path:a.ANALYSE_URL_G2_TEXT(0,this._options.problemLimit,this._options.lang),
        data:b,
        contentType:"text/plain;charset=utf-8",
        success:function(c){
            a._parent.textAnalysedHandler(c)
            }
        })
},
getText:function(){
    var a=this;
    var b="";
    this.$(this._element).each(function(c){
        var d="";
        if(a.$(this).is("input")){
            d+=a.$(this).attr("value").trim()
            }else{
            if(a.$(this).is("textarea")){
                d+=a.$(this).attr("value").trim()
                }else{
                if(a.$(this).is("select")){
                    a.$("option:selected",this).each(function(){
                        d+=a.$(this).text().trim()+" "
                        })
                    }
                }
        }
    if(d!=""){
        if(c>0&&b!=""){
            b+="\n\n"+d
            }else{
            b+=d
            }
        }
});
return b
},
startChangeHandler:function(){
    var a=this;
    this.$(this._element).each(function(){
        if(a.$(this).is("input")){
            a.$(this).keydown(function(){
                a.inputHandler()
                })
            }else{
            if(a.$(this).is("textarea")){
                a.$(this).keydown(function(){
                    a.inputHandler()
                    })
                }else{
                if(a.$(this).is("select")){
                    a.$(this).change(function(){
                        a.analyse(a.getText())
                        })
                    }
                }
        }
    })
}
});
(function(a){
    a.fn.outerHTML=function(){
        return a("<div>").append(this.eq(0).clone()).html()
        };
        
    a.fn._impl={};
    
    a.fn.submitAll=function(){
        a(a.fn._impl).each(function(b){
            a.fn._impl[b].submit()
            })
        };
        
    a.fn.omq_self_support=function(d,e,c){
        d=a.extend({
            buildURL:function(f){
                return("https://127.0.0.1:8080/debug"+f)
                },
            solutionListSendHandler:function(f){},
            log:new omq.widget.Log(omq.widget.RELEASE_LEVEL),
            problemLimit:"3",
            maxLenProblemPreview:"90",
            maxLenSolutionPreview:"30",
            analyserVersion:"2",
            locale:omq.locale.de_DE,
            cssPattern:omq.locale.css_pattern,
            size:"large",
            cssFile:"",
            style:{}
        },d);
    if(d.cssFile!=null&&d.cssFile!=""){
        a.get(d.widgetPath+d.cssFile,function(f){
            a("head").append("<style type='text/css'>"+f+"</style>")
            }).error(function(f,g){
            alert("Fehler: CSS-Datei konnte nicht geladen werden! \n\n HTTP status codes: "+f.status)
            })
        }
        if(d.lang!=null){
        d.lang=d.lang.toLowerCase();
        d.lang=d.lang.substr(0,2);
        d.lang=d.lang.replace(/(us)|(gb)/g,"en");
        if(d.lang=="en"){
            d.locale=omq.locale.en_EN
            }else{
            if(d.lang=="es"){
                d.locale=omq.locale.es_ES
                }else{
                if(d.lang=="fr"){
                    d.locale=omq.locale.fr_FR
                    }else{
                    if(d.lang=="it"){
                        d.locale=omq.locale.it_IT
                        }else{
                        if(d.lang=="nl"){
                            d.locale=omq.locale.nl_NL
                            }
                        }
                }
        }
}
}
var b=this;
return this.each(function(f){
    a.fn._impl[f]=new omq.widget.OMQSelfSupport(this,d,e,c)
    })
}
})(jQuery);
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.OMQSelfSupport=Obj.extend({
    _element:null,
    _options:null,
    _problems:null,
    _version:null,
    _text:null,
    _sendButton:null,
    _tracker:null,
    init:function(e,d,b,c){
        var a=this;
        this._element=e;
        this._options=d;
        this._options=this.$.extend({
            ajaxErrorHandler:function(g,i,h){
                var f=new omq.widget.Log();
                f.ajaxError(g,i,h)
                }
            },this._options);
    this.$(this._element).addClass("omq");
    this.$(this._element).addClass("omq_ui_widget");
    this._options=this.$.extend({
        ajax:new omq.widget.AjaxPhpProxy(this._options)
        },this._options);
    this._tracker=new omq.widget.Tracker(this,this._options);
    this._problems=new omq.widget.Problems(this,this._options);
    this._version=new omq.widget.Version(this,this._options);
    this._text=new omq.widget.DynamicText(this,b,this._options);
    if(c!=null){
        this._sendButton=new omq.widget.SendButton(this,c,this._options)
        }
    },
getElement:function(){
    return this._element
    },
getProblems:function(){
    return this._problems
    },
getTextElement:function(){
    return this._text
    },
getTracker:function(){
    return this._tracker
    },
textAnalysedHandler:function(a){
    this._problems.update(a)
    },
problemChangedHandler:function(){
    var b=new Array("0px","15px","-15px","30px","-30px","15px","-15px","0px");
    var a=50;
    while(b.length>0){
        jQuery(this._element).animate({
            left:"+="+b.pop()
            },a)
        }
    },
submit:function(){
    this._tracker.formSendHandler(this._text.getText())
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.ProblemPopup=Obj.extend({
    _options:null,
    POPUP_TEMPL:function(b,a){
        return("<div class='omq'>   <div class='popup close ui_popup_overlay'></div>   <div class='popup pos ui_popup ui_popup_font'>       <h2 class='ui_popup_hl_font ui_marg_none ui_marg_bot'>"+a.locale.SOLUTION_WIDGET_PROBLEM_TITLE+"</h2>       <div class='close ui_close ui_link'></div>       <p>"+b.description+"</p>       <ul class='solutions ui_list_none ui_pad_none'></ul>   </div></div>")
        },
    SOLUTION_TEMPL:function(a,b){
        return("<li>   <h2 class='ui_popup_hl_font ui_marg_none ui_marg_top ui_marg_bot'>"+b.locale.SOLUTION_WIDGET_SOLUTION_TITLE+" "+a+"   </h2>	<div class='description ui_text_left'></div></li>")
        },
    G1:"1",
    G2:"2",
    POPUP_MARGIN:20,
    init:function(b,a){
        this._options=a;
        this.buildPopUp(b)
        },
    buildPopUp:function(d){
        var c=this;
        var b=this.$(c.POPUP_TEMPL(d,this._options));
        if(d.solutions.length==1){
            var a=d.solutions[0];
            var f=this.$(c.SOLUTION_TEMPL("",c._options));
            this.$(".description",f).append("<p>"+a.description+"</p>");
            this.$(".solutions",b).append(f)
            }else{
            if(d.solutions.length>1){
                this.$(d.solutions).each(function(h){
                    var g=this;
                    var j=c.$(c.SOLUTION_TEMPL(h+1,c._options));
                    c.$(".description",j).append("<p>"+g.description+"</p>");
                    c.$(".solutions",b).append(j)
                    })
                }else{
                var f=this.$(c.SOLUTION_TEMPL("",c._options));
                this.$(".description",f).append("<p>"+c._options.SOLUTION_WIDGET_NO_SOLUTION+"</p>");
                this.$(".solutions",b).append(f)
                }
            }
        this._element=b;
    this.$("body").append(this._element);
    this.$(".ui_popup_overlay",this._element).height(this.getDocumentHeight());
    var e=this.getViewPortHeight()-(parseInt(this.$(".ui_popup",this._element).css("padding-top").split("px")[0])+parseInt(this.$(".ui_popup",this._element).css("padding-bottom").split("px")[0])+this.POPUP_MARGIN*2);
    this.$(".ui_popup",this._element).css("height",e);
    this.$(".ui_popup",this._element).css("top",(this.getViewPortHeight()-this.$(".ui_popup",this._element).outerHeight())*0.5+this.getDocumentScrollPos());
    this.$(".ui_popup",this._element).css("left",(this.getViewPortWidth()-this.$(".ui_popup",this._element).outerWidth())*0.5);
    this.$(".close",this._element).click(function(){
        c.$(c._element).remove()
        })
    },
getViewPortWidth:function(){
    var a=window;
    if(a.innerWidth){
        return a.innerWidth
        }else{
        if(a.document.documentElement&&a.document.documentElement.clientWidth){
            return a.document.documentElement.clientWidth
            }
            return a.document.body.offsetWidth
        }
    },
getViewPortHeight:function(){
    var a=window;
    if(a.innerHeight){
        return a.innerHeight
        }else{
        if(a.document.documentElement&&a.document.documentElement.clientHeight){
            return a.document.documentElement.clientHeight
            }
            return a.document.body.offsetHeight
        }
    },
getDocumentHeight:function(){
    return Math.max(this.$(document).height(),this.$(window).height(),document.documentElement.clientHeight)
    },
getDocumentScrollPos:function(){
    return Math.max(this.$(document).scrollTop(),this.$(window).scrollTop())
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Problems=Obj.extend({
    _element:null,
    _parent:null,
    _options:null,
    PROBLEMS_TEMPL_EMPTY:function(a){
        return("<div class='empty_list ui_popup_font ui_overlay ui_overflow ui_border ui_border_bot ui_pad'>	<h2 class='ui_popup_hl_font'>"+a.EMPTY_PROBLEMS_LIST_TITLE+"</h2></div>")
        },
    PROBLEMS_TEMPL:function(a){
        return("<div class='ui_overflow ui_border ui_border_bot' >	<form class='problems'></form></div>")
        },
    PROBLEM_TEMPL:function(a){
        return("<div class='problem ui_problem ui_link'>   <input type='hidden' class='id' value='"+a.id+"' />	<h2 class='description ui_popup_hl_font ui_marg_none'>"+a.description+"</h2></div>")
        },
    G1:"1",
    G2:"2",
    init:function(c,b){
        var a=this;
        this.$(this.PROBLEMS_TEMPL_EMPTY(b.locale)).appendTo(c.getElement());
        this._element=this.$(this.PROBLEMS_TEMPL(b.locale)).appendTo(c.getElement());
        this._options=b;
        this._parent=c
        },
    getElement:function(){
        return this._element
        },
    update:function(b){
        var d=this.parseJSON(b);
        var e=this.getAll();
        if(d.length<1&&e.length<1){
            return
        }
        if(d.length==e.length){
            var a=true;
            for(var c=0;c<e.length;c++){
                if(e[c].id!=d[c].id){
                    a=false
                    }
                }
            if(a&&e.length>0){
            return
        }
    }
    this.$(".problems",this._element).empty();
    this.setAll(d);
    this._parent.problemChangedHandler()
    },
getCurrentProblemList:function(){
    return this._problemList
    },
parseJSON:function(b){
    var a=this;
    return this.$(b.data).map(function(){
        return{
            id:this.id,
            description:this.description,
            tags:a.$(this.tags).map(function(){
                return{
                    id:this.id,
                    value:this.value
                    }
                }),
        solutions:a.$(this.solutions).map(function(){
            return{
                id:this.id,
                title:this.title,
                description:this.description
                }
            })
    }
    })
},
getAll:function(){
    var a=this;
    return this.$(".problems > .problem",this._element).map(function(){
        return{
            id:a.$(".id",this).attr("value"),
            description:a.$(".description",this).text()
            }
        })
},
setAll:function(a){
    var b=this;
    if(a.length<1){
        this.$(".empty_list",b._parent.getElement()).removeClass("ui_hidden");
        return
    }else{
        this.$(".empty_list",b._parent.getElement()).addClass("ui_hidden")
        }
        var c=this.$(a).each(function(){
        var d=this;
        var e=b.$(b.PROBLEM_TEMPL(this));
        b.$(e).click(function(){
            var f=new omq.widget.ProblemPopup(d,b._options);
            b._parent.getTracker().problemClickHandler(b._parent.getTextElement().getText(),d)
            });
        b.$(".problems",b._element).append(e)
        })
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.SendButton=Obj.extend({
    _element:null,
    _options:null,
    _parent:null,
    init:function(d,c,b){
        var a=this;
        this._parent=d;
        this._element=c;
        this._options=b;
        this.$(this._element).click(function(){
            var e=a._parent.getTextElement().getText();
            if(e!=""){
                a._parent.getTracker().formSendHandler(e)
                }
            })
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Tracker=Obj.extend({
    _options:null,
    _parent:null,
    _sessionId:"",
    TRACK_URL:function(){
        return(this._sessionId!="")?("/service/selfSupport/track/"+encodeURIComponent(this._sessionId)+"/json"):("/service/selfSupport/track/json")
        },
    SUBMIT_URL:function(){
        return(this._sessionId!="")?("/service/selfSupport/submit/"+encodeURIComponent(this._sessionId)+"/json"):("/service/selfSupport/submit/json")
        },
    init:function(b,a){
        this._parent=b;
        this._options=a
        },
    problemClickHandler:function(d,b){
        this._options.log.info("Text: "+d+"\n  ProblemId: "+b.id,"omq.widget.Tracker.problemClickHandler");
        var a=this;
        var c=JSON.stringify({
            text:d,
            problem_id:b.id
            });
        this._options.ajax.post({
            path:a.TRACK_URL(),
            data:c,
            contentType:"application/json;charset=utf-8",
            success:function(e){
                a._sessionId=(e!=null)?e:""
                }
            })
    },
formSendHandler:function(c){
    this._options.log.info("Text: "+c,"omq.widget.Tracker.formSendHandler");
    var a=this;
    var b=JSON.stringify({
        text:c
    });
    this._options.ajax.post({
        path:a.SUBMIT_URL(),
        data:b,
        contentType:"application/json;charset=utf-8",
        success:function(d){
            a._sessionId=(d!=null)?d:""
            }
        })
}
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Version=Obj.extend({
    _parent:null,
    _options:null,
    _version:"v-12-06",
    _buildDate:null,
    _element:null,
    VERSION_URL:function(a){
        return"/service/selfSupport/versions/validate/"+a+"/json"
        },
    VERSIONS_TEMPL:function(a){
        return("<div class='omq_link_div ui_min_width'>	<p>       <span>"+a.OMQ_LINK_TEXT+"</span>       <a class='omq_link ui_link' href='http://www.omq.de' target='blank'>OMQ</a>       <br />       <span class='version ui_wrong_version'></span>   </p></div>")
        },
    init:function(b,a){
        this._parent=b;
        this._options=a;
        this._element=this.$(this.VERSIONS_TEMPL(a.locale)).appendTo(b.getElement());
        this.loadServerVersion()
        },
    loadServerVersion:function(){
        var a=this;
        this._options.ajax.get({
            path:this.VERSION_URL(this._version),
            success:function(b){
                if(b==null||b.client_validated==false){
                    a.writeVersion("Wrong Version: client "+a._version+" /server "+b.server)
                    }
                }
        })
},
writeVersion:function(a){
    this.$(".version",this._element).empty();
    this.$(".version",this._element).append(a)
    }
});
/*! include omq-self-support.js */
/*!
 * OMQ self service javascript library
 * v-12-06
 * http://www.omq.de/
 *
 * Copyright 2011, OMQ GmbH Berlin Germany
 * http://www.omq.de/license
 *
 * Mo 22 Okt 2012 14:36:41 CEST
 */
var omq=omq||{};
(function(){
    var a=false;
    var b=/xyz/.test(function(){
        xyz
        })?/\b_super\b/:/.*/;
    this.Obj_=function(){};
    
    Obj_.extend=function(g){
        var f=this.prototype;
        a=true;
        var d=new this();
        a=false;
        for(var c in g){
            if(typeof g[c]=="function"&&typeof f[c]=="function"&&b.test(g[c])){
                d[c]=(function(h,i){
                    return function(){
                        var k=this._super;
                        this._super=f[h];
                        var j=i.apply(this,arguments);
                        this._super=k;
                        return j
                        }
                    })(c,g[c])
            }else{
            d[c]=g[c]
            }
        }
        function e(){
    if(!a&&this.init){
        this.init.apply(this,arguments)
        }
    }
e.prototype=d;
e.constructor=e;
e.extend=arguments.callee;
return e
}
})();
var Obj=Obj_.extend({
    $:jQuery||$
    });
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.ERROR=1;
omq.widget.WARNING=2;
omq.widget.INFO=4;
omq.widget.DEBUG=8;
omq.widget.RELEASE_LEVEL=omq.widget.ERROR;
omq.widget.DEBUG_LEVEL=omq.widget.ERROR|omq.widget.WARNING|omq.widget.INFO|omq.widget.DEBUG;
omq.widget.Log=Obj.extend({
    ERROR_MSG:"An error occurred.",
    ERROR:1,
    WARNING:2,
    INFO:4,
    DEBUG:8,
    _level:1,
    init:function(a){
        this._level=a||this._level
        },
    ajaxError:function(b,e,c,a){
        var d="";
        d+=(b.status!=0)?"RESPONSE: "+b.statusText+" ["+b.status+"]\n":"";
        d+=(e!="")?"TEXT: "+e+"\n":"";
        d+=(c!=null)?"EXCEPTION: "+c+"\n":"";
        this.error(d,a)
        },
    error:function(b,a){
        if(this._level&this.ERROR){
            this.console("[ERROR] "+a);
            this.console("  "+b)
            }
        },
warning:function(b,a){
    if(this._level&this.WARNING){
        this.console("[WARNING] "+a);
        this.console("  "+b)
        }
    },
info:function(b,a){
    if(this._level&this.INFO){
        this.console("[INFO] "+a);
        this.console("  "+b)
        }
    },
debug:function(b,a){
    if(this._level&this.DEBUG){
        this.console("[DEBUG] "+a);
        this.console("  "+b)
        }
    },
console:function(a){
    if(window.console){
        window.console.log(a)
        }
    }
});
var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.de_DE={
    MORE:"mehr",
    CANCEL:"Abbrechen",
    SAVE:"Speichern",
    SEND:"Senden",
    ALERT:"FEHLER",
    CONNECTION_ERROR:"Die Verbindung zum Server ist fehlgeschlagen.",
    INPUT_QUESTION_TITLE:"Anfrage",
    OFFER_LIST_TITLE:"VorschlÃ¤ge",
    INPUT_CONTACT_TITLE:"Kontaktdaten",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Nachricht",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"MÃ¶gliche LÃ¶sungen zu Ihrer Anfrage werden hier angezeigt.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Anfrage",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Antwort",
    SOLUTION_WIDGET_NO_SOLUTION:".. Keine Antworten vorhanden.",
    EMPTY_PROBLEM_MESSAGE:"Bitte Nachricht eingeben!",
    EMPTY_NAME_MESSAGE:"Bitte Namen eingeben!",
    EMPTY_EMAIL_MESSAGE:"Bitte E-Mail-Adresse eingeben!",
    INVALID_EMAIL_MESSAGE:"UngÃ¼ltige Adresse!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.en_EN={
    MORE:"More",
    CANCEL:"Cancel",
    SAVE:"Save",
    SEND:"Send",
    ALERT:"Error",
    CONNECTION_ERROR:"No connection to server.",
    INPUT_QUESTION_TITLE:"Request",
    OFFER_LIST_TITLE:"Suggestions",
    INPUT_CONTACT_TITLE:"Contact Details",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Message",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Possible solutions to your request will be shown here.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Request",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Solution",
    SOLUTION_WIDGET_NO_SOLUTION:".. No solutionss available.",
    EMPTY_PROBLEM_MESSAGE:"Please enter details.",
    EMPTY_NAME_MESSAGE:"Please enter name!",
    EMPTY_EMAIL_MESSAGE:"Please enter E-Mail Address!",
    INVALID_EMAIL_MESSAGE:"Invalid Address!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.es_ES={
    MORE:"Mas",
    CANCEL:"Cancelar",
    SAVE:"Guardar",
    SEND:"Enviar",
    ALERT:"Error",
    CONNECTION_ERROR:"La conexiÃ³n con el servidor a sido interrumpida.",
    INPUT_QUESTION_TITLE:"Consulta",
    OFFER_LIST_TITLE:"Propuestas",
    INPUT_CONTACT_TITLE:"Datos de contacto",
    OMQ_LINK_TEXT:"Software de auto servicio by ",
    INPUT_PROBLEM_TITLE:"Mensaje",
    INPUT_NAME_TITLE:"Nombre",
    INPUT_EMAIL_TITLE:"E-mail",
    EMPTY_PROBLEMS_LIST_TITLE:"AquÃ­ se indicarÃ¡n las posibles respuestas a su consulta.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Consulta",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Respuesta",
    SOLUTION_WIDGET_NO_SOLUTION:"..ninguna respuesta disponible.",
    EMPTY_PROBLEM_MESSAGE:"Escriba por favor su mensaje!",
    EMPTY_NAME_MESSAGE:"Escriba su nombre por favor!",
    EMPTY_EMAIL_MESSAGE:"Introduzca su direcciÃ³n de correo electrÃ³nico!",
    INVALID_EMAIL_MESSAGE:"DirecciÃ³n no valida!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.fr_FR={
    MORE:"Plus",
    CANCEL:"Annuler",
    SAVE:"Sauvegaerder",
    SEND:"Envoyer",
    ALERT:"Erreur",
    CONNECTION_ERROR:"La connexion au serveur a Ã©chouÃ©.",
    INPUT_QUESTION_TITLE:"Question",
    OFFER_LIST_TITLE:"Propositions",
    INPUT_CONTACT_TITLE:"DonnÃ©es de contact",
    OMQ_LINK_TEXT:"Logiciel de libre-service en ligne par",
    INPUT_PROBLEM_TITLE:"Message",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Les rÃ©ponses possibles Ã  votre question sont affichÃ©es ici.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Question",
    SOLUTION_WIDGET_SOLUTION_TITLE:"RÃ©ponse",
    SOLUTION_WIDGET_NO_SOLUTION:"..aucune rÃ©ponse n'est disponible.",
    EMPTY_PROBLEM_MESSAGE:"Veuillez saisir le message !",
    EMPTY_NAME_MESSAGE:"Veuillez saisir le nom !",
    EMPTY_EMAIL_MESSAGE:"Veuillez saisir l'adresse e-mail !",
    INVALID_EMAIL_MESSAGE:"Adresse incorrecte !"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.it_IT={
    MORE:"Altro",
    CANCEL:"Annulla",
    SAVE:"Salva",
    SEND:"Invia",
    ALERT:"FEHLER",
    CONNECTION_ERROR:"Connessione server fallita.",
    INPUT_QUESTION_TITLE:"Richiesta",
    OFFER_LIST_TITLE:"Consigli",
    INPUT_CONTACT_TITLE:"Contatti",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Messaggio",
    INPUT_NAME_TITLE:"Name",
    INPUT_EMAIL_TITLE:"E-Mail",
    EMPTY_PROBLEMS_LIST_TITLE:"Le risposte piÃº adatte alla tua richiest verranno visualizzate qui.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Richiesta",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Risposta",
    SOLUTION_WIDGET_NO_SOLUTION:".. Nessuna risposta disponibile.",
    EMPTY_PROBLEM_MESSAGE:"Digita il messaggio!",
    EMPTY_NAME_MESSAGE:"Digita nome!",
    EMPTY_EMAIL_MESSAGE:"Digita indirizzo Mail!",
    INVALID_EMAIL_MESSAGE:"Indirizzo non valido!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.nl_NL={
    MORE:"meer",
    CANCEL:"Annuleren",
    SAVE:"Opslaan",
    SEND:"Zenden",
    ALERT:"FOUT",
    CONNECTION_ERROR:"De verbinding met de server is verbroken.",
    INPUT_QUESTION_TITLE:"Aanvraag",
    OFFER_LIST_TITLE:"Suggesties",
    INPUT_CONTACT_TITLE:"Contact-data",
    OMQ_LINK_TEXT:"Self service software by ",
    INPUT_PROBLEM_TITLE:"Bericht",
    INPUT_NAME_TITLE:"Naam",
    INPUT_EMAIL_TITLE:"Email",
    EMPTY_PROBLEMS_LIST_TITLE:"Mogelijke antwoorden op uw aanvraag worden hier getoond.",
    SOLUTION_WIDGET_PROBLEM_TITLE:"Aanvraag",
    SOLUTION_WIDGET_SOLUTION_TITLE:"Antwoord",
    SOLUTION_WIDGET_NO_SOLUTION:".. Geen antwoorden beschikbaar.",
    EMPTY_PROBLEM_MESSAGE:"A.u.b. bericht invoeren!",
    EMPTY_NAME_MESSAGE:"A.u.b. naam invoeren!",
    EMPTY_EMAIL_MESSAGE:"A.u.b. email-adres invoeren!",
    INVALID_EMAIL_MESSAGE:"Ongeldig adres!"
};

var omq=omq||{};

omq.locale=(omq.locale)?omq.locale:{};
    
omq.locale.css_pattern={
    button_headlines:"ui_widget_hl_font",
    input_text:"ui_input_font",
    input_error:"ui_input_error_msg",
    input_tooltip:"ui_input_default_info",
    button_color:"ui_problem_bg",
    popup_headlines:"ui_popup_hl_font",
    popup_text:"ui_popup_font",
    popup_color:"ui_popup",
    color:"color",
    fonts:"font-family",
    size:"font-size",
    style:"font-style",
    background_color:"background-color"
};

var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Ajax=Obj.extend({
    _parent:null,
    _element:null,
    _options:null,
    POST:"POST",
    DATA_TYPE:"json",
    CONTENT_TYPE:"application/json;charset=utf-8",
    init:function(a){
        this._options=a;
        return this
        },
    post:function(b){
        var a=this;
        this.$.ajax({
            data:b.data,
            success:b.success,
            url:a._options.buildURL(b.path),
            type:a.POST,
            dataType:a.DATA_TYPE,
            contentType:(b.contentType!=null)?b.contentType:a.CONTENT_TYPE,
            error:function(c,e,d){
                a._options.log.ajaxError(c,e,d)
                }
            })
    },
get:function(b){
    var a=this;
    this.$.ajax({
        data:b.data,
        success:b.success,
        url:a._options.buildURL(b.path),
        dataType:a.DATA_TYPE,
        contentType:(b.contentType!=null)?b.contentType:a.CONTENT_TYPE,
        error:function(c,e,d){
            a._options.log.ajaxError(c,e,d)
            }
        })
}
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.AjaxPhpProxy=Obj.extend({
    _parent:null,
    _element:null,
    _options:null,
    GET:"GET",
    POST:"POST",
    DATA_TYPE:"json",
    CONTENT_TYPE:"application/json;charset=utf-8",
    init:function(a){
        this._parent=parent;
        this._options=a;
        return this
        },
    post:function(c){
        var a=this;
        var b={
            methode:this.POST,
            path:c.path,
            data:c.data
            };
            
        if(c.contentType!=null){
            b.contentType=c.contentType
            }
            this.$.ajax({
            data:b,
            success:c.success,
            url:a._options.buildURL(""),
            type:a.POST,
            dataType:a.DATA_TYPE,
            error:a._options.ajaxErrorHandler
            })
        },
    get:function(c){
        var a=this;
        var b={
            methode:this.GET,
            path:c.path,
            data:c.data
            };
            
        if(c.contentType!=null){
            b.contentType=c.contentType
            }
            this.$.ajax({
            data:b,
            success:c.success,
            url:a._options.buildURL(""),
            type:a.POST,
            dataType:a.DATA_TYPE,
            error:a._options.ajaxErrorHandler
            })
        }
    });
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.DynamicText=Obj.extend({
    _element:null,
    _options:null,
    _parent:null,
    _lastInputTimeoutID:0,
    ANALYSE_URL_G2_TEXT:function(b,a,c){
        return(c==null)?("/service/selfSupport/problems/page/"+b+"/size/"+a+"/search/criteria/text/language/all/cjson"):("/service/selfSupport/problems/page/"+b+"/size/"+a+"/search/criteria/text/language/"+c+"/cjson")
        },
    init:function(c,b,a){
        this._parent=c;
        this._element=b;
        this._options=a;
        this.startChangeHandler()
        },
    inputHandler:function(){
        var a=this;
        this._lastInputTimeoutID++;
        var b=this._lastInputTimeoutID;
        setTimeout(function(){
            a._options.log.debug("InputTimeoutID: "+b+"/"+a._lastInputTimeoutID,"omq.widget.DynamicText.inputHandler");
            if(b==a._lastInputTimeoutID){
                var c=a.getText();
                if(c!=""){
                    a.analyse(a.getText())
                    }
                }
        },500)
},
analyse:function(b){
    this._options.log.info("Text: "+b,"omq.widget.DynamicText.analyse");
    var a=this;
    this._options.ajax.post({
        path:a.ANALYSE_URL_G2_TEXT(0,this._options.problemLimit,this._options.lang),
        data:b,
        contentType:"text/plain;charset=utf-8",
        success:function(c){
            a._parent.textAnalysedHandler(c)
            }
        })
},
getText:function(){
    var a=this;
    var b="";
    this.$(this._element).each(function(c){
        var d="";
        if(a.$(this).is("input")){
            d+=a.$.trim(a.$(this).attr("value"))
            }else{
            if(a.$(this).is("textarea")){
                d+=a.$.trim(a.$(this).attr("value"))
                }else{
                if(a.$(this).is("select")){
                    a.$("option:selected",this).each(function(){
                        d+=a.$.trim(a.$(this).text())+" "
                        })
                    }
                }
        }
    if(d!=""){
        if(c>0&&b!=""){
            b+="\n\n"+d
            }else{
            b+=d
            }
        }
});
return b
},
startChangeHandler:function(){
    var a=this;
    this.$(this._element).each(function(){
        if(a.$(this).is("input")){
            a.$(this).keydown(function(){
                a.inputHandler()
                })
            }else{
            if(a.$(this).is("textarea")){
                a.$(this).keydown(function(){
                    a.inputHandler()
                    })
                }else{
                if(a.$(this).is("select")){
                    a.$(this).change(function(){
                        a.analyse(a.getText())
                        })
                    }
                }
        }
    })
}
});
(function(a){
    a.fn.outerHTML=function(){
        return a("<div>").append(this.eq(0).clone()).html()
        };
        
    a.fn._impl={};
    
    a.fn.submitAll=function(){
        a(a.fn._impl).each(function(b){
            a.fn._impl[b].submit()
            })
        };
        
    a.fn.omq_self_support=function(d,e,c){
        d=a.extend({
            buildURL:function(f){
                return("https://127.0.0.1:8080/debug"+f)
                },
            solutionListSendHandler:function(f){},
            log:new omq.widget.Log(omq.widget.RELEASE_LEVEL),
            problemLimit:"3",
            maxLenProblemPreview:"90",
            maxLenSolutionPreview:"30",
            analyserVersion:"2",
            locale:omq.locale.de_DE,
            cssPattern:omq.locale.css_pattern,
            size:"large",
            cssFile:"",
            style:{}
        },d);
    if(d.cssFile!=null&&d.cssFile!=""){
        a.get(d.widgetPath+d.cssFile,function(f){
            a("head").append("<style type='text/css'>"+f+"</style>")
            }).error(function(f,g){
            alert("Fehler: CSS-Datei konnte nicht geladen werden! \n\n HTTP status codes: "+f.status)
            })
        }
        if(d.lang!=null){
        d.lang=d.lang.toLowerCase();
        d.lang=d.lang.substr(0,2);
        d.lang=d.lang.replace(/(us)|(gb)/g,"en");
        if(d.lang=="en"){
            d.locale=omq.locale.en_EN
            }else{
            if(d.lang=="es"){
                d.locale=omq.locale.es_ES
                }else{
                if(d.lang=="fr"){
                    d.locale=omq.locale.fr_FR
                    }else{
                    if(d.lang=="it"){
                        d.locale=omq.locale.it_IT
                        }else{
                        if(d.lang=="nl"){
                            d.locale=omq.locale.nl_NL
                            }
                        }
                }
        }
}
}
var b=this;
return this.each(function(f){
    a.fn._impl[f]=new omq.widget.OMQSelfSupport(this,d,e,c)
    })
}
})(jQuery);
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.OMQSelfSupport=Obj.extend({
    _element:null,
    _options:null,
    _problems:null,
    _version:null,
    _text:null,
    _sendButton:null,
    _tracker:null,
    init:function(e,d,b,c){
        var a=this;
        this._element=e;
        this._options=d;
        this._options=this.$.extend({
            ajaxErrorHandler:function(g,i,h){
                var f=new omq.widget.Log();
                f.ajaxError(g,i,h)
                }
            },this._options);
    this.$(this._element).addClass("omq");
    this.$(this._element).addClass("omq_ui_widget");
    this._options=this.$.extend({
        ajax:new omq.widget.AjaxPhpProxy(this._options)
        },this._options);
    this._tracker=new omq.widget.Tracker(this,this._options);
    this._problems=new omq.widget.Problems(this,this._options);
    this._version=new omq.widget.Version(this,this._options);
    this._text=new omq.widget.DynamicText(this,b,this._options);
    if(c!=null){
        this._sendButton=new omq.widget.SendButton(this,c,this._options)
        }
    },
getElement:function(){
    return this._element
    },
getProblems:function(){
    return this._problems
    },
getTextElement:function(){
    return this._text
    },
getTracker:function(){
    return this._tracker
    },
textAnalysedHandler:function(a){
    this._problems.update(a)
    },
problemChangedHandler:function(){
    var b=new Array("0px","15px","-15px","30px","-30px","15px","-15px","0px");
    var a=50;
    while(b.length>0){
        jQuery(this._element).animate({
            left:"+="+b.pop()
            },a)
        }
    },
submit:function(){
    this._tracker.formSendHandler(this._text.getText())
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.ProblemPopup=Obj.extend({
    _options:null,
    POPUP_TEMPL:function(b,a){
        return("<div class='omq'>   <div class='popup close ui_popup_overlay'></div>   <div class='popup pos ui_popup ui_popup_font'>       <h2 class='ui_popup_hl_font ui_marg_none ui_marg_bot'>"+a.locale.SOLUTION_WIDGET_PROBLEM_TITLE+"</h2>       <div class='close ui_close ui_link'></div>       <p>"+b.description+"</p>       <ul class='solutions ui_list_none ui_pad_none'></ul>   </div></div>")
        },
    SOLUTION_TEMPL:function(a,b){
        return("<li>   <h2 class='ui_popup_hl_font ui_marg_none ui_marg_top ui_marg_bot'>"+b.locale.SOLUTION_WIDGET_SOLUTION_TITLE+" "+a+"   </h2>	<div class='description ui_text_left'></div></li>")
        },
    G1:"1",
    G2:"2",
    POPUP_MARGIN:20,
    init:function(b,a){
        this._options=a;
        this.buildPopUp(b)
        },
    buildPopUp:function(d){
        var c=this;
        var b=this.$(c.POPUP_TEMPL(d,this._options));
        if(d.solutions.length==1){
            var a=d.solutions[0];
            var f=this.$(c.SOLUTION_TEMPL("",c._options));
            this.$(".description",f).append("<p>"+a.description+"</p>");
            this.$(".solutions",b).append(f)
            }else{
            if(d.solutions.length>1){
                this.$(d.solutions).each(function(h){
                    var g=this;
                    var j=c.$(c.SOLUTION_TEMPL(h+1,c._options));
                    c.$(".description",j).append("<p>"+g.description+"</p>");
                    c.$(".solutions",b).append(j)
                    })
                }else{
                var f=this.$(c.SOLUTION_TEMPL("",c._options));
                this.$(".description",f).append("<p>"+c._options.SOLUTION_WIDGET_NO_SOLUTION+"</p>");
                this.$(".solutions",b).append(f)
                }
            }
        this._element=b;
    this.$("body").append(this._element);
    this.$(".ui_popup_overlay",this._element).height(this.getDocumentHeight());
    var e=this.getViewPortHeight()-(parseInt(this.$(".ui_popup",this._element).css("padding-top").split("px")[0])+parseInt(this.$(".ui_popup",this._element).css("padding-bottom").split("px")[0])+this.POPUP_MARGIN*2);
    this.$(".ui_popup",this._element).css("height",e);
    this.$(".ui_popup",this._element).css("top",(this.getViewPortHeight()-this.$(".ui_popup",this._element).outerHeight())*0.5+this.getDocumentScrollPos());
    this.$(".ui_popup",this._element).css("left",(this.getViewPortWidth()-this.$(".ui_popup",this._element).outerWidth())*0.5);
    this.$(".close",this._element).click(function(){
        c.$(c._element).remove()
        })
    },
getViewPortWidth:function(){
    var a=window;
    if(a.innerWidth){
        return a.innerWidth
        }else{
        if(a.document.documentElement&&a.document.documentElement.clientWidth){
            return a.document.documentElement.clientWidth
            }
            return a.document.body.offsetWidth
        }
    },
getViewPortHeight:function(){
    var a=window;
    if(a.innerHeight){
        return a.innerHeight
        }else{
        if(a.document.documentElement&&a.document.documentElement.clientHeight){
            return a.document.documentElement.clientHeight
            }
            return a.document.body.offsetHeight
        }
    },
getDocumentHeight:function(){
    return Math.max(this.$(document).height(),this.$(window).height(),document.documentElement.clientHeight)
    },
getDocumentScrollPos:function(){
    return Math.max(this.$(document).scrollTop(),this.$(window).scrollTop())
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Problems=Obj.extend({
    _element:null,
    _parent:null,
    _options:null,
    PROBLEMS_TEMPL_EMPTY:function(a){
        return("<div class='empty_list ui_popup_font ui_overlay ui_overflow ui_border ui_border_bot ui_pad'>	<h2 class='ui_popup_hl_font'>"+a.EMPTY_PROBLEMS_LIST_TITLE+"</h2></div>")
        },
    PROBLEMS_TEMPL:function(a){
        return("<div class='ui_overflow ui_border ui_border_bot' >	<form class='problems'></form></div>")
        },
    PROBLEM_TEMPL:function(a){
        return("<div class='problem ui_problem ui_link'>   <input type='hidden' class='id' value='"+a.id+"' />	<h2 class='description ui_popup_hl_font ui_marg_none'>"+a.description+"</h2></div>")
        },
    G1:"1",
    G2:"2",
    init:function(c,b){
        var a=this;
        this.$(this.PROBLEMS_TEMPL_EMPTY(b.locale)).appendTo(c.getElement());
        this._element=this.$(this.PROBLEMS_TEMPL(b.locale)).appendTo(c.getElement());
        this._options=b;
        this._parent=c
        },
    getElement:function(){
        return this._element
        },
    update:function(b){
        var d=this.parseJSON(b);
        var e=this.getAll();
        if(d.length<1&&e.length<1){
            return
        }
        if(d.length==e.length){
            var a=true;
            for(var c=0;c<e.length;c++){
                if(e[c].id!=d[c].id){
                    a=false
                    }
                }
            if(a&&e.length>0){
            return
        }
    }
    this.$(".problems",this._element).empty();
    this.setAll(d);
    this._parent.problemChangedHandler()
    },
getCurrentProblemList:function(){
    return this._problemList
    },
parseJSON:function(b){
    var a=this;
    return this.$(b.data).map(function(){
        return{
            id:this.id,
            description:this.description,
            tags:a.$(this.tags).map(function(){
                return{
                    id:this.id,
                    value:this.value
                    }
                }),
        solutions:a.$(this.solutions).map(function(){
            return{
                id:this.id,
                title:this.title,
                description:this.description
                }
            })
    }
    })
},
getAll:function(){
    var a=this;
    return this.$(".problems > .problem",this._element).map(function(){
        return{
            id:a.$(".id",this).attr("value"),
            description:a.$(".description",this).text()
            }
        })
},
setAll:function(a){
    var b=this;
    if(a.length<1){
        this.$(".empty_list",b._parent.getElement()).removeClass("ui_hidden");
        return
    }else{
        this.$(".empty_list",b._parent.getElement()).addClass("ui_hidden")
        }
        var c=this.$(a).each(function(){
        var d=this;
        var e=b.$(b.PROBLEM_TEMPL(this));
        b.$(e).click(function(){
            var f=new omq.widget.ProblemPopup(d,b._options);
            b._parent.getTracker().problemClickHandler(b._parent.getTextElement().getText(),d)
            });
        b.$(".problems",b._element).append(e)
        })
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.SendButton=Obj.extend({
    _element:null,
    _options:null,
    _parent:null,
    init:function(d,c,b){
        var a=this;
        this._parent=d;
        this._element=c;
        this._options=b;
        this.$(this._element).click(function(){
            var e=a._parent.getTextElement().getText();
            if(e!=""){
                a._parent.getTracker().formSendHandler(e)
                }
            })
    }
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Tracker=Obj.extend({
    _options:null,
    _parent:null,
    _sessionId:"",
    TRACK_URL:function(){
        return(this._sessionId!="")?("/service/selfSupport/track/"+encodeURIComponent(this._sessionId)+"/json"):("/service/selfSupport/track/json")
        },
    SUBMIT_URL:function(){
        return(this._sessionId!="")?("/service/selfSupport/submit/"+encodeURIComponent(this._sessionId)+"/json"):("/service/selfSupport/submit/json")
        },
    init:function(b,a){
        this._parent=b;
        this._options=a
        },
    problemClickHandler:function(d,b){
        this._options.log.info("Text: "+d+"\n  ProblemId: "+b.id,"omq.widget.Tracker.problemClickHandler");
        var a=this;
        var c=JSON.stringify({
            text:d,
            problem_id:b.id
            });
        this._options.ajax.post({
            path:a.TRACK_URL(),
            data:c,
            contentType:"application/json;charset=utf-8",
            success:function(e){
                a._sessionId=(e!=null)?e:""
                }
            })
    },
formSendHandler:function(c){
    this._options.log.info("Text: "+c,"omq.widget.Tracker.formSendHandler");
    var a=this;
    var b=JSON.stringify({
        text:c
    });
    this._options.ajax.post({
        path:a.SUBMIT_URL(),
        data:b,
        contentType:"application/json;charset=utf-8",
        success:function(d){
            a._sessionId=(d!=null)?d:""
            }
        })
}
});
var omq=omq||{};

omq.widget=(omq.widget)?omq.widget:{};
    
omq.widget.Version=Obj.extend({
    _parent:null,
    _options:null,
    _version:"v-12-06",
    _buildDate:null,
    _element:null,
    VERSION_URL:function(a){
        return"/service/selfSupport/versions/validate/"+a+"/json"
        },
    VERSIONS_TEMPL:function(a){
        return("<div class='omq_link_div ui_min_width'>	<p>       <span>"+a.OMQ_LINK_TEXT+"</span>       <a class='omq_link ui_link' href='http://www.omq.de' target='blank'>OMQ</a>       <br />       <span class='version ui_wrong_version'></span>   </p></div>")
        },
    init:function(b,a){
        this._parent=b;
        this._options=a;
        this._element=this.$(this.VERSIONS_TEMPL(a.locale)).appendTo(b.getElement());
        this.loadServerVersion()
        },
    loadServerVersion:function(){
        var a=this;
        this._options.ajax.get({
            path:this.VERSION_URL(this._version),
            success:function(b){
                if(b==null||b.client_validated==false){
                    a.writeVersion("Wrong Version: client "+a._version+" /server "+b.server)
                    }
                }
        })
},
writeVersion:function(a){
    this.$(".version",this._element).empty();
    this.$(".version",this._element).append(a)
    }
});
/*! include 001-clickstream.js */
$(document).ready(function(){  
    var track = $.cookie('yd-track');
    if ( track ){
        $.cookie('yd-track',null);
    }
    /*if ( !track ){
        //mark first hit
        track = new Date().getTime();
    }
    $.cookie('yd-track',track + '||' + $.base64.encode(new Date().getTime()/1000 + '::' + document.location.href), {
        path : '/',
        expires : 365
    });*/
});
/*! include 001-discount.js */
function filloutDiscount(code, minAmount, kind, info){ 
    // fill html
    $('.yd-valid-discount-code').html(code);
    $('.yd-valid-discount-minamount').html(minAmount);
    $('.yd-valid-discount-kind').html(kind);
    $('.yd-valid-discount-info').html(info);
}

/**
 * toggle delivertime when discount is added
 * @author Felix Haferkorn <haferkorn@lieferando.de>
 * @since 28.08.2011
 */
function hideDelivertimeSelect(){
    $('ul.yd-deliver-time-input').hide();
    $('#yd-finish-deliver-time option:selected').val($('#deliver-time-now').val());
}

function showDelivertimeSelect(){
    $('#yd-finish-deliver-time option:selected').val($('#yd-finish-deliver-time option:selected').html());
    $('ul.yd-deliver-time-input').show();
}

/**
 * use the bar payment if the voucher covers the entire bucket amount
 * @author Matthias Laug <laug@lieferando.de>
 */
function useBarPaymentIfVoucherCoversAmount(){  
    var openAmount = ydOrder.calculate_open_amount(false);
                
    // if open amount is 0, deactivate all payment kinds, but activate bar payment
    if (parseInt(openAmount) == 0) {
        $('.yd-finish-payment').removeClass('active');
        $('.yd-finish-payment-radio').prop("checked", false)
            .removeClass("validate[payment]");
    }
    else {
        $('.yd-finish-payment-radio').addClass("validate[payment]");
    }
}

/**
 * show info for discount
 * @author Matthias Laug <laug@lieferando.de>
 */
function showDiscountInfo(){
    $('.yd-discount-info').show();
}
function hideDiscountInfo(){
    $('.yd-discount-info').hide();
}

/**
 * validate discount and add to html
 * @author mlaug
 * @since 01.09.2011
 */
function checkDiscount(){
    var code = $("#discount-code").val();
    if (!code.length) {
        return false;
    }
    
    $('#check-discount').addClass('discount-load');
    
    $.ajax({
        url: '/request_order/adddiscount/',
        data: {
            code: code,
            service: $('input:[name="serviceId"]').val(),
            customer: false,
            kind: $('#kind').val(), //isn't this obsolete and replacable with ydState.getKind();
            city: ydState.getCity()
        },
        dataType: "json",
        success: function (json) {
            $('#check-discount').removeClass('discount-load');
            $('#yd-discount-add').hide();
            $('#yd-discount-content').html(json.html);
                
            if (json.result == false) {
                $('.valid-discount, .valid-user-discount').hide();
                $('.invalid-discount').show();
                $('.yd-discount-msg').html(json.msg);
                $('input[name=discount]').val('');
                showDelivertimeSelect();
                return false;
            }
            else{
                var discount = new YdDiscount();
                discount.kind = json.data.kind;
                discount.value = parseInt(json.data.value);
                discount.min_amount = parseInt(json.data.minAmount);
                ydOrder.add_discount(discount);
                //check for the min amount and mark to user
                if (!ydOrder.is_minamount_reached()) {
                    ydOrder.remove_discount();
                    log('discount minamount of '+discount.min_amount + ' not reached');
                    $('.valid-discount, .valid-user-discount').hide();
                    $('input[name=discount]').val('');
                    $('#yd-discount-add').show();
                    notification('error',json.data.minAmountMsg,true);
                    showDelivertimeSelect();
                    return false;
                }
         
                $('.valid-discount').show();
                $('.yd-cash-fidelity-points').show();
                
                filloutDiscount(code, json.data.minAmountHtml, json.data.kindHtml, json.data.info);
                $('input[name=discount]').val(code);
                
                if (!json.allowCash) {
                    hidePayment("bar");
                    hidePayment("ec");
                    hidePayment("vr");
                    hidePayment("creditathome");
                }
                if (!json.allowCredit) {
                    hidePayment("credit");    
                }
                if (!json.allowEbanking) {
                    hidePayment("ebanking");  
                }
                
                // hide delivertime select
                hideDelivertimeSelect();  
                
                //use bar payment, if voucher covers amount
                useBarPaymentIfVoucherCoversAmount();
                selectFirstVisiblePayment();
                
                //show infos
                showDiscountInfo();
                
                $('.yd-open-amount').html(ydOrder.calculate_open_amount(true));
            }            
        }
    });
}

$(document).ready(function(){

    /**
     * Add rabatt / discount on clicking "einlÃ¶sen"
     */
    $('#check-discount').live('click', function(){
        checkDiscount();
        return false;
    });

    $('.yd-discount-info').live('click', function(){
        $(this).hide();
    }); 

    /**
     * Remove rabatt / discount
     * @author vpriem
     * @since 29.07.2011
     */
    $("a.yd-link-rabatt-delete").live('click', function(){   
        $('.yd-cash-fidelity-points').show();
        $('#yd-discount-add').show();
        $('.invalid-discount, .valid-discount, .valid-user-discount').hide();
        $('input[name="fidelity"]').val(0);
        $('input[name="discount"]').val('');
        $("#discount-code").val("");
        $('.yd-open-amount').html('');
        showDelivertimeSelect();
        ydOrder.remove_discount();
        
        var newCustomerWarning = $('.discount-warn');
        
        if (newCustomerWarning) {
            $(newCustomerWarning).hide();
        }
        
        selectFirstVisiblePayment();
        hideDiscountInfo();
        return false;
    });
    
    /**
     * hide discount box for default
     * @author bseifert
     * @since 28.08.2012
     */
    
    $('#yd-discount-show em').bind('click', function(){
        $('#yd-discount-show').animate({
          opacity: 0,
          width: 'toggle'
        }, 500, function() {
            $(this).hide();
        });
        
        $('#yd-discount-input').delay(50).animate({
          opacity: 100,
          width: 'toggle'
        }, 500, function() {
            $(this).show();
        });
    });
});
/*! include 002-fidelity.js */
$(document).ready(function(){

    var maxCost = null;

    /**
     * cash fidelity points
     *
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 16.02.2011
     */
    function cashFidelityPoints() {
        //find highest rated meal
        var maxMeal = null;
        $.each(ydOrder.meals, function(k,v){
            log(v.name);
            if (v.getAllCost(false, true) <= maxCost && (maxMeal == null || v.getAllCost(false, true) > maxMeal.getAllCost(false, true)) ){
                maxMeal = v;
            }
        });

        //add text to discount content
        if ( maxMeal ){
            log('found a meal ('+maxMeal.name+') to use for fidelity points, adding as discount');

            //remove discount field
            $('#yd-discount-add').hide();

            //remove fidelity discount box
            $('.yd-cash-fidelity-points').hide();

            var fidelity = new YdDiscount();
            fidelity.kind = 1;
            fidelity.value = maxMeal.getAllCost(false, true);
            ydOrder.add_discount(fidelity);

            //mark this discount as an fidelity discount
            $('input[name="fidelity"]').val(1);

            var kind = $.lang('redeem-fidelity-kind');
            var info = $.lang('redeem-fidelity-info', maxMeal.name, int2price(maxMeal.getAllCost(false, true)));
            filloutDiscount('', '', kind, info);
            $('.valid-discount, .valid-user-discount').show();

            $('.yd-open-amount').html(ydOrder.calculate_open_amount(true));

            //remove cash if available
            hidePayment("bar");
            selectFirstVisiblePayment();

            hideDelivertimeSelect();

            useBarPaymentIfVoucherCoversAmount();

            //show infos
            showDiscountInfo();
        }
        else{
            log('found no meal, informing customer');
            notification('warn', $('#yd-fidelity-no-meal-found').val());
            showDelivertimeSelect();
        }
    }

    /**
     * Cash fidelity points AJAX wrapper
     *
     * @author Marek Hejduk <m.hejduk@pyszne.pl>
     * @since 18.06.2012
     */
    $('a.yd-cash-fidelity-points').live('click', function () {
        if (maxCost !== null) {
            cashFidelityPoints();
        } else {
            $.ajax({
                url: '/request_order/getfidelitymaxcost/',
                dataType: "json",
                success: function (json) {
                    maxCost = parseInt(json.maxCost);
                    // check whether limit has been correctly retrieved from server side
                    if (isNaN(maxCost)) {
                        log('Fidelity maxCost value is not a number - silently giving up!');
                        // maybe next time error won't occur?
                        maxCost = null;
                        return ;
                    }
                    log('Fidelity maxCost: ' + maxCost);
                    cashFidelityPoints();
                },
                error: function () {
                    log('An error occured during maxCost value retrieving - silently giving up!');
                }
            });
        }
    });
});
/*! include 001-start.js */
$(document).ready(function(){

    /**
     * Select address for ordering
     * @author vpriem
     * @since 10.02.2011
     */
    $('span.yd-adress').live('click', function(){
        var locationId = this.id.split('-')[2];
        var cityId = this.id.split('-')[3];
        
        $('span.yd-adress').removeClass('active');
        $(this).addClass('active');
        $('#yd-start-order-from-address')
            .data('href', $(this).attr('data'))
            .data('city', cityId)
            .data('location', locationId);
    })
    .filter(".active")
    .click();
    
    /**
     * TODO: should be moved to in base.js
     * Error Message with hashtag
     * @author Daniel Hahn <hahn@lieferando.de>
     * @since 15.09.2011
     */
    var hash = location.hash;
    if(hash !== undefined && $.lang(hash.substring(1)).length != 0) {      
        notification("error", $.lang(hash.substring(1)), false);
    }
    
    /**
     * Select an address and then start the order
     * @author vpriem
     * @since 20.04.2012
     */
    $(".yd-start-order-from-address").live('click', function(){
        var locationId = this.id.split('-')[2];
        var cityId = this.id.split('-')[3];
        
        if (typeof ydState !== "undefined") {
            ydState.setKind("priv");
            
            if (locationId !== undefined) {
                ydState.setLocation(locationId);
            }
            if (cityId !== undefined) {
                ydState.setCity(cityId);
            }
        }
    });
    
    /**
     * Start order after the address has been selected
     * @author vpriem
     * @since 10.04.2012
     */
    $('#yd-start-order-from-address').live('click', function(){
        var $this = $(this);
        var locationId = $this.data('location');
        var cityId = $this.data('city');
        var href = $this.data('href');
        
        if (typeof ydState !== "undefined") {
            if (locationId !== undefined) {
                ydState.setLocation(locationId);
            }
            if (cityId !== undefined) {
                ydState.setCity(cityId);
            }
        }
        
        if (href !== undefined) {
            this.href = href;
            return true;
        }
        
        return false;
    });
    
    /**
     * Start order
     * @author vpriem
     * @since 16.02.2011
     */
    $('#yd-start-order').live('click', function(){
        $('#yd-start-order-form').submit();
        return false;
    });

    /**
     * Start order from form
     * @author vpriem
     * @since 08.09.2011
     */
    $('#yd-start-order-form').submit(function(){
        if (!this.plz.value.length) {
            notification("error", $.lang("plz-not-given") || $.lang("plzerror"));
            return false;
        }
        
        var cityId = $(this).data('city');
        var href = $(this).data('href');
        
        if (typeof ydState !== "undefined") {
            if (cityId !== undefined) {
                ydState.setCity(cityId);
            }
        }
        
        if (href !== undefined) {
            location.href = href;
            return false;
        }
    });

    /**
     * init the datepicker on the start page
     * @author mlaug
     * @since 05.01.2011
     */
    initDatepicker('now', 'yd-start-deliver-time-day');
    initTimepicker('now', 'yd-start-deliver-time');
    $('#yd-start-deliver-time-day').live('change',function(){
        if(checkDatepickerToday('yd-start-deliver-time-day')){
            setTimepickerNow('yd-start-deliver-time');
            initTimepicker('now', 'yd-start-deliver-time');
        }
        else{
            setTimepickerNow('yd-start-deliver-time');
            initTimepicker('full', 'yd-start-deliver-time');
        }
    });

    /**
     * Take time from given budget times (comp/restaurant)
     * @author vpriem
     * @since 15.02.2011
     */
    if ($('#deliver-time-budget').length) {
        
        if ( btimes.length > 0 ){
            var start = btimes[0].from;
            var end = btimes[btimes.length-1].until;
            initTimepicker('startEnd', 'deliver-time-budget', start, end);
        }
    }
});
/*! include 002-service.js */
$(document).ready(function(){

    /**
     * get ratings of one service
     * @author mlaug
     * @since 04.01.2011
     */
    $('.yd-rated').live('click',function(){

        // check if offline, then show lightbox
        $form = $(this).closest('form');
        if ($($form).hasClass('service-offline')) {
            openDialog('/request_service/offline', {
                width: 600,
                height: 400,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                }
            });
            return false;
        }

        var rid = this.id.split('-')[2];
        if (rid !== undefined) {
            openDialog('/request_service/rating/id/' + rid + '/mode/' + ydState.getMode(), {
                width : 600,
                height: 380,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                }
            });
        }

        this.blur();
        return false;
    });

    /**
     * Triggered by click on the service link
     * @author vpriem
     * @since 04.01.2012
     */
    $('.yd-service-submit').live("submit", function() {
        var id = this.id.split("-")[3];
        var type = this.id.split("-")[4];
        var $form = $(this);
        
        // check if offline, then show lightbox
        if ($form.hasClass('service-offline')) {
            openDialog('/request_service/offline', {
                width: 600,
                height: 400,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                }
            });
            return false;
        }

        // check if open, then show lightbox
        var service = new YdService(id, type);
        
        if(type == 'cater' || type == 'great' ){
            var handlingTime = $(this).children('ul').children('.yd-handling-time').attr('data-handling-time');
            type += '/handlingtime/' + handlingTime;
        }
        
        if (!service.isOpen()) {
            openDialog('/request_service/preorder/back/0/type/' + type, {
                width: 600,
                height: 400,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                }
            }, function(){             
                $("#yd-yes-i-want").click(function() {
                    $.cookie('yd-preorder', $.base64.encode(id));
                    window.location.href = $form.attr("action");
                    return false;
                });
            });
            return false;
        }
    });

    /**
     * Click on the service otr service link
     * @author vpriem
     * @since 04.01.2012
     */
    $('.yd-service-select').live('click', function(){
        $(this).closest('form').submit();
        return false;
    });
    
    /**
     * show / hide special comment for service on mouseover / -out
     * @todo: this can be done with toggle!
     * @author Felix Haferkorn <haferkorn@lieferando.de>
     * @since 28.02.2011
     */
    $('.special-comment').live('mouseover', function(){
        $(this).children('.special-comment-full').show();
    });
    $('.special-comment').live('mouseout', function(){
        $(this).children('.special-comment-full').hide();
    });

    /**
     * @view order/basis/service.htm
     * @author mlaug
     * @since 20.11.2011
     */
    $('.yd-service-info').live('hover',function(){
        var $this = $(this);
        if ( !$this.data('loaded') ){
            $this.data('loaded',true);
            $.ajax({
                url : '/request_order/serviceinfo/id/' + this.id.split('-')[3],
                success : function(resp){
                    $this.prepend(resp);
                }
            });
        }
    });
});
/*! include 001-autocomplete.js */
$(document).ready(function(){
    
    /**
     * use main AC plugin 
     * @author Toni Meuschke 
     * @since 20.08.2011
     */
    
    
    //use autocomplete for plz mode
    $('form.yd-plz-autocomplete-form').ydAutocomplete({
        mode : "PLZ"
    }); 
    

    //use autocomplete for street-city-hausnr mode
    $('form.yd-csh-autocomplete-form').filter('.yd-csh-search-form').ydAutocomplete({
        mode : "CSH-SEARCH"
    });
    $('form.yd-csh-autocomplete-form').not('.yd-csh-search-form').ydAutocomplete({
        mode : "CSH-ADDRESS"
    });
   
});
/*! include 002-mode.js */
$(document).ready(function(){
    
    /**
     * Set mode
     * @author vpriem
     * @since 12.07.2011
     */
    if (typeof ydState !== "undefined") {
        
        $("a.yd-go-to-start").click(function(){
            if (ydState.maybeLoggedIn()) {
                var mode = this.id.split("-")[2];
                
                var url = "/order_private/start";
                if (ydState.getKind() == "comp") {
                    url = "/order_company/start";
                }
                location.href = url + "/mode/" + mode;
                return false;
            }
        });
    }

});
/*! include 003-kind.js */
$(document).ready(function(){
    
    /**
     * Set mode
     * @author vpriem
     * @since 12.07.2011
     */
    if (typeof ydState !== "undefined") {
        
        $("a.yd-set-kind-priv").click(function(){
            ydState.setKind("priv");
        });
        
        $("a.yd-set-kind-comp").click(function(){
            ydState.setKind("comp");
        });
    }

});
/*! include 003-menu.js */
/**
 * switch through different categories of service menu
 * @author mlaug
 * @since 05.01.2011
 * @view /order/_includes/menu/menu.htm
 * @view /satellite/_menu.htm
 */
function toggleMenuCategory(cat){
    if ( cat === undefined || cat === null ){
        log('cat is undefined or null');
        return false;   
    }
    
    var $cat = $(cat);
    var data = cat.id.split('-');
    var catId = data[1];
    var parentCatId = data[3];
    
    $('.food_side').removeClass('active');
    $('.menu-box').hide();
    
    //if we did not click one of the childs
    if ( !$cat.hasClass('yd-category-children') ){    
        log('did not click a chlid, hide all of them');
        $('.yd-menu-nav2').hide();
        $('.yd-category-children').hide();
    }
    
    $cat.addClass('active');
    
    //toggle just one child
    if ( parentCatId <= 0 ){      
        if ( data.length == 6 ){
            log('marking parent as active');
            parentCatId = data[5];
            $('#cat-0-side-' + parentCatId).addClass('active');
        }
        $('#yd-category-'+catId).show();
        log('toggling category ' + catId);
    }
    //toggle all parents
    else{
        $('.yd-category-'+parentCatId).show();
        $('.yd-category-children-'+parentCatId).show();
        $('.yd-menu-nav2').slideDown('fast');
        log('toggling childs of parent category ' + parentCatId);     
    }
}
 
/**
 * service tabs 
 * @author oknoblich
 * @since 05.10.2011
 */   
function tabmenu(tab){
    for(var i=1;i<=3;i++){
        if(i==tab){
            $('#yd-menu-toggle-' + i).removeClass('hidden');
            $('.tab' + i).addClass('active');
        }
        else {
            $('#yd-menu-toggle-' + i).addClass('hidden');
            $('.tab' + i).removeClass('active');
        }
    }
}

$(document).ready(function(){
    
    /**
     * new div based menu 2011
     * @author oknoblich
     * @since 10.10.2011
     */

    // CSS helper
    $('.yd-menu-modern .table .tr .td div:first-child').after('<hr style="height:10px" />');
    $('.yd-menu-modern .table .tr .td div:first-child').Zoomer();

    // IE 6 & 7 helper
    $('.ie6 .yd-menu-modern .table .tr .td hr').hide();
    $('.ie7 .yd-menu-modern .table .tr .td hr').hide();
    $('.ie6 .yd-menu-modern .table .tr .td:first-child').addClass('first');
    $('.ie7 .yd-menu-modern .table .tr .td:first-child').addClass('first');
    $('.ie6 .yd-menu-modern .table .thead .th:first-child').addClass('first');
    $('.ie7 .yd-menu-modern .table .thead .th:first-child').addClass('first');

    // Avanti helper
    $('.yd-menu-modern .th:nth-child(1), .yd-menu-modern .td:nth-child(1)').addClass('nth-child-1');
    $('.yd-menu-modern .th:nth-child(2), .yd-menu-modern .td:nth-child(2)').addClass('nth-child-2');
    $('.yd-menu-modern .th:nth-child(3), .yd-menu-modern .td:nth-child(3)').addClass('nth-child-3');
    $('.yd-menu-modern .th:nth-child(4), .yd-menu-modern .td:nth-child(4)').addClass('nth-child-4');
    $('.yd-menu-modern .th:nth-child(5), .yd-menu-modern .td:nth-child(5)').addClass('nth-child-5');

    $(".yd-menu-timcat img").error(function () { 
        $(this).hide(); 
    });

    /**
     * Toggle first category or the main one
     * @author vpriem
     * @since 08.06.2012
     */
    $(".yd-menu-nav1").each(function(){
        var $mainCat = $('li a.category-main', this);
        toggleMenuCategory($mainCat.length ? $mainCat[0] : $('li a', this)[0]);
    });
    
    /**
     * Restore order if cart is present
     * @author vpriem
     * @since 28.07.2011
     */
 
    $('input[name="restore"]').each(function(){
        var serviceId = $('input:[name="serviceId"]').val();
        if ( serviceId ){
            log('found serviceId, will restore ydOrder object');
            //we check for the "yd-no-update" class, which would
            //indicate, that we do not want to update the view
            ydOrder.set_service(serviceId)
            .restore(!$(this).hasClass('yd-no-update'));
            
        }
        return false;
    });
    
    $('a.yd-menu-toggle-1a, li.yd-menu-toggle-1a').live('click',function(){
        tabmenu(1);
        $('.tab4').removeClass('hidden');
        return false;
    });
    
    $('a.yd-menu-toggle-2a, li.yd-menu-toggle-2a, .yd-menu-detail-rate').live('click',function(){
        tabmenu(2);
        $('.tab4').addClass('hidden');
        return false;
    });
    
    $('a.yd-menu-toggle-3a, li.yd-menu-toggle-3a').live('click',function(){
        tabmenu(3);
        $('.tab4').addClass('hidden');
        return false;
    });
    
    /**
     * show / hide full category name in menu on mouseover / -out
     * @todo: this can be done with toggle!
     * @author oknoblich
     * @since 10.10.2011
     */
    $('.category-lenght-toggle').live('mouseover', function(){
        $(this).children('.category-lenght-toggle-full').show();
    });
    $('.category-lenght-toggle').live('mouseout', function(){
        $(this).children('.category-lenght-toggle-full').hide();
    });

    /**
     * menu category switch
     * @author mlaug
     * @since 05.01.2011
     */
    
    $(".food_side").live("click", function() {
        toggleMenuCategory(this);
        return false;     
    });


    /**
     * increase count of an item of card
     * @author mlaug
     * @since 07.01.2011
     */
    $(".increase-item").live("click", function () {
        var hash = this.id.split('-')[3];
        ydOrder.increase_meal(hash);
    });
    
    /**
     * change count of an item of card
     * @author vpriem
     * @since 13.07.2011
     */
    $(".yd-change-item-count").live("keyup", function(){
        if (this.value.length) {
            var hash = this.id.split('-')[3];
            ydOrder.set_count(hash, this.value);
        }
    });

    /**
     * decrese count of an item from standard cart
     * @author mlaug
     * @since 07.01.2011
     * @todo alter naming, its confusing
     */
    $(".decrease-item").live("click", function () {
        var hash = this.id.split('-')[3];
        ydOrder.decrease_meal(hash);
    });

    /**
     * delete an item from standard cart
     * @author mlaug
     * @since 07.01.2011
     */
    $(".delete-item").live('click', function () {
        var hash = this.id.split('-')[3];
        ydOrder.remove_meal(hash);
    });
    
    /**
     * Submit finish form
     * even if minamount is reached
     * @author vpriem
     * @since 20.07.2011
     */
    $(".yd-finish-order").live('click', function(){
        if ($(this).hasClass('yd-gray-button')) {
            log('it seems like, the minamount hasn\'t been reached');
            return false;
        }
        
        $('#yd-finish-order-form').submit();
        return false;
    });
    
    /**
     * Switch finish form action
     * @author vpriem
     * @since 20.07.2011
     */
    $('#yd-finish-order-form').each(function(){

        // pretty hack for satellite
        // we need to take the attr here, since every browser would
        // return something else with this.action
        if ($(this).attr('action').length) {
            return;
        }
        
        if (typeof ydState !== "undefined") {
            if (ydState.getKind() == 'comp') {
                log('setting form to company finish page');
                this.action = '/order_company/finish';
            }
            else{
                log('setting form to private finish page');
                this.action = '/order_private/finish';
            }
        }
    });
    
    /**
     * new lightbox special comment
     * @author oknoblich
     * @since 07.11.2011
     */

    $(".yd-dialogs-comment-head").live("click", function(){
        $(".yd-dialogs-comment-body").slideToggle('fast');
    });
    
    /**
     * open a lightbox for meal editing
     * @author alex
     * @since 02.12.2011
     */
    $(".yd-shopping-article").live('click', function () {
        var hash = this.id.split('-')[2];
        updateMeal(hash);
    });
    
    /**
     * Don't show telephone number if not in support time
     * @author Jens Naie <naie@lieferando.de>
     * @since 12.10.2012
     */
    var now = new Date();
    if (now.getHours()<17 || now.getHours()>=21) {
        $(".yd-phoneorder-style").hide();
    }
    
});
/*! include 000-opening.js */
$(document).ready(function(){
   
   /**
     * Show service open in
     * @author vpriem
     * @since 25.08.2011
     */
    if (typeof services !== "undefined") {
        // Get server time and use it in Brazil instead of browser time
        var dateStr;
        if(typeof(LOCALE) != 'undefined' && LOCALE == 'pt_BR') {
            var req = new XMLHttpRequest();
            req.open('head', '/', false);
            req.send(null);
            dateStr = req.getResponseHeader('Date');
        }
        if(dateStr) {
            var nowDate = new Date(Date.parse(dateStr));
        } else {
            var nowDate = new Date();
        }
        var now = nowDate.getTimestampSinceMidnight();
        
        $('.yd-service-container').each(function(){
            var id = this.id.split('-')[2];
            var openings = false;
            var index;
            
            $.each(services, function(i, service){
               if (service.id == id) {
                   index = i;
                   openings = service.openings;
                   return false;
               }
            });
            
            if (openings === false || openings === undefined) {
                return;
            }
            services[index].open = 99999;
            
            if (!openings.length) {
                $(this).data('open', false);
                $('.yd-service-open', this).hide();
                $(".yd-service-open-in", this)
                    .html($.lang("is-closed"))
                    .show();
                return;
            }

            var msg = false;
            for (var i = 0; i < openings.length; i++) {
                var from = new Date().setTimestamp(openings[i][0]).getTimestampSinceMidnight();
                var until = new Date().setTimestamp(openings[i][1]).getTimestampSinceMidnight();
                
                if (now < from) {
                    var m, h;
                    var diff = from - now;
                    diff = Math.ceil(diff / 60) * 60;
                    if (diff < 3600) {
                        m = Math.ceil(diff / 60);
                        msg = $.lang("open-in", $.nlang("minute", "minutes", m, m));
                    }
                    else {
                        h = Math.floor(diff / 3600);
                        m = Math.ceil(diff % 3600 / 60);
                        msg = $.lang("open-in", $.nlang("hour", "hours", h, h));
                        if (m) {
                            msg += " " + $.nlang("minute", "minutes", m, m);
                        }
                    }
                    services[index].open = diff;
                    break;
                }
                else if (now > until) {
                    msg = $.lang("is-closed");
                    services[index].open = 86400;
                    // never break
                }
                else { // we are between from and until
                    msg = false;
                    services[index].open = 0;
                    break;
                }
            }
            
            if (msg === false) {
                $(this).data('open', true);
                return;
            }
            
            $(this).data('open', false);
            $('.yd-service-open', this).hide();
            $(".yd-service-open-in", this)
                .html(msg)
                .show();
        });
    }
});
/*! include 001-sorting.js */
/**
 * sort a json array by a given field
 * @author http://stackoverflow.com/questions/979256/how-to-sort-a-json-array
 * @since 26.02.2011
 */
var sort_by = function (field, reverse, primer) {
    reverse = reverse ? -1 : 1;

    return function (a1, b1) {
        a = a1[field];
        b = b1[field];
        
        if (typeof(primer) != 'undefined'){
            a = primer(a);
            b = primer(b);
        }

        if (a < b) return reverse * -1;
        if (a > b) return reverse * 1;
        if(a == b) {
            c = a1['ratingcount'];
            d = b1['ratingcount'];
            
            if (c < d) return reverse * -1;
            if (c > d) return reverse * 1;
            return 0;
        }
       
    };
};

/**
 * reset entire search list
 * @author mlaug
 * @since 30.08.2011
 */
function _resetSearchList(){
    
    // delete cookies
    $.cookie('yd-sorting', null);
    $.cookie('yd-sorting-category', null);
    
    // reset the field
    $('.ordering-category-no').hide();
    $('.yd-service-menu-results').html('<tbody><tr class="even hidden"><td colspan="3"></td></tr></tbody>');
    
    // reset search to alpha
    _doSort($('#sort-alpha')[0], "alpha", false);
}

/**
 * check if any service is not reachable and remove it from the cached list
 * @author mlaug
 * @since 28.09.2011
 * moved from 003-reachable.js by Alex Vait on 18.10.2012
 */
function updateReachable() {
    
    $.ajax({
        type: 'POST',
        url: '/request_service/reachable',
        data: {
            kind: ydState.getKind(),
            ids: serviceIds, // defined in service.htm
            cityId: ydState.getCity()
        },
        dataType: "json",
        success: function(json){

            if (typeof json == 'undefined') {
                return;
            }
            
            if (json.permission.employee && ydState.getKind() == 'comp') {
                var checkRest = $('#yd-filter-service-type-rest');
                var checkCater = $('#yd-filter-service-type-cater');
                var checkGreat = $('#yd-filter-service-type-great');

                var permRestInfo = $('#yd-disallow-company-rest');
                var permCaterInfo = $('#yd-disallow-company-cater');
                var permGreatInfo = $('#yd-disallow-company-great');

                if (json.permission.budget <= 0) {
                    checkRest.attr('disabled', true)
                             .attr('checked', false);
                    permRestInfo.show();
                }
                
                if (!json.permission.cater) {
                    checkCater.attr('disabled', true)
                              .attr('checked', false);
                    permCaterInfo.show();
                }
                
                if (!json.permission.great) {
                    checkGreat.attr('disabled', true)
                               .attr('checked', false);
                    permGreatInfo.show();
                }
                
                initServiceTypeFilter();
            }
            
            $.each(json.notReachable, function(k, id) {
                log('removing ' + id + ' from list');
                // this will remove the service
                $('#yd-service-' + id + '-rest, #yd-service-' + id + '-cater, #yd-service-' + id + '-great, #yd-service-' + id + '-fruit').remove();
                // this will remove the proposals from the sidebar
                $('#yd-service-' + id + '-rating').remove();
            });

            $.each(json.notAvailable, function(k, id) {
                log('moving ' + id + ' from list');
                // this will move the service and set the offline status
                var $s = $('#yd-service-' + id + '-rest, #yd-service-' + id + '-cater, #yd-service-' + id + '-great, #yd-service-' + id + '-fruit')
                    .prependTo("#yd-filter-offline");
                // tricky but works
                $s.find("form")
                    .addClass("service-offline");
                $s.find(".yd-sv3-4, .yd-sv3-5, .yd-sv3-61, .yd-sv3-62, .yd-sv3-63, .yd-sv3-64")
                    .hide();
                $s.find(".yd-sv3-4:first")
                    .show(); 
            });

            trackServices();
        }
    });    
}


/**
 * sorting of metrics
 * @author mlaug, vpriem
 * @since 24.06.2011
 */ 
function _doSort(_this, field, revert){
    var sorted = services;
    if (field == "tipp") {
        sorted = sorted.sort(sort_by("ratingstars", true));
        sorted = sorted.sort(sort_by("score", true));
    }
    else if (field == "tippforce") {
        sorted = sorted.sort(sort_by("ratingstars", true));
        sorted = sorted.sort(sort_by("score", true));
        updateReachable();
    }
    else {
        sorted = sorted.sort(sort_by(field, revert));        
    }
        
    for (var i = 0; i < sorted.length; i++) {
        var $s = $('#yd-service-' + sorted[i].id + '-' + sorted[i].type);
        if ($s.length) {
            if ($s.data('open')) {
                $("#yd-filter-found").append($s);
            }
            else{
                $("#yd-filter-found-closed").append($s);
            }
        }
    }

    toggleActiveSorting(_this);
    $.cookie('yd-sorting', field + '#' + revert, {
        expires: 7
    });
    $.cookie('yd-sorting-category', null);
    $.cookie('yd-sorting-remove', null);
    $('.ordering-category-no').hide();
}


/**
 * sorting of metrics
 * @author mlaug, vpriem
 * @since 24.06.2011
 */ 
function _doSortCategory(_this, categoryId){
    log('initializing category sort');
    for (var i = 0; i < services.length; i++) {
        var $s = $('#yd-service-' + services[i].id + '-' + services[i].type);
        if (!$s.length) {
            log('no div element found for ' + services[i].id);
            continue;
        }
        if (services[i].category == categoryId) {
            if ($s.data('open')) {
                $("#yd-filter-found").append($s);
            }
            else{
                $("#yd-filter-found-closed").append($s);
            }
        }
        else {
            $("#yd-filter-the-rest").append($s);
        }
    }
        
    $.cookie('yd-sorting-category', categoryId, {
        expires: 7
    });
    $.cookie('yd-sorting', null);
    $.cookie('yd-sorting-remove', null);
    toggleActiveSorting(_this);
    $('.ordering-category-no').show();
}

/**
 * @author Matthias Laug <laug@lieferando.de>
 * @since 04.09.2012
 */
function _doRemove(_this, field){
    log('initializing removing sort');
    for (var i = 0; i < services.length; i++) {
        var $s = $('#yd-service-' + services[i].id + '-' + services[i].type);
        
        if (!$s.length) {
            log('no div element found for ' + services[i].id);
            continue;
        }
        
        if ( field == 'onlinePayment' && services[i].onlinePayment ){      
            if ($s.data('open')) {
                $("#yd-filter-found").append($s);
            }
            else{
                $("#yd-filter-found-closed").append($s);
            }
        } 
        else{
            $("#yd-filter-the-rest").append($s);
        }
    }
    
    $.cookie('yd-sorting-remove', field, {
        expires: 7
    });
    $.cookie('yd-sorting', null);
    $.cookie('yd-sorting-category', null);
    toggleActiveSorting(_this);
    $('.ordering-category-no').show();
}

/**
 * toggle the marker for the active li
 * @author mlaug
 * @since 26.02.2011
 */
function toggleActiveSorting(elem){ 
    $('#yd-sorting-middle-list ul li.active').removeClass('active');
    var $elem = $(elem);
    if ($elem.length) {
        $elem.addClass('active');
        $('.currently-sorted-by').html('"' + $elem.html() + '"');
    }
}

/**
 * @author mlaug
 */
$(document).ready(function(){
    if ($.browser.msie && $.browser.version.split('.')[0] < 9) {
        return;
    }
   
    if (typeof(services) != 'undefined' && $(".yd-service-page").length) {
        var preSorting = $.cookie('yd-sorting');
        var preSortingCategory = $.cookie('yd-sorting-category');
        var preSortingRemove = $.cookie('yd-sorting-remove');
        
        if ( !preSortingRemove ){
            if ( document.location.hash == '#onlinepayment' ){
                preSortingRemove = 'onlinePayment';
                preSorting = null;
                preSortingCategory = null;
            }
        }
        
        if (preSortingCategory) {
            log('found sorting category cookie, do presort by ' + preSortingCategory);
            _doSortCategory($('#sort-' + preSortingCategory), preSortingCategory);
        }
        else if (preSorting) {
            var field = preSorting.split('#')[0];
            var revert = preSorting.split('#')[1] == 'false' ? false : true;
            log('found sorting cookie, doing presort by ' + field);
            _doSort($('#sort-' + field), field, revert);
        }
        else if (preSortingRemove) {
            log('found sorting remove cookie, do presort by ' + preSortingRemove);
            _doRemove($('#sort-' + preSortingRemove), preSortingRemove);
        }
        else {
            _doSort($('#sort-open'), "tipp", false);
        }
    
        $('.do-sort').live('click', function(){      
            //services is defined in the service template
            var field = this.id.split('-')[1];
            var revert = $(this).hasClass('revert');             
            _doSort(this, field, revert);
            
            /**
             * tracking for criteo
             * @author Daniel Hahn <hahn@lieferando.de>
             */                        
            log('sorting finished ...');
            if (typeof trackCriteo == "function") {
                trackCriteo(services[0] !== undefined ? services[0].id : 0, 
                    services[1] !== undefined ? services[1].id : 0,
                    services[2] !== undefined ? services[2].id : 0);
            }
        });
        
        $('.do-remove').live('click', function(){
            var field = this.id.split('-')[1];
            _doRemove(this, field);
        });
    }
    
    //sort by category
    $('.do-sort-category').live('click', function(){
        var categoryId = this.id.split('-')[1];
        _doSortCategory(this, categoryId);
    });
    
    //reset everything
    $('#yd-reset-service-filter').live('click', function(){
        _resetSearchList();
    });
    
    $('.yd-sorting-middle-dropdown, .yd-sorting-middle-dropdown-box').live('click', function(){
        $('#yd-sorting-middle-list').toggle();
        $('#yd-sorting-middle').toggleClass('active');
        return false;
    });
   
});
/*! include 002-search.js */
$(document).ready(function(){
    
    if ($.browser.msie && $.browser.version.split('.')[0] < 9) {
        return;
    }
    
    /**
     * click on enter
     * @author mlaug
     * @since 26.09.2011
     */
    $('#yd-search-service-form').submit(function(event){
        if (!this.search.value.length) {
            log('hitting enter, but not search value so far');
            return false;
        }
        
        log('hitting enter, triggering meal search');
        $('.yd-search-meals').click();
        return false;
    });
    
    /**
     * Search for any meal and append to service
     * @author mlaug
     */
    $('.yd-search-meals').live('click', function(){
        $('.menu-top3').hide();
        _resetSearchList();
        
        var searchValue = $('#yd-search-service').val();
        
        $('#yd-sorting-right-search').hide();
        $('#yd-sorting-right-wait-term').html("<b>" + searchValue + "</b>");
        $('#yd-sorting-right-wait').show();
        
        $.ajax({
            url: '/request_order/search',
            dataType: 'json',
            data: {
                search: searchValue,
                ids: serviceIds
            },
            error: function(){
                _resetSearchList();
            },
            success: function(json){
                if (json.meals.length == 0 && json.services.match.length == 0) {
                    log('no search result found');
                    alert($.lang("no-meals-found"));
                }
                else {
                    var url = '';
                    log('found ' + json.meals.length + ' menus with matching patterns');
                    if (json.meals.length) {
                        $.each(json.meals, function(i, val) {
                            $.each(val, function(j, meal) {
                                url = $('#yd-service-submit-' + meal.restaurantId + '-rest').attr('action');
                                $('#yd-service-menu-' + meal.restaurantId).append(
                                    '<tr>\n\
                                        <td class="first">\n\
                                            <a href="' + url + '?mealid=' + meal.id + '" class="tooltip" title="' + meal.description + '">' + meal.name + '</a>\n\
                                        </td>\n\
                                        <td><a href="' + url + '?mealid=' + meal.id + '" class="tooltip" title="' + meal.description + '">' + meal.cost + '</a></td>\n\
                                    </tr>');
                            });
                        });
                    }
                    
                    log('found ' + json.services.match.length + ' services with matching patterns');
                    if (json.services.match.length) {
                        $.each(json.services.match, function(k, val) {
                            var $s = $('#yd-service-' + val + '-rest');
                            if ($s.length) {
                                $("#yd-filter-found").append($s);
                            }
                        });
                        $.each(json.services.nomatch, function(k, val) {
                            var $s = $('#yd-service-' + val + '-rest');
                            if ($s.length) {
                                $("#yd-filter-the-rest").append($s);
                            }
                        });
                        $('.menu-top3').slideDown('slow');
                    }
                }
                
                $('#yd-sorting-right-wait').hide();
                $('#yd-sorting-right-search').show();
            }
        });
    });

});
/*! include 003-reachable.js */
$(document).ready(function(){
    
    /**
     * @author mlaug
     * @since 28.09.2011
     */
    if (!$('.yd-service-page').length) {
        return;
    }
    
    if (ydState.maybeLoggedIn()) {        
        $('.yd-sorting-type').show();
    }
    
    updateReachable();
});
/*! include 004-propose.js */
$(document).ready(function(){
    
    if ( $.browser.msie && $.browser.version < 9 ){
        return;
    }
    
    /**
     * @author mlaug
     * @since 01.09.2011
     */
    $('.yd-service-page').each(function(){
        ydRecurring.loadLastOrder();
        return false;
    });
    
});
/*! include 006-tracking.js */
/**
 * Tracking Pixel Adcloud Service and 12 Monkey Retargeting
 * called in 003-reachable
 * @author Daniel Hahn <hahn@lieferando.de>
 * @since 24.10.2011
 * @maybe TODO check referer 
 */
function trackServices() {
   
    if (($("body.de").length || $("body.de2").length) && !$('body.eat-star').length) {
        var serviceCount = $('#yd-filter-found').children();
        if (serviceCount.length){
            //Tracking for 12 Monkeys
            if (typeof track12Monkeys == "function" ){
                  track12Monkeys();          
            }
          
            // Tracking fÃ¼r Criteo
            if (typeof trackCriteo == "function") {
                var first = serviceCount[0].id.split('-')[2];
                var second = (serviceCount[1])? serviceCount[1].id.split('-')[2] : 0;
                var third = (serviceCount[2])? serviceCount[2].id.split('-')[2] : 0;

                trackCriteo(first , second, third);
            }
            
        } else {
            if(typeof trackMediaPlexPyszne == "function") {
                trackMediaPlexPyszne();
            }
        }
    }
}
/*! include 007-filter.js */
/**
 * @author vpriem
 * @since 08.02.2012
 */
function initServiceTypeFilter() {
    
    var filter = "rest";
    if (ydState.getKind() == 'comp') {
        filter = $.cookie("yd-filter-type") || filter;
    }

    var $checkboxes = $(":checkbox.yd-filter-service-type").each(function(){
        if (this.value == filter)  {
            if ($(this).attr('disabled')) {
                filter = "unknow";
            }
            else {
                this.checked = true;
                return false;
            }
        }
    });
    
    // get first available checkbox
    if (filter == "unknow") {
        $checkboxes.each(function(){
            if (!$(this).attr('disabled')) {
                this.checked = true;
                return false;
            }
        });
    }
    
    $checkboxes.each(function(){
        if (this.checked) {
            $("div.yd-service-type-" + this.value).show();
        } else {
            $("div.yd-service-type-" + this.value).hide();
        }
    });
}

/**
 * @author vpriem
 * @since 08.02.2012
 */
$(document).ready(function(){
   
    if (!$('.yd-service-page').length) {
        return;
    }
    
    var $checkboxes = $(":checkbox.yd-filter-service-type").change(function(){
        if (!this.checked) {
            this.checked = true;
        } else {
            $checkboxes.attr('checked', false);
            this.checked = true;
            $.cookie("yd-filter-type", this.value);
        }
        
        $checkboxes.each(function(){
            if (this.checked) {
                $("div.yd-service-type-" + this.value).show();
            } else {
                $("div.yd-service-type-" + this.value).hide();
            }
        });
        
    });
    
    initServiceTypeFilter();
   
});
/*! include 008-tracking.js */
/**
 * @author vpriem
 * @since 05.04.2012
 */
var _gaq = _gaq || [];

$(document).ready(function(){
   
    if (!$('.yd-service-page').length) {
        return;
    }
   
    /**
     * @author vpriem
     * @since 05.04.2012
     */
    var GAServiceCountOnlineOpen = 
        GAServiceCountOnlineClosed = 
        GAServiceCountOffline = 0;
    
    $('.yd-service-container:visible').each(function(){
        if ($('.service-offline', this).length) {
            GAServiceCountOffline++;
        }
        else if ($(this).data('open') === true) {
            GAServiceCountOnlineOpen++;
        }
        else {
            GAServiceCountOnlineClosed++;
        }
    });
    
    _gaq.push(['_setCustomVar', 1, 'service_count_online_open', "" + GAServiceCountOnlineOpen, 2]);
    _gaq.push(['_setCustomVar', 2, 'service_count_online_closed', "" + GAServiceCountOnlineClosed, 2]);
    _gaq.push(['_setCustomVar', 3, 'service_count_offline', "" + GAServiceCountOffline, 2]);

});
/*! include 004-finish.js */
$(document).ready(function(){
    
    if ((ydOrder.get_meal_amount() <= 0)) {
        $('.finish-button').addClass('yd-gray-button');
        $('.finish-button').attr('disabled',true);
    }
    
    if (!ydState.maybeLoggedIn() && $('#finishForm').length) {
        $('#login').append('<input type="hidden" name="login_finish" value="1" />');
        $('#login').append('<input type="hidden" name="kind" value="' + ydState.getKind() + '" />');
    }
    
    /**
     * send out an private single order of a restaurant
     * here only deliver information must be checked
     * and payment
     */
    var hasBeenSubmited = false;

    // IE 6 gets no inline validation - only validation on click the butto
    // that effects that the layout will not be zerschossen
    if(!($.browser.msie && $.browser.version.split('.')[0] <= 7)){
        if ($('#finishForm').length) {
            $('#finishForm').validationEngine({
                promptPosition: "topRight",
                validationEventTriggers: "blur",
                success: false,
                scroll: true
            });
        }
    }
    
    $('.yd-finish-payment').click(function() {
        $('.formError').hide();
        $('#paymentDiv').css('border-width', '0');
    });
    
    
    $('#yd-private-single-finish, #yd-private-single-finish-bottom, #yd-company-single-finish, #yd-company-single-finish-bottom').live('click', function() {
            
        if (hasBeenSubmited === true) {
            return false;
        }
            
        $('.finish-button-top')
        .removeClass('button-2')
        .addClass('button-2-working');
        $('.finish-button')
        .removeClass('button-2')
        .addClass('button-2-working');
        $('#openingDiv').css('border', '1px solid #ccc');
        $('#yd-finish-deliver-time-day').css('border', '1px solid #555');
        if($('#finishForm').validationEngine({
            returnIsValid: true,
            onErrorShow: function (caller) {
                if($(caller).prop('name') == 'payment') {
                    if($("input[name='payment']:checked").size() == 0) {
                        $('#paymentDiv').css('border', '2px solid red');
                    }else{
                        $('#paymentDiv').css('border', 'none');
                    }                  
                }                              
            },
            onErrorClose: function(caller) {                
                if($(caller).prop('name') == 'payment') {
                    $('#paymentDiv').css('border', 'none');
                }
            }
        }) == true){
                
            if($('#yd-finish-deliver-time-notime').length > 0){
                $('#openingDiv').css('border', '2px solid red');
                $('#yd-finish-deliver-time-day').css('border', '2px solid red');
                notification('warn','Bitte Ã¼berprÃ¼fen Sie die Lieferzeit.');
                setTimeout(function() {
                    $('.finish-button-top')
                    .removeClass('button-2-working')
                    .addClass('button-2');
                    $('.finish-button')
                    .removeClass('button-2')
                    .addClass('button-2');
                }, 1000);
                return false;
            }
        
            //show presuccess content
            $('#yd-finish-content').hide();
            $('#yd-finish-presuccess-content').show();
                    
            // fix fÃ¼r doppelte submits
            //     $('#yd-shopping-positions input').remove();
            $('#finishForm').submit();
            hasBeenSubmited = true;
            return false;
        }
            
        setTimeout(function() {
            $('.finish-button-top')
            .removeClass('button-2-working')
            .addClass('button-2');
            $('.finish-button')
            .removeClass('button-2-working')
            .addClass('button-2');
        }, 1000);
        
        return false;
    });
    
    /**
     * Don't show telephone number if not in support time
     * @author Jens Naie <naie@lieferando.de>
     * @since 12.10.2012
     */
    var now = new Date();
    if (now.getHours()<17 || now.getHours()>=21) {
        $(".yd-phoneorder-style").hide();
    }

});
/*! include 001-add-to-card.js */
/**
 * @author mlaug
 * @since 08.11.2011
 */
function callMeal(mealId, sizeId, update){
    update = update || false;

    log('loading meal ' + mealId);
    openDialog('/request_order/callmeal/id/' + mealId + '/size/' + sizeId + '/update/' + update, {
        width: 600,
        height: 380,
        modal: true,
        close: function(e, ui) {
            $(ui).dialog('destroy');
        }
    });
    //track with piwik that this item has been added
    _paq.push(['setEcommerceView',mealId]);
    log('tracking view for ' + mealId);
}

/**
 * @author alex
 * @since 05.12.2011
 */
function updateMeal(hash){
    var meal = ydOrder.meals[hash];
    openDialog('/request_order/callmeal/id/' + meal.id + '/size/' + meal.size.id + '/update/' + 1, {
        width: 600,
        height: 380,
        modal: true,
        close: function(e, ui) {
            $(ui).dialog('destroy');
        }
    }, function (){
        var sumCost = meal.size.cost;

        meal.options.forEach(function (o) {
            $('.yd-option-item-' + o.id).prop("checked", true);
            sumCost = sumCost+o.cost;
        });

        $('.yd-current-extras .yd-dbh-choise').html();
        meal.extras.forEach(function (e) {
            sumCost = sumCost + (e.cost * e.count);
            for(var i=0;i<e.count;i++){
                addExtra($('#meal-extras-' + e.id + '-' + meal.size.id)[0]);
            }
        });

        $('.yd-update-to-card', this).prop('id', hash);
        $('#yd-meal-count', this).val(meal.count);
        $('.yd-meal-cost', this).val(sumCost);
        $('#yd-meal-cost-hidden', this).val(meal.size.cost);
        $('.yd-current-meal-price', this).html(int2price(sumCost));
        $('textarea[name="special"]', this).val(meal.special);
    });
}

/**
 * @author alex
 * @since 05.12.2011
 */
$(".yd-update-to-card").live("click", function(){
    var hash = this.id;
    ydOrder.remove_meal(hash);
    $('.yd-add-to-card').click();
});

/**
 * @author mlaug
 * @since 16.11.2011
 */
function addExtra(button){
    var extraId = button.id.split('-')[2];
    var sizeId = null;
    var form = button.form;

    $('.yd-change-size:checked', form).each(function(){
        sizeId = this.value;
        return;
    });

    if (sizeId === null) {
        sizeId = form.sizeId.value;
    }

    var sizeCost = $("#yd-meal-cost-base").intVal();
    var extraCost = parseInt(form["extras_" + extraId + "-" + sizeId + "_cost"].value);
    var countFormElem = form["extras_" + extraId + "-" + sizeId + "_count"];
    var nameFormElem = form["extras_" + extraId + "-" + sizeId + "_name"];
    var extraCount = parseInt(countFormElem.value);
    countFormElem.value = extraCount + 1;

    sizeCost = sizeCost + extraCost;

    $('.yd-current-extras .yd-dbh-extras').append('<a class="yd-extras-remove" data-extra-cost="'+extraCost+'" data-extra-size-id="'+sizeId+'" data-extra-id="'+extraId+'">' + nameFormElem.value + ((extraCost>0) ? ' (' + int2price(extraCost, true) + ')' : '') + '</a>');

    $("#yd-meal-cost-base").val(sizeCost);
    $(".yd-current-meal-price").html(int2price(sizeCost));
}

/**
 * @author Matthias Laug <laug@lieferando.de>
 * @since 06.06.2012
 */
function removeExtra(a){
    var $a = $(a);
    var sizeId = $a.attr('data-extra-size-id');
    var extraId = $a.attr('data-extra-id');
    var cost = $a.attr('data-extra-cost');
    var sizeCost = $("#yd-meal-cost-base").intVal();
    sizeCost = sizeCost - cost;
    $("#yd-meal-cost-base").val(sizeCost);
    $(".yd-current-meal-price").html(int2price(sizeCost));
    var count = $('input[name="extras_' + extraId + '-' + sizeId + '_count"]');
    if ( count.val() > 0 ){
        count.val(count.val()-1);
    }
    $a.remove();
}

$(document).ready(function(){

    /**
     * trigger the selected meal from the search of service page
     * @author mlaug
     */
    var triggerSearch = getUrlVars()['mealid'];
    if (triggerSearch) {
        callMeal(triggerSearch);
    }

    /**
     * @author vpriem
     * @since 14.04.2011
     */
    $(".yd-add-to-card").live("click", function(){
        log('trying to add meal to cart');
        var form = this.form;
        var mealId = parseInt(form.mealId.value);
        var mealName = form.mealName.value;
        var exMinCost = parseInt(form.exMinCost.value) ? true : false;

        // check minAmount
        // TODO: inform user
        var count = parseInt(form.count.value);
        var minCount = parseInt(form.minCount.value);

        $('#eingabefeld').css('border', ''); // reset css
        if (count < minCount) {
            $('#eingabefeld').css('border-color', 'red');
            log("mincount isn't reached");
            $('#yd-error-mincount').show();
            return false;
        }

        // check options choices
        // TODO: inform user
        var optCorrect = true;
        $('.optrow', form).each(function(){

            var $this = $(this);

            var optId = this.id.split('-')[1];
            var choicesMin = parseInt($this.attr('data-min-choices'));
            var choicesMax = parseInt($this.attr('data-max-choices'));
            var count = $(':checkbox:checked', this).length;

            $('#yd-so-many-choices-' + optId).css('color', ''); // reset css

            if (count < choicesMin || count > choicesMax) {
                $this.removeClass('yd-dialogs-green').addClass('warning');
                // scroll to the first unchecked option
                if (optCorrect) {
                    var $container = $(document);
                    if ($container.length){
                        $container
                        .scrollTop(0)
                        .scrollTop($this.offset().top);
                    }
                }
                optCorrect = false;
            }
            else{
                $this.addClass('yd-dialogs-green').removeClass('warning');
            }
        });
        if (!optCorrect) {
            $('div.yd-dialogs').addClass('warning');
            log('options are not correctly selected');
            return false;
        }
        else{
            $('div.yd-dialogs').removeClass('warning');
        }

        var ydMeal = new YdMeal();
        ydMeal.id = mealId;
        ydMeal.name = mealName;
        ydMeal.count = count;
        ydMeal.minCount = minCount;
        ydMeal.exMinCost = exMinCost;
        ydMeal.special = form.special.value.stripTags();

        var ydSize = null;

        $('.yd-change-size:checked', form).each(function(){
            var sizeId = this.value;
            var name = form["sizes_" + sizeId + "_name"].value;
            var cost = form["sizes_" + sizeId + "_cost"].value;
            ydSize = new YdSize(sizeId, name, cost);
            return false; // one time
        });
        if (ydSize === null) {
            var sizeId = form.sizeId.value;
            var cost = form.sizeCost.value;
            ydSize = new YdSize(sizeId, "normal", cost);
        }
        ydMeal.size = ydSize;

        $('.yd-check-option:checked', form).each(function(){
            var optionId = this.value;
            var groupId = this.id.split("-")[1];
            var name = form["options_" + groupId + "_" + optionId + "_name"].value;
            var cost = form["options_" + groupId + "_" + optionId + "_cost"].value;
            var ydOption = new YdOption(optionId, name, cost);
            ydMeal.addOption(ydOption);
        });

        $('.yd-extra-' + ydSize.id, form).each(function(){
            log(form);
            var extraId = this.value;
            var count = form["extras_" + extraId + "-" + ydSize.id +  "_count"].value;
            if ( count > 0 ){
                var name = form["extras_" + extraId + "-" + ydSize.id +  "_name"].value;
                var cost = form["extras_" + extraId + "-" + ydSize.id +  "_cost"].value;
                var ydExtra = new YdExtra(extraId, name, cost, count);
                ydMeal.addExtra(ydExtra);
            }
        });

        ydOrder.add_meal(ydMeal);

        closeDialog();
        if ($(this).hasClass("yd-iframe-add-to-card")) {
            $('.extras').hide();
            $('.activeiframe').removeClass('activeiframe');
            $('#yd-extras-' + mealId).hide("slow");
        }

        return false;
    });

    /**
     * add an meal element to our card
     * @author mlaug
     * @since 05.01.2011
     */
    $(".add-to-card").live("click", function(){

        var data = this.id.split('-');
        var mealId = data[1];
        var sizeId = data[2];
        var hasSpecials = data[3];

        var plzIsSet = true;
        if (typeof ydMenuTrigger == "object") {
            plzIsSet = ydMenuTrigger.isPlzSet(function(){
                callMeal(mealId, sizeId);
            });
        }
        if (!plzIsSet) {
            return false;
        }

        /**
         * Slide meal into shopping card
         * excluding IE cause it sucks
         * @author vpriem
         * @since 27.06.2011
         */
        if (hasSpecials == "0" && !$.browser.msie) { // has to be a string
            log('adding meal directly, no options and extras available and size selected');

            var ydMeal = new YdMeal();
            ydMeal.id = mealId;
            ydMeal.name = $("#yd-mealName-" + mealId).val();
            ydMeal.count = 1;
            ydMeal.exMinCost = $("#yd-mealExMinCost-" + mealId).intVal() ? true : false;

            var sizeName = $("#yd-sizeName-" + sizeId + "-hidden").val();
            var cost = $("#yd-mealCost-" + mealId + "-" + sizeId).val();
            ydMeal.size = new YdSize(sizeId, sizeName, cost);

            var hash = ydOrder.add_meal(ydMeal, null, false);

            var fromOffset = $(this).offset();
            var targetOffset;
            if ($("#yd-meal-count-li-" + hash).length) {
                targetOffset = $("#yd-meal-count-li-" + hash).offset();
            }
            else {
                targetOffset = $("#yd-shopping-positions").offset();
                targetOffset.top += $("#yd-shopping-positions").height();
            }
            $('<ul class="yd-flying-meal"></ul>')
            .append(ydMeal.getHtml(hash))
            .offset(fromOffset)
            .appendTo("body")
            .animate({
                top: targetOffset.top,
                left: targetOffset.left
            }, 1000, function(){
                $(this).remove();
                ydOrder.update_view();
            });
            return false;
        }

        callMeal(mealId, sizeId);
        return false; //avoid next load of meal from tr
    });

    /**
     * when we select another size
     * @author alex
     * @since 28.07.2011
     */
    $(".yd-change-size").live('click', function(){
        var form = this.form;
        var sizeId = this.value;
        var cost = form["sizes_" + sizeId + "_cost"].value;

        $('span.yd-dbh-extras a').each(function(){
            removeExtra(this);
        });

        $("#yd-meal-cost-base").val(cost);
        $(".yd-current-meal-price").html(int2price(cost));
        form.sizeId.value = this.value;

        $('.yd-current-extras').hide();
        $('#yd-current-extras-' + sizeId).show();
    });


    /**
     * append all choices to the current header box of an option row
     * @author mlaug
     * @since 08.11.2011
     */
    function appendChoices(checkboxes, row, change){
        var maxChoices = $('[id^=choices-]').attr('data-max-choices');
        var choices = row.find('.yd-dbh-choise');
        choices.html('');
        var changeLink = row.find('.yd-dbh-change').show();
        if ( change ){
            changeLink.show();
        }
        else{
            changeLink.hide();
        }
        $.each(checkboxes,function(index){
            var opt = $(this).next().html();
            log('appending ' + opt);
            if (index > 0 && index != maxChoices-1) {
                choices.append(', ');
            }
            if (maxChoices > 1 && index == maxChoices-1) {
                choices.append(' & ');
            }
            choices.append($.trim(opt));
        });

        //update selection
        row.find('.yd-option-choices-selected').html(checkboxes.length);
    }

    /**
     * change the current option selection
     * @author mlaug
     * @since 08.11.2011
     */
    $('.yd-change-options').live('click',function(event){
        // user clicked on "change" link in the green header, so don't propagate the click to the parent'
        var headerElement = '';
        if ($(this).hasClass('yd-dbh-change')) {
            headerElement = $(this).parent();
            event.stopPropagation();
        }
        // user clicked directly on the surrounding green header
        else {
            headerElement = $(this);
        }

        var row  = headerElement.closest(".optrow");
        var checkboxes = row.find(":checkbox:checked");
        var maxChoices = row.attr('data-max-choices');

        if (checkboxes.length >= maxChoices) {

            $.each($('.yd-change-options'), function(){
                if (headerElement.context.tagName == 'SPAN') {
                    headerElement.toggle();
                }
            })

            $('#yd-change-options-box-' + headerElement.attr('id').split('-')[3]).toggle();
        }
    });

    /**
     * check that options are only as much as allowed and calculate sum cost
     * @author vpriem, alex
     * @since 19.07.2011
     */
    $('.yd-check-option').live('click', function() {
        log('trying to check option');

        var optionRowId = parseInt(this.id.split('-')[1]);
        var optionId = parseInt(this.id.split('-')[2]);

        var $optionRow = $('#choices-' + optionRowId);
        var choicesMin = parseInt($optionRow.attr('data-min-choices'));
        var choicesMax = parseInt($optionRow.attr('data-max-choices'));

        var form = this.form;

        var mealCost = $("#yd-meal-cost-base").intVal();
        var optionCost = parseInt(form["options_" + optionRowId + "_" + optionId + "_cost"].value);

        if ($(this).is(":checked")) {
            mealCost = mealCost + optionCost;
        }
        else {
            mealCost = mealCost - optionCost;
        }

        $("#yd-meal-cost-base").val(mealCost);
        $(".yd-current-meal-price").html(int2price(mealCost));

        var $row  = $(this).closest(".optrow");
        var $checkboxes = $row.find(":checkbox:checked");

        //you can choose more, dude!
        log('selected ' + $checkboxes.length + ' of ' + choicesMin + ' minimum options');
        if ($checkboxes.length < choicesMin) {
            log('more choices are possible');
            $row.removeClass('yd-dialogs-green');
            appendChoices($checkboxes, $row, false);
            return true;
        }

        //bind to box
        $('#choices-' + optionRowId + '-1').one('click', function(){
            $('#yd-change-options-' + optionRowId).hide();
            $('#yd-change-options-box-' + optionRowId).show();
        });

        //you are filled up, no more choices available
        var countCheckedOptions = $checkboxes.length;
        if (countCheckedOptions == choicesMax) {
            log('all choices have been made, closing box');
        }
        else if (countCheckedOptions > choicesMax){
            var $checkbox = $checkboxes.not(this).last();
            $checkbox.prop("checked", false);
            var lastOptionId = $checkbox.attr("id").split('-')[2];

            var lastOptionCost = parseInt(form["options_" + optionRowId + "_" + lastOptionId + "_cost"].value);
            mealCost = mealCost - lastOptionCost;

            $("#yd-meal-cost-base").val(mealCost);
            $(".yd-current-meal-price").html(int2price(mealCost));
            countCheckedOptions--;
        }

        if (countCheckedOptions == choicesMax) {
            $row.find('.yd-dialogs-box-body').hide();
        }

        $row.addClass('yd-dialogs-green').removeClass('warning');
        if (!$(".optrow.warning").length) {
            $('div.yd-dialogs').removeClass('warning');
        }

        appendChoices($row.find(":checkbox:checked"), $row, countCheckedOptions == choicesMax);
        return true;
    });

    /**
     * set meal cost when some extras was selected/unselected
     * @author alex
     * @since 01.08.2011
     */
    $('button.yd-extras').live('click',function() {
        log('clicked an extra');
        addExtra(this);
        return false;
    });

    $('a.yd-extras-remove').live('click',function(){
        log('remove extra');
        removeExtra(this);
        return false;
    });

});
/*! include 004-search.js */
$(document).ready(function(){

    if ( $.browser.msie && $.browser.version.split('.')[0] < 9 ){
        return;
    }
    
    var defaultSearchVal = $('.menu-nav-search-text').val();
    
    /**
     * check if any search action is needed
     * @author mlaug
     * @since 12.10.2011
     */
    function checkForAction(){
        var currentVal = $('.menu-nav-search-text').val();
        if ( currentVal != undefined && currentVal != defaultSearchVal && currentVal.length > 0 ){
            $('.tab4 .yd-search-reset').show();
            return true;          
        }
        
        if ( currentVal.length == 0 ){
            resetMenuSearch(false);
        }
        
        $('.tab4 .yd-search-reset').hide();
        return false;
    }
    
    /**
     * reset the search in the menu
     * @author mlaug
     * @since 12.10.2011
     */
    function resetMenuSearch(setDefaultValue){
        if ( setDefaultValue ){
            $('#menu-nav-search-text').val(defaultSearchVal); 
        }
        $('.yd-search-reset').hide();
        $('.search-no-meal-in-cat').hide();
        $('.yd-menu-search').show();
        $('.food_side').each(function(){
            if ( this.id.split('-')[1] != 0 ){             
                toggleMenuCategory(this);
                return false;
            }
        });
    }

    /**
     * @author mlaug
     * @since 05.01.2010
     */
    $('.menu-nav-search-text').live('click, focus', function(){
        var val = this.value;
        if (val == defaultSearchVal) {
            $(this)
            .val("")
            .css('color','black');
        }
    });

    /**
     * @author mlaug
     * @since 05.01.2010
     */
    $('.menu-nav-search-text').live('blur',function(){
        if (this.value == '') {
            $(this)
            .val(defaultSearchVal)
            .css('color','#AAA');
        }
    });

    /**
     * @author mlaug
     * @since 05.01.2010
     */
    $('.yd-search-reset').live('click', function(){
        resetMenuSearch(true);
    });

    /**
     * search in the menu
     * @view /application/views/smarty/template/default/order/_includes/menu/menu.htm
     * @author mlaug
     * @since 06.10.2011
     */
    if ($('.menu-nav-search-text').length) {       
        
        $('.menu-nav-search-text').quicksearch('.yd-menu-search',{
            'bind': $.browser.msie ? 'enter' : 'keyup',
            'delay': 500,
            'show' : function(){
                if ( !checkForAction() ){
                    return;
                }
                $(this).show().addClass('yd-found-sth');
            },
            'hide' : function(){
                if ( !checkForAction() ){
                    return;
                }
                $(this).hide().removeClass('yd-found-sth');
            },
            'onAfter' : function(){
                
                if ( !checkForAction() ){
                    return;
                }
                
                $('.yd-menu-nav2').hide();
                $('.menu-box').each(function(){
                    var countFound = $('.yd-found-sth',this).length;
                    var categoryId = this.id.split('-')[2];
                    if ( countFound > 0 ){
                        log('found ' + countFound + ' matches, showing category');
                        $('.search-no-meal-in-cat',this).hide();                       
                        //show category where sth is found
                        $('#yd-category-' + categoryId).show();
                        
                    }
                    else{
                        log('found no matches, hiding category');
                        $('.search-no-meal-in-cat',this).show();                     
                        //hide category, where nothing is found
                        $('#yd-category-' + categoryId).hide();
                    }
                });
                
                //remove active class, if nothing has been found in this class
                $('.yd-menu-nav1 .active').removeClass('active');
                
            }
        });
    }

});
/*! include 005-mincosttooltip.js */
$(document).ready(function(){
    var mincosttooltip = $('#yd-sidebar .yd-finish-order');
    mincosttooltip.mousemove(function(e){
            var offset = mincosttooltip.offset();
            var mincostx = e.pageX - offset.left;
            var mincosty = e.pageY - offset.top;
            $('.mincosttooltip').css({
                "top" : mincosty+20+"px",
                "left" : mincostx+20+"px"
            });
    });
});
/*! include 008-bucket.js */
$(document).ready(function(){
    
    /**
     * @author vpriem
     * @since 08.06.2012
     */
    $("#yd-clear-bucket").click(function(){
        
        ydOrder.clear_bucket();
        
        $(this).hide();
        return false;
    });
});
/*! include 001-budget.js */
// check user and try to assign new budget
$("#yd-add-budget").live('click',function() {
    
    var check = true;
    $('#yd-loading-budget').show();
    
    $('.budget-input').css('border','1px solid #CCCCCC');

    var email = $('#check_email');
    var euro = parseInt($('#check_amount_euro').val(),10);
    var cent = parseInt($('#check_amount_cent').val(),10);
    var code = $('#projectcode');
    var addition = $('#check_project_addition').val();
    var addition2 = $('#check_project_addition2').val();
        
        
    /**
     * company special for bbdo
     */
    if($('#check_project_addition_for').length > 0){
        if($('#check_project_addition_for').val() == 'bbdo'){
            addition = '/' + addition + '/' + addition2;
            
            if ( $('#yd-comp-need-code').length > 0){
                if(addition === ''){
                    $('#check_project_addition').css('border', '1px solid red');
                    check = false;
                }
                if(addition2 === ''){
                    $('#check_project_addition2').css('border', '1px solid red');
                    check = false;
                }
            }
        }
    }
    
    /**
     * company special for scholz-hh
     */
    if( $('#yd-budget-box').hasClass('scholz-hh')){
        if( code.val().length != 5 ){
            code.css('border','1px solid red');
            notification('warn','Bitte geben Sie genau 5 Zeichen ein.');
            check = false;
        }
    }
    
    /**
     * company special for scholz & friends berlin
     */
    if( $('#yd-budget-box').hasClass('scholz-bln')){
        //nothing to do here
    }

    if(email.val().length < 5){
        $('#check_email').css('border', '1px solid red');
        check = false;
    }        

    if ( $('#yd-comp-need-code').length > 0 && code.val().length == 0){
        code.css('border','1px solid red');
        check = false;
    }
        
    //check numbers
    if ( isNaN(euro) ){
        euro = 0;
    }
    if ( isNaN(cent) ){
        cent = 0;
    }

    var amount = (euro * 100) + cent;
    if ( amount === 0 ){
        $('#check_amount_euro').css('border', '1px solid red');
        $('#check_amount_cent').css('border', '1px solid red');
        check = false;
    }
    
    if(!check){
        $('#yd-loading-budget').hide();
        return false;
    }

    $.ajax({
        type : "POST",
        url: "/request_order/addbudget",
        data: ({
            'email'     : email.val(),
            'amount'    : amount,
            'customer'  : $('#yd-customerId').val()
        }),
        success : function(){            
            ydBudget.add(email.val(),amount,code.val(),addition);   
        },
        //maybe a 404 or 406 if customer not exists or amount is not covered
        error : function(){
            notification('warn','Konnte Budget nicht hinzufÃ¼gen');
        }
        
    });
    
    $('#yd-loading-budget').hide();
    return false;
});

//remove item from share
$('.yd-budget-erase').live('click',function(){
    var hash = this.id.split('-')[3];
    log('removing budget with hash ' + hash);
    ydBudget.remove(hash);
    return false;
});
/*! include 002-switch.js */
$(document).ready(function(){
    $('#yd-kind-switch').live('change',function(){
        var form = $('#finishForm');
        $('input[name="finish"]').remove();
        if ( this.value == 'comp' ){
            form.attr('action','/order_private/finish');
        }
        else{
            form.attr('action','/order_private/finish');
        }
        form.validationEngine('detach');
        form.submit();
    });
});
/*! include 001-payment.js */
/**
 * Show payment form
 * @author vpriem
 * @since 08.02.2011
 */
function showPaymentForm(payment) {
    
    $("div.yd-payment-form").hide();
    $("#yd-payment-form-" + payment).show();
}

/**
 * @author vpriem
 * @since 07.02.2012
 */
function selectFirstVisiblePayment() {
    
    $(':radio.yd-finish-payment-radio').prop("checked", false);
    $('div.yd-finish-payment').removeClass('active');
    
    $('.yd-finish-payment:visible').each(function(){
        var payment = this.id.split('-')[3];
        log('select first visible payment ' + payment);
        $(this).addClass('active')
            .find(":radio")
            .prop("checked", true);
            
        showPaymentForm(payment);
        
        return false;
    });
}

/**
 * @author vpriem
 * @since 07.02.2012
 */
function selectPayment(payment) {
    
    $(':radio.yd-finish-payment-radio').prop("checked", false);
    $('div.yd-finish-payment').removeClass('active');
    log('try to select payment ' + payment);
    $('#yd-finish-payment-' + payment)
        .addClass('active')
        .find(":radio")
        .prop("checked", true);
}

/**
 * @author vpriem
 * @since 07.02.2012
 */
function showPayment(payment) {
    
    $('#yd-finish-payment-' + payment).show();
}
    
/**
 * @author vpriem
 * @since 07.02.2012
 */
function hidePayment(payment) {
    
    $('#yd-finish-payment-' + payment).hide();
}

$(document).ready(function(){

    /**
     * Show selected payment form
     * @author vpriem
     * @since 08.02.2011
     */
    $(':radio:checked.yd-finish-payment-radio').each(function(){
        showPaymentForm(this.value);
    });

    /**
     * Select payment method
     * @author vpriem
     * @since 08.02.2011
     * @see http://ticket.yourdelivery.local/browse/YD-775
     */
    $('.yd-finish-payment').live('click', function(){

        var payment = this.id.split('-')[3];

        $(':radio.yd-finish-payment-radio').prop("checked", false);
        $(':radio.yd-payment-addition-radio').prop("checked", false);
        $('div.yd-finish-payment').removeClass('active');

        var $payment;
        if ($(this).hasClass("yd-payment-addition")) {
            $payment = $('#yd-finish-payment-bar');
            $(this).find(":radio")
                .prop("checked", true);
        }
        else {
            $payment = $(this);
        }
        
        $(this).addClass('active');
        $payment.find(":radio")
            .prop("checked", true);

        showPaymentForm(payment);

        return false;
    });
    
    /**
     * @author vpriem
     * @since 18.11.2011
     */
    $("#yd-save-cc")
    .live("click", function(){
        if (this.checked) {
            $(":radio.yd-creditcard").prop("checked", false);
        }
    })
    .closest("li").hover(function(){
        $("em", this).show();
    }, function(){
        $("em", this).hide();
    });
    
    $("input.yd-creditcard").live("click", function(){
        if (this.checked) {
            $("#yd-save-cc").prop("checked", false);
        }
    });

});
/*! include 002-datetime.js */
$(document).ready(function(){

    /**
     * Init datepicker
     * @author vpriem
     * @since 10.02.2011
     */
    if ($('#yd-finish-deliver-time-day').length) {
        initDatepicker('now', 'yd-finish-deliver-time-day');
    }

    /**
     * Load deliver time
     * @author vpriem
     * @since 10.02.2011
     */
    $('#yd-finish-deliver-time-select').bind("refresh", function(){
        var date = $('#yd-finish-deliver-time-day').val();
        var serviceId = $('input:[name="serviceId"]').val();
        var cityId = $('input:[name="cityId"]').val();
        $('#yd-finish-deliver-time-select').load('/request_service/openingtimeday', {
            id: serviceId,
            date: date,
            cityId: cityId,
            mode: ydState.getMode()
        });
    }).trigger("refresh");

    /**
     * Init timepicker
     * @author vpriem
     * @since 10.02.2011
     */
    $('#yd-finish-deliver-time-day').live('change', function(){
        $('#yd-finish-deliver-time-select').trigger("refresh");
    });

});
/*! include 003-floorfee.js */
$(document).ready(function(){

    $('#etage-select, #yd-finish-lift').live('change',function(){
        // IE will not do that :(
        
        var floor = $('.floor');
        
        if($('#yd-finish-lift').attr('checked')){
            floor.val('lift');
        } else {
            var etage = $('#etage-select').val();
            floor.val(etage);
            if(etage <= 0){
                $("#yd-finish-lift, label[for=yd-finish-lift]").addClass('hidden');
            } else  {
                $("#yd-finish-lift, label[for=yd-finish-lift]").removeClass('hidden');
            }
        }
        
        $('.yd-open-amount').html(ydOrder.calculate_open_amount(true));
        $('.yd-full-amount').html(ydOrder.calculate_amount(true));
        $('input[name=deliverCost]').val(ydOrder.get_deliver_cost());
        ydOrder.update_view_deliver_cost();
    });

});
/*! include 004-address.js */
$(document).ready(function(){
    
    //if customers wishes to change deliver cost on finish page, update it
    $('#changeCityId').live('change',function(){
        var range = ydCurrentRanges[this.value];
        if ( range === 'undefined' ){
            log('undefined deliver range, weird!');
        }
        ydOrder.set_deliver_cost(range.deliverCost, range.noDeliverCostAbove);
        $('input[name="cityId"]').val(this.value);
        log('updating deliver cost to ' + range.deliverCost);
    });
   
    // if we have an private state we may prefill the address field
    $('#finishForm').each(function(){
        
        if (ydState.getKind() != 'priv') {
            return false;
        }
        
        if ( ydRecurring._lastorder !== null){
            
            $.ajax({
                url: '/request_order/lastorder',
                data: {
                    type: 'json',              
                    hash: ydRecurring._lastorder,
                    mode: ydState.getMode(),
                    kind: ydState.getKind()
                },
                dataType: 'json',
                success: function (json, state, code) {
                    if (code.status == 200) {
                        
                        
                        log('found an old order, filling out forms');
                    
                        var form = $('#finishForm')[0];
                    
                        // only prefill prename and name
                        if (!ydState.maybeLoggedIn()) {
                            if (form.prename.value === '') {
                                form.prename.value = json.prename || "";
                            }
                            if (form.name.value === '') {
                                form.name.value = json.name || "";
                            }
                        }
                        
                        if (form.telefon.value === '') {
                            form.telefon.value = json.tel || "";
                        }
                        
                        if (form.email.value === '') {
                            form.email.value = json.email || "";
                        }
                        
                        if (form.digicode) {
                            if (form.digicode.value === ''){
                                form.digicode.value = form.comment.value.split("\nDigicode: ")[1] || "";
                                form.comment.value = form.comment.value.replace(/Digicode.*/, '');
                            }
                        }
                        
                        if ( json.cityId != ydState.getCity() ){
                            log('found an old order, but cityIds are not matching, only filling out non address related content');
                            return false;
                        }

                        // fill out address if any values are not yet filled
                        if (form.street.value === '') {
                            form.street.value = json.street || "";
                        }
                        if (form.hausnr.value === '') {
                            form.hausnr.value = json.number || "";
                        }
                        if (form.company.value === '') {
                            form.company.value = json.company || "";
                        }
                        if (form.etage.value === '') {
                            form.etage.value = json.etage || "";
                        }
                        if (form.comment.value === '') {
                            form.comment.value = json.comment || "";
                        }
                    
                        // finally check again the form and lighten them up green :)                   
                        $(':input.yd-form-invalid').each(function(){
                            if (this.value.length) {
                                $(this)
                                .removeClass('yd-form-invalid')
                                .addClass('yd-form-valid');
                            }
                        });
                    }
                    else{
                        log('found no old order, will let the customer fill in for itself');
                    }
                }
            });
        }
        
        return false;
        
    });
   
});
/*! include 005-satellite.js */
$(document).ready(function(){

    /**
     * Trigger to open a lightbox
     * to tell the user that the satellite is closed
     * @author vpriem
     * @since 13.01.2011
     */
    $('#yd-trigger-satellite-closed').each(function(){
        openDialog(this.href, {
            width: 600,
            height: 380,
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            },
            beforeClose: function (event, ui) {
                return false;
            }
        }, function(){
            $(':text:first', this)
            .emptytext()
            .plzAutocomplete(true)
            .focus()
            .caret(0);
        });
    });

    /**
     * Gallery
     * @author vpriem
     * @since 29.05.2011
     */
    if ($('#yd-satellite-gallery img').length) {
        $('#yd-satellite-gallery img').css({
            opacity: 0.0
        });
        var current = $('#yd-satellite-gallery img:first').css({
            opacity: 1.0
        });
        setInterval(function(){
            var next = current.next().length ? current.next() : $('#yd-satellite-gallery img:first');
            current
            .animate({
                opacity: 0.0
            }, 2000);
            current = next
            .animate({
                opacity: 1.0
            }, 2000);    
        }, 6000);
    }

    /**
     * A seo hack
     * @author vpriem
     * @since 18.01.2012
     */
    $("#satellite-go-away").click(function(){
        location.href = "http://" + $(this).html();
        this.blur();
        return false;
    });

    /**
     * Avanti Block Menu Hack
     * 
     * @author Toni Meuschke <meuschke@lieferando.de>
     * @since 23.11.2011
     */
    
    if($('#yd-menu').length > 0){
        var avanti_idlist = ['37020','37315','98633','101711','101805','101827','101871','101904','101921','101953','101969','101987','101937','101887','101783','101767','101728','101679','101657','101627','101602','101581','101563','101546','91524'];
        for(var z = 0; z < avanti_idlist.length; z++){
            if($('#yd-category-'+avanti_idlist[z])){
                $('#yd-category-'+avanti_idlist[z]).addClass('avanti-block');
            }
        }
    }
    
    /**
     * Avanti Block Menu parse Size Class
     * 
     * @author Toni Meuschke <meuschke@lieferando.de>
     * @since 25.11.2011
     */
    $.each($('.avanti-block .thead div'), function(b){
        if($('.avanti-block .thead div').eq(b).attr('id')){
            var nth_child = $('.avanti-block .thead div').eq(b).attr('class').split('th ')[1];
            $('<span class="avanti-mealsize">'+$('.avanti-block .thead div').eq(b).text()+'</span>').insertBefore($('.avanti-block .table .tr .'+nth_child+' .add-to-card'));
        }
    });
    
    //Premium Helper
    $('.yd-menu-modern .avanti-block .table .tr .td div:first-child').unbind();
    $('.premium-finish #yd-form-finish ul').eq(4).addClass('non-compulsory');
    $('.avanti .yd-deliver-time-input .yd-form-left img').attr('src', 'http://cdn.yourdelivery.de/images/satellites/menu/AVANTI_clock.png');
    $('.avanti .yd-deliver-time-input .yd-form-right img').attr('src', 'http://cdn.yourdelivery.de/images/satellites/menu/AVANTI_calendar.png');
    
    
    /**
     * Category Helper (if there are to many categrorys the menu position change)
     * 
     * @author Toni Meuschke <meuschke@lieferando.de>
     * @since 30.11.2011
     */
    if($('.yd-menu-nav1').height() > 170){
        $('#yd-menu').css('margin-top', $('.yd-menu-nav1').height()-160);
    }
    
});
/*! include 001-fidelity.js */
/**
 * show fidelity register lightbox on success
 * @author vpriem
 * @since 21.04.2011
 */
$(document).ready(function(){

    $('.yd-register-fidelity').live('click', function(){
        var id = this.id.split('-')[3];

        openDialog('/request_user/registerfidelity/id/' + id, {
            width: 600,
            height: 400,
            modal : true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
        }, function(){

            if ($("form.yd-validation").length) {
                $("form.yd-validation").validationEngine({
                    promptPosition: "topRight",
                    validationEventTrigger: "blur",
                    success: false,
                    scroll: false
                });
            }

            $("form", this)
            .ajaxForm({
                dataType: "json",
                success: function (json) {
                    if (json.success) {
                        notification("success", json.success);
                        closeDialog();
                        setTimeout(function(){
                            //hack for gebelseiten.lieferando.de
                            if (typeof useNoHistoryBack !== 'undefined' && useNoHistoryBack) {
                                return false;
                            }
                            location.href = '/';
                        }, 300);
                    }
                    else if (json.error) {
                        notification("error", json.error);
                    }
                }
            })
            .find(":password:first").focus();
        });

        return false;
    });

});
/*! include 002-tracking.js */
/**
 *  Build tracking Pixel with Url
 *  call in header
 *  @author Daniel Hahn <hahn@lieferando.de> 
 *  @since 25.10.2011
 */
function trackSuccess(url) {
    $(document).ready(function(){
        var img = document.createElement("img");
        img.src = url;
        img.width = 1;
        img.height = 1;
        $('body').append(img);
    });
}
/*! include 003-customer-notify.js */
$(document).ready(function(){
    var $this = $('.yd-order-notify'),
        currentDelay = null,
        interval = null;

    var checkNotify = function () {
        $this.trigger('refresh');
    };

    $this.bind('refresh', function () {
        var hash = this.id.split('-')[3];
        if (!hash.length) {
            return;
        }

        $.ajax({
            url: '/request_order/checknotify',
            data: {
                hash: hash
            },
            success: function (html) {
                $this.html(html);

                var $delayer = $('[data-delay]', $this),
                    newDelay = parseInt($delayer.data('delay'));

                if (newDelay !== null && !isNaN(newDelay) && newDelay != currentDelay) {
                    if (interval !== null) {
                        clearInterval(interval);
                    }
                    newDelay *= 1000;
                    interval = (newDelay > 0)
                        ? setInterval(checkNotify, newDelay)
                        : null;
                    currentDelay = newDelay;
                }
            }
        });
    });

    checkNotify();
});
/*! include 006-triggers.js */
/**
 * Trigger Handling for Menu Page
 * @author dhahn
 * @since 10.05.2012
 */
var MenuTrigger = function() {
    
    var $this = this;
    var serviceId =  services[0].id.toString();
    var isServiceOnline = true;
    var isPlzSet = false;
    var ydServiceInstance = new YdService(serviceId);     
     
    this.init = function() {

        isServiceOnline = this.isServiceOnline();
         
        if (isServiceOnline) {
            this.checkIsOpen();
            this.checkIsClosing();
        }
        
        var cityId = null;
        if (typeof ydState !== "undefined") {
            cityId = ydState.getCity();
        }
        if (cityId !== null) {
            if (ydState.setCity(cityId) !== false) {
                isPlzSet = true;
            }
        }
        
        if (!isPlzSet) {
            ydOrder.clear_bucket();

            // update view to show lowest deliver cost and so
            var lowestDeliverCost = 1000000;
            var lowestMinAmount = 1000000;
            for (var prop in ydCurrentRanges) {
                if (ydCurrentRanges[prop].deliverCost < lowestDeliverCost) {
                    lowestDeliverCost = ydCurrentRanges[prop].deliverCost;
                }
                if (ydCurrentRanges[prop].minCost < lowestMinAmount) {
                    lowestMinAmount = ydCurrentRanges[prop].minCost;
                }
            }
            
            ydOrder.set_deliver_cost(lowestDeliverCost, 0)
            .set_min_amount(lowestMinAmount);
                   
            // add some extra wording
            $('.yd-deliver-cost').html($.lang("from-currency", int2price(lowestDeliverCost)));
            $('.yd-min-amount').html($.lang("from-currency", int2price(lowestMinAmount)));
        }
    };
            
    /**
     * Menu Page
     * If service is called by direct link and is offline, 
     * a lightbox appears and informs the customer
     * @author vpriem, dhahn
     * @since 10.05.2012
     * @return boolean
     */
    this.isServiceOnline = function() {
        
        var isOnline = true;
        
        $("#yd-service-offline").each(function(){
            isOnline = false;
        
            $(this).dialog({
                width: 600,
                height: 380,
                modal: true,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                },
                beforeClose: function(){
                    historyBack();
                    return false;
                }
            });
        });
        
        return isOnline;
    };
    
    /**
     * Menu Page
     * If serice called directly
     * show a lightbox to invite user to choose his plz
     * @author vpriem, dhahn
     * @since 10.05.2012
     * @return boolean
     */
    this.isPlzSet = function(callback) {
        
        if (isServiceOnline && !isPlzSet) {
            $("#yd-select-plz-form").submit(function(e){
                e.preventDefault();
                $this.handlePlzSubmit(this, callback);
            });                        
            
            var parentCityId = ydState.getCity();
            //check if parentCityId is set, then search for children
            if(parentCityId) {
                var cityIds = [];
            
                $.each(ydCurrentRanges, function(i,item){                
                    if(item.parentCityId == parentCityId) {
                        cityIds.push(i);
                    }
                });
            
                log('Found parentCityId ' + parentCityId + ', choose: ' + cityIds.toString());
                var first = true;
                $('#cityId option').each(function(){
              
                    if($.inArray($(this).val(), cityIds ) == -1) {
                        log($(this).val());
                        $(this).remove();
                    }else{
                        if(first){
                            $(this).prop('selected',true);
                            first = false;
                        }                   
                    }
                });
            }
            
            $("div.yd-select-plz").each(function(){
                $(this).dialog({
                    width: 600,
                    height: 380,
                    modal: true,
                    close: function(e, ui) {
                        $(ui).dialog('destroy');  
                    },
                    beforeClose: function() {
                        if (!ydState.getCity()) {
                            if(!$('.yd-dialog-not-closeable').length){
                                historyBack();
                            }                            
                            return false;
                        }
                    }
                });
                if ($('.yd-csh-search-form', this).length > 0) {
                    // A hack for city-street-hausnr mode - retrieving first range's city and insert into form
                    for (var zone in ydCurrentRanges) {
                        var $cityInput = $('.yd-csh-autocomplete-city', this);
                        // First 6 characters are zip code (with space)
                        $cityInput.val(ydCurrentRanges[zone].name.substr(6));
                        setTimeout(function () {
                            $cityInput.trigger('focusout');
                        }, 250);
                        $('.yd-csh-autocomplete-street', this).select();
                        break ;
                    }
                }
            });
            
            return false;
        }
        
        return true;
    };
    
    /**
     * Check if Service is Open
     * @author dhahn
     * @since 10.05.2012
     * @return boolean
     */
    this.checkIsOpen = function() {
                                             
        log("checkIsOpen: Service IsOpen: "+  ydServiceInstance.isOpen());         
                
        if (!ydServiceInstance.isOpen()) {
                           
            $('.yd-menu-detail-open').css('color', 'red');
             
            var preorder =  $.base64.decode($.cookie('yd-preorder') ? $.cookie('yd-preorder') : 0) ;
                
            log('checkIsOpen:  Preoder Cookie: ' + preorder);     
                
            if (preorder != serviceId) {            
                var type = ydServiceInstance.type;
                var url = '/request_service/preorder/type/' + type;     
                
                if (type != 'rest') {                    
                    var text = $('.yd-menu-handling-time').text();
                    url +=  "/handlingtime/"+ escape(text); 
                }    
                                                                     
                openDialog(url, {
                    width: 600,
                    height: 400,
                    modal: true,
                    close: function(e, ui) {
                        $(ui).dialog('destroy');
                    },
                    beforeClose: function() {
                        var preorder = $.base64.decode($.cookie('yd-preorder') ? $.cookie('yd-preorder') : "" );
                        log("Preorder Cookie: "+ preorder);
                        if (preorder != serviceId) { 
                            log("Close Dialog with no Preorder: " + preorder);
                            historyBack();
                        }
                        return false;
                    }
                }, $this.handleIsOpenClick);
                
                return false;
            }
                          
        }
        
        return true;                         
    };
    
    /**
     * Check if service is closing soon and show warning lightbox
     * @author dhahn
     * @since 20.05.2012   
     * @return boolean  
     */
    this.checkIsClosing = function() {
        
        var minutes = 15;
        
        if (ydServiceInstance.isClosing(minutes * 60)) {
            log('checkIsClosing: is Closing in Minutes');
            
            $("#yd-service-closing").each(function(){
                $(this).dialog({
                    width: 400,
                    height: 380,
                    modal: true,                
                    open: $this.handleClosingOkClick,
                    close: function(e, ui) {
                        $(ui).dialog('destroy');
                    }
                });
            });
            
            return true;
        }
        
        return false;
    };
    
    /**
     * Setting cityId wenn submiting the plz lightbox 
     * @author vpriem, dhahn
     * @since 10.05.2012
     * @return boolean
     */
    this.handlePlzSubmit = function(form, callback) {
          
        var cityId = $(form.cityId).intVal();
        if (cityId > 0) {
            if (typeof ydState !== "undefined") {
                // be sure it is correctly setted
                if (ydState.setCity(cityId) === false) {
                    return false;
                }
                
                isPlzSet = true;
                
                //tracking for sociomantic in menu when ydState.getCity is not set
                //@author Daniel Hahn <hahn@lieferando.de>
                if (typeof track_sociomantic_in_menu  == "function") {
                    try {
                        track_sociomantic_in_menu();
                    } catch(err) {
                    }
                }
                if (typeof track_adlantic_in_menu  == "function") {
                    try {
                        track_adlantic_in_menu();
                    } catch(err) {
                    }
                }
                          
                closeDialog(true);
                
                if (typeof callback === 'function') {
                    callback();
                }
            }
        }
        
        return false;
    };
    
    /**
     * Click Handler for preorder
     * @author dhahn
     * @since 10.05.2012
     */
    this.handleIsOpenClick = function() {
        $("#yd-yes-i-want").click(function() {         
            $.cookie('yd-preorder', $.base64.encode(serviceId));                 
            closeDialog(true);
            return false;
        });
    };
    
    
    this.handleClosingOkClick = function() {
        $('#yd-service-closing-ok').click(function(){           
            $("#yd-service-closing")
            .dialog('close');
            return false;
        });
    };
    
};

var ydMenuTrigger;
$(document).ready(function(){
    
    /**
     * Menu Page
     * @author dhahn
     */
    if (typeof services != 'undefined' && services.length) {      
        $('.yd-menu-modern, div#yd-menu').each(function(){
            ydMenuTrigger = new MenuTrigger();
            ydMenuTrigger.init();
        });
    }

    /**
     * Finish Page
     * @author mlaug
     * check for current order state and remove elements according
     */
    var kindToRemove = 'comp';
    if (ydState.getKind() == 'comp') {
        kindToRemove = 'priv';
    }
    
    $('.yd-only-' + kindToRemove).each(function(){
        log('deactivating ' + this.tagName + ' element due to private order state');
        if (this.tagName == 'INPUT' || this.tagName == 'SELECT') {
            $(this).prop('disabled', true);
        }
        else {
            $(this).hide();
        }
    });
    
});
/*! include 007-success.js */
$(document).ready(function(){
   
   //this class is only on the success page
   //so it will trigger the deletion of the html5 storage
   if ( $('#yd-success-page').length > 0 ){  
       //do, whatever you want before, after that, we finish
       //and the order object will be deleted
       ydOrder.finish();
   }
   
});
/*! include 001-budget.js */
$(document).ready(function(){
    // expand budget box sidebar
    if ($("#yd-expand-budget-head").length > 0) {
        $("#yd-expand-budget-body").hide();
        $("#yd-expand-budget-head-minus").hide();
        $("#yd-expand-budget-head").click(function() {
            $("#yd-expand-budget-head-minus, #yd-expand-budget-head-plus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }
});
/*! include 002-index.js */
$(document).ready(function(){

    /**
     * @author vpriem
     * @since 10.02.2011
     */
    $('a.yd-index-slider').live('mouseover', function(){
        $('a.yd-index-slider').removeClass('active');
        $('ul.yd-index-slider-content').fadeOut('fast');
        var id = this.id.split('-')[3];
        $('#yd-index-slider-' + id).addClass('active');
        $('#yd-index-slider-' + id + '-content').fadeIn('fast');
        return false;
    });
    
});
/*! include 003-cross-selling.js */
$(document).ready(function(){
    /**
     * expand cross selling box for premium orders
     * @author mlaug
     * @since 05.01.2010
     */
    if ($("#yd-expand-premium-head").length) {
        $("#yd-expand-premium-body").hide();
        $("#yd-expand-premium-minus").hide();
        $("#yd-expand-premium-head").click(function(){
            $("#yd-expand-premium-minus, #yd-expand-premium-plus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

    /**
     * expand cross selling box for catering orders
     * @author mlaug
     * @since 05.01.2010
     */
    if ($("#yd-expand-cater-head").length) {
        $("#yd-expand-cater-body").hide();
        $("#yd-expand-cater-head-minus").hide();
        $("#yd-expand-cater-head").click(function(){
            $("#yd-expand-cater-head-minus, #yd-expand-cater-head-plus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

    /**
     * expand cross selling box for great orders
     * @author mlaug
     * @since 05.01.2010
     */
    if ($("#yd-expand-great-head").length) {
        $("#yd-expand-great-body").hide();
        $("#yd-expand-great-head-minus").hide();
        $("#yd-expand-great-head").click(function(){
            $("#yd-expand-great-head-minus, #yd-expand-great-head-plus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

    /**
     * expand cross selling box for fruit orders
     * @author mlaug
     * @since 05.01.2010
     */
    if ($("#yd-expand-fruit-head").length) {
        $("#yd-expand-fruit-body").hide();
        $("#yd-expand-fruit-head-minus").hide();
        $("#yd-expand-fruit-head").click(function(){
            $("#yd-expand-fruit-head-minus, #yd-expand-fruit-head-plus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

});
/*! include 004-fidelity-points.js */
$(document).ready(function(){
    /**
     * expand help text for fidelity points in sidebar
     * @author mlaug
     * @since 05.01.2010
     */
    $('#how-fidelity-works').live('hover',function(){
        $('#how-fidelity-works-content').slideToggle('fast');
    });

});
/*! include 005-my-orders.js */
$(document).ready(function(){

    // do not expand favourits-sidebar
    if ($("#yd-expand-fav").length > 0) {
        $("#yd-expand-fav-minus").hide();
        $('#yd-expand-fav').hide();
        $("#yd-expand-fav-head").click(function() {
            $("#yd-expand-fav-plus, #yd-expand-fav-minus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

    // expand latest orders on start pages (sidebar)
    if ($("#expand-order").length > 0) {
        $("#expand-order").hide();
        $("#expand-order-minus").hide();
        $("#expand-order-head").click(function() {
            $("#expand-order-plus, #expand-order-minus").toggle();
            $(this).next().slideToggle("fast");
            return false;
        });
    }

});
/*! include 006-minamount.js */
$(document).ready(function(){
    /**
     * expand help text for minamount in sidebar
     * @author oknoblich
     * @since 25.02.2011
     */
    $('#minamount').live('hover', function(){
        $('#yd-minamount-toogle-out').fadeToggle();
        return false;
    });

});
/*! include 007-coupon.js */
$(document).ready(function(){

    $(".yd-coupon-explanation").live('click', function(){
        openDialog('/request/coupon', {
            minHeight:900,
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
        });
        _gaq.push(['_trackPageview', '/lightbox/coupon-explanation']);
        return false;
    });

});
/*! include 001-internal-links.js */
$(document).ready(function(){
    
    /**
     * @author vpriem
     */
    $("#yd-cms-content div.yd-cms-box-body").each(function(){
        var i = 0, prev;
        $("*", this).each(function(){
            if (this.tagName.substr(0, 1).toUpperCase() == "H") {
                i = 0;
            }
            else if (this.tagName.toUpperCase() == "P") {
                i++;
                if (i > 1) {
                    if (i == 2) {
                        $('<a href="#">&nbsp;Mehr&nbsp;&raquo;</a>')
                        .click(function(){
                            $(this).closest("p").nextUntil(":visible").show();
                            $(this).remove();
                            return false;
                        })
                        .appendTo(prev);
                    }
                    $(this).hide();
                }
                prev = this;
            }
        });
    });

    /**
     * @author vpriem
     */
    $("#yd-cms-sidebar ul").each(function(){
        var i = 0, ul = this;
        $("li", this).each(function(){
            if (i > 5) {
                $(this).hide();
            }
            i++;
        });
        if (i > 5) {
            $('<a href="#">&nbsp;Mehr&nbsp;&raquo;</a>')
            .click(function(){
                $("li:hidden", ul).show();
                $(this).remove();
                return false;
            })
            .appendTo(this)
            .wrap('<li></li>');
        }
    });

});
/*! include 000-base.js */
/**
 * resizes the height for orders_grid (user-backend)
 * @author Allen Frank <frank@lieferando.de>
 */
function resizeHeight(size, diff){
    group = $(".yd-profile-nav,.yd-profile-body");
    
    group.each(function() {
        thisHeight = $(this).height();
        log('height:'+thisHeight+' size:'+size+' diff:'+diff+'=>erg: '+size*diff + ' ergo: ' + (thisHeight>(size * diff)));
        $(this).height((thisHeight>(size * diff)) ? (thisHeight - (size * diff)) : (thisHeight + (size * diff)));
    });
}

/**
 * Show a certain amount of orders
 * @author allen frank
 * @since 11-11-11
 */
function resizeShownOrders(oldLimit){
    var start = parseInt(oldLimit);
    var end = parseInt($('#limit').val());
    var rowSize = $('#user_orders tr').height();
    var thisHeight = $(".yd-profile-nav,.yd-profile-body").height();
    
    $(".yd-profile-nav,.yd-profile-body").height(thisHeight + (rowSize * (end-start)));  
    (start<end) ? $('#user_orders tr').slice(start+2, end+2).show() : $('#user_orders tr').slice(end+2, start+2).hide();
}
var count=0;
$(document).ready(function() {    
    
 // plz autocomplete for billrequest page
$("#yd-billrequest-form-parent").children(":first").addClass("yd-plz-autocomplete-form").ydAutocomplete({mode: "plz"});

    /**
     * @author Daniel Hahn <hahn@lieferando.de>
     * @since 18.11.2011
     * orders grid colour storno orders
     */
    //color orders in grid
    if ( $('#user_orders').length > 0 ){
        $('.state').each(function(){
             if ( $(this).html().indexOf("Bestellung storniert") != -1 ){
                $(this).parent().css('background-color','#ffefef');
            }
        });
    }
    
    
    //take away pagination, because its to difficult to translate
    var lastTd= $('#user_orders table tr:last td');
    
    if(lastTd.prop('colspan') == 7) {
        lastTd.hide();
    }
    
    
    /**
     * show / hide full category name in menu on mouseover / -out
     * @todo: this can be done with toggle!
     * @author oknoblich
     * @since 10.10.2011
     */
    $('.mealname-lenght-toggle').live('mouseover', function(){
        $(this).children('.mealname-lenght-toggle-full').show();
    });
    $('.mealname-lenght-toggle').live('mouseout', function(){
        $(this).children('.mealname-lenght-toggle-full').hide();
    });
    
    
    /**
     * show plz request for the order now button if no address is saved
     * @author jens naie <naie@lieferando.de>
     * @since 20.08.2012
     */
    
    $('.yd-button-order-now').live('click', function() {
        if(!ydCustomer.hasLocations()) {
            openDialog('/request/postalrequest', {
            width: 600,
            height: 400,
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
        }, function() {
            if ($('.yd-csh-autocomplete-wrapper').length > 0) {
                $('yd-csh-autocomplete-form').cshSearchAutocomplete();
            } else {
                $('form[name=plzAutocomplete]').plzAutocomplete();
                $('#yd-plz-search').focus();
            }
        });

        return false;        
        }
    });
    
    
});
/*! include 001-login.js */
$(document).ready(function(){

    /**
     * @author vpriem
     * @since 09.02.2011
     */
    $('#yd-login-toggle-in').live('click', function(){
        $('#yd-login-toggle-out').fadeToggle();
        return false;
    });

    /**
     * @author vpriem
     * @since 23.08.2011
     */
    $('a.yd-log-out').live('click', function(){
        ydCustomer.init();
        ydState.init();
    });
    
    /**
     * @author mlaug
     */
    $('#login').attr('action', $('#login').attr('action') + '?redirect_url=' + encodeURI(document.location.href));
    $('#yd-logout').attr('href', $('#yd-logout').attr('href') + '?redirect_url=' + encodeURI(document.location.href));
        
    /**
     * alter all links if customer is logged in
     * @author mlaug
     */
    if ( ydState.maybeLoggedIn() ){
        $('a').each(function(){
            if ( this.href == 'http://'+document.location.hostname+'/' ){
                if ( ydState.getKind() == 'comp' ){
                    log('changing link / => /order_company/start, since the customer is logged in');
                    this.href = '/order_company/start';
                }
                else{
                    log('changing link / => /order_private/start, since the customer is logged in');
                    this.href = '/order_private/start';
                }
            }
        });
    }
});
/*! include 002-address.js */
function createLocation(){
    $('#dialog-locations').dialog({
        width: 600,
        height: 380,
        modal: true,
        close: function(e, ui) {
            $(ui).dialog('destroy');
        },
        open: function() {
            $('.yd-new-address-form').find("input, textarea").each(function() {
                $(this).removeClass('yd-form-invalid');
            });
            $('.formError').hide();
        }
    });
}

$(document).ready(function(){
    
    $('a.yd-form-toggle').live('click',function(){      
        var $this = $(this);
        var $form = $this.closest('form');
        $form.removeClass('warning'); 
        $this.hide();
        $this.next().show();
        
    });
    
    /**
     * Submit for Location Form
     * @author Daniel Hahn <hahn@lieferando.de>
     *
     */
    $('a.yd-edit-location, a.yd-create-location').live('click',function(){
        var $this = $(this);
        var $form = $this.closest('form');
        
        log('submitting location form');
        
        $form.ajaxSubmit({
            dataType: "html",
            beforeSubmit: function(){ 
                $this.hide();  
                $this.prev().prev().show();
            },
            success : function(responseText){
                if ( responseText.length ){
                    
                    //append created location
                    $('.yd-profile-table')
                    .append($(responseText).formToggle());                    
                    $('#dialog-locations').dialog('close');
                    $($form).find("input, textarea").each(function(i ,elem) {
                        $(elem).removeClass('yd-form-invalid')
                        .removeClass('ui-autocomplete-loading');
                    });
                    ydCustomer.setHasLocations(1);
                }
                else{
                    $form.removeClass('warning').formToggle();
                   
                }
                $this.prev().show().prev().hide();
                $('.yd-create-location').show();
            },
            error : function(data){
                               
                var json = $.parseJSON(data.responseText);
                           
                var elements = Array();
                
                if($form.hasClass('yd-new-address-form')) {
                    $('.formError').hide();
                    $($form).find("input, textarea").each(function(i ,elem) {
                        $(elem).removeClass('yd-form-invalid');
                    });
                    $.each(json, function(i, elem) {                                          
                        elements.push($($form).find("input[name='"+i +"']" +", textarea[name='" + i + "']"));                  
                        $.each(elements, function(j, item) {                                                      
                            if($(item).prop('name') == i && !$(item).is(':hidden') && $(item).prop('name') != 'plz') {
                                $(item).addClass('yd-form-invalid'); 
                                $(item).next().children().first().text(elem);
                                $(item).next().show();
                            }
                        
                        });
                        
                        if(i == 'cityId') {
                            var plzElem = $($form).find("input[name='plz']");                           
                            $(plzElem).addClass('yd-form-invalid'); 
                            $(plzElem).next().children().first().text(elem);
                            $(plzElem).next().show();
                        }
                        
                    });
                }
                $form.addClass('warning');
                
                //log(elements);
                $('.yd-create-location').show();                
                $form.find('.td-check').show();
                $form.find('.td-edit').hide();
                $form.find('.yd-please-wait').hide();
            },
            clearForm: $this.hasClass('yd-create-location')
        });
    });
    
    
    $(".formError").live("click",function(){	 // REMOVE BOX ON CLICK
        $(".formError").fadeOut(150,function(){
            $(".formError").hide();
        });
    });
    
    /**
     *  popup fÃ¼r location create
     *  @author Daniel Hahn <hahn@lieferando.de>
     *  @since 24.11.2011
     */
    $('#yd-user-location-create').live('click',function() {
        createLocation();
    });
    
     
    /**
     * mark a location as primary address
     * @author mlaug
     * @since 10.11.2011
     */
    $('a.yd-heart-location').live('click', function(){
        var id = this.id.split('-')[3];
        var $this = $(this);
        var toggle = $this.hasClass('active') ? 0 : 1;
        $('.yd-heart-location').not($this).removeClass('active');
        $this.toggleClass('active');
        $.ajax({
            url: '/request_user_location/primary/id/' + id + '/toggle/' + toggle,
            error : function(){
            //mh
            }
        });
    });

    /**
     * Add company address
     * @author vpriem
     * @since 09.02.2011
     */
    $('a.yd-add-caddress').live('click', function(){
        location.href = '/company/address';
        return false;
    });

    /**
     * Edit company address
     * @author vpriem
     * @since 09.02.2011
     */
    $('.yd-link-edit-caddress').live('click', function(){
        var id = this.id.split('-')[1];
        location.href = "/company/address/id/" + id;
        return false;
    });
    
    /**
     * hightlight based on dash
     * @author mlaug
     * @since 17.11.2011
     */
    if ( document.location.hash && $('.yd-profile').length > 0){
        $(document.location.hash).closest('form').find('.td').css('background-color','#ffc');
    }

    /**
     * automatically open "new adress" lightbox
     *
     * @author mlaug
     * @since 01.12.2011
     */
    if ( document.location.hash && document.location.hash == '#new_address' && $('.yd-profile').length > 0){
        createLocation();
    }

});
/*! include 003-passwd.js */
$(document).ready(function(){

    /**
     * Forgott passwort
     * @author vpriem
     * @since 09.02.2011
     */
    $(".yd-forgotten-pass").live('click', function(){
        openDialog('/request/newpass', {
            width: 600,
            height: 400,
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
        }, function(){
            $("form", this)
            .ajaxForm({
                dataType: "json",
                success: function (json) {
                    if (json.success) {
                        notification("success", json.success);
                        closeDialog();
                    }
                    else if (json.error) {
                        notification("error", json.error);
                    }
                }
            })
            .find(":text:first").focus();
        });

        return false;
    });

});
/*! include 004-favourite.js */
$(document).ready(function(){
    
    
      
    /**
     * submit form to select a service from the list
     * @author Daniel Hahn <hahn@lieferando.de>
     * @since 16.11.2011
     */
    $('.yd-service-favourites').live('click', function(){
        var $form = $("form", this);
        if (!$form.length) {
            $form = $(this).closest('form');
        }
        
        var service = $(this).parents('div.yd-service-v2')[0].id;
        var id = service.split('-')[2];
        
        var cityId = serviceCitys[id];
        
        ydState.setCity(cityId);
        log("Setting cityId to: " + cityId );
        
        $form.submit();
    });
    
    
    
    
    /**
     * Add favourite
     * @author vpriem 
     * @since 14.02.2010
     * @modified afrank 11.11.11
     */
    $('a.yd-add-fav').live('click', function(){
        var hash = this.id.split('-')[3];
        $.ajax({
            url: '/request_user/addfavourite/id/' + hash,
            dataType: "json",
            success: function (json) {
                if (json.success) {
                    notification("success", json.success);
                    $('#yd-orders-fav-' + hash).removeClass('yd-add-fav');
                    $('#yd-orders-fav-' + hash).addClass('yd-del-fav');
                    $('#yd-orders-fav-' + hash).addClass('inactive');
                    $('#yd-orders-fav-' + hash).prop('title', $.lang('favourites-delete-tooltip'));                  
                    $('#yd-orders-fav-' + hash).simpletooltip();
                    closeDialog();
                }
                else if (json.error) {
                    notification("error", json.error);
                }
            }
        });
        return false;
    });     
    
    
    /**
     * Delete favourite
     * @author Daniel Hahn <hahn@lieferando.de> 
     * @since 18.11.2011
     */
    $('a.yd-del-fav').live('click', function(){
        var hash = this.id.split('-')[3];
        var confirmText = $.lang("favourites-delete-text");
        if(confirm(confirmText)) {
                                          
            //   return false;
            $.ajax({
                url: '/request_user/delfavourite/id/' + hash,                
                dataType: "json",
                success: function (json) {
                    if (json.success) {
                        notification("success", json.success);
                        $('#yd-orders-fav-' + hash).removeClass('yd-del-fav');
                        $('#yd-orders-fav-' + hash).removeClass('inactive');
                        $('#yd-orders-fav-' + hash).addClass('yd-add-fav');
                        $('#yd-orders-fav-' + hash).prop('title', $.lang('favourites-add-tooltip'));                  
                        $('#yd-orders-fav-' + hash).simpletooltip();
                        $('#limit').focus();
                         
                        closeDialog();
                    }
                    else if (json.error) {
                        notification("error", json.error);
                    }
                }
            });
        }
        
        return false;
    });  
       
    /**
     * Delete all favourites for one restaurant
     * use click because template is reused and there are to many events on it
     * @author Daniel Hahn <hahn@lieferando.de> 
     * @since 22.11.2011
     */   
    $('.yd-delete-favourite').click( function(){
        
        var id = this.id.split('-')[3];
        
        if(confirm($.lang('confirm-favorite-delete'))) {
        
            $.ajax({
                url: '/request_user/delfavourite/restId/' + id,                
                dataType: "json",
                success: function (json) {
                    if (json.success) {
                        $('#yd-service-' + id + '-rest').fadeOut();
                        notification("success", json.success);                                                
                        $('#yd-favourite-count').text( $('#yd-favourite-count').text()- 1);
                    }
                    else if (json.error) {
                        notification("error", json.error);
                    }
                }
            });
        }
        
        return false;
    });
       
       
});
/*! include 005-repeat.js */
var ydUserOrderRepeat = function() {
    
    var $this = this;
    
    var $json = null;
    
    this.init = function() {
     
        $('body').on('click', "a.yd-link-repeat-fav, a.yd-link-repeat-rest, a.yd-link-repeat-lastOrder, div.yd-service-select-lastorder", $this.load );
                     
    };
    
    this.load = function(elem) {       
        log('hier');
        $elem = $(this);
        var hash = this.id.split('-')[3];
        if(this.id.indexOf('yd-repeat-lastorder') >= 0 && $('.yd-repeat-loading').length > 0 ){
            $('.yd-link-repeat-lastOrder').hide();
            $('.yd-repeat-loading').show();
        } else if ( $('.yd-repeat-loading').length > 0 ){
            log($elem);
            $elem.hide();
            $('.yd-repeat-loading').show();
        }
        
        var location = 0;
        if($('span.yd-adress.active').length > 0){
            location = $('span.yd-adress.active').attr('id').split('-')[2];
        }
        
        $.ajax({
            url: '/request_order/repeat',
            data: {
                hash: hash,
                location: location
            },
            dataType: 'json',
            success: function (json) {
                                
                if(json.result !== undefined && json.result == false){
                    notification('error', json.msg);
                    $elem.hide();
                    $('.yd-repeat-loading').hide();
                    return false;
                }                                 
                var url = '/order_private/finish';
                if (json.kind == 'comp'){
                    $json = json;
                    $this.showLocationBox();
                   
                }else{
                    post_to_url(url, json);
                }           
            }
        });
        
        return false;
    };
    
    
    this.showLocationBox= function() {
        
        openDialog("/request_user_location/get", {
            width: 800,
            height: 380,
            modal: true,
            close: function(e, ui) {
                $(ui).dialog('destroy');
            }
           
        }, function() {
            $("#yd-repeat-order-company").on('click', $this.submitCompanyOrder);
        });
        
    };
    
    this.submitCompanyOrder = function() {
        url = '/order_company/finish';
        $('#yd-repeat-order-errorCity').hide();
        if($('.yd-adress.active').length > 0) {
            var locationId  = $('.yd-adress.active')[0].id.split('-')[2];
            var cityId = $('.yd-adress.active')[0].id.split('-')[3];
            if(cityId == $json.cityId) {
                if (typeof ydState !== "undefined") {
                    if (locationId !== undefined) {
                        ydState.setLocation(locationId);
                    }
                    if (cityId !== undefined) {
                        ydState.setCity(cityId);
                    }
                }
            
                $json.street= null;
                $json.hausnr = null;
                $json.plz = null;
                $json.comment = null;
                $json.etage = null;            
                post_to_url(url, $json);
            }else {
                $('#yd-repeat-order-errorCity').show();
            }
            
        }
        
        
    //   post_to_url(url, $json);
    };
    
};

$(document).ready(function(){
    
    var userRepeat = new ydUserOrderRepeat();
    
    userRepeat.init();
    
    
/**
     * Repeat order
     * get json of information from ajax and post this to the finish page
     * @author mlaug
     * @since 18.08.2011
     */
//    $("a.yd-link-repeat-fav, a.yd-link-repeat-rest, a.yd-link-repeat-lastOrder").live('click', function(){
//        /**
//         * @todo use hash instead of id
//         */
//        
//        $this = $(this);
//        var hash = this.id.split('-')[3];
//        if ( $('.yd-repeat-loading').length > 0 ){
//            $this.hide();
//            $('.yd-repeat-loading').show();
//        }
//        
//        var location = 0;
//        if($('span.yd-adress.active').length > 0){
//            location = $('span.yd-adress.active').attr('id').split('-')[2];
//        }
//        
//        $.ajax({
//            url: '/request_order/repeat',
//            data: {
//                hash: hash,
//                location: location
//            },
//            dataType: 'json',
//            success: function (json) {
//                if(json.result !== undefined && json.result == false){
//                    notification('error', json.msg);
//                    $this.hide();
//                    $('.yd-repeat-loading').hide();
//                    return false;
//                }
//                var url = '/order_private/finish';
//                if (json.kind == 'comp'){
//                    url = '/order_company/finish';
//                }
//            //   post_to_url(url, json);
//            }
//        });
//        
//        return false;
//    });
//    
});
/*! include 006-rating.js */
$(document).ready(function(){
    
    /**
     * @author Daniel Hahn <hahn@lieferando.de>
     * @since 20.02.2012
     */
    if ($('#yd-rate-form').length) {
        //check if deleted
        if ($('#yd-rating-deleted').length) {
            openDialog("/request_user/ratingdeleted", {
                modal :true, 
                width: 400,
                height: 380,
                close: function(e, ui) {
                    $(ui).dialog('destroy');
                },
                beforeClose: function (event, ui) {
                    if($('.yd-profile-not-logged-in').length > 0) {
                        window.location.href = "/";
                    } else {
                        window.location.href = "/user/ratings";
                    }
                    return false;
                }
            });
        } else {
            $('a.yd-rate-advise').live('click', function(){        
                $('a.yd-rate-advise').removeClass('active');
          
                $(this).addClass('active');
                var id = this.id.split('-')[2];         
                if(id == 'yes') {
                    $('#advise').prop('value', 1);
                }else {
                    $('#advise').prop('value', 0);
                }
          
            });
            //quality
            $('img.rate-1').hover(function(){
                var q = this.id.split('-')[3];
                $('img.rate-1').each(function(){
                    if (this.id.split('-')[3] <= q) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-hover.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-empty.png';
                    }
                });
      
                return false;
            }, function() {
                var q = $('#rate1').val();         
                $('img.rate-1').each(function(){
                    if (this.id.split('-')[3] <= q) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-full.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-empty.png';
                    }
                });
                $('#rate1').prop('value',q);
                return false;
            });
        
            $('img.rate-1').live('click', function(){
                var q = this.id.split('-')[3];
          
                $('#rate1').prop('value',q);
                return false;
            });
        
            //delivery
        
            $('img.rate-2').hover(function(){
                var q = this.id.split('-')[3];
                $('img.rate-2').each(function(){
                    if (this.id.split('-')[3] <= q) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-hover.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-empty.png';
                    }
                });
      
                return false;
            }, function() {
                var q = $('#rate2').val();    
                $('img.rate-2').each(function(){
                    if (this.id.split('-')[3] <= q) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-full.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-big-empty.png';
                    }
                });
                $('#rate2').prop('value',q);
                return false;
            });
        
            $('img.rate-2').live('click', function(){
                var q = this.id.split('-')[3];
          
                $('#rate2').prop('value',q);
                return false;
            });
        
            //meals  
            $('img.yd-rate-meal').hover(function(){
                var mealId = this.id.split('-')[2];
                var star =  this.id.split('-')[3];
                $('img.rate-meal-id-' + mealId).each(function(){
                    if (this.id.split('-')[3] <= star ) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-small-hover.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-small-empty.png';
                    }
                });
            },
            function(){
                var mealId = this.id.split('-')[2];
                var star = $('#meal-rate-'+mealId).val();
                $('img.rate-meal-id-' + mealId).each(function(){
                    if (this.id.split('-')[3] <= star ) {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-small-full.png';
                    }
                    else {
                        this.src = 'http://cdn.yourdelivery.de/images/yd-profile/star-small-empty.png';
                    }
                });
            });
      
            $('img.yd-rate-meal').live('click', function(){
                var mealId = this.id.split('-')[2];
                var star =  this.id.split('-')[3];

                $('#meal-rate-'+mealId).prop('value',star);
         
            });
        
        }
                        
    }

});
/*! include 007-account.js */
$(document).ready(function(){
    
    /**
     * validate the settings form of a customer
     * @author vpriem
     * @since 28.11.2011
     * @view /user/settings /user/index
     */
    $(".yd-profile-picture").each(function(){
        var container = this;
        $(".window", container).click(function(){
            $(".upload", container).click();
        });
    });

    
    if (!$('#yd-user-settings-form').length) {
        return;
    }
    
    /**
     * validate the settings form of a customer
     * @author mlaug
     * @since 10.11.2011
     * @view /user/settings
     */
    $('#yd-user-settings-form').validationEngine({
        promptPosition: "topRight",
        validationEventTriggers: "blur",
        success: false,
        scroll: false,
        failure : function(){
            $('span.yd-user-form-error').show();
        }
    });
   
   /**
    * @author Daniel Hahn <hahn@lieferando.de>
    * @since 25.11.2011
    */
    $('#yd-user-settings-form input[name="newsletter"]').change(function(){
        if ( !$(this).is(':checked') ){
            var choice = confirm($.lang('confirm-newsletter-delete'));
            if ( !choice ){
                $(this).prop('checked',true);
                return false;
            }                        
        }
        
        var result = $(this).is(':checked') ? "1": "0";
        
        $.ajax({
            url: '/request_user/newsletter/newsletter/' + result ,                
            success: function (data) {
                
                notification("success",data ,false);
            }
        });
    });
   
   /**
    * @author Jens Naie <name@lieferando.de>
    * @since 12.07.2012
    */
    $('#yd-user-settings-form input[name="facebookId"]').change(function(){
        if ( !$(this).is(':checked') ){
            var choice = confirm($.lang('confirm-facebook-id-delete'));
            if ( !choice ){
                $(this).prop('checked',true);
            } else {
                $('#yd-user-settings-form').submit();
            }
        }
    });
   
   /**
    * @author Jens Naie <name@lieferando.de>
    * @since 12.07.2012
    */
    $('#yd-user-settings-form input[name="facebookPost"]').change(function(){
        if ( !$(this).is(':checked') ){
            var choice = confirm($.lang('confirm-facebook-post-delete'));
            if ( !choice ){
                $(this).prop('checked',true);
            } else {
                $('#yd-user-settings-form').submit();
            }
        } else {
            $('#yd-user-settings-form').submit();
        }
    });
   
   
});
/*! include 008-order-search.js */
$(document).ready(function(){
    
    /**
     * @author Daniel Hahn <hahn@lieferando.de> 
     * @since 16.11.2011
     * @link /user/orders.htm
     */
    var searchInput = $('#yd-order-search');
    
    if(typeof searchInput == "undefined") {
        return;
    }
    
    
   searchInput.live('keypress focusout', function() {
             
         var search = $('#yd-order-search').val();
         
         if(search.length < 3) {
             
           $('tr').each(function(k, val ){               
                $(val).show();                                             
            });             
             return;
         }      
        var foundRows = [];
    
        $('td.searchable').each(function(k,val){
            var text = $(val).text();        
        
            if(text.toLowerCase().indexOf(search.toLowerCase()) != -1) {
               
                foundRows.push($(val).parent('tr'));
            }                                  
        });
        $('tr').each(function(k, val ){
            if(k > 1) {
                 $(val).hide();        
            }                                                
        });   
        $(foundRows).each(function(k, val ){        
            $(val).show();                                             
        });           
    });
});